<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Springboot 配置使用 Kafka</title>
      <link href="/2022/11/01/Springboot%20%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8%20Kafka/"/>
      <url>/2022/11/01/Springboot%20%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8%20Kafka/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>不多BB讲原理，只教你怎么用，看了全网没有比我更详细的了，yml 配置，Config 工厂代码配置都有，batch-size、acks、offset、auto-commit、trusted-packages、poll-timeout、linger 应有尽有，批量消费、开启事务、定义批量消费数量、延时发送、失败重试、异常处理你还想要什么</p><blockquote><p>As we all know，当今世界最流行的消息中间件有 RabbitMq、RocketMq、Kafka，其中，应用最广泛的是 <code>RabbitMq</code>，<code>RocketMq</code> 是阿里巴巴的产品，性能超过 RabbitMq，已经经受了多年的双11考验，但是怕哪天阿里不维护了，用的人不多，<code>Kafka</code> 是吞吐量最大的一个，远超前两个，支持事务、可保证消息的不丢失（网上说的事务和消息可靠性不支持是说的旧版，2以后就开始支持了），对比来讲，Kafka相对于前两个，只有一个劣势，不太支持延时队列，其他方面都要优于它们（个人使用体验，勿喷）。</p></blockquote><hr><h1 id="一、Linux-安装-Kafka"><a href="#一、Linux-安装-Kafka" class="headerlink" title="一、Linux 安装 Kafka"></a>一、Linux 安装 Kafka</h1><p>我的另一篇文章：<a href="https://blog.csdn.net/qq_48922459/article/details/127633676?spm=1001.2014.3001.5502">Debian（Linux通用）安装 Kafka 并配置远程访问</a></p><hr><h1 id="二、构建项目"><a href="#二、构建项目" class="headerlink" title="二、构建项目"></a>二、构建项目</h1><blockquote><p>多模块项目构建，这里不讲，如果你不会，就新建两个普通的web项目 <code>KafkaConsumer</code>和 <code>KafkaProvider</code>就行</p></blockquote><p><img src="https://img-blog.csdnimg.cn/6eaef6293f32469fbe32ff95377e45a6.png" alt="在这里插入图片描述"></p><hr><h1 id="三、引入依赖"><a href="#三、引入依赖" class="headerlink" title="三、引入依赖"></a>三、引入依赖</h1><blockquote><p>新建一个标准的spring-web项目，额外依赖真的只需要这一个，网上说的 kafka-client 不是springboot 的东西，那就是个原生的 kafka 客户端， kafka-test也不需要，这个是用代码控制broker的东西</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.kafka<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-kafka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="四、配置文件"><a href="#四、配置文件" class="headerlink" title="四、配置文件"></a>四、配置文件</h1><blockquote><p>这两种方式的代码会互相覆盖，而且有些配置只能用 <code>config</code> 方式配置，建议像我一样，两种都写，<code>config</code>里面的配置参数从 <code>yml</code> 中获取，就可以不影响使用 Nacos 来在线修改 kafka 的配置了</p></blockquote><h2 id="生产者"><a href="#生产者" class="headerlink" title="生产者"></a>生产者</h2><p><code>配置的意思详解在注释里面都有哦</code></p><h3 id="yml-方式"><a href="#yml-方式" class="headerlink" title="yml 方式"></a>yml 方式</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">kafka:</span></span><br><span class="line">    <span class="attr">producer:</span></span><br><span class="line">      <span class="comment"># Kafka服务器</span></span><br><span class="line">      <span class="attr">bootstrap-servers:</span> <span class="number">175.24</span><span class="number">.228</span><span class="number">.202</span><span class="string">:9092</span></span><br><span class="line">      <span class="comment"># 开启事务，必须在开启了事务的方法中发送，否则报错</span></span><br><span class="line">      <span class="attr">transaction-id-prefix:</span> <span class="string">kafkaTx-</span></span><br><span class="line">      <span class="comment"># 发生错误后，消息重发的次数，开启事务必须设置大于0。</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">3</span></span><br><span class="line">      <span class="comment"># acks=0 ： 生产者在成功写入消息之前不会等待任何来自服务器的响应。</span></span><br><span class="line">      <span class="comment"># acks=1 ： 只要集群的首领节点收到消息，生产者就会收到一个来自服务器成功响应。</span></span><br><span class="line">      <span class="comment"># acks=all ：只有当所有参与复制的节点全部收到消息时，生产者才会收到一个来自服务器的成功响应。</span></span><br><span class="line">      <span class="comment"># 开启事务时，必须设置为all</span></span><br><span class="line">      <span class="attr">acks:</span> <span class="string">all</span></span><br><span class="line">      <span class="comment"># 当有多个消息需要被发送到同一个分区时，生产者会把它们放在同一个批次里。该参数指定了一个批次可以使用的内存大小，按照字节数计算。</span></span><br><span class="line">      <span class="attr">batch-size:</span> <span class="number">16384</span></span><br><span class="line">      <span class="comment"># 生产者内存缓冲区的大小。</span></span><br><span class="line">      <span class="attr">buffer-memory:</span> <span class="number">1024000</span></span><br><span class="line">      <span class="comment"># 键的序列化方式</span></span><br><span class="line">      <span class="attr">key-serializer:</span> <span class="string">org.springframework.kafka.support.serializer.JsonSerializer</span></span><br><span class="line">      <span class="comment"># 值的序列化方式（建议使用Json，这种序列化方式可以无需额外配置传输实体类）</span></span><br><span class="line">      <span class="attr">value-serializer:</span> <span class="string">org.springframework.kafka.support.serializer.JsonSerializer</span></span><br></pre></td></tr></table></figure><h3 id="Config-方式"><a href="#Config-方式" class="headerlink" title="Config 方式"></a>Config 方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.serialization.StringSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.DefaultKafkaProducerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.KafkaTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.ProducerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.support.serializer.JsonSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.transaction.KafkaTransactionManager;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/31 18:05</span></span><br><span class="line"><span class="comment"> * kafka配置，也可以写在yml，这个文件会覆盖yml</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KafkaProviderConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.producer.bootstrap-servers&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bootstrapServers;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.producer.transaction-id-prefix&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String transactionIdPrefix;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.producer.acks&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String acks;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.producer.retries&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String retries;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.producer.batch-size&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String batchSize;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.producer.buffer-memory&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bufferMemory;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">producerConfigs</span><span class="params">()</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; props = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">        <span class="comment">//acks=0 ： 生产者在成功写入消息之前不会等待任何来自服务器的响应。</span></span><br><span class="line">        <span class="comment">//acks=1 ： 只要集群的首领节点收到消息，生产者就会收到一个来自服务器成功响应。</span></span><br><span class="line">        <span class="comment">//acks=all ：只有当所有参与复制的节点全部收到消息时，生产者才会收到一个来自服务器的成功响应。</span></span><br><span class="line">        <span class="comment">//开启事务必须设为all</span></span><br><span class="line">        props.put(ProducerConfig.ACKS_CONFIG, acks);</span><br><span class="line">        <span class="comment">//发生错误后，消息重发的次数，开启事务必须大于0</span></span><br><span class="line">        props.put(ProducerConfig.RETRIES_CONFIG, retries);</span><br><span class="line">        <span class="comment">//当多个消息发送到相同分区时,生产者会将消息打包到一起,以减少请求交互. 而不是一条条发送</span></span><br><span class="line">        <span class="comment">//批次的大小可以通过batch.size 参数设置.默认是16KB</span></span><br><span class="line">        <span class="comment">//较小的批次大小有可能降低吞吐量（批次大小为0则完全禁用批处理）。</span></span><br><span class="line">        <span class="comment">//比如说，kafka里的消息5秒钟Batch才凑满了16KB，才能发送出去。那这些消息的延迟就是5秒钟</span></span><br><span class="line">        <span class="comment">//实测batchSize这个参数没有用</span></span><br><span class="line">        props.put(ProducerConfig.BATCH_SIZE_CONFIG, batchSize);</span><br><span class="line">        <span class="comment">//有的时刻消息比较少,过了很久,比如5min也没有凑够16KB,这样延时就很大,所以需要一个参数. 再设置一个时间,到了这个时间,</span></span><br><span class="line">        <span class="comment">//即使数据没达到16KB,也将这个批次发送出去</span></span><br><span class="line">        props.put(ProducerConfig.LINGER_MS_CONFIG, <span class="string">&quot;5000&quot;</span>);</span><br><span class="line">        <span class="comment">//生产者内存缓冲区的大小</span></span><br><span class="line">        props.put(ProducerConfig.BUFFER_MEMORY_CONFIG, bufferMemory);</span><br><span class="line">        <span class="comment">//反序列化，和生产者的序列化方式对应</span></span><br><span class="line">        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);</span><br><span class="line">        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);</span><br><span class="line">        <span class="keyword">return</span> props;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ProducerFactory&lt;Object, Object&gt; <span class="title function_">producerFactory</span><span class="params">()</span> &#123;</span><br><span class="line">        DefaultKafkaProducerFactory&lt;Object, Object&gt; factory = <span class="keyword">new</span> <span class="title class_">DefaultKafkaProducerFactory</span>&lt;&gt;(producerConfigs());</span><br><span class="line">        <span class="comment">//开启事务，会导致 LINGER_MS_CONFIG 配置失效</span></span><br><span class="line">        factory.setTransactionIdPrefix(transactionIdPrefix);</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> KafkaTransactionManager&lt;Object, Object&gt; <span class="title function_">kafkaTransactionManager</span><span class="params">(ProducerFactory&lt;Object, Object&gt; producerFactory)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">KafkaTransactionManager</span>&lt;&gt;(producerFactory);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> KafkaTemplate&lt;Object, Object&gt; <span class="title function_">kafkaTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">KafkaTemplate</span>&lt;&gt;(producerFactory());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="消费者"><a href="#消费者" class="headerlink" title="消费者"></a>消费者</h2><h3 id="yml-方式-1"><a href="#yml-方式-1" class="headerlink" title="yml 方式"></a>yml 方式</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">kafka:</span></span><br><span class="line">    <span class="attr">consumer:</span></span><br><span class="line">      <span class="comment"># Kafka服务器</span></span><br><span class="line">      <span class="attr">bootstrap-servers:</span> <span class="number">175.24</span><span class="number">.228</span><span class="number">.202</span><span class="string">:9092</span></span><br><span class="line">      <span class="attr">group-id:</span> <span class="string">firstGroup</span></span><br><span class="line">      <span class="comment"># 自动提交的时间间隔 在spring boot 2.X 版本中这里采用的是值的类型为Duration 需要符合特定的格式，如1S,1M,2H,5D</span></span><br><span class="line">      <span class="comment">#auto-commit-interval: 2s</span></span><br><span class="line">      <span class="comment"># 该属性指定了消费者在读取一个没有偏移量的分区或者偏移量无效的情况下该作何处理：</span></span><br><span class="line">      <span class="comment"># earliest：当各分区下有已提交的offset时，从提交的offset开始消费；无提交的offset时，从头开始消费分区的记录</span></span><br><span class="line">      <span class="comment"># latest：当各分区下有已提交的offset时，从提交的offset开始消费；无提交的offset时，消费新产生的该分区下的数据（在消费者启动之后生成的记录）</span></span><br><span class="line">      <span class="comment"># none：当各分区都存在已提交的offset时，从提交的offset开始消费；只要有一个分区不存在已提交的offset，则抛出异常</span></span><br><span class="line">      <span class="attr">auto-offset-reset:</span> <span class="string">latest</span></span><br><span class="line">      <span class="comment"># 是否自动提交偏移量，默认值是true，为了避免出现重复数据和数据丢失，可以把它设置为false，然后手动提交偏移量</span></span><br><span class="line">      <span class="attr">enable-auto-commit:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment"># 键的反序列化方式</span></span><br><span class="line">      <span class="comment">#key-deserializer: org.apache.kafka.common.serialization.StringDeserializer</span></span><br><span class="line">      <span class="attr">key-deserializer:</span> <span class="string">org.springframework.kafka.support.serializer.JsonDeserializer</span></span><br><span class="line">      <span class="comment"># 值的反序列化方式（建议使用Json，这种序列化方式可以无需额外配置传输实体类）</span></span><br><span class="line">      <span class="attr">value-deserializer:</span> <span class="string">org.springframework.kafka.support.serializer.JsonDeserializer</span></span><br><span class="line">      <span class="comment"># 配置消费者的 Json 反序列化的可信赖包，反序列化实体类需要</span></span><br><span class="line">      <span class="attr">properties:</span></span><br><span class="line">        <span class="attr">spring:</span></span><br><span class="line">          <span class="attr">json:</span></span><br><span class="line">            <span class="attr">trusted:</span></span><br><span class="line">              <span class="attr">packages:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">      <span class="comment"># 这个参数定义了poll方法最多可以拉取多少条消息，默认值为500。如果在拉取消息的时候新消息不足500条，那有多少返回多少；如果超过500条，每次只返回500。</span></span><br><span class="line">      <span class="comment"># 这个默认值在有些场景下太大，有些场景很难保证能够在5min内处理完500条消息，</span></span><br><span class="line">      <span class="comment"># 如果消费者无法在5分钟内处理完500条消息的话就会触发reBalance,</span></span><br><span class="line">      <span class="comment"># 然后这批消息会被分配到另一个消费者中，还是会处理不完，这样这批消息就永远也处理不完。</span></span><br><span class="line">      <span class="comment"># 要避免出现上述问题，提前评估好处理一条消息最长需要多少时间，然后覆盖默认的max.poll.records参数</span></span><br><span class="line">      <span class="comment"># 注：需要开启BatchListener批量监听才会生效，如果不开启BatchListener则不会出现reBalance情况</span></span><br><span class="line">      <span class="attr">max-poll-records:</span> <span class="number">3</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="comment"># 两次poll之间的最大间隔，默认值为5分钟。如果超过这个间隔会触发reBalance</span></span><br><span class="line">      <span class="attr">max:</span></span><br><span class="line">        <span class="attr">poll:</span></span><br><span class="line">          <span class="attr">interval:</span></span><br><span class="line">            <span class="attr">ms:</span> <span class="number">600000</span></span><br><span class="line">      <span class="comment"># 当broker多久没有收到consumer的心跳请求后就触发reBalance，默认值是10s</span></span><br><span class="line">      <span class="attr">session:</span></span><br><span class="line">        <span class="attr">timeout:</span></span><br><span class="line">          <span class="attr">ms:</span> <span class="number">10000</span></span><br><span class="line">    <span class="attr">listener:</span></span><br><span class="line">      <span class="comment"># 在侦听器容器中运行的线程数，一般设置为 机器数*分区数</span></span><br><span class="line">      <span class="attr">concurrency:</span> <span class="number">4</span></span><br><span class="line">      <span class="comment"># 自动提交关闭，需要设置手动消息确认</span></span><br><span class="line">      <span class="attr">ack-mode:</span> <span class="string">manual_immediate</span></span><br><span class="line">      <span class="comment"># 消费监听接口监听的主题不存在时，默认会报错，所以设置为false忽略错误</span></span><br><span class="line">      <span class="attr">missing-topics-fatal:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment"># 两次poll之间的最大间隔，默认值为5分钟。如果超过这个间隔会触发reBalance</span></span><br><span class="line">      <span class="attr">poll-timeout:</span> <span class="number">600000</span></span><br></pre></td></tr></table></figure><h3 id="Config-方式-1"><a href="#Config-方式-1" class="headerlink" title="Config 方式"></a>Config 方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerConfig;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.config.ConcurrentKafkaListenerContainerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.config.KafkaListenerContainerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.ConsumerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.DefaultKafkaConsumerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.listener.ConcurrentMessageListenerContainer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.listener.ContainerProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.support.serializer.JsonDeserializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/31 18:05</span></span><br><span class="line"><span class="comment"> * kafka配置，也可以写在yml，这个文件会覆盖yml</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KafkaConsumerConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.consumer.bootstrap-servers&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bootstrapServers;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.consumer.group-id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String groupId;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.consumer.enable-auto-commit&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> enableAutoCommit;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.properties.session.timeout.ms&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sessionTimeout;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.properties.max.poll.interval.ms&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String maxPollIntervalTime;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.consumer.max-poll-records&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String maxPollRecords;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.consumer.auto-offset-reset&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String autoOffsetReset;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.listener.concurrency&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer concurrency;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.listener.missing-topics-fatal&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> missingTopicsFatal;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.kafka.listener.poll-timeout&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> pollTimeout;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">consumerConfigs</span><span class="params">()</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; propsMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">        propsMap.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">        propsMap.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);</span><br><span class="line">        <span class="comment">//是否自动提交偏移量，默认值是true，为了避免出现重复数据和数据丢失，可以把它设置为false，然后手动提交偏移量</span></span><br><span class="line">        propsMap.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, enableAutoCommit);</span><br><span class="line">        <span class="comment">//自动提交的时间间隔，自动提交开启时生效</span></span><br><span class="line">        propsMap.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG, <span class="string">&quot;2000&quot;</span>);</span><br><span class="line">        <span class="comment">//该属性指定了消费者在读取一个没有偏移量的分区或者偏移量无效的情况下该作何处理：</span></span><br><span class="line">        <span class="comment">//earliest：当各分区下有已提交的offset时，从提交的offset开始消费；无提交的offset时，从头开始消费分区的记录</span></span><br><span class="line">        <span class="comment">//latest：当各分区下有已提交的offset时，从提交的offset开始消费；无提交的offset时，消费新产生的该分区下的数据（在消费者启动之后生成的记录）</span></span><br><span class="line">        <span class="comment">//none：当各分区都存在已提交的offset时，从提交的offset开始消费；只要有一个分区不存在已提交的offset，则抛出异常</span></span><br><span class="line">        propsMap.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, autoOffsetReset);</span><br><span class="line">        <span class="comment">//两次poll之间的最大间隔，默认值为5分钟。如果超过这个间隔会触发reBalance</span></span><br><span class="line">        propsMap.put(ConsumerConfig.MAX_POLL_INTERVAL_MS_CONFIG, maxPollIntervalTime);</span><br><span class="line">        <span class="comment">//这个参数定义了poll方法最多可以拉取多少条消息，默认值为500。如果在拉取消息的时候新消息不足500条，那有多少返回多少；如果超过500条，每次只返回500。</span></span><br><span class="line">        <span class="comment">//这个默认值在有些场景下太大，有些场景很难保证能够在5min内处理完500条消息，</span></span><br><span class="line">        <span class="comment">//如果消费者无法在5分钟内处理完500条消息的话就会触发reBalance,</span></span><br><span class="line">        <span class="comment">//然后这批消息会被分配到另一个消费者中，还是会处理不完，这样这批消息就永远也处理不完。</span></span><br><span class="line">        <span class="comment">//要避免出现上述问题，提前评估好处理一条消息最长需要多少时间，然后覆盖默认的max.poll.records参数</span></span><br><span class="line">        <span class="comment">//注：需要开启BatchListener批量监听才会生效，如果不开启BatchListener则不会出现reBalance情况</span></span><br><span class="line">        propsMap.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, maxPollRecords);</span><br><span class="line">        <span class="comment">//当broker多久没有收到consumer的心跳请求后就触发reBalance，默认值是10s</span></span><br><span class="line">        propsMap.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, sessionTimeout);</span><br><span class="line">        <span class="comment">//序列化（建议使用Json，这种序列化方式可以无需额外配置传输实体类）</span></span><br><span class="line">        propsMap.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);</span><br><span class="line">        propsMap.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);</span><br><span class="line">        <span class="keyword">return</span> propsMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ConsumerFactory&lt;Object, Object&gt; <span class="title function_">consumerFactory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//配置消费者的 Json 反序列化的可信赖包，反序列化实体类需要</span></span><br><span class="line">        <span class="keyword">try</span>(JsonDeserializer&lt;Object&gt; deserializer = <span class="keyword">new</span> <span class="title class_">JsonDeserializer</span>&lt;&gt;()) &#123;</span><br><span class="line">            deserializer.trustedPackages(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DefaultKafkaConsumerFactory</span>&lt;&gt;(consumerConfigs(), <span class="keyword">new</span> <span class="title class_">JsonDeserializer</span>&lt;&gt;(), deserializer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;Object, Object&gt;&gt; <span class="title function_">kafkaListenerContainerFactory</span><span class="params">()</span> &#123;</span><br><span class="line">        ConcurrentKafkaListenerContainerFactory&lt;Object, Object&gt; factory = <span class="keyword">new</span> <span class="title class_">ConcurrentKafkaListenerContainerFactory</span>&lt;&gt;();</span><br><span class="line">        factory.setConsumerFactory(consumerFactory());</span><br><span class="line">        <span class="comment">//在侦听器容器中运行的线程数，一般设置为 机器数*分区数</span></span><br><span class="line">        factory.setConcurrency(concurrency);</span><br><span class="line">        <span class="comment">//消费监听接口监听的主题不存在时，默认会报错，所以设置为false忽略错误</span></span><br><span class="line">        factory.setMissingTopicsFatal(missingTopicsFatal);</span><br><span class="line">        <span class="comment">//自动提交关闭，需要设置手动消息确认</span></span><br><span class="line">        factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);</span><br><span class="line">        factory.getContainerProperties().setPollTimeout(pollTimeout);</span><br><span class="line">        <span class="comment">//设置为批量监听，需要用List接收</span></span><br><span class="line">        <span class="comment">//factory.setBatchListener(true);</span></span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="五、开始写代码"><a href="#五、开始写代码" class="headerlink" title="五、开始写代码"></a>五、开始写代码</h1><blockquote><p>下面我们开始写 Kafka 的消息发送代码</p></blockquote><h2 id="生产者-1"><a href="#生产者-1" class="headerlink" title="生产者"></a>生产者</h2><h3 id="发送"><a href="#发送" class="headerlink" title="发送"></a>发送</h3><p><code>KafkaController</code>用于发送消息到 Kafka</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> icu.xuyijie.provider.entity.User;</span><br><span class="line"><span class="keyword">import</span> icu.xuyijie.provider.handler.KafkaSendResultHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerRecord;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.config.KafkaListenerEndpointRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.KafkaTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.support.KafkaHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.MessageHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.support.GenericMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeoutException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/31 14:05</span></span><br><span class="line"><span class="comment"> * kafka发送消息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/provider&quot;)</span></span><br><span class="line"><span class="comment">//这个注解代表这个类开启Springboot事务，因为我们在Kafka的配置文件开启了Kafka事务，不然会报错</span></span><br><span class="line"><span class="meta">@Transactional(rollbackFor = RuntimeException.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KafkaController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> KafkaTemplate&lt;Object, Object&gt; kafkaTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">KafkaController</span><span class="params">(KafkaTemplate&lt;Object, Object&gt; kafkaTemplate, KafkaSendResultHandler kafkaSendResultHandler)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.kafkaTemplate = kafkaTemplate;</span><br><span class="line">        <span class="comment">//回调方法、异常处理</span></span><br><span class="line">        <span class="built_in">this</span>.kafkaTemplate.setProducerListener(kafkaSendResultHandler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/sendMultiple&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMultiple</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;发送到Kafka的消息&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; <span class="number">10</span>;i++) &#123;</span><br><span class="line">            kafkaTemplate.send(<span class="string">&quot;topic1&quot;</span>, <span class="string">&quot;发送到Kafka的消息&quot;</span> + i);</span><br><span class="line">            System.out.println(message + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/send&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">send</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//这个User的代码我没放出来，自己随便写一个实体类，实体类一定要 implements Serializable</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;徐一杰&quot;</span>);</span><br><span class="line">        kafkaTemplate.send(<span class="string">&quot;topic1&quot;</span>, user);</span><br><span class="line">        kafkaTemplate.send(<span class="string">&quot;topic2&quot;</span>, <span class="string">&quot;发给topic2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Kafka提供了多种构建消息的方式</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ExecutionException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> TimeoutException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">SendDemo</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">//后面的get代表同步发送，括号内时间可选，代表超过这个时间会抛出超时异常，但是仍会发送成功</span></span><br><span class="line">        kafkaTemplate.send(<span class="string">&quot;topic1&quot;</span>, <span class="string">&quot;发给topic1&quot;</span>).get(<span class="number">1</span>, TimeUnit.MILLISECONDS);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用ProducerRecord发送消息</span></span><br><span class="line">        ProducerRecord&lt;Object, Object&gt; producerRecord = <span class="keyword">new</span> <span class="title class_">ProducerRecord</span>&lt;&gt;(<span class="string">&quot;topic.quick.demo&quot;</span>, <span class="string">&quot;use ProducerRecord to send message&quot;</span>);</span><br><span class="line">        kafkaTemplate.send(producerRecord);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用Message发送消息</span></span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(KafkaHeaders.TOPIC, <span class="string">&quot;topic.quick.demo&quot;</span>);</span><br><span class="line">        map.put(KafkaHeaders.PARTITION_ID, <span class="number">0</span>);</span><br><span class="line">        map.put(KafkaHeaders.MESSAGE_KEY, <span class="number">0</span>);</span><br><span class="line">        GenericMessage&lt;Object&gt; message = <span class="keyword">new</span> <span class="title class_">GenericMessage</span>&lt;&gt;(<span class="string">&quot;use Message to send message&quot;</span>, <span class="keyword">new</span> <span class="title class_">MessageHeaders</span>(map));</span><br><span class="line">        kafkaTemplate.send(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="成功回调和异常处理"><a href="#成功回调和异常处理" class="headerlink" title="成功回调和异常处理"></a>成功回调和异常处理</h3><p><code>KafkaSendResultHandler </code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerRecord;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.RecordMetadata;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.support.ProducerListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.lang.Nullable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/31 15:41</span></span><br><span class="line"><span class="comment"> * kafka消息发送回调</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KafkaSendResultHandler</span> <span class="keyword">implements</span> <span class="title class_">ProducerListener</span>&lt;Object, Object&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onSuccess</span><span class="params">(ProducerRecord producerRecord, RecordMetadata recordMetadata)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;消息发送成功：&quot;</span> + producerRecord.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(ProducerRecord producerRecord, <span class="meta">@Nullable</span> RecordMetadata recordMetadata, Exception exception)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;消息发送失败：&quot;</span> + producerRecord.toString() + exception.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="消费者-1"><a href="#消费者-1" class="headerlink" title="消费者"></a>消费者</h2><h3 id="接收"><a href="#接收" class="headerlink" title="接收"></a>接收</h3><p><code>KafkaHandler</code>用于接收 Kafka 里的消息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecord;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.annotation.KafkaListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.config.KafkaListenerEndpointRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.support.Acknowledgment;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/31 14:04</span></span><br><span class="line"><span class="comment"> * kafka监听消息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KafkaHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">KafkaHandler</span><span class="params">(KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.kafkaListenerEndpointRegistry = kafkaListenerEndpointRegistry;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 监听kafka消息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> consumerRecord kafka的消息，用consumerRecord可以接收到更详细的信息，也可以用String message只接收消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ack  kafka的消息确认</span></span><br><span class="line"><span class="comment">     * 使用autoStartup = &quot;false&quot;必须指定id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@KafkaListener(topics = &#123;&quot;topic1&quot;, &quot;topic2&quot;&#125;, errorHandler = &quot;myKafkaListenerErrorHandler&quot;)</span></span><br><span class="line"><span class="comment">//    @KafkaListener(id = &quot;$&#123;spring.kafka.consumer.group-id&#125;&quot;, topics = &#123;&quot;topic1&quot;, &quot;topic2&quot;&#125;, autoStartup = &quot;false&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listen1</span><span class="params">(ConsumerRecord&lt;Object, Objects&gt; consumerRecord, Acknowledgment ack)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//用于测试异常处理</span></span><br><span class="line">            <span class="comment">//int i = 1 / 0;</span></span><br><span class="line">            System.out.println(consumerRecord.get(<span class="number">0</span>).value());</span><br><span class="line">            <span class="comment">//手动确认</span></span><br><span class="line">            ack.acknowledge();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;消费失败：&quot;</span> + e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下面的方法可以手动操控kafka的队列监听情况</span></span><br><span class="line"><span class="comment">     * 先发送一条消息，因为autoStartup = &quot;false&quot;，所以并不会看到有消息进入监听器。</span></span><br><span class="line"><span class="comment">     * 接着启动监听器，/start/webGroup。可以看到有一条消息进来了。</span></span><br><span class="line"><span class="comment">     * pause是暂停监听，resume是继续监听</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> listenerId consumer的group-id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/pause/&#123;listenerId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stop</span><span class="params">(<span class="meta">@PathVariable</span> String listenerId)</span> &#123;</span><br><span class="line">        Objects.requireNonNull(kafkaListenerEndpointRegistry.getListenerContainer(listenerId)).pause();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/resume/&#123;listenerId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">resume</span><span class="params">(<span class="meta">@PathVariable</span> String listenerId)</span> &#123;</span><br><span class="line">        Objects.requireNonNull(kafkaListenerEndpointRegistry.getListenerContainer(listenerId)).resume();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/start/&#123;listenerId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">(<span class="meta">@PathVariable</span> String listenerId)</span> &#123;</span><br><span class="line">        Objects.requireNonNull(kafkaListenerEndpointRegistry.getListenerContainer(listenerId)).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p><code>MyKafkaListenerErrorHandler</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.Consumer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.listener.KafkaListenerErrorHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.listener.ListenerExecutionFailedException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.lang.NonNull;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/31 15:27</span></span><br><span class="line"><span class="comment"> * 异常处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyKafkaListenerErrorHandler</span> <span class="keyword">implements</span> <span class="title class_">KafkaListenerErrorHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">handleError</span><span class="params">(<span class="meta">@NonNull</span> Message&lt;?&gt; message, <span class="meta">@NonNull</span> ListenerExecutionFailedException exception)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">handleError</span><span class="params">(<span class="meta">@NonNull</span> Message&lt;?&gt; message, <span class="meta">@NonNull</span> ListenerExecutionFailedException exception, Consumer&lt;?, ?&gt; consumer)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;消息详情：&quot;</span> + message);</span><br><span class="line">        System.out.println(<span class="string">&quot;异常信息：：&quot;</span> + exception);</span><br><span class="line">        System.out.println(<span class="string">&quot;消费者详情：：&quot;</span> + consumer.groupMetadata());</span><br><span class="line">        System.out.println(<span class="string">&quot;监听主题：：&quot;</span> + consumer.listTopics());</span><br><span class="line">        <span class="keyword">return</span> KafkaListenerErrorHandler.<span class="built_in">super</span>.handleError(message, exception, consumer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="七、开始测试"><a href="#七、开始测试" class="headerlink" title="七、开始测试"></a>七、开始测试</h1><blockquote><p>启动生产者和消费者，消费者控制台打印出我配置的 group-id <code>webGroup</code> id就是启动成功了，<code>如果启动报错不会解决，可以评论区留言</code></p></blockquote><p><img src="https://img-blog.csdnimg.cn/241aa02ea6d541f2b7952de143cce854.png" alt="在这里插入图片描述"></p><h2 id="测试普通单条消息"><a href="#测试普通单条消息" class="headerlink" title="测试普通单条消息"></a>测试普通单条消息</h2><blockquote><p>浏览器访问 <code>http://127.0.0.1:8081/provider/send</code> 来调用生产者发送一条消息，生产者控制台打印出回调，消费者控制台输出接收到的消息</p></blockquote><p><img src="https://img-blog.csdnimg.cn/2446b55a7d034907be029c9062409d09.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/0a7e2d17974e444087b58698d490c18d.png" alt="在这里插入图片描述"></p><h2 id="测试消费者异常处理"><a href="#测试消费者异常处理" class="headerlink" title="测试消费者异常处理"></a>测试消费者异常处理</h2><blockquote><p>把消费者里的 <code>listen1</code> 方法里的这行代码取消注释</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用于测试异常处理</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br></pre></td></tr></table></figure><blockquote><p>重启消费者，访问 <code>http://127.0.0.1:8081/provider/send</code> ，发现消费者虽然报错但是没有抛出异常，而是被我们处理了</p></blockquote><p><img src="https://img-blog.csdnimg.cn/20844679c6a64ea5875b2fbcee435cf2.png" alt="在这里插入图片描述"></p><h2 id="测试延时消息"><a href="#测试延时消息" class="headerlink" title="测试延时消息"></a>测试延时消息</h2><blockquote><p>发送延时消息要关闭事务，在生产者的 yml 和 config 配置文件里把下面代码注释掉</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启事务，必须在开启了事务的方法中发送，否则报错</span></span><br><span class="line"><span class="comment"># transaction-id-prefix: kafkaTx-</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开启事务，会导致 LINGER_MS_CONFIG 配置失效</span></span><br><span class="line"><span class="comment">//factory.setTransactionIdPrefix(transactionIdPrefix);</span></span><br></pre></td></tr></table></figure><blockquote><p>然后重新请求<code>http://127.0.0.1:8081/provider/send</code>，发现 5s 后消息发出，配置延迟时间的配置是<code>props.put(ProducerConfig.LINGER_MS_CONFIG, &quot;5000&quot;);</code>，其实这个不是真正的延时消息，Kafka实现真正的延时消息要使用JDK的DelayQueue手动实现。</p></blockquote><h2 id="测试批量消息"><a href="#测试批量消息" class="headerlink" title="测试批量消息"></a>测试批量消息</h2><blockquote><p>打开消费者的 config 配置里 <code>setBatchListener</code> 这一行代码，我们定义的 <code>MAX_POLL_RECORDS_CONFIG</code> 为3，即每次批量读取3条消息，批量监听需要用List接收，<code>listen1</code>方法的参数加一个List包起来</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置为批量监听，需要用List接收</span></span><br><span class="line">factory.setBatchListener(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">propsMap.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, maxPollRecords);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listen1</span><span class="params">(List&lt;ConsumerRecord&lt;Object, Objects&gt;&gt; consumerRecord, Acknowledgment ack)</span></span><br></pre></td></tr></table></figure><blockquote><p>注意！！！Debug消费者，因为我们要打断点观察每次接收的条数<br>调用消费者接口<code>http://127.0.0.1:8081/provider/sendMultiple</code>批量发送10条，可以看到消费者每次只接收3条</p></blockquote><p><img src="https://img-blog.csdnimg.cn/de12a490c6e5430c8bd8fa108e3380da.png" alt="在这里插入图片描述"></p><h2 id="测试手动控制消费者监听"><a href="#测试手动控制消费者监听" class="headerlink" title="测试手动控制消费者监听"></a>测试手动控制消费者监听</h2><blockquote><p><code>@KafkaListener</code>这样写，id 和 autoStartup 是关键</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@KafkaListener(id = &quot;$&#123;spring.kafka.consumer.group-id&#125;&quot;, topics = &#123;&quot;topic1&quot;, &quot;topic2&quot;&#125;, autoStartup = &quot;false&quot;)</span></span><br></pre></td></tr></table></figure><blockquote><p>重启消费者，调用生产者接口<code>http://127.0.0.1:8081/provider/send</code>，我们发现这次消费者没有接收到消息，因为我们关闭了 <code>autoStartup</code></p></blockquote><blockquote><p>要开始接收的话，调用消费者接口<code>http://127.0.0.1:8082/start/firstGroup</code>，这个方法可以启动 group-id 为 firstGroup 的 @KafkaListener，然后我们发现消费者控制台接收到消息</p></blockquote><blockquote><p><code>http://127.0.0.1:8082/pause/firstGroup</code>暂停接收<br><code>http://127.0.0.1:8082/resume/firstGroup</code>恢复接收</p></blockquote><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>你会了吗，我反正是又写了一遍博客现在刻到脑子里了，但是项目里有两个配置参数我有疑问</p><blockquote><p><code>batch-size</code>，这个参数没有效果<br>为什么开启事务以后会让 <code>LINGER_MS_CONFIG</code>这个配置失效，这个我并没有看到文档里面有写<br>有没有知道的同学告诉我一下</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian（Linux通用）安装 Kafka 并配置远程访问</title>
      <link href="/2022/11/01/Debian%EF%BC%88Linux%E9%80%9A%E7%94%A8%EF%BC%89%E5%AE%89%E8%A3%85%20Kafka%20%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/"/>
      <url>/2022/11/01/Debian%EF%BC%88Linux%E9%80%9A%E7%94%A8%EF%BC%89%E5%AE%89%E8%A3%85%20Kafka%20%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>As we all know，当今世界最流行的消息中间件有 RabbitMq、RocketMq、Kafka，其中，应用最广泛的是 <code>RabbitMq</code>，<code>RocketMq</code> 是阿里巴巴的产品，性能超过 RabbitMq，已经经受了多年的双11考验，但是怕哪天阿里不维护了，用的人不多，<code>Kafka</code> 是吞吐量最大的一个，远超前两个，支持事务、可保证消息的不丢失（网上说的事务和消息可靠性不支持是说的旧版，2以后就开始支持了），对比来讲，Kafka相对于前两个，只有一个劣势，不太支持延时队列，其他方面都要优于它们（个人使用体验，勿喷）。</p></blockquote><hr><h1 id="一、下载"><a href="#一、下载" class="headerlink" title="一、下载"></a>一、下载</h1><blockquote><p>为 Kafka 创建一个安装文件夹，你喜欢哪就装哪</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /</span><br><span class="line"><span class="built_in">mkdir</span> data</span><br><span class="line"><span class="built_in">cd</span> data/</span><br><span class="line"><span class="built_in">mkdir</span> kafka</span><br><span class="line"><span class="built_in">cd</span> kafka/</span><br></pre></td></tr></table></figure><blockquote><p>下载官方安装包</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载官方安装包，apache大家都知道，下载很慢，大家可以从镜像下载或者挂梯子下载完传输到服务器</span></span><br><span class="line">wget https://dlcdn.apache.org/kafka/3.3.1/kafka_2.13-3.3.1.tgz</span><br></pre></td></tr></table></figure><p><code>apache大家都知道，下载很慢，下面我的服务器下载速度只有96.8KB/s，大家可以从镜像下载或者挂梯子下载完传输到服务器</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@VM-12-15-debian:/data/kafka<span class="comment"># wget https://dlcdn.apache.org/kafka/3.3.1/kafka_2.13-3.3.1.tgz</span></span><br><span class="line">--2022-11-01 14:50:29--  https://dlcdn.apache.org/kafka/3.3.1/kafka_2.13-3.3.1.tgz</span><br><span class="line">Resolving dlcdn.apache.org (dlcdn.apache.org)... 151.101.2.132, 2a04:4e42::644</span><br><span class="line">Connecting to dlcdn.apache.org (dlcdn.apache.org)|151.101.2.132|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 105053134 (100M) [application/x-gzip]</span><br><span class="line">Saving to: ‘kafka_2.13-3.3.1.tgz’</span><br><span class="line"></span><br><span class="line">kafka_2.13-3.3.1.tgz            2%[&gt;            ]   2.71M  96.8KB/s    eta 7m 54s</span><br></pre></td></tr></table></figure><h1 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a>二、安装</h1><blockquote><p>在我们创建的文件夹里解压</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -xzf kafka_2.13-3.3.1.tgz</span><br><span class="line"><span class="comment"># 进入解压出来的文件夹</span></span><br><span class="line"><span class="built_in">cd</span> kafka_2.13-3.3.1/</span><br></pre></td></tr></table></figure><p><code>解压完成，进入解压的文件夹，ls，出现下面这样几个目录</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@VM-12-15-debian:/data/kafka<span class="comment"># ls</span></span><br><span class="line">kafka_2.13-3.3.1.tgz</span><br><span class="line">root@VM-12-15-debian:/data/kafka<span class="comment"># tar -xzf kafka_2.13-3.3.1.tgz</span></span><br><span class="line">root@VM-12-15-debian:/data/kafka<span class="comment"># ls</span></span><br><span class="line">kafka_2.13-3.3.1  kafka_2.13-3.3.1.tgz</span><br><span class="line">root@VM-12-15-debian:/data/kafka<span class="comment"># cd kafka_2.13-3.3.1/</span></span><br><span class="line">root@VM-12-15-debian:/data/kafka/kafka_2.13-3.3.1<span class="comment"># ls</span></span><br><span class="line">bin  config  libs  LICENSE  licenses  NOTICE  site-docs</span><br><span class="line">root@VM-12-15-debian:/data/kafka/kafka_2.13-3.3.1<span class="comment">#</span></span><br></pre></td></tr></table></figure><hr><h1 id="三、配置远程访问"><a href="#三、配置远程访问" class="headerlink" title="三、配置远程访问"></a>三、配置远程访问</h1><blockquote><p><code>注意：新版的 Kafka 已经可以不依赖并且不建议依赖 zookeeper 来启动了</code>，所以我们采用 Kafka 内置的 <code>KRaft</code> 启动方式，无需额外安装其他软件，所以我们修改的配置文件的路径如下</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改 kraft 里面的配置文件</span></span><br><span class="line">vim config/kraft/server.properties</span><br></pre></td></tr></table></figure><p><code>把 advertised.listeners 的 localhost 修改为当前服务器的公网 IP</code></p><blockquote><p>修改前</p></blockquote><p><img src="https://img-blog.csdnimg.cn/46efd13483e146c3aea2f6c2a7197284.png" alt="在这里插入图片描述"></p><blockquote><p>修改后</p></blockquote><p><img src="https://img-blog.csdnimg.cn/05e817925fd74aceb1bb57d13dccb15c.png" alt="在这里插入图片描述"><br><code>修改完成保存</code></p><blockquote><p>开放防火墙 9092 端口</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Debian/Ubuntu ufw</span></span><br><span class="line">ufw allow 9092</span><br><span class="line">ufw reload</span><br><span class="line"><span class="comment"># Debian/Ubuntu iptables（这个叼毛防火墙好麻烦，我没用过，不知道是不是这样）</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 9092 -j ACCEPT</span><br><span class="line">iptables-restore</span><br><span class="line"><span class="comment"># CentOS</span></span><br><span class="line">firewall-cmd --zone=public --add-port=9092/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><hr><h1 id="四、启动"><a href="#四、启动" class="headerlink" title="四、启动"></a>四、启动</h1><blockquote><p>下面是启动命令，要进入解压的文件夹里面执行哦，格式化 kraft 文件夹命令新安装后只需执行一次，后续启动就不需要了</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式化 kraft 文件夹（新安装后只需执行一次）</span></span><br><span class="line">KAFKA_CLUSTER_ID=<span class="string">&quot;<span class="subst">$(bin/kafka-storage.sh random-uuid)</span>&quot;</span></span><br><span class="line">bin/kafka-storage.sh format -t <span class="variable">$KAFKA_CLUSTER_ID</span> -c config/kraft/server.properties</span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">bin/kafka-server-start.sh -daemon config/kraft/server.properties &amp;</span><br></pre></td></tr></table></figure><p><code>出现下面这样，启动成功，如果大家想看启动日志，把上面命令的最后一个 &amp; 去掉就可以</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@VM-12-15-debian:/data/kafka/kafka_2.13-3.3.1<span class="comment"># ls</span></span><br><span class="line">bin  config  libs  LICENSE  licenses  NOTICE  site-docs</span><br><span class="line">root@VM-12-15-debian:/data/kafka/kafka_2.13-3.3.1<span class="comment"># bin/kafka-server-start.sh -daemon config/kraft/server.properties &amp;</span></span><br><span class="line">[1] 3783821</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>Springboot 集成 Kafka 的配置和使用，看我的另一篇<a href="https://blog.csdn.net/qq_48922459/article/details/127634598?spm=1001.2014.3001.5501">Springboot 配置使用 Kafka</a>，不多BB，不会给你扯原理，只会教你怎么用，详细但不啰嗦，你不会后悔的</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Debian </tag>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian11（Linux 通用）安装 Jenkins 并配置自动化部署</title>
      <link href="/2022/10/28/Debian11%EF%BC%88Linux%20%E9%80%9A%E7%94%A8%EF%BC%89%E5%AE%89%E8%A3%85%20Jenkins%20%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/"/>
      <url>/2022/10/28/Debian11%EF%BC%88Linux%20%E9%80%9A%E7%94%A8%EF%BC%89%E5%AE%89%E8%A3%85%20Jenkins%20%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>Jenkins是基于Java开发的一种持续集成工具，用于监控持续重复的工作，可用于自动化各种任务，如构建，测试和部署软件。Jenkins可以通过 apt 和 yum 安装、Docker安装，也可以下载 war 包允许在拥有 JDK 环境的任何机器</p></blockquote><hr><h1 id="一、安装-Jenkins"><a href="#一、安装-Jenkins" class="headerlink" title="一、安装 Jenkins"></a>一、安装 Jenkins</h1><p><code>注意，安装 Jenkins 需要 JDK 环境，如果没有安装，可以直接 apt install default-jdk 或者 yum install java 这样安装</code></p><p><code>注意，配置自动化部署需要 maven 环境，如果没有安装，可以直接 apt install maven 或者 yum install maven 这样安装</code></p><p><code>注意，配置自动化部署需要 git 环境，如果没有安装，可以直接 apt install git 或者 yum install git 这样安装，这个 git 的版本不重要，也可以不安装，Jenkins安装好以后让Jenkins自动安装</code></p><h2 id="apt-x2F-yum安装（推荐）"><a href="#apt-x2F-yum安装（推荐）" class="headerlink" title="apt&#x2F;yum安装（推荐）"></a>apt&#x2F;yum安装（推荐）</h2><blockquote><p>这是 apt 的安装方式</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载Jenkins公钥</span></span><br><span class="line">curl -fsSL https://pkg.jenkins.io/debian/jenkins.io.key | sudo <span class="built_in">tee</span> \</span><br><span class="line">    /usr/share/keyrings/jenkins-keyring.asc &gt; /dev/null</span><br><span class="line"><span class="comment"># 把Jenkins安装包添加到apt仓库</span></span><br><span class="line"><span class="built_in">echo</span> deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \</span><br><span class="line">    https://pkg.jenkins.io/debian binary/ | sudo <span class="built_in">tee</span> \</span><br><span class="line">    /etc/apt/sources.list.d/jenkins.list &gt; /dev/null</span><br><span class="line"><span class="comment"># 更新仓库</span></span><br><span class="line">apt update</span><br><span class="line">apt install jenkins</span><br><span class="line"><span class="comment"># 查看Jenkins运行状态</span></span><br><span class="line">systemctl status jenkins.service</span><br></pre></td></tr></table></figure><blockquote><p>这是 yum 的安装方式</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载Jenkins仓库</span></span><br><span class="line">sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br><span class="line"><span class="comment"># 安装ca-certificates并导入公钥</span></span><br><span class="line">yum -y install ca-certificates</span><br><span class="line">sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><br><span class="line">yum -y install jenkins</span><br></pre></td></tr></table></figure><h2 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker pull jenkinsci/blueocean</span><br><span class="line">docker run \</span><br><span class="line">  -u root \</span><br><span class="line">  -d \</span><br><span class="line">  -p 8080:8080 \</span><br><span class="line">  -p 50000:50000 \</span><br><span class="line">  -v jenkins-data:/var/jenkins_home \</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">  jenkinsci/blueocean</span><br></pre></td></tr></table></figure><h2 id="War包安装"><a href="#War包安装" class="headerlink" title="War包安装"></a>War包安装</h2><p><a href="http://mirrors.jenkins.io/war-stable/latest/jenkins.war">点击下载Jenkins的war包</a></p><p>直接java -jar 启动就可以</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 临时启动</span></span><br><span class="line">java -jar jenkins.war</span><br><span class="line"><span class="comment"># 启动并保持后台运行</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar jenkins.war &amp;</span><br></pre></td></tr></table></figure><hr><h1 id="二、配置文件位置"><a href="#二、配置文件位置" class="headerlink" title="二、配置文件位置"></a>二、配置文件位置</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /lib/systemd/system/jenkins.service</span><br></pre></td></tr></table></figure><p>可以修改一些常用配置，只是示例，这里不用改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">User=jenkins</span><br><span class="line">Group=jenkins</span><br><span class="line">Environment=<span class="string">&quot;JENKINS_HOME=/opt/jenkins&quot;</span></span><br><span class="line">WorkingDirectory=/opt/jenkins</span><br><span class="line">Environment=<span class="string">&quot;JENKINS_PORT=8080&quot;</span></span><br></pre></td></tr></table></figure><hr><h1 id="三、登录Jenkins控制面板"><a href="#三、登录Jenkins控制面板" class="headerlink" title="三、登录Jenkins控制面板"></a>三、登录Jenkins控制面板</h1><blockquote><p>开放防火墙 8080 端口</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Debian/Ubuntu ufw</span></span><br><span class="line">ufw allow 8080</span><br><span class="line">ufw reload</span><br><span class="line"><span class="comment"># Debian/Ubuntu iptables（这个叼毛防火墙好麻烦，我没用过，不知道是不是这样）</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 8080 -j ACCEPT</span><br><span class="line">iptables-restore</span><br><span class="line"><span class="comment"># CentOS</span></span><br><span class="line">firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><blockquote><p>浏览器访问服务器IP:8080</p></blockquote><p><img src="https://img-blog.csdnimg.cn/1f872289ab2e43228b05ae3758c6d572.png" alt="在这里插入图片描述"></p><blockquote><p>可以看到首次进入需要解锁，它说密码已经写入到我们的安装服务器，路径是 <code>/var/lib/jenkins/secrets/initialAdminPassword</code>，我们 <code>cat</code> 一下这个路径，得到密码，粘贴到网页，点击继续</p></blockquote><p><img src="https://img-blog.csdnimg.cn/cf75372bf02442d6bc07ebfe67ad74c6.png" alt="在这里插入图片描述"></p><blockquote><p>我们选择安装推荐的插件就行</p></blockquote><p><img src="https://img-blog.csdnimg.cn/d0d94d95b92d4ad58a523e2a02c5f614.png" alt="在这里插入图片描述"></p><blockquote><p>正在安装，等待安装完成</p></blockquote><p><img src="https://img-blog.csdnimg.cn/d59b1a7edea646988f8cb95099058c74.png" alt="在这里插入图片描述"></p><blockquote><p>创建用户</p></blockquote><p><img src="https://img-blog.csdnimg.cn/ff0579645bbe4832b8a35bc1616d4939.png" alt="在这里插入图片描述"></p><blockquote><p>就是控制面板的地址，保存继续就OK了！！！</p></blockquote><p><img src="https://img-blog.csdnimg.cn/29856b25e1eb484e8e2e289703acf39c.png" alt="在这里插入图片描述"></p><hr><h1 id="四、配置自动化部署"><a href="#四、配置自动化部署" class="headerlink" title="四、配置自动化部署"></a>四、配置自动化部署</h1><blockquote><p>我将给 Jenkins 配置 JDK环境、Maven环境、Git地址、项目运行服务器IP来实现对项目的监控、自动部署</p></blockquote><h2 id="1、配置环境"><a href="#1、配置环境" class="headerlink" title="1、配置环境"></a>1、配置环境</h2><blockquote><p>查看 java_home：1、如果你是通过解压压缩包安装的，直接<code>echo $JAVA_HOME</code>。2、如果是通过 apt 和 yum 安装的，<code>update-alternatives --config java</code>查看，<code>/usr/lib/jvm/java-17-openjdk-amd64</code>就是 java_home 的位置<br>查看 Maven_home：mvn -v</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@debian:/usr/lib/jvm/java-1.17.0-openjdk-amd64<span class="comment"># echo $JAVA_HOME</span></span><br><span class="line"></span><br><span class="line">root@debian:/usr/lib/jvm/java-1.17.0-openjdk-amd64<span class="comment"># update-alternatives --config java</span></span><br><span class="line">链接组 java (提供 /usr/bin/java)中只有一个候选项：/usr/lib/jvm/java-17-openjdk-amd64/bin/java</span><br><span class="line">无需配置。</span><br><span class="line">root@debian:/usr/lib/jvm/java-1.17.0-openjdk-amd64<span class="comment"># mvn -v</span></span><br><span class="line">Apache Maven 3.6.3</span><br><span class="line">Maven home: /usr/share/maven</span><br><span class="line">Java version: 17.0.4, vendor: Debian, runtime: /usr/lib/jvm/java-17-openjdk-amd64</span><br><span class="line">Default locale: zh_CN, platform encoding: UTF-8</span><br><span class="line">OS name: <span class="string">&quot;linux&quot;</span>, version: <span class="string">&quot;5.10.0-18-amd64&quot;</span>, <span class="built_in">arch</span>: <span class="string">&quot;amd64&quot;</span>, family: <span class="string">&quot;unix&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>获取完成，开始配置，把 Install automatically 钩打掉就能配置本地环境了</p></blockquote><p><img src="https://img-blog.csdnimg.cn/9be62dc5ed9243bdae52a23f55bd0531.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/db7e4865e0be4b55a1d6c2b29e7d46c1.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/533ba375c1c949c398daf7b146042fb4.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/15de9dfa01fc4555a78d495d7f915c1a.png" alt="在这里插入图片描述"></p><hr><h2 id="2、配置自动化部署"><a href="#2、配置自动化部署" class="headerlink" title="2、配置自动化部署"></a>2、配置自动化部署</h2><blockquote><p>配置好环境保存，新建Item</p></blockquote><p><img src="https://img-blog.csdnimg.cn/b09e02aa0085498a94973d1c02c63478.png" alt="在这里插入图片描述"></p><blockquote><p>名字随便，然后选择<code>Freestyle project</code></p></blockquote><p><img src="https://img-blog.csdnimg.cn/ea9e6344b87a49fd86408629836794ef.png" alt="在这里插入图片描述"></p><blockquote><p>勾选为 Github项目，输入仓库地址</p></blockquote><p><img src="https://img-blog.csdnimg.cn/3d16ef9047a34a299a2cc76dca26904a.png" alt="在这里插入图片描述"></p><blockquote><p>配置项目的 Git 仓库连接，<code>Credentials</code>自己添加一个，填 github 的登录账号密码</p></blockquote><p><img src="https://img-blog.csdnimg.cn/cb11f579c1174ebbbb457dadf0749ca7.png" alt="在这里插入图片描述"></p><blockquote><p>构建触发器身份令牌随便填<br>如下图：当前项目的回调地址为：<code>http://localhost:8080/me/my-views/view/all/job/test/build?token=test</code><br>只要执行这个地址（在浏览器上访问改地址），该项目就会发起一次构建项目，即拉取代码打包部署操作</p></blockquote><p><img src="https://img-blog.csdnimg.cn/6657740438e44aceaa6205609f013404.png" alt="在这里插入图片描述"></p><blockquote><p>配置构建命令：打包，cd 到 jar 包位置，启动，别问 BUILD_ID 是什么意思，我也不知道，就是这样写的</p></blockquote><p><img src="https://img-blog.csdnimg.cn/27da6ea21d104ac5aff5ebe683f876ac.png" alt="在这里插入图片描述"></p><h2 id="远程部署（可选）"><a href="#远程部署（可选）" class="headerlink" title="远程部署（可选）"></a>远程部署（可选）</h2><blockquote><p>如果想打包到其他服务器启动，要安装新插件</p></blockquote><p><img src="https://img-blog.csdnimg.cn/aeb4f6aa6d9c482ea09fa6a2b32fc283.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/bc91da9a186248fc8ff284fb925d1744.png" alt="在这里插入图片描述"></p><blockquote><p>页面左边还有一个 Download program，点进去，拉到最下面，打勾“完成后重启”<br>如果没有，可以手动重启 <code>systemctl restart jenkins</code></p></blockquote><p><img src="https://img-blog.csdnimg.cn/c2b2f110b7dc4f06a816afe49b3d9622.png" alt="在这里插入图片描述"></p><blockquote><p>配置 <code>Send build over SSH</code> 因为我这里只有一台服务器，没有配置 ssh，我网上找了一张老图</p></blockquote><p><img src="https://img-blog.csdnimg.cn/8a2f665abb0c47deb94b9cf0d8a7ce87.png" alt="在这里插入图片描述"></p><blockquote><p>在GitHub服务器上的指定项目里面配置上文中提到的回调地址</p></blockquote><p><img src="https://img-blog.csdnimg.cn/5001ad0c003b482e89b9c3ade0fe5a53.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><blockquote><p>配置好以后，直接向配置的 Git 仓库分支推送代码，Jenkins会自动开始构建，这里可以看到构建历史</p></blockquote><p><img src="https://img-blog.csdnimg.cn/4b3ef98df783499eac9c49cdb20b0dac.png" alt="在这里插入图片描述"></p><p>除了 Jenkins，还有一款免费的叫 JPom，也很不错，推荐一下，有兴趣的可以研究一下</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Debian </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Deepin </tag>
            
            <tag> Jenkins </tag>
            
            <tag> 运维 </tag>
            
            <tag> 自动化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringSecurity 配置与使用（含新 API 替换过时的 WebSecurityConfigurerAdapter）</title>
      <link href="/2022/10/28/SpringSecurity%20%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8%EF%BC%88%E5%90%AB%E6%96%B0%20API%20%E6%9B%BF%E6%8D%A2%E8%BF%87%E6%97%B6%E7%9A%84%20WebSecurityConfigurerAdapter%EF%BC%89/"/>
      <url>/2022/10/28/SpringSecurity%20%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8%EF%BC%88%E5%90%AB%E6%96%B0%20API%20%E6%9B%BF%E6%8D%A2%E8%BF%87%E6%97%B6%E7%9A%84%20WebSecurityConfigurerAdapter%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>As we all know，现今主流权限框架有 SpringSecurity、Shiro、SaToken，Shiro在前后端分离时代基本被淘汰，剩下适合大型项目的 <code>SpringSecurity</code> 和 适合中小型项目的 <code>SaToken</code> 可以选择，SaToken 我也写了文章 <a href="https://blog.csdn.net/qq_48922459/article/details/127048667?spm=1001.2014.3001.5501">Springboot 使用 SaToken 进行登录认证、权限管理以及路由规则接口拦截</a></p><blockquote><p>SpringSecurity 作为 Spring 的官方权限框架，肯定是最牛逼的，当然也最复杂，中小型项目还是 SaToken 来的省心呀，简单，几行代码实现认证、拦截、踢人、单点登录等，SpringSecurity 想要实现这些功能，需要深入研究，现在我只写最简单的用户认证和接口权限控制。</p></blockquote><p><code>现在的 SpringSecurity 版本更换了新的配置方式，下面有写</code></p><hr><h1 id="一、引入依赖"><a href="#一、引入依赖" class="headerlink" title="一、引入依赖"></a>一、引入依赖</h1><blockquote><p>自己新建一个标准的 Springboot web 项目，然后增加下面这个依赖</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="二、启动类增加注解"><a href="#二、启动类增加注解" class="headerlink" title="二、启动类增加注解"></a>二、启动类增加注解</h1><blockquote><p><code>@EnableWebSecurity</code>表示启用户 springsecurity 功能<br><code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code>是开启基于注解的接口权限控制</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/25 17:18</span></span><br><span class="line"><span class="comment"> * 开启方法级安全验证</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringSecurityDemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringSecurityDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="三、config配置文件"><a href="#三、config配置文件" class="headerlink" title="三、config配置文件"></a>三、config配置文件</h1><p><code>现在的 SpringSecurity 版本更换了新的配置方式，目前新版本仍兼容旧版配置，你不喜欢新版配置也可以用旧版</code></p><h2 id="旧版配置"><a href="#旧版配置" class="headerlink" title="旧版配置"></a>旧版配置</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.WebSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/25 15:28</span></span><br><span class="line"><span class="comment"> * 这是旧版api</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定加密方式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 使用官方推荐的BCrypt加密密码，也就是md5加随机盐</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * configure(WebSecurity)用于影响全局安全性(配置资源，设置调试模式，通过实现自定义防火墙定义拒绝请求)的配置设置。</span></span><br><span class="line"><span class="comment">     * 一般用于配置全局的某些通用事物，例如静态资源等</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> web </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(WebSecurity web)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        web.ignoring().antMatchers(<span class="string">&quot;/resources/**&quot;</span>, <span class="string">&quot;/ignore2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 配置接口拦截</span></span><br><span class="line"><span class="comment">     * configure(HttpSecurity)允许基于选择匹配在资源级配置基于网络的安全性，也就是对角色所能访问的接口做出限制</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> httpSecurity 请求属性</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity httpSecurity)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        httpSecurity.authorizeRequests()</span><br><span class="line">                <span class="comment">// 允许get请求/test/any，而无需认证，不配置HttpMethod默认允许所有请求类型</span></span><br><span class="line">                .antMatchers(HttpMethod.GET, <span class="string">&quot;/test/any&quot;</span>).permitAll()</span><br><span class="line">                <span class="comment">//指定权限为admin才能访问，这里和方法注解配置效果一样，但是会覆盖注解</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/test/admin&quot;</span>).hasRole(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">                <span class="comment">// 所有请求都需要验证</span></span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">//.httpBasic() Basic认证，和表单认证只能选一个</span></span><br><span class="line">                <span class="comment">// 使用表单认证页面</span></span><br><span class="line">                .formLogin()</span><br><span class="line">                <span class="comment">//配置登录入口，默认为security自带的页面/login</span></span><br><span class="line">                .loginProcessingUrl(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">// post请求要关闭csrf验证,不然访问报错；实际开发中开启，需要前端配合传递其他参数</span></span><br><span class="line">                .csrf().disable();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="新版配置"><a href="#新版配置" class="headerlink" title="新版配置"></a>新版配置</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> icu.xuyijie.springsecuritydemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/25 17:34</span></span><br><span class="line"><span class="comment"> * 新api</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSecurityNewConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定加密方式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 使用官方推荐的BCrypt加密密码，也就是md5加随机盐</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * configure(WebSecurity)用于影响全局安全性(配置资源，设置调试模式，通过实现自定义防火墙定义拒绝请求)的配置设置。</span></span><br><span class="line"><span class="comment">     * 一般用于配置全局的某些通用事物，例如静态资源等</span></span><br><span class="line"><span class="comment">     * 新版本其实不推荐把路径的拦截写在这里，而是推荐写在securityFilterChain里面</span></span><br><span class="line"><span class="comment">     * &quot;You are asking Spring Security to ignore Ant [pattern=&#x27;/resources/**&#x27;]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> WebSecurityCustomizer <span class="title function_">webSecurityCustomizer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (web) -&gt; web.ignoring().antMatchers(<span class="string">&quot;/resources/**&quot;</span>, <span class="string">&quot;/ignore2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 配置接口拦截</span></span><br><span class="line"><span class="comment">     * configure(HttpSecurity)允许基于选择匹配在资源级配置基于网络的安全性，也就是对角色所能访问的接口做出限制</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> httpSecurity 请求属性</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> HttpSecurity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity httpSecurity)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        httpSecurity.authorizeRequests()</span><br><span class="line">                <span class="comment">// 允许get请求/test/any，而无需认证，不配置HttpMethod默认允许所有请求类型</span></span><br><span class="line">                .antMatchers(HttpMethod.GET, <span class="string">&quot;/test/any&quot;</span>, <span class="string">&quot;/js/**&quot;</span>, <span class="string">&quot;/css/**&quot;</span>, <span class="string">&quot;/images/**&quot;</span>, <span class="string">&quot;/icon/**&quot;</span>, <span class="string">&quot;/file/**&quot;</span>).permitAll()</span><br><span class="line">                <span class="comment">// 指定权限为admin才能访问，这里和方法注解配置效果一样，但是会覆盖注解</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/test/admin&quot;</span>).hasRole(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">                <span class="comment">// 所有请求都需要验证</span></span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">//.httpBasic() Basic认证，和表单认证只能选一个</span></span><br><span class="line">                <span class="comment">// 使用表单认证页面</span></span><br><span class="line">                .formLogin()</span><br><span class="line">                <span class="comment">// 配置登录入口，默认为security自带的页面/login</span></span><br><span class="line">                .loginProcessingUrl(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">// post请求要关闭csrf验证,不然访问报错；实际开发中开启，需要前端配合传递其他参数</span></span><br><span class="line">                .csrf().disable();</span><br><span class="line">        <span class="keyword">return</span> httpSecurity.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="四、UserDetailsServiceImpl"><a href="#四、UserDetailsServiceImpl" class="headerlink" title="四、UserDetailsServiceImpl"></a>四、UserDetailsServiceImpl</h1><blockquote><p><code>UserDetailsService</code> 是 SpringSecurity 的内置类，我们需要实现它的 loadUserByUsername 方法，方法参数 <code>username</code> 就是登录时填写的用户名，里面写从数据库获取这个 username 的密码和角色，然后 return 给 <code>SpringSecurity 内置的 User 实体类</code></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.GrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/25 15:22</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDetailsServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注入SpringSecurity内置的密码加密类</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PasswordEncoder passwordEncoder;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        <span class="comment">// 通过用户名从数据库获取用户信息，略，我们直接手动定义个用户</span></span><br><span class="line">        <span class="comment">// 定义用户角色为 user</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">role</span> <span class="operator">=</span> <span class="string">&quot;user&quot;</span>;</span><br><span class="line">        <span class="comment">// 定义用户密码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">        <span class="comment">// 角色列表</span></span><br><span class="line">        List&lt;GrantedAuthority&gt; authorityList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 角色必须以ROLE_开头，security在判断角色时会自动截取ROLE_</span></span><br><span class="line">        authorityList.add(<span class="keyword">new</span> <span class="title class_">SimpleGrantedAuthority</span>(<span class="string">&quot;ROLE_&quot;</span> + role));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(</span><br><span class="line">                username,</span><br><span class="line">                <span class="comment">// springsecurity对比密码时默认会解密密码后对比，因为数据库一般存取加密后的密码，我们这里是明文，所以需加密密码</span></span><br><span class="line">                passwordEncoder.encode(password),</span><br><span class="line">                authorityList</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="五、写一个Controller测试用"><a href="#五、写一个Controller测试用" class="headerlink" title="五、写一个Controller测试用"></a>五、写一个Controller测试用</h1><blockquote><p>上面主启动类添加的注解开启基于注解的接口权限的意思就是开启下面的 <code>@PreAuthorize</code>注解的功能，<br>这个注解和<code>config</code> 里面配置的 <code>.antMatchers(&quot;/test/admin&quot;).hasRole(&quot;admin&quot;)</code> 一个意思，选其中一个方式即可。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.security.access.prepost.PreAuthorize;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/25 16:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * user和admin角色能访问该方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;hasAnyRole(&#x27;user&#x27;, &#x27;admin&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">user</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user和admin角色访问&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user和admin角色访问&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * admin角色才能访问该方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;hasAnyRole(&#x27;admin&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/admin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">admin</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;admin角色访问&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;admin角色访问&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * WebSecurityConfig里配置了该接口Get请求无需登录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/any&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">any</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;这个接口Get请求无需登录&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;这个接口Get请求无需登录&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="六、启动测试"><a href="#六、启动测试" class="headerlink" title="六、启动测试"></a>六、启动测试</h1><blockquote><p>我们先访问 <code>http://127.0.0.1:8081/test/any</code>，这时我们还没有登录，这个接口我们在<code>config</code> 里面配置了<code>.permitAll()</code>，所以没有被拦截，直接访问成功</p></blockquote><p><img src="https://img-blog.csdnimg.cn/d64a9859d0174f2fb7d05e0f987651ee.png" alt="在这里插入图片描述"></p><blockquote><p>下面我门访问 <code>http://127.0.0.1:8081/test/user</code>，发现浏览器自动跳转到了登录界面，这个登录界面是SpringSecurity内置的，如需使用自定义页面，下面会讲</p></blockquote><p><img src="https://img-blog.csdnimg.cn/2c3a050987ce4b8bbcd65c14ab2ece4c.png" alt="在这里插入图片描述"></p><blockquote><p>输入账号密码点击 Sign in，发现浏览器自动跳回<code>http://127.0.0.1:8081/test/user</code>，访问成功<br>这里我们用户名可以随便输入，因为上面<code>UserDetailsServiceImpl</code>中我们没有指定用户名，所以 123456 这个密码所有用户都能用</p></blockquote><p><img src="https://img-blog.csdnimg.cn/85b9b64cdf934e14a8ba899e4f2297cb.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/78b40ea88cf94802bd659a65dea0ec79.png" alt="在这里插入图片描述"></p><blockquote><p>如果访问 <code>/test/admin</code> 这个接口，报错 403，代表无权限</p></blockquote><p><img src="https://img-blog.csdnimg.cn/534b496df8e1431e970cf6a6ad70e7a1.png" alt="在这里插入图片描述"></p><hr><h1 id="七、前后端分离设计"><a href="#七、前后端分离设计" class="headerlink" title="七、前后端分离设计"></a>七、前后端分离设计</h1><h2 id="1、自定义登录界面"><a href="#1、自定义登录界面" class="headerlink" title="1、自定义登录界面"></a>1、自定义登录界面</h2><blockquote><p><code>config</code>里面配置的 <code>.loginProcessingUrl(&quot;/login&quot;)</code>是默认使用SpringSecurity内置登录页面，如果需要使用前端登陆页面，可以配置一个 MvnConfig 拦截接口，让前端跳转到他们的登录页面，然后把登录请求发送给&#x2F;login这个内置接口就行了</p></blockquote><blockquote><p>当然也可以单独写一个登录页面放到后端的 <code>resources/static</code>里面，这样可以直接在 <code>config的loginProcessingUrl</code>中修改</p></blockquote><h2 id="2、自定义登录成功-x2F-失败处理器"><a href="#2、自定义登录成功-x2F-失败处理器" class="headerlink" title="2、自定义登录成功&#x2F;失败处理器"></a>2、自定义登录成功&#x2F;失败处理器</h2><blockquote><p>自定义处理器，这里写你登录失败的逻辑，返回给前端数据，让前端进行页面跳转</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.security.core.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/25 17:19</span></span><br><span class="line"><span class="comment"> * security认证失败逻辑，定义这个以后，security内置的页面跳转就失效了</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginFailureHandler</span> <span class="keyword">extends</span> <span class="title class_">SimpleUrlAuthenticationFailureHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAuthenticationFailure</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/json;charset=UTF-8&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;登录成功&quot;</span>);</span><br><span class="line">        <span class="comment">//这里写你登录失败的逻辑，返回给前端数据，让前端进行页面跳转</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>在<code>config</code>的<code>securityFilterChain</code>方法里面添加下面代码，<code>loginSuccessHandler</code>代码和上面一样</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用自定义的结果处理器，定义这个以后，security内置的页面跳转就失效了</span></span><br><span class="line">      .successHandler(loginSuccessHandler)</span><br><span class="line">      .failureHandler(loginFailureHandler)</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><blockquote><p>SpringSecurity 作为 Spring 的官方权限框架，肯定是最牛逼的，当然也最复杂，中小型项目还是 SaToken 来的省心呀，简单，几行代码实现认证、拦截、踢人、单点登录等，SpringSecurity 想要实现这些功能，SaToken 我也写了文章 <a href="https://blog.csdn.net/qq_48922459/article/details/127048667?spm=1001.2014.3001.5501">Springboot 使用 SaToken 进行登录认证、权限管理以及路由规则接口拦截</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringSecurity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 配置使用 RabbitMQ 并实现延时队列</title>
      <link href="/2022/10/08/Springboot%20%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8%20RabbitMQ%20%E5%B9%B6%E5%AE%9E%E7%8E%B0%E5%BB%B6%E6%97%B6%E9%98%9F%E5%88%97/"/>
      <url>/2022/10/08/Springboot%20%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8%20RabbitMQ%20%E5%B9%B6%E5%AE%9E%E7%8E%B0%E5%BB%B6%E6%97%B6%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p><code>RabbitMQ作用</code>：举几个例子，1、系统解耦，A系统无需关心B系统是否执行成功，无需等待B系统响应，直接把操作扔给mq就可以干其他事情了。2、系统使用高峰期，每秒产生10000条消息需要存储，一次性存入数据库恐怕不太行，所以先把数据发送到 RabbitMQ ，然后设置延时队列，每秒从队列取出1000条存入数据库，这样可以减少数据库压力。3、购买商品下订单以后，发送到延时队列，如果20分钟后没有付款，则从队列删除订单，也就是自动取消订单，如果支付了，则取出存入数据库，下单成功。</p></blockquote><hr><h1 id="一、安装-RabbitMQ"><a href="#一、安装-RabbitMQ" class="headerlink" title="一、安装 RabbitMQ"></a>一、安装 RabbitMQ</h1><h2 id="Windows安装"><a href="#Windows安装" class="headerlink" title="Windows安装"></a>Windows安装</h2><blockquote><p>太简单，自己bing一下</p></blockquote><h2 id="Linux安装"><a href="#Linux安装" class="headerlink" title="Linux安装"></a>Linux安装</h2><blockquote><p>rabbitmq需要erlang语言环境<br>更新 apt 库，安装 erlang 环境，然后执行 <code>erl</code> 查看是否安装成功</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install erlang</span><br><span class="line">erl</span><br></pre></td></tr></table></figure><blockquote><p>安装 rabbitmq</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install rabbitmq-server</span><br></pre></td></tr></table></figure><blockquote><p>查看 rabbitmq 运行状态</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status rabbitmq-server</span><br></pre></td></tr></table></figure><blockquote><p>开启图形化管理界面，然后就可以访问 ip:15672，默认账号密码是 guest</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_management</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/591ed9eec73a4047ab6be505924b17b1.png" alt="在这里插入图片描述"></p><blockquote><p>默认的guest用户是只能通过本机访问的，所以远程管理后台界面登录需要配置个用户，才能通过外网浏览器访问</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#账号root,密码root</span></span><br><span class="line">rabbitmqctl add_user root root</span><br><span class="line"><span class="comment"># 设置为管理员账户</span></span><br><span class="line">rabbitmqctl set_user_tags root administrator</span><br><span class="line"><span class="comment"># 分配所有权限</span></span><br><span class="line">rabbitmqctl set_permissions -p / root “.*” “.*” “.*”</span><br></pre></td></tr></table></figure><blockquote><p>开放防火墙 5672 和 15672 端口</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Debian/Ubuntu ufw</span></span><br><span class="line">ufw allow 5672</span><br><span class="line">ufw allow 15672</span><br><span class="line">ufw reload</span><br><span class="line"><span class="comment"># Debian/Ubuntu iptables（这个叼毛防火墙好麻烦，我没用过，不知道是不是这样）</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 5672 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 15672 -j ACCEPT</span><br><span class="line">iptables-restore</span><br><span class="line"><span class="comment"># CentOS</span></span><br><span class="line">firewall-cmd --zone=public --add-port=5672/tcp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=15672/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><hr><h1 id="二、新建项目"><a href="#二、新建项目" class="headerlink" title="二、新建项目"></a>二、新建项目</h1><blockquote><p>新建一个 provider 一个 consumer，两个 springboot 项目，都需要引入下面的依赖，或者新建的时候勾选自动添加 rabbitmq 的依赖<br><img src="https://img-blog.csdnimg.cn/5b1d3b9cfa884bed9a5f872a382279de.png" alt="在这里插入图片描述"></p></blockquote><h2 id="1、引入依赖"><a href="#1、引入依赖" class="headerlink" title="1、引入依赖"></a>1、引入依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.amqp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-rabbit-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2、配置-yml"><a href="#2、配置-yml" class="headerlink" title="2、配置 yml"></a>2、配置 yml</h2><blockquote><p>provider 和 consumer 都这样配置，端口改成不一样就行了</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.105</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">virtualHost:</span> <span class="string">/</span></span><br><span class="line">    <span class="comment"># 确认机制</span></span><br><span class="line">    <span class="attr">publisher-confirm-type:</span> <span class="string">correlated</span></span><br><span class="line">    <span class="comment"># 发布确认，如果不配置确认机制，发布确认也不用配置</span></span><br><span class="line">    <span class="attr">publisher-returns:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3、启动类开启-Rabbitmq-注解"><a href="#3、启动类开启-Rabbitmq-注解" class="headerlink" title="3、启动类开启 Rabbitmq 注解"></a>3、启动类开启 Rabbitmq 注解</h2><blockquote><p>consumer 和 provider 都需要这个注解</p></blockquote><p><img src="https://img-blog.csdnimg.cn/dc670a48054b470290031f581397aeef.png" alt="在这里插入图片描述"></p><h2 id="4、配置-provider-的-RabbitmqConfig"><a href="#4、配置-provider-的-RabbitmqConfig" class="headerlink" title="4、配置 provider 的 RabbitmqConfig"></a>4、配置 provider 的 RabbitmqConfig</h2><blockquote><p>大家可以根据 15672 那个图形化管理界面看看下面的一些概念</p><ul><li>Broker:它提供一种传输服务,它的角色就是维护一条从生产者到消费者的路线，保证数据能按照指定的方式进行传输</li><li>Exchange：消息交换机,它指定消息按什么规则,路由到哪个队列。</li><li>Queue:消息的载体,每个消息都会被投到一个或多个队列。</li><li>Binding:绑定，它的作用就是把exchange和queue按照路由规则绑定起来.</li><li>Routing Key:路由关键字,exchange根据这个关键字进行消息投递。</li><li>vhost:虚拟主机,一个broker里可以有多个vhost，用作不同用户的权限分离。</li><li>Producer:消息生产者,就是投递消息的程序.</li><li>Consumer:消息消费者,就是接受消息的程序.</li><li>Channel:消息通道,在客户端的每个连接里,可建立多个channel.</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> icu.xuyijie.provider.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.connection.CachingConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.connection.ConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.support.converter.Jackson2JsonMessageConverter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.support.converter.MessageConverter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.ConfigurableBeanFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CharacterEncodingFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/30 9:38</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RabbitmqConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_MESSAGE</span> <span class="operator">=</span> <span class="string">&quot;queue_message&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_ORDER</span> <span class="operator">=</span> <span class="string">&quot;queue_order&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCHANGE_A</span> <span class="operator">=</span> <span class="string">&quot;exchange_A&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * # 是通配符，可以匹配任意，如下面的可以匹配到 aa.bb.message.cc.dd</span></span><br><span class="line"><span class="comment">     * 还有 * 是匹配一个.里面的字符，如 .*.message 只能匹配 .aa.message，不能匹配 .aa.bb.message</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ROUTING_KEY_MESSAGE</span> <span class="operator">=</span> <span class="string">&quot;#.message.#&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ROUTING_KEY_ORDER</span> <span class="operator">=</span> <span class="string">&quot;#.order.#&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这个可以不写，写了的话，以这个为准，会覆盖掉 yml 的配置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ConnectionFactory <span class="title function_">connectionFactory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CachingConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CachingConnectionFactory</span>(<span class="string">&quot;192.168.0.105&quot;</span>, <span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        connectionFactory.setVirtualHost(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="comment">//确认机制</span></span><br><span class="line">        connectionFactory.setPublisherConfirmType(CachingConnectionFactory.ConfirmType.CORRELATED);</span><br><span class="line">        <span class="comment">//发布确认，如果不配置确认机制，发布确认也不用配置</span></span><br><span class="line">        connectionFactory.setPublisherReturns(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> connectionFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用 yml 连接的话这个可以不写，这个是配合 connectionFactory 的</span></span><br><span class="line"><span class="comment">     * RabbitMQ的使用入口。scope必须是prototype类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)</span></span><br><span class="line">    <span class="keyword">public</span> RabbitTemplate <span class="title function_">rabbitTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">RabbitTemplate</span> <span class="variable">template</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RabbitTemplate</span>(<span class="built_in">this</span>.connectionFactory());</span><br><span class="line">        template.setMessageConverter(<span class="built_in">this</span>.jsonMessageConverter());</span><br><span class="line">        template.setMandatory(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 序列化json</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MessageConverter <span class="title function_">jsonMessageConverter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonMessageConverter</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CharacterEncodingFilter <span class="title function_">characterEncodingFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        filter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        filter.setForceEncoding(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> filter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 声明交换机</span></span><br><span class="line"><span class="comment">     *  针对消费者配置</span></span><br><span class="line"><span class="comment">     *  设置交换机类型</span></span><br><span class="line"><span class="comment">     *  将队列绑定到交换机</span></span><br><span class="line"><span class="comment">     *    FanoutExchange: 将消息分发到所有的绑定队列，无routing key的概念</span></span><br><span class="line"><span class="comment">     *    HeadersExchange：通过添加属性key-value匹配</span></span><br><span class="line"><span class="comment">     *    DirectExchange: 按照routing key分发到指定队列</span></span><br><span class="line"><span class="comment">     *    TopicExchange: 多关键字匹配</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Exchange <span class="title function_">exchangeA</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//durable(true) 持久化，mq重启之后交换机还在</span></span><br><span class="line">        <span class="keyword">return</span> ExchangeBuilder.topicExchange(EXCHANGE_A).durable(<span class="literal">true</span>).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 声明QUEUE_MESSAGE队列</span></span><br><span class="line"><span class="comment">     * durable:是否持久化,默认是false,持久化队列：会被存储在磁盘上，当消息代理重启时仍然存在，暂存队列：当前连接有效</span></span><br><span class="line"><span class="comment">     * exclusive:默认也是false，只能被当前创建的连接使用，而且当连接关闭后队列即被删除。此参考优先级高于durable</span></span><br><span class="line"><span class="comment">     * autoDelete:是否自动删除，当没有生产者或者消费者使用此队列，该队列会自动删除。</span></span><br><span class="line"><span class="comment">     * 一般设置一下队列的持久化就好,其余两个就是默认false</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">queueMessage</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(QUEUE_MESSAGE, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 声明QUEUE_ORDER队列</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">queueOrder</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(QUEUE_ORDER);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列绑定交换机，指定routingKey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingQueueMessage</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queueMessage()).to(exchangeA()).with(ROUTING_KEY_MESSAGE).noargs();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列绑定交换机，指定routingKey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingQueueOrder</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queueOrder()).to(exchangeA()).with(ROUTING_KEY_ORDER).noargs();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5、provider-发送消息"><a href="#5、provider-发送消息" class="headerlink" title="5、provider 发送消息"></a>5、provider 发送消息</h2><blockquote><p>我们因为配置了确认机制，所以我们配置了回调方法，这里使用构造器注入 <code>rabbitTemplate</code>，如果不配置回调方法，则可以使用 <code>@Autowired</code> 注入，并且类无需实现 <code>RabbitTemplate.ConfirmCallback</code>，sendExchange 方法没有使用回调方法，使用回调方法的话需要像 sendCallback 方法一样多传一个值 correlationId</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> icu.xuyijie.provider.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> icu.xuyijie.provider.config.RabbitmqConfig;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.connection.CorrelationData;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/30 10:08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/provider&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProviderController</span> <span class="keyword">implements</span> <span class="title class_">RabbitTemplate</span>.ConfirmCallback &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 我们因为配置了确认机制，所以我们配置了回调方法，这里使用构造器注入 rabbitTemplate，如果不配置</span></span><br><span class="line"><span class="comment"> * 回调方法，则可以使用 <span class="doctag">@Autowired</span> 注入，并且类无需实现 RabbitTemplate.ConfirmCallback</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ProviderController</span><span class="params">(RabbitTemplate rabbitTemplate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rabbitTemplate = rabbitTemplate;</span><br><span class="line">        <span class="comment">//设置回调为当前类对象</span></span><br><span class="line">        <span class="built_in">this</span>.rabbitTemplate.setConfirmCallback(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/sendExchange&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendExchange</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//使用rabbitTemplate发送消息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;这是一条发送到exchangeA的消息&quot;</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 参数：</span></span><br><span class="line"><span class="comment">         * 1、交换机名称</span></span><br><span class="line"><span class="comment">         * 2、routingKey</span></span><br><span class="line"><span class="comment">         * 3、消息内容</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        rabbitTemplate.convertAndSend(RabbitmqConfig.EXCHANGE_A, <span class="string">&quot;a.message&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果使用回调方法，则需要多传一个参数 correlationId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/sendCallback&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendCallback</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;这是一条发送到exchangeA的消息&quot;</span>;</span><br><span class="line">        <span class="comment">//构建回调id为uuid</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">callBackId</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line">        <span class="type">CorrelationData</span> <span class="variable">correlationId</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorrelationData</span>(callBackId);</span><br><span class="line">        <span class="comment">//发送消息到消息队列</span></span><br><span class="line">        rabbitTemplate.convertAndSend(RabbitmqConfig.EXCHANGE_A, <span class="string">&quot;a.message&quot;</span>, message, correlationId);</span><br><span class="line">        System.out.println(<span class="string">&quot;发送回调id: &quot;</span> + callBackId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 消息回调确认方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> correlationData 请求数据对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ack 是否发送成功</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> s</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">confirm</span><span class="params">(CorrelationData correlationData, <span class="type">boolean</span> ack, String s)</span> &#123;</span><br><span class="line">        <span class="keyword">assert</span> correlationData != <span class="literal">null</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;这是回调方法打印的：回调id: &quot;</span> + correlationData.getId());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;这是回调方法打印的：回调message: &quot;</span> + correlationData.getFuture().get());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException | ExecutionException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ack) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;这是回调方法打印的：消息发送成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;消息发送失败&quot;</span> + s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="6、consumer-接收消息"><a href="#6、consumer-接收消息" class="headerlink" title="6、consumer 接收消息"></a>6、consumer 接收消息</h2><blockquote><p><code>@RabbitListener</code>就是监听的队列，可以监听多个</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> icu.xuyijie.consumer.consumer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.Channel;</span><br><span class="line"><span class="keyword">import</span> icu.xuyijie.consumer.config.RabbitmqConfig;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/30 10:10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReceiveHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(queues = &#123;&quot;queue_message&quot;, &quot;queue_order&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveMessage</span><span class="params">(Message message, Channel channel)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;接收 queue_message 和 queue_order 队列的消息 &quot;</span> + message);</span><br><span class="line">        System.out.println(<span class="string">&quot;对应Channel &quot;</span> + channel);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(queues = &#123;&quot;queue_order&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveOrder</span><span class="params">(Message message, Channel channel)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;接收 queue_order  队列的消息&quot;</span> + message);</span><br><span class="line">        System.out.println(<span class="string">&quot;对应Channel &quot;</span> + channel);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7、演示"><a href="#7、演示" class="headerlink" title="7、演示"></a>7、演示</h2><blockquote><p>我们直接调用 sendCallback 这个接口</p></blockquote><p><img src="https://img-blog.csdnimg.cn/c9561433f3eb47a7bbafcdbcec0f0877.png" alt="在这里插入图片描述"></p><blockquote><p>consumer 接收到消息</p></blockquote><p><img src="https://img-blog.csdnimg.cn/0b930cfa9df34dc0b3ea36ed5c4fc2ef.png" alt="在这里插入图片描述"></p><blockquote><p>provider 触发回调方法</p></blockquote><p><img src="https://img-blog.csdnimg.cn/f6aa192cdaf94979b85bf1b7db8756c9.png" alt="在这里插入图片描述"></p><hr><h1 id="三、延时队列"><a href="#三、延时队列" class="headerlink" title="三、延时队列"></a>三、延时队列</h1><h2 id="1、在-provider-的-RabbitmqConfig-中增加配置"><a href="#1、在-provider-的-RabbitmqConfig-中增加配置" class="headerlink" title="1、在 provider 的 RabbitmqConfig 中增加配置"></a>1、在 provider 的 RabbitmqConfig 中增加配置</h2><blockquote><p>增加了一个一个交换机、一个队列、一个路由键的配置，注意 delayQueue() 方法，我的注释有解释</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_DELAY</span> <span class="operator">=</span> <span class="string">&quot;queue_delay&quot;</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCHANGE_DELAY</span> <span class="operator">=</span> <span class="string">&quot;exchange_delay&quot;</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ROUTER_DELAY_KEY</span> <span class="operator">=</span> <span class="string">&quot;router_delay_key&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 延迟交换机</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="keyword">public</span> DirectExchange <span class="title function_">delayExchange</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DirectExchange</span>(EXCHANGE_DELAY);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 延迟队列</span></span><br><span class="line"><span class="comment">    * map 的设置意思是接收此队列的延迟消息需要监听 EXCHANGE_RECEIVE 队列，直接监听 QUEUE_DELAY 无法实现延时队列</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="keyword">public</span> Queue <span class="title function_">delayQueue</span><span class="params">()</span> &#123;</span><br><span class="line">       Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">       map.put(<span class="string">&quot;x-dead-letter-exchange&quot;</span>, EXCHANGE_A);</span><br><span class="line">       map.put(<span class="string">&quot;x-dead-letter-routing-key&quot;</span>, ROUTING_KEY_ORDER);</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(QUEUE_DELAY, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, map);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 给延迟队列绑定交换机</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="keyword">public</span> Binding <span class="title function_">delayBinding</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> BindingBuilder.bind(delayQueue()).to(delayExchange()).with(ROUTER_DELAY_KEY);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="2、在-provider-增加一个接口"><a href="#2、在-provider-增加一个接口" class="headerlink" title="2、在 provider 增加一个接口"></a>2、在 provider 增加一个接口</h2><blockquote><p>发送消息到我们刚刚配置的延时交换机</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 给延迟队列发送消息</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/sendDelay&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendDelay</span><span class="params">()</span>&#123;</span><br><span class="line">       rabbitTemplate.convertAndSend(RabbitmqConfig.EXCHANGE_DELAY, RabbitmqConfig.ROUTER_DELAY_KEY, <span class="string">&quot;这是一条延时队列的消息&quot;</span>, message -&gt; &#123;</span><br><span class="line">           message.getMessageProperties().setExpiration(<span class="string">&quot;3000&quot;</span>);</span><br><span class="line">           <span class="keyword">return</span> message;</span><br><span class="line">       &#125;, <span class="keyword">new</span> <span class="title class_">CorrelationData</span>(UUID.randomUUID().toString()));</span><br><span class="line">       System.out.println(<span class="string">&quot;延时队列发送成功&quot;</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="3、consumer-接收延时消息"><a href="#3、consumer-接收延时消息" class="headerlink" title="3、consumer 接收延时消息"></a>3、consumer 接收延时消息</h2><blockquote><p>注意，上面我们把延时消息发送到了延时队列 EXCHANGE_DELAY，但是我们接收，要监听 <code>RabbitmqConfig</code>中 delayQueue() 方法 配置的 EXCHANGE_A，路由键为 ROUTING_KEY_ORDER，也就是说无需改动 consumer ，consumer 的两个方法都能收到延时消息，因为他们都监听了 ROUTING_KEY_ORDER 对应的队列</p></blockquote><p>直接调用 sendDelay 方法，2次（因为两个方法都监听 queue_order，所以他们会交替获得消息）</p><p><img src="https://img-blog.csdnimg.cn/d6fd14b2e3e54e03a4808a2aa888b4d3.png" alt="在这里插入图片描述"><br>3秒后 consumer 的两个方法都能接收到延时消息</p><p><img src="https://img-blog.csdnimg.cn/0ea4e60d905042528c5264f855f402df.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 配置使用 Elasticsearch</title>
      <link href="/2022/09/29/Springboot%20%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8%20Elasticsearch/"/>
      <url>/2022/09/29/Springboot%20%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8%20Elasticsearch/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p><code>elasticsearch</code>：就是一个很快很快的搜索引擎，使用场景就是像网易词典这种，输入几个相关文字，就可以从几百万个单词中瞬间找到匹配的翻译，这种海量数据的模糊搜索在关系型数据库中是不可能的，所以这时候就要用到elasticsearch了，但是它和 MongoDB 这种文档型数据库有什么区别，有没有懂的可以在评论区教教我，我是没有搞懂</p></blockquote><hr><h1 id="一、安装Elasticsearch"><a href="#一、安装Elasticsearch" class="headerlink" title="一、安装Elasticsearch"></a>一、安装Elasticsearch</h1><h2 id="1、Windows安装"><a href="#1、Windows安装" class="headerlink" title="1、Windows安装"></a>1、Windows安装</h2><blockquote><p>Windows安装比较简单，官网下载压缩包，解压出来，然后里面有个 bin 目录，里面有个<code>elasticsearch.bat</code>，双击，就运行起来了，然后在浏览器输入<code>localhost:9200</code>验证，成功会返回下面的图片</p></blockquote><h2 id="2、Linux安装"><a href="#2、Linux安装" class="headerlink" title="2、Linux安装"></a>2、Linux安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入公钥，如果报错gpg，则先apt install gpg一下就可以了，如果报错sudo，则去掉命令中的sudo</span></span><br><span class="line">wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo gpg --dearmor -o /usr/share/keyrings/elasticsearch-keyring.gpg</span><br><span class="line"><span class="comment"># 添加elasticsearch到仓库</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [signed-by=/usr/share/keyrings/elasticsearch-keyring.gpg] https://artifacts.elastic.co/packages/8.x/apt stable main&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/elastic-8.x.list</span><br><span class="line"><span class="comment"># 更新仓库，安装</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install elasticsearch</span><br><span class="line"><span class="comment"># 开启外网访问，把这个文件里的 network.host 改为 0.0.0.0</span></span><br><span class="line"><span class="comment"># elasticsearch版本 7.0、8.0 以上还需要修改 xpack-security.enable 为 false，如果不使用 ssl，也设置为 false，如下图</span></span><br><span class="line">sudo vim /etc/elasticsearch/elasticsearch.yml</span><br><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line">sudo systemctl start elasticsearch.service</span><br><span class="line"><span class="comment"># 设置开机启动（可选）</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> elasticsearch.service</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/0a6849f927014a11814e0c54788f02ee.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/fc354c7212b041d1bf56be7e8ac7c1e3.png" alt="在这里插入图片描述"></p><p>不要忘记开放防火墙端口，控制台输入<code>curl -X GET &quot;localhost:9200/&quot;</code>或浏览器访问 <code>IP:9200</code></p><p><img src="https://img-blog.csdnimg.cn/27afbe9e882f4c6fa7f762513a23ae49.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/d50e6c08ce8c4e62b5ea12c32925cb7b.png" alt="在这里插入图片描述"></p><blockquote><p>开放防火墙 9200 端口</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Debian/Ubuntu ufw</span></span><br><span class="line">ufw allow 9200</span><br><span class="line">ufw reload</span><br><span class="line"><span class="comment"># Debian/Ubuntu iptables（这个叼毛防火墙好麻烦，我没用过，不知道是不是这样）</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 9200 -j ACCEPT</span><br><span class="line">iptables-restore</span><br><span class="line"><span class="comment"># CentOS</span></span><br><span class="line">firewall-cmd --zone=public --add-port=9200/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><h1 id="二、开始写代码"><a href="#二、开始写代码" class="headerlink" title="二、开始写代码"></a>二、开始写代码</h1><blockquote><p>先给你们看一下项目结构</p></blockquote><p><img src="https://img-blog.csdnimg.cn/6e88ddbcd6454373a95addd1182643f3.png" alt="在这里插入图片描述"></p><h2 id="1、引入依赖"><a href="#1、引入依赖" class="headerlink" title="1、引入依赖"></a>1、引入依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-elasticsearch<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2、配置文件"><a href="#2、配置文件" class="headerlink" title="2、配置文件"></a>2、配置文件</h2><p><code>两种方式选一种就可以了</code></p><h3 id="1-yml-方式"><a href="#1-yml-方式" class="headerlink" title="(1) yml 方式"></a>(1) yml 方式</h3><blockquote><p>默认的 elasticsearch 不需要密码登录，所以不需要写</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">elasticsearch:</span></span><br><span class="line">  <span class="comment"># elasticsearch地址</span></span><br><span class="line">    <span class="attr">uris:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.105</span><span class="string">:9200</span></span><br><span class="line"><span class="comment">#    username: elasticsearch</span></span><br><span class="line"><span class="comment">#    password: 3ve6fT0TQreeQslzkiojCA</span></span><br><span class="line">    <span class="attr">connection-timeout:</span> <span class="number">30000</span></span><br><span class="line">    <span class="attr">socket-timeout:</span> <span class="number">50000</span></span><br><span class="line">    <span class="attr">socket-keep-alive:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="1-api-方式"><a href="#1-api-方式" class="headerlink" title="(1) api 方式"></a>(1) api 方式</h3><blockquote><p>新建<code>ElasticSearchConfig</code>，这里面的配置会覆盖掉<code>yml</code>里面的</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.elasticsearchdemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch.ElasticsearchClient;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.json.jackson.JacksonJsonpMapper;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.transport.ElasticsearchTransport;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.transport.rest_client.RestClientTransport;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpHost;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.RestClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 17:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ElasticSearchConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ElasticsearchClient <span class="title function_">elasticsearchClient</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">RestClient</span> <span class="variable">client</span> <span class="operator">=</span> RestClient.builder(<span class="keyword">new</span> <span class="title class_">HttpHost</span>(<span class="string">&quot;192.168.0.105&quot;</span>, <span class="number">9200</span>))</span><br><span class="line">                .setRequestConfigCallback(requestConfigBuilder -&gt; requestConfigBuilder</span><br><span class="line">                        .setConnectTimeout(<span class="number">30000</span>)</span><br><span class="line">                        .setSocketTimeout(<span class="number">50000</span>))</span><br><span class="line">                        .build();</span><br><span class="line">        <span class="type">ElasticsearchTransport</span> <span class="variable">transport</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RestClientTransport</span>(client, <span class="keyword">new</span> <span class="title class_">JacksonJsonpMapper</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ElasticsearchClient</span>(transport);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="3、新建-User-实体类"><a href="#3、新建-User-实体类" class="headerlink" title="3、新建 User 实体类"></a>3、新建 User 实体类</h2><blockquote><p><code>id</code>这个字段一定要有，作为主键索引，这个<code>@Document</code>里面的<code>indexName</code>就相当于mysql里面的表名，在elasticsearch里面叫索引</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.elasticsearchdemo.document;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.annotation.Id;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.annotations.Document;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 17:58</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Document(indexName = &quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="4、新建-UserRepository"><a href="#4、新建-UserRepository" class="headerlink" title="4、新建 UserRepository"></a>4、新建 UserRepository</h2><blockquote><p>这里就和 mybatis 一样了，继承一下可以使用内置方法</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.elasticsearchdemo.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Pageable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.annotations.Query;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.repository.ElasticsearchRepository;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.elasticsearchdemo.document.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 18:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">ElasticsearchRepository</span>&lt;User, String&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5、新建-Controller"><a href="#5、新建-Controller" class="headerlink" title="5、新建 Controller"></a>5、新建 Controller</h2><blockquote><p>下面我把这3个controller的代码放出来，方法很简单，都是增删改查，都有写注释，等下测试用</p></blockquote><p><img src="https://img-blog.csdnimg.cn/02140214eb2b491db530d6098f5f056c.png" alt="在这里插入图片描述"><br><code>DocumentTestController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.elasticsearchdemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch.ElasticsearchClient;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch._types.SortOrder;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch.core.*;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch.core.bulk.BulkOperation;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch.core.search.Hit;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.transport.endpoints.BooleanResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.elasticsearchdemo.document.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 18:02</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/documentTest&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DocumentTestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ElasticsearchClient elasticsearchClient;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DocumentTestController</span><span class="params">(ElasticsearchClient elasticsearchClient)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.elasticsearchClient = elasticsearchClient;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/insert&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;user1&quot;</span>, <span class="string">&quot;男&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="type">IndexResponse</span> <span class="variable">indexResponse</span> <span class="operator">=</span> elasticsearchClient.index(i -&gt; i</span><br><span class="line">                .index(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                <span class="comment">//设置id</span></span><br><span class="line">                .id(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">                <span class="comment">//传入user对象</span></span><br><span class="line">                .document(user));</span><br><span class="line">        System.out.println(indexResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        UpdateResponse&lt;User&gt; updateResponse = elasticsearchClient.update(u -&gt; u</span><br><span class="line">                        .index(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                        .id(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">                        .doc(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;user2&quot;</span>, <span class="string">&quot;男&quot;</span>, <span class="number">19</span>))</span><br><span class="line">                , User.class);</span><br><span class="line">        System.out.println(updateResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/isExists&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">isExists</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">BooleanResponse</span> <span class="variable">indexResponse</span> <span class="operator">=</span> elasticsearchClient.exists(e -&gt; e.index(<span class="string">&quot;user&quot;</span>).id(<span class="string">&quot;1&quot;</span>));</span><br><span class="line">        System.out.println(indexResponse.value());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/get&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">get</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        GetResponse&lt;User&gt; getResponse = elasticsearchClient.get(g -&gt; g</span><br><span class="line">                        .index(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                        .id(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">                , User.class</span><br><span class="line">        );</span><br><span class="line">        System.out.println(getResponse.source());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">DeleteResponse</span> <span class="variable">deleteResponse</span> <span class="operator">=</span> elasticsearchClient.delete(d -&gt; d</span><br><span class="line">                .index(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                .id(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">        );</span><br><span class="line">        System.out.println(deleteResponse.id());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/insertMultiple&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertMultiple</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        userList.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;10&quot;</span>, <span class="string">&quot;user1&quot;</span>, <span class="string">&quot;男&quot;</span>, <span class="number">18</span>));</span><br><span class="line">        userList.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;11&quot;</span>, <span class="string">&quot;user2&quot;</span>, <span class="string">&quot;男&quot;</span>,<span class="number">19</span>));</span><br><span class="line">        userList.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;12&quot;</span>, <span class="string">&quot;user3&quot;</span>, <span class="string">&quot;女&quot;</span>,<span class="number">20</span>));</span><br><span class="line">        userList.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;13&quot;</span>, <span class="string">&quot;user4&quot;</span>, <span class="string">&quot;女&quot;</span>,<span class="number">21</span>));</span><br><span class="line">        userList.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;14&quot;</span>, <span class="string">&quot;user5&quot;</span>, <span class="string">&quot;女&quot;</span>,<span class="number">22</span>));</span><br><span class="line">        List&lt;BulkOperation&gt; bulkOperationArrayList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//遍历添加到bulk中</span></span><br><span class="line">        <span class="keyword">for</span>(User user : userList)&#123;</span><br><span class="line">            bulkOperationArrayList.add(BulkOperation.of(o-&gt;o.index(i-&gt;i.document(user))));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">BulkResponse</span> <span class="variable">bulkResponse</span> <span class="operator">=</span> elasticsearchClient.bulk(b -&gt; b.index(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                .operations(bulkOperationArrayList));</span><br><span class="line">        System.out.println(bulkResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getComplex&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getComplex</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        SearchResponse&lt;User&gt; search = elasticsearchClient.search(s -&gt; s</span><br><span class="line">                .index(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                <span class="comment">//查询name字段包含hello的document(不使用分词器精确查找)</span></span><br><span class="line">                .query(q -&gt; q</span><br><span class="line">                        .term(t -&gt; t</span><br><span class="line">                                .field(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">                                .value(v -&gt; v.stringValue(<span class="string">&quot;hello&quot;</span>))</span><br><span class="line">                        ))</span><br><span class="line">                <span class="comment">//分页查询，从第0页开始查询3个document</span></span><br><span class="line">                .from(<span class="number">0</span>)</span><br><span class="line">                .size(<span class="number">3</span>)</span><br><span class="line">                <span class="comment">//按age降序排序</span></span><br><span class="line">                .sort(f-&gt;f.field(o-&gt;o.field(<span class="string">&quot;age&quot;</span>).order(SortOrder.Desc))),User.class</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">for</span> (Hit&lt;User&gt; hit : search.hits().hits()) &#123;</span><br><span class="line">            System.out.println(hit.source());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>IndexTestController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.elasticsearchdemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch.ElasticsearchClient;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch.indices.CreateIndexResponse;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch.indices.DeleteIndexResponse;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch.indices.GetIndexResponse;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.transport.endpoints.BooleanResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 17:52</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Index的增删查，Index类似于数据库名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/indexTest&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexTestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ElasticsearchClient elasticsearchClient;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">IndexTestController</span><span class="params">(ElasticsearchClient elasticsearchClient)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.elasticsearchClient = elasticsearchClient;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/insert&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">CreateIndexResponse</span> <span class="variable">createIndexResponse</span> <span class="operator">=</span> elasticsearchClient.indices().create(c -&gt; c.index(<span class="string">&quot;user&quot;</span>));</span><br><span class="line">        System.out.println(createIndexResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/get&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">get</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">GetIndexResponse</span> <span class="variable">getIndexResponse</span> <span class="operator">=</span> elasticsearchClient.indices().get(c -&gt; c.index(<span class="string">&quot;user&quot;</span>));</span><br><span class="line">        System.out.println(getIndexResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">DeleteIndexResponse</span> <span class="variable">deleteIndexResponse</span> <span class="operator">=</span> elasticsearchClient.indices().delete(c -&gt; c.index(<span class="string">&quot;user&quot;</span>));</span><br><span class="line">        System.out.println(deleteIndexResponse.acknowledged());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/isExists&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">isExists</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">BooleanResponse</span> <span class="variable">booleanResponse</span> <span class="operator">=</span> elasticsearchClient.indices().exists(c -&gt; c.index(<span class="string">&quot;user&quot;</span>));</span><br><span class="line">        System.out.println(booleanResponse.value());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>UserController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.elasticsearchdemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.elasticsearchdemo.document.User;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.elasticsearchdemo.repository.UserRepository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 18:28</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserController</span><span class="params">(UserRepository userRepository)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.userRepository = userRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/insert&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">insert</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;徐一杰&quot;</span>);</span><br><span class="line">        user.setSex(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">22</span>);</span><br><span class="line">        userRepository.save(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userRepository.getUserById(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        userRepository.delete(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 局部更新</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userRepository.getUserById(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;泡泡&quot;</span>);</span><br><span class="line">        userRepository.save(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/get&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userRepository.getUserById(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/findByQuery&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Page&lt;User&gt; <span class="title function_">findByQuery</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Pageable</span> <span class="variable">pageable</span> <span class="operator">=</span> PageRequest.of(<span class="number">1</span>,<span class="number">20</span>, Sort.by(<span class="keyword">new</span> <span class="title class_">Sort</span>.Order(Sort.Direction.ASC, <span class="string">&quot;age&quot;</span>)));</span><br><span class="line">        Page&lt;User&gt; userList = userRepository.findByName(<span class="string">&quot;1&quot;</span>, pageable);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="6、开始测试"><a href="#6、开始测试" class="headerlink" title="6、开始测试"></a>6、开始测试</h2><h3 id="1-启动项目"><a href="#1-启动项目" class="headerlink" title="(1) 启动项目"></a>(1) 启动项目</h3><blockquote><p>可以看到，我们的<code>user</code>索引自动添加到<code>elasticsearch</code>里面了</p></blockquote><p><img src="https://img-blog.csdnimg.cn/bb3919ef2a244a3c9c035210f8cd320a.png" alt="在这里插入图片描述"></p><h3 id="2-查询索引"><a href="#2-查询索引" class="headerlink" title="(2) 查询索引"></a>(2) 查询索引</h3><blockquote><p>我们调用 <code>http://127.0.0.1:8081/indexTest/get</code>，可以看到，控制台打印出 user 的信息</p></blockquote><p><img src="https://img-blog.csdnimg.cn/ae74bbc4b3b94462b771164a0852355c.png" alt="在这里插入图片描述"></p><blockquote><p><code>IndexTestController</code>里面的方法都是操作索引的，删除、新增等</p></blockquote><h3 id="3-新增数据"><a href="#3-新增数据" class="headerlink" title="(3) 新增数据"></a>(3) 新增数据</h3><blockquote><p>我们先调用<code>http://127.0.0.1:8081/documentTest/insert</code>，往<code>user</code>里面添加一条数据，这是<code>DocumentTestController</code>里面的方法，这个controller里面的方法可以操作没有继承 <code>ElasticsearchRepository</code> 的实体类</p></blockquote><p><img src="https://img-blog.csdnimg.cn/7e8208f32a5a4775a484b2b9ff062814.png" alt="在这里插入图片描述"></p><blockquote><p>下面我们查询出来我们刚刚插入的数据，这次我们调用 <code>repository</code>里面的内置方法，<code>http://127.0.0.1:8081/user/get</code>，查询成功</p></blockquote><p><img src="https://img-blog.csdnimg.cn/3be22e490e124316904ebfe18951cb70.png" alt="在这里插入图片描述"></p><hr><h2 id="7、复杂查询条件"><a href="#7、复杂查询条件" class="headerlink" title="7、复杂查询条件"></a>7、复杂查询条件</h2><blockquote><p>对于多条件查询，我们可以使用<code>ElasticsearchRepository</code>自带的<code>衍生查询</code>，关键词 find by 等等，有代码提示</p></blockquote><p><img src="https://img-blog.csdnimg.cn/84a7f95839f44627a3a427104b22fea6.png" alt="在这里插入图片描述"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.elasticsearchdemo.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Pageable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.annotations.Query;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.repository.ElasticsearchRepository;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.elasticsearchdemo.document.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 18:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">ElasticsearchRepository</span>&lt;User, String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 衍生查询，直接指定查询方法名称便可查询，无需进行实现</span></span><br><span class="line"><span class="comment">     * 以下为根据用户名字和年龄不超过多少，并按年龄正序排列的例子</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findUsersByNameAndAgeBeforeOrderByAgeAsc</span><span class="params">(String name, <span class="type">int</span> age)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 衍生查询，根据id查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    User <span class="title function_">getUserById</span><span class="params">(String id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用<span class="doctag">@Query</span>注解可以用Elasticsearch的DSL语句进行查询</span></span><br><span class="line"><span class="comment">     * 根据名字查找（分页）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageable</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Query(&quot;&#x27;&#123;\&quot;bool\&quot; : &#123;\&quot;must\&quot; : &#123;\&quot;field\&quot; : &#123;\&quot;name\&quot; : \&quot;?0\&quot;&#125;&#125;&#125;&#125;&#x27;&quot;)</span></span><br><span class="line">    Page&lt;User&gt; <span class="title function_">findByName</span><span class="params">(String name, Pageable pageable)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>然后还有在<code>DocumentTestController </code>里面的<code>getComplex</code>方法，也可以和构建复杂条件</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/getComplex&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getComplex</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        SearchResponse&lt;User&gt; search = elasticsearchClient.search(s -&gt; s</span><br><span class="line">                .index(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                <span class="comment">//查询name字段包含hello的document(不使用分词器精确查找)</span></span><br><span class="line">                .query(q -&gt; q</span><br><span class="line">                        .term(t -&gt; t</span><br><span class="line">                                .field(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">                                .value(v -&gt; v.stringValue(<span class="string">&quot;hello&quot;</span>))</span><br><span class="line">                        ))</span><br><span class="line">                <span class="comment">//分页查询，从第0页开始查询3个document</span></span><br><span class="line">                .from(<span class="number">0</span>)</span><br><span class="line">                .size(<span class="number">3</span>)</span><br><span class="line">                <span class="comment">//按age降序排序</span></span><br><span class="line">                .sort(f-&gt;f.field(o-&gt;o.field(<span class="string">&quot;age&quot;</span>).order(SortOrder.Desc))),User.class</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">for</span> (Hit&lt;User&gt; hit : search.hits().hits()) &#123;</span><br><span class="line">            System.out.println(hit.source());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 使用 Dubbo3 并以 zookeeper 为注册中心</title>
      <link href="/2022/09/29/Springboot%20%E4%BD%BF%E7%94%A8%20Dubbo3%20%E5%B9%B6%E4%BB%A5%20zookeeper%20%E4%B8%BA%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/"/>
      <url>/2022/09/29/Springboot%20%E4%BD%BF%E7%94%A8%20Dubbo3%20%E5%B9%B6%E4%BB%A5%20zookeeper%20%E4%B8%BA%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p><code>dubbo</code>：简单来讲就是一个 RPC 调用框架，类似于 SpringCloud + OpenFeign，支持 nacos、zookeeper 等注册中心，拥有图形界面，可使用界面管理 zookeeper 的节点信息<br><code>zookeeper</code>：是一个微服务注册中心，将一个个 Java 项目注册到 zookeeper，然后使用 openfeign 或者 dubbo 就可以实现这些 Java 项目之间的互相调用</p></blockquote><hr><p><code>zookeeper 可以连接线上的，也可以安装在本地，windows 安装很简单，你们自己去搜，Linux 安装我这里还有另一篇文章，一个 apt 命令的事情，无需配置环境变量什么的</code></p><p><a href="https://blog.csdn.net/qq_48922459/article/details/127105615?spm=1001.2014.3001.5502">Linux 使用 apt 安装 zookeeper</a></p><h1 id="一、构建微服务项目"><a href="#一、构建微服务项目" class="headerlink" title="一、构建微服务项目"></a>一、构建微服务项目</h1><p>&#x3D;&#x3D;一定要选择 Springboot 3.0 以下的版本，和 jdk 14以下的版本，高于等于3.0和14 dubbo3 和 zookeeper 支持不好&#x3D;&#x3D;</p><h2 id="1、新建项目"><a href="#1、新建项目" class="headerlink" title="1、新建项目"></a>1、新建项目</h2><blockquote><p>最基础的结构，构建方法是，先 new 一个 DubboDemo 的 Springboot 项目，不需要勾选任何依赖</p></blockquote><p><img src="https://img-blog.csdnimg.cn/0e48521c5baf411d821d798051ffdf4b.png" alt="在这里插入图片描述"></p><blockquote><p>然后右键 DubboDemo ，new 一个 module，也选择 Springboot 项目，勾选一个 web 依赖即可，把 api 、zookeeperConsumer、zookeeperProvider都 new 出来</p></blockquote><p><img src="https://img-blog.csdnimg.cn/dcb63b1ada04451ca977fccf286a2c38.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/2b76e66eb101402fa1c8d924bdcdcc9b.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/520b26889ba34339be17b1b4f739bd01.png" alt="在这里插入图片描述"></p><h2 id="2、修改父POM"><a href="#2、修改父POM" class="headerlink" title="2、修改父POM"></a>2、修改父POM</h2><blockquote><p>也就是把 DubboDemo 的 POM的 dependency 全部删掉，添加<code>&lt;packaging&gt;pom&lt;/packaging&gt;</code>和<code>&lt;modules&gt;&lt;/modules&gt;</code></p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>icu.xuyijie<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>DubboDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>DubboDemo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>DubboDemo<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>zookeeperConsumer<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>zookeeperProvider<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>api<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3、修改子POM"><a href="#3、修改子POM" class="headerlink" title="3、修改子POM"></a>3、修改子POM</h2><blockquote><p>把子模块的 POM 中的 <code>&lt;parent&gt;&lt;/parent&gt;</code>都换成下面这个就行了，注意 <code>icu.xuyijie</code>是我的包名，以你们的项目为准，这样一个基础的微服务项目就搭建好了</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>icu.xuyijie<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>DubboDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="二、写代码"><a href="#二、写代码" class="headerlink" title="二、写代码"></a>二、写代码</h1><h2 id="1、引入依赖"><a href="#1、引入依赖" class="headerlink" title="1、引入依赖"></a>1、引入依赖</h2><blockquote><p>在 zookeeperCondumer 和 zookeeperProvider 这两个模块的 pom 里引入下面两个依赖</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-dependencies-zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2、api-模块"><a href="#2、api-模块" class="headerlink" title="2、api 模块"></a>2、api 模块</h2><blockquote><p>这个模块什么都不用改，直接新建一个 Service 里面写个方法就行了</p></blockquote><p><img src="https://img-blog.csdnimg.cn/a21b0c71bd5a447e80849aacfb732e23.png" alt="在这里插入图片描述"></p><h2 id="3、zookeeperProvider-模块"><a href="#3、zookeeperProvider-模块" class="headerlink" title="3、zookeeperProvider 模块"></a>3、zookeeperProvider 模块</h2><blockquote><p>在 pom 里添加一下对 api 模块的依赖，这样我们就可以注入 api 模块里的 service 了，zookeeperConsumer 的 pom 也要引入 api 模块</p></blockquote><p><img src="https://img-blog.csdnimg.cn/b9174f34f379419b93a040f5bfddd811.png" alt="在这里插入图片描述"></p><blockquote><p>修改 yml 配置文件</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">dubbo:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="comment"># 注册到 zookeeper 里面后显示的服务名称</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dubbo-springboot-demo-provider</span></span><br><span class="line">  <span class="comment"># 远程调用协议</span></span><br><span class="line">  <span class="attr">protocol:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dubbo</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">-1</span></span><br><span class="line">  <span class="comment"># 连接 zookeeper</span></span><br><span class="line">  <span class="attr">registry:</span></span><br><span class="line">    <span class="attr">id:</span> <span class="string">zk-registry</span></span><br><span class="line">    <span class="attr">address:</span> <span class="string">zookeeper://192.168.0.105:2181</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">parameters:</span></span><br><span class="line">      <span class="attr">blockUntilConnectedWait:</span> <span class="number">250</span></span><br><span class="line">  <span class="attr">config-center:</span></span><br><span class="line">    <span class="attr">address:</span> <span class="string">zookeeper://192.168.0.105:2181</span></span><br><span class="line">  <span class="attr">metadata-report:</span></span><br><span class="line">    <span class="attr">address:</span> <span class="string">zookeeper://192.168.0.105:2181</span></span><br></pre></td></tr></table></figure><blockquote><p>写 ServiceImpl ，实现方法，看见没有，我们引入的 api 模块，可以直接注入到我们的 provider 模块中，记得要用 <code>@DubboService</code> 替换@Service注解，这个注解代表我们的这个 impl 是一个远程服务提供者</p></blockquote><p><img src="https://img-blog.csdnimg.cn/649ff9e7e0fe4c74a10abc62efda8ec1.png" alt="在这里插入图片描述"></p><blockquote><p>启动类增加<code>@EnableDubbo</code>注解</p></blockquote><p><img src="https://img-blog.csdnimg.cn/3d8cef27d8ff4f758d404c67d34484f8.png" alt="在这里插入图片描述"></p><h2 id="4、zookeeperConsumer-模块"><a href="#4、zookeeperConsumer-模块" class="headerlink" title="4、zookeeperConsumer 模块"></a>4、zookeeperConsumer 模块</h2><blockquote><p>引入 api 模块依赖，启动类增加<code>@EnableDubbo</code>注解，然后 yml 配置文件和 provider 一样，就是需要改个 application-name，和 provider 的不一样就可以了</p></blockquote><p><img src="https://img-blog.csdnimg.cn/052fe45bbb5147408b267ebbbcc2377e.png" alt="在这里插入图片描述"></p><blockquote><p>然后代码只需要写一个 controller 就行了，注入 api 模块的 Service，用<code>@DubboReference</code>注解，这个注解代表这个 service 是一个远程服务，需要使用 dubbo 的 RPC 进行调用</p></blockquote><p><img src="https://img-blog.csdnimg.cn/6c15a7a755d842e49348fd0452f4f3ad.png" alt="在这里插入图片描述"></p><hr><h1 id="三、开始测试"><a href="#三、开始测试" class="headerlink" title="三、开始测试"></a>三、开始测试</h1><blockquote><p>启动 zookeeperProvider 和 zookeeperConsumer 两个模块</p></blockquote><p><img src="https://img-blog.csdnimg.cn/16f0505bec1a43f381474a02d8b17054.png" alt="在这里插入图片描述"></p><blockquote><p>浏览器请求我们的 zookeeperConsumer 的 controller</p></blockquote><p><img src="https://img-blog.csdnimg.cn/fd1e4175b6ff4b39bfd5fa597e342d9d.png" alt="在这里插入图片描述"></p><blockquote><p>发现在 zookeeperProvider 的控制台中打印了下面的文字，说明远程调用成功</p></blockquote><p><img src="https://img-blog.csdnimg.cn/0b40e7c508814e6c9b2eeae067a32b1e.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>我的本地没有安装 Dubbo 的图形界面，所以没法给你们展示注册的服务信息，后续会写 dubbo + nacos 注册中心，nacos 自带图形界面，到时再仔细唠唠</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> zookeeper </tag>
            
            <tag> Dubbo </tag>
            
            <tag> 微服务 </tag>
            
            <tag> RPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 使用 apt 安装 zookeeper</title>
      <link href="/2022/09/29/Linux%20%E4%BD%BF%E7%94%A8%20apt%20%E5%AE%89%E8%A3%85%20zookeeper/"/>
      <url>/2022/09/29/Linux%20%E4%BD%BF%E7%94%A8%20apt%20%E5%AE%89%E8%A3%85%20zookeeper/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>zookeeper</code>：是一个微服务注册中心，将一个个 Java 项目注册到 zookeeper，然后使用 openfeign 或者 dubbo 就可以实现这些 Java 项目之间的互相调用。</p><blockquote><p>相较于去下载 zookeeper.tar 压缩包的方式来安装，使用 apt 安装的好处就是，方便，只需一个命令，而且安装以后无需配置环境变量</p></blockquote><p><code>本教程用 Debian11 来演示，适用于 Ubuntu 系的全部系统，CentOS 系统将 apt 命令换为 yum 即可，或者 </code>yum install apt<code>就可以使用 apt 了</code></p><hr><h1 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h1><blockquote><p>首先你的 Linux 要有 jdk 环境，没有的要装一下，还是一样，一句命令，无需配置环境变量<br>注意：Debian11 的仓库只有 jdk 11 和 17，所以想安装 1.8 需要手动下载压缩包，配置环境变量，11 和 17 并不影响 zookeeper 的正常启动，只是有些小瑕疵</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install openjdk-17-jdk</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install zookeeper</span><br></pre></td></tr></table></figure><p><code>安装完成后，zookeeper 的配置文件在 /etc/zookeeper/conf 这个文件夹下的 zoo.cfg ，安装完成后不需要修改配置文件即可使用</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@debian:/usr/share/zookeeper/bin<span class="comment"># cd /etc/zookeeper/conf</span></span><br><span class="line">root@debian:/etc/zookeeper/conf<span class="comment"># ls</span></span><br><span class="line">configuration.xsl  environmentlog4j.properties  myidzoo.cfg</span><br><span class="line">root@debian:/etc/zookeeper/conf<span class="comment"># vim zoo.cfg </span></span><br></pre></td></tr></table></figure><blockquote><p>开放防火墙 2181 端口</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Debian/Ubuntu ufw</span></span><br><span class="line">ufw allow 2181</span><br><span class="line">ufw reload</span><br><span class="line"><span class="comment"># Debian/Ubuntu iptables（这个叼毛防火墙好麻烦，我没用过，不知道是不是这样）</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 2181 -j ACCEPT</span><br><span class="line">iptables-restore</span><br><span class="line"><span class="comment"># CentOS</span></span><br><span class="line">firewall-cmd --zone=public --add-port=2181/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><hr><h1 id="二、启动"><a href="#二、启动" class="headerlink" title="二、启动"></a>二、启动</h1><p><code>zookeeper 的启动脚本在 /usr/share/zookeeper/bin 这个文件夹下的 zkServer.sh ，我们来启动，启动之前请确保你对这个文件有足够权限，如果提示没有权限，运行</code> chmod 775 zkServer.sh <code>即可</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/share/zookeeper/bin/</span><br><span class="line">sh zkServer.sh start</span><br><span class="line"><span class="comment"># 停止命令：sh zkServer.sh stop</span></span><br><span class="line"><span class="comment"># 重启命令：sh zkServer.sh restart</span></span><br><span class="line"><span class="comment"># 查看状态: sh zkServer.sh status</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;注意：如果你是高版本的 Ubuntu 或者 Debian 系统（比如我的 Debian11），运行 zkServer 肯定会报下面这个错，因为我们的系统执行脚本默认的使用的是 dash，zookeeper用的是bash，所以要运行一下这个命令再启动:<code>dpkg-reconfigure dash</code>&#x3D;&#x3D;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh: 157: zkServer.sh: Syntax error: <span class="string">&quot;(&quot;</span> unexpected (expecting <span class="string">&quot;;;&quot;</span>)</span><br><span class="line">原因是：zookeeper使用的shell版本和系统使用的shell版本不兼容，当前ubuntu系统的shell默认使用的是dash,而zookeeper使用的是bash</span><br></pre></td></tr></table></figure><p><code>连接 zookeeper ，下面这样就是成功了</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@debian:/usr/share/zookeeper/bin<span class="comment"># sh zkCli.sh -server localhost:2181</span></span><br><span class="line">Connecting to localhost:2181</span><br><span class="line">Welcome to ZooKeeper!</span><br><span class="line">JLine support is enabled</span><br><span class="line">[zk: localhost:2181(CONNECTING) 0] </span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>上面我说 jdk 17 运行 zookeeper 有些小瑕疵，瑕疵就是：ls &#x2F; 查看注册的服务节点时会报错，后面可能还会有其他命令报错，不过不影响正常使用，我已经用程序测试了，zookeeper 一切正常，只是zookeeper控制台命令有问题<br><img src="https://img-blog.csdnimg.cn/aa388e0939c8470ba38eb016982b37a6.png" alt="在这里插入图片描述"></p></blockquote><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> apt </tag>
            
            <tag> zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 使用 SaToken 进行登录认证、权限管理以及路由规则接口拦截</title>
      <link href="/2022/09/26/Springboot%20%E4%BD%BF%E7%94%A8%20SaToken%20%E8%BF%9B%E8%A1%8C%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81%E3%80%81%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%BB%A5%E5%8F%8A%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99%E6%8E%A5%E5%8F%A3%E6%8B%A6%E6%88%AA/"/>
      <url>/2022/09/26/Springboot%20%E4%BD%BF%E7%94%A8%20SaToken%20%E8%BF%9B%E8%A1%8C%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81%E3%80%81%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%BB%A5%E5%8F%8A%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99%E6%8E%A5%E5%8F%A3%E6%8B%A6%E6%88%AA/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>Sa-Token 是一个轻量级 Java 权限认证框架，主要解决：登录认证、权限认证、单点登录、OAuth2.0、分布式Session会话、微服务网关鉴权 等一系列权限相关问题。<br><br><br>还有踢人下线、账号封禁、路由拦截规则、微服务网关鉴权、密码加密等丰富功能<br>它不比 Shiro 和 SpringSecurity 的功能少，而且配置使用更加简单</p></blockquote><hr><h1 id="一、引入和配置"><a href="#一、引入和配置" class="headerlink" title="一、引入和配置"></a>一、引入和配置</h1><p>先给你们看一下 Demo 文件结构</p><p><img src="https://img-blog.csdnimg.cn/da2fc49f138a4968a6fa6f1d6e7798d9.png" alt="在这里插入图片描述"></p><h2 id="1-引入依赖"><a href="#1-引入依赖" class="headerlink" title="1.引入依赖"></a>1.引入依赖</h2><blockquote><p>如果不需要将 token 信息存入 redis，只需要引入下面这一个依赖</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.dev33<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sa-token-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.31.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>如果需要将 token 存入 redis，则还需要引入下面的依赖（一般搭建单点登录服务器才需要使用 redis）</p></blockquote><p><code>使用redis ，无需任何其他配置，只需要多引入下面几个依赖，然后下面的 yml 加一些配置，satoken 就可以自动存储到 redis，非常方便</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Sa-Token 整合 Redis （使用 jackson 序列化方式）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.dev33<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sa-token-dao-redis-jackson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.31.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Sa-Token插件：权限缓存与业务缓存分离 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.dev33<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sa-token-alone-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.31.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 提供Redis连接池 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="2、配置yml"><a href="#2、配置yml" class="headerlink" title="2、配置yml"></a>2、配置yml</h2><blockquote><p>如下代码，如果不需要使用 redis ，则删除 <code>alone-redis</code>和<code>spring redis</code>配置，否则连接不到 redis 会报错</p></blockquote><blockquote><p>如果使用了 redis，我下面的配置是业务和鉴权分离的方式，也就是说，token 存储在 <code>alone-redis</code> 里面配置的数据库，我这里配置的是 <code>0</code> 号数据库，它和 <code>spring reids</code> 配置的数据库不冲突</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="comment"># Sa-Token配置</span></span><br><span class="line"><span class="attr">sa-token:</span></span><br><span class="line">  <span class="comment"># token前缀</span></span><br><span class="line">  <span class="comment"># Token前缀 与 Token值 之间必须有一个空格。</span></span><br><span class="line">  <span class="comment"># 一旦配置了 Token前缀，则前端提交 Token 时，必须带有前缀，否则会导致框架无法读取 Token。</span></span><br><span class="line">  <span class="comment"># 由于Cookie中无法存储空格字符，也就意味配置 Token 前缀后，Cookie 鉴权方式将会失效，此时只能将 Token 提交到header里进行传输</span></span><br><span class="line">  <span class="comment"># token-prefix: Bearer</span></span><br><span class="line">  <span class="comment"># token 名称 (同时也是cookie名称)</span></span><br><span class="line">  <span class="attr">token-name:</span> <span class="string">satoken</span></span><br><span class="line">  <span class="comment"># token 有效期，单位s 默认30天, -1代表永不过期</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">2592000</span></span><br><span class="line">  <span class="comment"># token 临时有效期 (指定时间内无操作就视为token过期) 单位: 秒</span></span><br><span class="line">  <span class="attr">activity-timeout:</span> <span class="number">-1</span></span><br><span class="line">  <span class="comment"># 是否允许同一账号并发登录 (为true时允许一起登录, 为false时新登录挤掉旧登录)</span></span><br><span class="line">  <span class="attr">is-concurrent:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 在多人登录同一账号时，是否共用一个token (为true时所有登录共用一个token, 为false时每次登录新建一个token)</span></span><br><span class="line">  <span class="attr">is-share:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># token风格</span></span><br><span class="line">  <span class="attr">token-style:</span> <span class="string">uuid</span></span><br><span class="line">  <span class="comment"># 是否输出操作日志</span></span><br><span class="line">  <span class="attr">is-log:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 配置 Sa-Token 单独使用的 Redis 连接</span></span><br><span class="line">  <span class="attr">alone-redis:</span></span><br><span class="line">    <span class="comment"># Redis数据库索引（默认为0）</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">0</span></span><br><span class="line">    <span class="comment"># Redis服务器地址</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="comment"># Redis服务器连接端口</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="comment"># Redis服务器连接密码（默认为空）</span></span><br><span class="line">    <span class="attr">password:</span></span><br><span class="line">    <span class="comment"># 连接超时时间</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># 配置业务使用的 Redis 连接</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="comment"># Redis数据库索引（默认为0）</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">1</span></span><br><span class="line">    <span class="comment"># Redis服务器地址</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="comment"># Redis服务器连接端口</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="comment"># Redis服务器连接密码（默认为空）</span></span><br><span class="line">    <span class="attr">password:</span></span><br><span class="line">    <span class="comment"># 连接超时时间</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="3、配置全局异常处理"><a href="#3、配置全局异常处理" class="headerlink" title="3、配置全局异常处理"></a>3、配置全局异常处理</h2><blockquote><p>这一步可以不配置，配置的作用是，在鉴权失败的时候，不会报错，而是返回给前端鉴权失败的原因，方便我们开发调试</p></blockquote><blockquote><p>下面的异常会在鉴权失败的时候自动返回到前端，无需我们手动抛出和返回</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.satokendemo.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.util.SaResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/23 16:45</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> SaToken全局异常拦截</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 全局异常拦截，鉴权失败不会报错，会返回给前端报错原因</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">handlerException</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> SaResult.error(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="4、模拟用户角色和权限"><a href="#4、模拟用户角色和权限" class="headerlink" title="4、模拟用户角色和权限"></a>4、模拟用户角色和权限</h2><blockquote><p>这里我们给用户分配一下我们模拟的角色和权限，正常你们要从数据库读取用户的角色和拥有的权限</p></blockquote><blockquote><p>这里实现了 StpInterface 下面的方法，下面的方法会在接口鉴权之前自动调用，判断角色和权限，无需我们手动调用</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.satokendemo.permission;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.StpInterface;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/23 16:46</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 获取当前账号的权限和角色列表，这个类下面的方法会在接口鉴权之前自动调用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserPermission</span> <span class="keyword">implements</span> <span class="title class_">StpInterface</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回一个账号所拥有的权限码集合</span></span><br><span class="line"><span class="comment">     * 即你在调用 StpUtil.login(id) 时写入的标识值。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getPermissionList</span><span class="params">(Object loginId, String loginType)</span> &#123;</span><br><span class="line">        <span class="comment">// 本list仅做模拟，实际项目中要根据具体业务逻辑来查询权限</span></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;user-add&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;user-delete&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;user-update&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;user-get&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;article-get&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;用户权限列表：&quot;</span> + list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回一个账号所拥有的角色标识集合 (权限与角色可分开校验)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getRoleList</span><span class="params">(Object loginId, String loginType)</span> &#123;</span><br><span class="line">        <span class="comment">// 本list仅做模拟，实际项目中要根据具体业务逻辑来查询角色</span></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;super-admin&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;用户角色列表：&quot;</span> + list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="5、配置拦截器"><a href="#5、配置拦截器" class="headerlink" title="5、配置拦截器"></a>5、配置拦截器</h2><blockquote><p>如果在高版本 SpringBoot (≥2.6.x) 下注册拦截器失效，则需要添加 @EnableWebMvc 注解才可以使用</p></blockquote><blockquote><p>下面我们配置的规则叫作<code>路由拦截规则</code>，<code>/user/**</code> 意思就是接口地址为 <code>/user</code> 开头的所有接口，也就是说，下面的我们 <code>UserController</code> 里面的所有接口都在拦截范围内</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.satokendemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.config.SaTokenConfig;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.interceptor.SaInterceptor;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.router.SaRouter;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.StpUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Primary;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/23 16:49</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaTokenConfigure</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册 Sa-Token 拦截器，打开注解式鉴权功能</span></span><br><span class="line"><span class="comment">     * 如果在高版本 SpringBoot (≥2.6.x) 下注册拦截器失效，则需要额外添加 <span class="doctag">@EnableWebMvc</span> 注解才可以使用</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 注册路由拦截器，自定义认证规则</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">SaInterceptor</span>(handler -&gt; &#123;</span><br><span class="line">            <span class="comment">// 登录认证 -- 拦截所有路由，并排除/user/doLogin 用于开放登录</span></span><br><span class="line">            SaRouter.match(<span class="string">&quot;/**&quot;</span>, <span class="string">&quot;/user/doLogin&quot;</span>, r -&gt; StpUtil.checkLogin());</span><br><span class="line">            <span class="comment">// 角色认证 -- 拦截以 admin 开头的路由，必须具备 admin 角色或者 super-admin 角色才可以通过认证</span></span><br><span class="line">            SaRouter.match(<span class="string">&quot;/admin/**&quot;</span>, r -&gt; StpUtil.checkRoleOr(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;super-admin&quot;</span>));</span><br><span class="line">            <span class="comment">// 权限认证 -- 不同模块认证不同权限</span></span><br><span class="line">            SaRouter.match(<span class="string">&quot;/user/**&quot;</span>, r -&gt; StpUtil.checkRole(<span class="string">&quot;user&quot;</span>));</span><br><span class="line">            SaRouter.match(<span class="string">&quot;/admin/**&quot;</span>, r -&gt; StpUtil.checkPermission(<span class="string">&quot;admin&quot;</span>));</span><br><span class="line">            <span class="comment">// 甚至你可以随意的写一个打印语句</span></span><br><span class="line">            SaRouter.match(<span class="string">&quot;/**&quot;</span>, r -&gt; System.out.println(<span class="string">&quot;--------权限认证成功-------&quot;</span>));</span><br><span class="line">        &#125;).isAnnotation(<span class="literal">true</span>))</span><br><span class="line">        <span class="comment">//拦截所有接口</span></span><br><span class="line">        .addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">        <span class="comment">//不拦截/user/doLogin登录接口</span></span><br><span class="line">        .excludePathPatterns(<span class="string">&quot;/user/doLogin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="6、controller里调用satoken的方法"><a href="#6、controller里调用satoken的方法" class="headerlink" title="6、controller里调用satoken的方法"></a>6、controller里调用satoken的方法</h2><blockquote><p>方法上面的注解是使用权限认证和拦截器的时候用的，下面我会讲到</p></blockquote><blockquote><p>我在下面的<code>UserController</code>演示了<code>登录</code>、<code>注销</code>、<code>检查是否登录</code>、<code>查看用户token</code>、<code>获取token有效期</code>、<code>对称加密</code>、<code>非对称加密</code>方法，具体的方法每一行代码的作用，都在注视中写出来了，等一下我们测试每一个方法，为大家展示运行结果并解析代码</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.satokendemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.annotation.SaIgnore;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.basic.SaBasicUtil;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.secure.SaBase64Util;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.secure.SaSecureUtil;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.SaLoginModel;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.SaTokenInfo;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.StpUtil;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.util.SaResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/23 15:52</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">USERNAME</span> <span class="operator">=</span> <span class="string">&quot;xyj&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PASSWORD</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试登录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/doLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult  <span class="title function_">doLogin</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="comment">//这个方法会强制在浏览器弹出一个认证框</span></span><br><span class="line">        SaBasicUtil.check(<span class="string">&quot;sa:123456&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(username.equals(USERNAME) &amp;&amp; password.equals(PASSWORD)) &#123;</span><br><span class="line">            <span class="comment">//这个是登录用户的主键，业务中你要从数据库中读取</span></span><br><span class="line">            StpUtil.login(<span class="number">1</span>);</span><br><span class="line">            <span class="comment">//获取登录生成的token</span></span><br><span class="line">            tokenInfo = StpUtil.getTokenInfo();</span><br><span class="line">            System.out.println(tokenInfo);</span><br><span class="line">            <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;登录成功，会话ID为 &quot;</span> + StpUtil.getLoginId() + <span class="string">&quot; ，Token为：&quot;</span> + StpUtil.getTokenValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> SaResult.error(<span class="string">&quot;登录失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询登录状态</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/signOut&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">signOut</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginId</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (StpUtil.isLogin())&#123;</span><br><span class="line">            loginId = (String) StpUtil.getLoginId();</span><br><span class="line">            StpUtil.logout();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;会话ID为 &quot;</span> + loginId + <span class="string">&quot; 的用户注销登录成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询登录状态</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/isLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">isLogin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (StpUtil.isLogin())&#123;</span><br><span class="line">            <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;会话是否登录：&quot;</span> + StpUtil.isLogin() + <span class="string">&quot; ，会话ID为 &quot;</span> + StpUtil.getLoginId());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;会话是否登录：&quot;</span> + StpUtil.isLogin());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据Token值获取对应的账号id，如果未登录，则返回 null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tokenValue</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getUserByToken/&#123;tokenValue&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">getUserByToken</span><span class="params">(<span class="meta">@PathVariable</span> String tokenValue)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok((String) StpUtil.getLoginIdByToken(tokenValue));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前会话剩余有效期（单位：s，返回-1代表永久有效）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getTokenTimeout&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">getTokenTimeout</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok(String.valueOf(StpUtil.getTokenTimeout()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SaIgnore</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/encodePassword&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">encodePassword</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * md5加盐加密: md5(md5(str) + md5(salt))</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">md5</span> <span class="operator">=</span> SaSecureUtil.md5(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">md5BySalt</span> <span class="operator">=</span> SaSecureUtil.md5BySalt(<span class="string">&quot;123456&quot;</span>, <span class="string">&quot;salt&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;MD5加密：&quot;</span> + md5);</span><br><span class="line">        System.out.println(<span class="string">&quot;MD5加盐加密：&quot;</span> + md5BySalt);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * AES对称加密</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// 定义秘钥和明文</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">&quot;这是一个明文用于测试AES对称加密&quot;</span>;</span><br><span class="line">        <span class="comment">// 加密</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ciphertext</span> <span class="operator">=</span> SaSecureUtil.aesEncrypt(key, text);</span><br><span class="line">        System.out.println(<span class="string">&quot;AES加密后：&quot;</span> + ciphertext);</span><br><span class="line">        <span class="comment">// 解密</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">text2</span> <span class="operator">=</span> SaSecureUtil.aesDecrypt(key, ciphertext);</span><br><span class="line">        System.out.println(<span class="string">&quot;AES解密后：&quot;</span> + text2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * RSA非对称加密</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// 定义私钥和公钥</span></span><br><span class="line">        HashMap&lt;String, String&gt; keyMap = SaSecureUtil.rsaGenerateKeyPair();</span><br><span class="line">        <span class="type">String</span> <span class="variable">privateKey</span> <span class="operator">=</span> keyMap.get(<span class="string">&quot;private&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">publicKey</span> <span class="operator">=</span> keyMap.get(<span class="string">&quot;public&quot;</span>);</span><br><span class="line">        <span class="comment">// 文本</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">text1</span> <span class="operator">=</span> <span class="string">&quot;这是一个明文用于测试RSA非对称加密&quot;</span>;</span><br><span class="line">        <span class="comment">// 使用公钥加密</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ciphertext1</span> <span class="operator">=</span> SaSecureUtil.rsaEncryptByPublic(publicKey, text1);</span><br><span class="line">        System.out.println(<span class="string">&quot;公钥加密后：&quot;</span> + ciphertext1);</span><br><span class="line">        <span class="comment">// 使用私钥解密</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">text3</span> <span class="operator">=</span> SaSecureUtil.rsaDecryptByPrivate(privateKey, ciphertext1);</span><br><span class="line">        System.out.println(<span class="string">&quot;私钥解密后：&quot;</span> + text3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Base64</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// 文本</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">text4</span> <span class="operator">=</span> <span class="string">&quot;这是一个明文用于测试Base64&quot;</span>;</span><br><span class="line">        <span class="comment">// 使用Base64编码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">base64Text</span> <span class="operator">=</span> SaBase64Util.encode(text4);</span><br><span class="line">        System.out.println(<span class="string">&quot;Base64编码后：&quot;</span> + base64Text);</span><br><span class="line">        <span class="comment">// 使用Base64解码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">text5</span> <span class="operator">=</span> SaBase64Util.decode(base64Text);</span><br><span class="line">        System.out.println(<span class="string">&quot;Base64解码后：&quot;</span> + text5);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>下面的<code>TestController</code>里面等下演示权限认证和路由拦截的时候用</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.satokendemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.annotation.*;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.util.SaResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/23 16:38</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="meta">@SaCheckLogin</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 此接口加上了 <span class="doctag">@SaIgnore</span> 可以游客访问</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SaIgnore</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;无需登录接口&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登陆后才可调用该方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SaCheckLogin</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/select&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">select</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;查询成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 必须具有指定权限才能进入该方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SaCheckRole(&quot;super-admin&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注解式鉴权：SaMode.OR 只要具有其中一个权限即可通过校验</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="meta">@SaCheckPermission(value = &#123;&quot;user-add&quot;, &quot;user-all&quot;&#125;, mode = SaMode.OR)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;添加成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 一个接口在具有权限 user-update 或角色 admin 时可以调通</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="meta">@SaCheckPermission(value = &quot;user-add&quot;, orRole = &quot;admin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;更新成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这个接口测试用</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testPermission&quot;)</span></span><br><span class="line">    <span class="meta">@SaCheckPermission(value = &quot;user123&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SaResult <span class="title function_">testPermission</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SaResult.ok(<span class="string">&quot;这个接口测试用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="二、登录演示"><a href="#二、登录演示" class="headerlink" title="二、登录演示"></a>二、登录演示</h1><p><code>到这里，我么前期的配置就已经结束了，下面我开始测试每一个方法，为大家展示运行结果并解析代码，先把项目运行起来</code></p><p><img src="https://img-blog.csdnimg.cn/e76170e24e6c4e42b31086c7afdb0480.png" alt="在这里插入图片描述"></p><h2 id="1、登录-doLogin"><a href="#1、登录-doLogin" class="headerlink" title="1、登录-doLogin"></a>1、登录-doLogin</h2><blockquote><p>大家请看，我在请求 <code>/doLogin</code> 这个接口的时候，弹出了下面的认证框，这个就是方法第一行代码的功能，这叫 <code>Basic认证</code>，当然可以不要这一行代码，随你们，认证账号 sa 密码 123456</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个方法会强制在浏览器弹出一个认证框</span></span><br><span class="line">SaBasicUtil.check(<span class="string">&quot;sa:123456&quot;</span>);</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/dc97a725158b452aa9f9ba5c4a76cb16.png" alt="在这里插入图片描述"></p><blockquote><p>进行 <code>Basic认证</code> 后，登陆成功<br><img src="https://img-blog.csdnimg.cn/3fc2ac5572a348f1bab2f068879fe5a9.png" alt="在这里插入图片描述"></p></blockquote><p><code>我这里使用了 redis ，token 已经存储进来了</code><br><img src="https://img-blog.csdnimg.cn/5060b4810cd348a09ea73e1eb7410b20.png" alt="在这里插入图片描述"></p><hr><h2 id="2、验证登录-isLogin"><a href="#2、验证登录-isLogin" class="headerlink" title="2、验证登录-isLogin"></a>2、验证登录-isLogin</h2><p><img src="https://img-blog.csdnimg.cn/b6b9cb9ddd0747e3bfa1e49d58df19e7.png" alt="在这里插入图片描述"></p><hr><h2 id="3、获取token时效-getTokenTimeout"><a href="#3、获取token时效-getTokenTimeout" class="headerlink" title="3、获取token时效-getTokenTimeout"></a>3、获取token时效-getTokenTimeout</h2><blockquote><p>这是我们在 yml 里面配置的时效性，30天的毫秒<br><img src="https://img-blog.csdnimg.cn/ffc87c8d8a164ead92e8380a77c200c2.png" alt="在这里插入图片描述"></p></blockquote><hr><h2 id="4、加密"><a href="#4、加密" class="headerlink" title="4、加密"></a>4、加密</h2><blockquote><p>请求 <code>encodePassword</code> 接口</p></blockquote><p><img src="https://img-blog.csdnimg.cn/0537dab8801c4133841b05c36e13acc5.png" alt="在这里插入图片描述"></p><hr><h2 id="5、注销登录-logout"><a href="#5、注销登录-logout" class="headerlink" title="5、注销登录-logout"></a>5、注销登录-logout</h2><p><img src="https://img-blog.csdnimg.cn/6fdd6923346342e490075ca757151298.png" alt="在这里插入图片描述"></p><hr><h1 id="三、权限认证和拦截器演示"><a href="#三、权限认证和拦截器演示" class="headerlink" title="三、权限认证和拦截器演示"></a>三、权限认证和拦截器演示</h1><blockquote><p>下面演示上面我们配置的拦截器，satoken 可以直接使用注解来进行拦截，很方便</p></blockquote><blockquote><p>我们可以发现，我在两个 controller 里面使用了 satoken 的几个注解，注解可以用在方法上或类上<br><code>@SaIgnore</code> 忽略该方法，不进行任何拦截和鉴权<br><code>@SaCheckLogin</code> 登录后才可以调用该接口<br><code>@SaCheckRole(&quot;super-admin&quot;)</code> 登录用户必须要是”super-admin”角色才可调用<br><code>@SaCheckPermission(value = &quot;del&quot;)</code> 登录用户必须要有”del”权限才可调用</p></blockquote><h2 id="1、登录认证"><a href="#1、登录认证" class="headerlink" title="1、登录认证"></a>1、登录认证</h2><blockquote><p>下面我们调用添加了 <code>@SaCheckLogin</code> 注解的方法</p></blockquote><h3 id="1-未登录情况"><a href="#1-未登录情况" class="headerlink" title="(1) 未登录情况"></a>(1) 未登录情况</h3><p><img src="https://img-blog.csdnimg.cn/32b3a5c2545643e6a58d5facc6f16d97.png" alt="在这里插入图片描述"></p><h3 id="2-已登陆情况"><a href="#2-已登陆情况" class="headerlink" title="(2) 已登陆情况"></a>(2) 已登陆情况</h3><blockquote><p>可以看到调用成功，控制台打印出我们上面拦截器配置的输出信息</p></blockquote><p><img src="https://img-blog.csdnimg.cn/ad17714448e34d408af24b2fb4550eb3.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/967ba4056be749f4b3ec707eed0641c3.png" alt="在这里插入图片描述"></p><hr><h2 id="2、权限认证"><a href="#2、权限认证" class="headerlink" title="2、权限认证"></a>2、权限认证</h2><blockquote><p>登录后，我们调用增加了 <code>@SaCheckPermission(value = &quot;del&quot;)</code> 注解的方法，可以看到提示<code>无此权限：del</code>，因为前面我们模拟用户权限时，没有给用户分配 <code>del</code> 权限</p></blockquote><p><img src="https://img-blog.csdnimg.cn/86aaf82cafc14130be209cd4da0b80c5.png" alt="在这里插入图片描述"></p><blockquote><p>我们再调用增加了 <code>@SaCheckRole(&quot;super-admin&quot;)</code> 注解的方法，可以看到成功</p></blockquote><p><img src="https://img-blog.csdnimg.cn/85c641e9ee53498caa548115295e53a0.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> SaToken </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 使用 Mybatis Plus LambdaQueryWrapper 构造器和注解自定义SQL</title>
      <link href="/2022/09/25/Springboot%20%E4%BD%BF%E7%94%A8%20Mybatis%20Plus%20LambdaQueryWrapper%20%E6%9E%84%E9%80%A0%E5%99%A8%E5%92%8C%E6%B3%A8%E8%A7%A3%E8%87%AA%E5%AE%9A%E4%B9%89SQL/"/>
      <url>/2022/09/25/Springboot%20%E4%BD%BF%E7%94%A8%20Mybatis%20Plus%20LambdaQueryWrapper%20%E6%9E%84%E9%80%A0%E5%99%A8%E5%92%8C%E6%B3%A8%E8%A7%A3%E8%87%AA%E5%AE%9A%E4%B9%89SQL/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>MyBatis-Plus 是一个 MyBatis (opens new window)的增强工具，在 MyBatis 的基础上只做增强不做改变，MyBatis 可以无损升级为MyBatis-Plus，只需要更换一下pom依赖即可。</p></blockquote><blockquote><p>1、强大的条件构造器：单表查询不需要写SQL语句<br>2、支持 Lambda 形式调用：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错<br>3、支持主键自动生成：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题<br>4、内置分页插件：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询<br>5、支持多种数据库：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 、达梦等多种数据库</p></blockquote><p>下面我将演示如何引入、配置、使用<br><img src="https://img-blog.csdnimg.cn/4a52c626d5a5498bb3e0422068c346a7.png" alt="在这里插入图片描述"></p><hr><h1 id="一、配置和使用"><a href="#一、配置和使用" class="headerlink" title="一、配置和使用"></a>一、配置和使用</h1><h2 id="1、引入依赖"><a href="#1、引入依赖" class="headerlink" title="1、引入依赖"></a>1、引入依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2、配置yml"><a href="#2、配置yml" class="headerlink" title="2、配置yml"></a>2、配置yml</h2><blockquote><p>连接池我们选用了springboot内置的 hikari ，这个是当今速度最快的连接池，druid 相较于 hikari 增加了许多监控、拦截器等功能，我们中小型项目用不着那么多功能，还是主要追求速度</p></blockquote><blockquote><p>下面有一行配置是打印出SQL语句，意思是把MybatisPlus构造器构造的所有CURD的SQL语句都打印到控制台，方便我们调试</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/xuyijie?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai&amp;rewriteBatchedStatements=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="comment"># 连接池中允许的最小连接数。缺省值：10</span></span><br><span class="line">      <span class="attr">minimum-idle:</span> <span class="number">10</span></span><br><span class="line">      <span class="comment"># 连接池中允许的最大连接数。缺省值：10</span></span><br><span class="line">      <span class="attr">maximum-pool-size:</span> <span class="number">100</span></span><br><span class="line">      <span class="comment"># 自动提交</span></span><br><span class="line">      <span class="attr">auto-commit:</span> <span class="literal">true</span></span><br><span class="line">      <span class="comment"># 一个连接idle状态的最大时长（毫秒），超时则被释放（retired），缺省:10分钟</span></span><br><span class="line">      <span class="attr">idle-timeout:</span> <span class="number">600000</span></span><br><span class="line">      <span class="comment"># 连接池名字</span></span><br><span class="line">      <span class="attr">pool-name:</span> <span class="string">泡泡的HikariCP</span></span><br><span class="line">      <span class="comment"># 一 个连接的生命时长（毫秒），超时而且没被使用则被释放（retired），缺省:30分钟，建议设置比数据库超时时长少30秒</span></span><br><span class="line">      <span class="attr">max-lifetime:</span> <span class="number">1800000</span></span><br><span class="line">      <span class="comment"># 等待连接池分配连接的最大时长（毫秒），超过这个时长还没可用的连接则发生SQLException， 缺省:30秒</span></span><br><span class="line">      <span class="attr">connection-timeout:</span> <span class="number">30000</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="comment"># 打印出SQL语句</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="3、创建实体类"><a href="#3、创建实体类" class="headerlink" title="3、创建实体类"></a>3、创建实体类</h2><blockquote><p>使用 @TableName 指定表名，下面字段上面的注解的解释我在代码注释中有介绍，注意，主键策略设置后，插入数据不需要手动设置主键的值，数据进入数据库后会自动生成</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.mybatisplusdemo.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/25 21:01</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 此注解代表这是表的主键，主键策略是自增</span></span><br><span class="line"><span class="comment">     * 除了自增策略，还有ASSIGN_ID（雪花）、ASSIGN_UUID（通用唯一标识）</span></span><br><span class="line"><span class="comment">     * 主键策略设置后，插入数据不需要手动设置主键的值，数据进入数据库后会自动生成</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用次注解标注的字段不会映射到数据库表，也就是说不会存储和查询该字段</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="4、创建mapper"><a href="#4、创建mapper" class="headerlink" title="4、创建mapper"></a>4、创建mapper</h2><blockquote><p>创建一个 interface 继承 BaseMapper（不要忘记 @Mapper 注解），会得到很多内置方法，如果需要自定义SQL，下面会讲解</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.mybatisplusdemo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.mybatisplusdemo.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/25 21:06</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="5、创建service"><a href="#5、创建service" class="headerlink" title="5、创建service"></a>5、创建service</h2><blockquote><p>这里的 service 和 serviceImpl 也继承了 IService，这个是非必须的，只是 IService 提供了一些 BaseMapper 没有的增强方法，我等一下会演示</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.mybatisplusdemo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.mybatisplusdemo.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/25 21:12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.mybatisplusdemo.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.mybatisplusdemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.mybatisplusdemo.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.mybatisplusdemo.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/25 21:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="6、创建controller"><a href="#6、创建controller" class="headerlink" title="6、创建controller"></a>6、创建controller</h2><blockquote><p>我在 controller 里面写了一些 BaseMapper 和 IService 的内置方法，大家请看下面的 &#x2F;saveList， <code>userService.saveBatch</code> 就是一个增强的方法，可以存储多条数据，BaseMapper 则没有存储多条的内置方法</p></blockquote><blockquote><p>主键策略设置后，插入数据不需要手动设置主键的值，数据进入数据库后会自动生成，所以下面的 user 不需要 <code>setId</code></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.mybatisplusdemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.mybatisplusdemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.mybatisplusdemo.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.mybatisplusdemo.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/25 21:07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询全部数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.selectById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存一条数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/saveOne&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveOne</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;xuyijie&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">22</span>);</span><br><span class="line">        userMapper.insert(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;添加一条成功&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存多条数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/saveList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveList</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user1.setName(<span class="string">&quot;xuyijie1&quot;</span>);</span><br><span class="line">        user1.setAge(<span class="number">23</span>);</span><br><span class="line">        userList.add(user1);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user2.setName(<span class="string">&quot;xuyijie2&quot;</span>);</span><br><span class="line">        user2.setAge(<span class="number">24</span>);</span><br><span class="line">        userList.add(user2);</span><br><span class="line">        userService.saveBatch(userList);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;批量添加成功&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="二、LambdaQueryWrapper-构造器"><a href="#二、LambdaQueryWrapper-构造器" class="headerlink" title="二、LambdaQueryWrapper 构造器"></a>二、LambdaQueryWrapper 构造器</h1><blockquote><p>上面的内置方法太过简单，无法满足我们的业务需求，所以我们要使用条件构造器来构造查询SQL<br>如下代码，看注释，下面就是构造器的全部使用方法了，你们照着模仿就行了，很简单的</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/findByConditions&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findByConditions</span><span class="params">()</span>&#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//这句等同于 SELECT * FROM user WHERE id=&#x27;1&#x27; and name=&#x27;xuyijie1&#x27;</span></span><br><span class="line">        lambdaQueryWrapper.eq(User::getId, <span class="string">&quot;1&quot;</span>).eq(User::getName, <span class="string">&quot;xuyijie1&quot;</span>);</span><br><span class="line">        userMapper.selectList(lambdaQueryWrapper);</span><br><span class="line"></span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lambdaQueryWrapper1 = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//这句等同于 SELECT * FROM user WHERE id=&#x27;1&#x27; or name=&#x27;xuyijie1&#x27;</span></span><br><span class="line">        lambdaQueryWrapper1.eq(User::getId, <span class="string">&quot;1&quot;</span>).or().eq(User::getName, <span class="string">&quot;xuyijie1&quot;</span>);</span><br><span class="line">        userMapper.selectList(lambdaQueryWrapper1);</span><br><span class="line"></span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; lambdaQueryWrapper2 = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//这句等同于 SELECT * FROM user WHERE id=&#x27;1&#x27; and (age like %22% or name like &#x27;%xuyijie1%&#x27;)</span></span><br><span class="line">        lambdaQueryWrapper2.eq(User::getId, <span class="string">&quot;1&quot;</span>).and(</span><br><span class="line">                i -&gt; i.like(User::getAge, <span class="number">22</span>).or().like(User::getName, <span class="string">&quot;xuyijie1&quot;</span>)</span><br><span class="line">        );</span><br><span class="line">        userMapper.selectList(lambdaQueryWrapper2);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;使用条件构造器查询成功&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>调用一下，控制台打印出来 构造器构造的SQL</p></blockquote><p><img src="https://img-blog.csdnimg.cn/8771ed26714749d0870692f1fb831d74.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/074f765d7bbe45b8ba313cd88a174fef.png" alt="在这里插入图片描述"></p><blockquote><p>构造器还有 <code>.orderByAsc()</code>、<code>.exists()</code>、<code>.groupBy()</code>等条件，和SQL里面一样，大家可以自己试一下</p></blockquote><hr><h1 id="三、注解方式自定义SQL"><a href="#三、注解方式自定义SQL" class="headerlink" title="三、注解方式自定义SQL"></a>三、注解方式自定义SQL</h1><blockquote><p>Mybatis-Plus 的构造器只支持单表查询，如果遇到了复杂的多表查询，就需要自己写SQL了，下面我演示注解方式，如果想在xml里写SQL和Mybatis一样，这里就不演示了</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.mybatisplusdemo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> pers.xuyijie.mybatisplusdemo.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/25 21:06</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注解方式自己写SQL语句</span></span><br><span class="line"><span class="comment">     * 如果想在xml里写SQL和Mybatis一样，这里就不演示了</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT * FROM user WHERE name=#&#123;name&#125;&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">selectAll</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 多表查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT * FROM user LEFT JOIN classroom ON user.id=classroom.userId&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">selectMulti</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>MybatisPlus 简单的事务回滚请看我的另一篇<a href="https://blog.csdn.net/qq_48922459/article/details/122391710?spm=1001.2014.3001.5502">MyBatisPlus 开启事务并交由 Springboot 管理</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> MyBatisPlus </tag>
            
            <tag> Lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 配置线程池创建线程和配置 @Async 异步操作线程池</title>
      <link href="/2022/09/20/Springboot%20%E9%85%8D%E7%BD%AE%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E5%92%8C%E9%85%8D%E7%BD%AE%20@Async%20%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C%E7%BA%BF%E7%A8%8B%E6%B1%A0/"/>
      <url>/2022/09/20/Springboot%20%E9%85%8D%E7%BD%AE%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E5%92%8C%E9%85%8D%E7%BD%AE%20@Async%20%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C%E7%BA%BF%E7%A8%8B%E6%B1%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>众所周知，创建显示线程和直接使用未配置的线程池创建线程，都会被阿里的大佬给diss，所以我们要规范的创建线程。<br> <br><br><img src="https://img-blog.csdnimg.cn/f0bc3a21c8c64d0a89c47e0fd1876865.png" alt="![在这里插入图片描述](https://img-blog.csdnimg.cn/2293cdf5aa8341d6ac99c0ffe65fde00.png"><br><img src="https://img-blog.csdnimg.cn/48dc9dc2951c4b649a0a5275f766ab38.png" alt="在这里插入图片描述"></p></blockquote><br><blockquote><p>至于 @Async 异步任务的用处是不想等待方法执行完就返回结果，提高软件前台响应速度，一个程序中会用到很多异步方法，所以需要使用线程池管理，防止影响性能。</p></blockquote><hr><h1 id="一、创建一个Springboot-Web项目"><a href="#一、创建一个Springboot-Web项目" class="headerlink" title="一、创建一个Springboot Web项目"></a>一、创建一个Springboot Web项目</h1><p><code>需要一个Springboot项目</code><br><img src="https://img-blog.csdnimg.cn/a7ccd613feb2476d8e47fb4767f77e20.png" alt="在这里插入图片描述"></p><h1 id="二、新建ThreadPoolConfig"><a href="#二、新建ThreadPoolConfig" class="headerlink" title="二、新建ThreadPoolConfig"></a>二、新建ThreadPoolConfig</h1><blockquote><p>&#x2F;**</p></blockquote><ul><li>可以直接return一个内置线程池</li><li>Executors类创建线程池的方法归根结底都是调用ThreadPoolExecutor类，只不过对每个方法赋值不同的参数去构造ThreadPoolExecutor对象。</li><li>newCachedThreadPool:创建一个可缓存的线程池，如果线程池长度超过处理需要，可灵活回收空闲线程，若无可回收，则新建线程。</li><li>newFixedThreadPool: 创建一个定长线程池，可控制线程最大并发数，超出的线程会在队列中等待</li><li>newScheduledThreadPool: 创建一个定长线程池，支持定时及周期性任务执行。</li><li>newSingleThreadExecutor: 创建一个单线程化的线程池，它只会用唯一的工作线程来执行任务，保证所有任务按照指定顺序(FIFO, LIFO, 优先级)执行。</li><li></li><li>也可以自己new一个ThreadPoolExecutor自定义参数</li><li>参数说明：</li><li>corePoolSize: 常驻核心线程数，如果大于0，即使本地任务执行完也不会被销毁</li><li>maximumPoolSize： 线程池能够容纳可同时执行的最大线程数</li><li>keepAliveTime: 线程池中线程空闲的时间，当空闲时间达到该值时，线程会被销毁， 只剩下 corePoolSize 个线程数量。</li><li>unit： 空闲时间的单位。一般以TimeUnit类定义时分秒。</li><li>workQueue: 当请求的线程数大于 corePoolSize 时，线程进入该阻塞队列。</li><li>threadFactory: 线程工厂，用来生产一组相同任务的线程，同时也可以通过它增加前缀名，虚拟机栈分析时更清晰</li><li>handler: 执行拒绝策略，当 workQueue 已满，且超过maximumPoolSize 最大值，就要通过这个来处理，比如拒绝，丢弃等，这是一种限流的保护措施。</li><li></li><li>阻塞队列的实现类</li><li>LinkedBlockingQueue 无界队列，当不指定队列大小时，将会默认为Integer.MAX_VALUE大小的队列，因此大量的任务将会堆积在队列中，最终可能触发OOM。</li><li>ArrayBlockingQueue 有界队列，基于数组的先进先出队列，此队列创建时必须指定大小。</li><li>PriorityBlockingQueue 有界队列，基于优先级任务的，它是通过Comparator决定的。</li><li>SynchronousQueue 这个队列比较特殊，它不会保存提交的任务，而是将直接新建一个线程来执行新来的任务</li><li></li><li>处理策略Handler：</li><li>AbortPolicy 默认的拒绝策略，抛RejectedExecutionException异常</li><li>DiscardPolicy 相当大胆的策略，直接丢弃任务，没有任何异常抛出</li><li>DiscardOldestPolicy 丢弃最老的任务，其实就是把最早进入工作队列的任务丢弃，然后把新任务加入到工作队列</li><li>CallerRunsPolicy 提交任务的线程自己去执行该任务</li><li></li><li>线程池的关闭</li><li>shutdown() : 不会立刻终止线程，等所有缓存队列中的任务都执行完毕后才会终止。</li><li>shutdownNow() : 立即终止线程池，并尝试打断正在执行的任务，并且清空任务缓存队列，返回尚未执行的任务<br>*&#x2F;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuyijie.threadpooldemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableAsync;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 13:05</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 配置线程池</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ExecutorService <span class="title function_">getThreadPool</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">threadPool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">2</span>,<span class="number">5</span>,</span><br><span class="line">                <span class="number">1L</span>, TimeUnit.SECONDS,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="number">3</span>),</span><br><span class="line">                Executors.defaultThreadFactory(),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy());</span><br><span class="line">        <span class="keyword">return</span> threadPool;</span><br><span class="line"><span class="comment">//        return Executors.newCachedThreadPool();</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下面的配置是配置Springboot的<span class="doctag">@Async</span>注解所用的线程池</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Executor <span class="title function_">taskExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolTaskExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolTaskExecutor</span>();</span><br><span class="line">        <span class="comment">//获取到cpu内核数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> Runtime.getRuntime().availableProcessors();</span><br><span class="line">        <span class="comment">// 设置线程池核心容量</span></span><br><span class="line">        executor.setCorePoolSize(i);</span><br><span class="line">        <span class="comment">// 设置线程池最大容量</span></span><br><span class="line">        executor.setMaxPoolSize(i * <span class="number">2</span>);</span><br><span class="line">        <span class="comment">// 设置任务队列长度</span></span><br><span class="line">        executor.setQueueCapacity(<span class="number">200</span>);</span><br><span class="line">        <span class="comment">// 设置线程超时时间</span></span><br><span class="line">        executor.setKeepAliveSeconds(<span class="number">60</span>);</span><br><span class="line">        <span class="comment">// 设置线程名称前缀</span></span><br><span class="line">        executor.setThreadNamePrefix(<span class="string">&quot;xyjAsyncPool-&quot;</span>);</span><br><span class="line">        <span class="comment">// 设置任务丢弃后的处理策略,当poolSize已达到maxPoolSize，如何处理新任务（是拒绝还是交由其它线程处理）,CallerRunsPolicy：不在新线程中执行任务，而是由调用者所在的线程来执</span></span><br><span class="line">        executor.setRejectedExecutionHandler(<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());</span><br><span class="line">        executor.initialize();</span><br><span class="line">        <span class="keyword">return</span> executor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&#x2F;**</p></blockquote><ul><li>使用此线程池时直接注入ExecutorService，然后</li><li>executorService.execute(() -&gt; {</li><li><pre><code>        try &#123;</code></pre></li><li><pre><code>            String message = redisUtil.listRightPop(&quot;queue:queueData&quot;, 5, TimeUnit.SECONDS);</code></pre></li><li><pre><code>            System.out.println(&quot;接收到了消息message&quot; + message);</code></pre></li><li><pre><code>        &#125; catch (Exception ex) &#123;</code></pre></li><li><pre><code>            date.set(simpleDateFormat.format(new Date()));</code></pre></li><li><pre><code>            System.out.println(&quot;队列阻塞超时-&quot; + date + ex.getMessage());</code></pre></li><li><pre><code>        &#125; finally &#123;</code></pre></li><li><pre><code>            date.set(simpleDateFormat.format(new Date()));</code></pre></li><li><pre><code>            System.out.println(&quot;线程销毁-&quot; + date);</code></pre></li><li><pre><code>            executorService.shutdown();</code></pre></li><li><pre><code>        &#125;</code></pre></li><li><pre><code>    &#125;);</code></pre>*&#x2F;</li></ul><hr><h1 id="三、新建controller测试"><a href="#三、新建controller测试" class="headerlink" title="三、新建controller测试"></a>三、新建controller测试</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuyijie.threadpooldemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xuyijie.threadpooldemo.async.AsyncMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 10:30</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ExecutorService executorService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AsyncMethod asyncMethod;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/helloThread&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">helloThread</span><span class="params">()</span>&#123;</span><br><span class="line">        executorService.execute(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; <span class="number">100</span>;i++)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;111&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        executorService.execute(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; <span class="number">100</span>;i++)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;222&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/helloAsync&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">helloAsync</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 这个方法是异步的</span></span><br><span class="line">        asyncMethod.print();</span><br><span class="line">        System.out.println(<span class="string">&quot;print方法还在循环，但我已经可以执行了&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;print方法还在循环，但我已经可以执行了&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>AsyncMethod.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuyijie.threadpooldemo.async;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Async;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 15:10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 异步方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncMethod</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 异步方法，如果<span class="doctag">@Async</span>加在类的上面，则整个类中的方法都是异步的</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; <span class="number">100</span>;i++)&#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="四、演示结果"><a href="#四、演示结果" class="headerlink" title="四、演示结果"></a>四、演示结果</h1><blockquote><p>首先演示 helloThread 这个接口，创建了2个线程，发现他们并发执行，成功<br><img src="https://img-blog.csdnimg.cn/ea052b9d43314fbb9dd36ebe996f77dd.png" alt="在这里插入图片描述"><br><br><br>再演示 helloAsync 这个接口，发现 <code>System.out.println(&quot;print方法还在循环，但我已经可以执行了&quot;);</code>这行代码无需等待上面AsyncMethod中的 print 方法执行完毕，就可以开始执行，说明 print 方法是异步的，而且我输出的日志注意看，<code>[xyjAsyncPool - ]</code>，我设置的线程池前缀，已经生效了，成功<br><img src="https://img-blog.csdnimg.cn/35b9086e7f904de0ba7a636b690304a0.png" alt="在这里插入图片描述"></p></blockquote><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> 异步 </tag>
            
            <tag> 多线程 </tag>
            
            <tag> 线程池 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 使用 Redis 并配置序列化和封装 RedisTemplate</title>
      <link href="/2022/09/20/Springboot%20%E4%BD%BF%E7%94%A8%20Redis%20%E5%B9%B6%E9%85%8D%E7%BD%AE%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%B0%81%E8%A3%85%20RedisTemplate/"/>
      <url>/2022/09/20/Springboot%20%E4%BD%BF%E7%94%A8%20Redis%20%E5%B9%B6%E9%85%8D%E7%BD%AE%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%B0%81%E8%A3%85%20RedisTemplate/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>为什么要配置序列化：如果不配置序列化的话，我们在redis数据库中存储的数据可能以乱码形式显示出来，不方便我们判断数据存储的正确性，说白了就是序列化以后存进去的是什么，查询出来的就是什么，否则我们的键值都会变成一串看不懂的乱码。<br><img src="https://img-blog.csdnimg.cn/f019f9f1393a410593faff8681882f5a.png" alt="在这里插入图片描述"></p></blockquote><blockquote><p>为什么要封装RedisTemplate，因为如果不进行封装的话，大家请看，是不是有黄色的警告信息，看着起来很不舒服，RedisTemplate后面的尖括号可以填泛型，填写以后警告就消失了，但我们的类型很多，每次只能Autowired一个RedisTemplate，所以不能写尖括号内的类型，同时封装也能按照自己的习惯自定义方法，更好用。<br><img src="https://img-blog.csdnimg.cn/5bbee598805d444a9743703a928edb84.png" alt="在这里插入图片描述"></p></blockquote><hr><h1 id="一、引入依赖"><a href="#一、引入依赖" class="headerlink" title="一、引入依赖"></a>一、引入依赖</h1><p><code>只需要引入这一个就可以了，现在的版本里面包含了 lettuce ，所以不需要再额外引入 common-pool2</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="二、配置yml"><a href="#二、配置yml" class="headerlink" title="二、配置yml"></a>二、配置yml</h1><p><code>因为我使用的是Springboot 3.0，所以配置层级是 spring-data-redis，如果你们的配置文件爆红，说明你们是旧版，那么把data去掉就可以了，直接是 spring-redis</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="comment">#数据库索引</span></span><br><span class="line">      <span class="attr">database:</span> <span class="number">0</span></span><br><span class="line">      <span class="comment">#redis 服务器地址</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">      <span class="comment">#redis 端口</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="comment">#redis 密码 默认为空</span></span><br><span class="line">      <span class="attr">password:</span></span><br><span class="line">      <span class="comment"># 链接超时时间</span></span><br><span class="line">      <span class="attr">connect-timeout:</span> <span class="string">10s</span></span><br><span class="line">      <span class="comment">#lettuce连接池配置</span></span><br><span class="line">      <span class="attr">lettuce:</span></span><br><span class="line">        <span class="attr">pool:</span></span><br><span class="line">          <span class="comment"># 链接池中最小的空闲链接 默认为0</span></span><br><span class="line">          <span class="attr">min-idle:</span> <span class="number">0</span></span><br><span class="line">          <span class="comment"># 链接池中最大的空闲连接 默认为 8</span></span><br><span class="line">          <span class="attr">max-idle:</span> <span class="number">8</span></span><br><span class="line">          <span class="comment">#连接池中最大数据库链接数 默认为8</span></span><br><span class="line">          <span class="attr">max-active:</span> <span class="number">8</span></span><br><span class="line">          <span class="comment">#连接池最大阻塞等待时间 负值表示没有限制</span></span><br><span class="line">          <span class="attr">max-wait:</span> <span class="string">-1ms</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="三、RedisConfig-配置序列化"><a href="#三、RedisConfig-配置序列化" class="headerlink" title="三、RedisConfig 配置序列化"></a>三、RedisConfig 配置序列化</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.communityinteractionsystem.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonAutoDetect;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.PropertyAccessor;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.jsontype.impl.LaissezFaireSubTypeValidator;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/3/13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> redis配置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> &#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; redisTemplate = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="comment">//创建一个json的序列化对象</span></span><br><span class="line">        <span class="type">GenericJackson2JsonRedisSerializer</span> <span class="variable">jackson2JsonRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>();</span><br><span class="line">        <span class="comment">//设置value的序列化方式json</span></span><br><span class="line">        redisTemplate.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">//设置key序列化方式String</span></span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        <span class="comment">//设置hash key序列化方式String</span></span><br><span class="line">        redisTemplate.setHashKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        <span class="comment">//设置hash value序列化json</span></span><br><span class="line">        redisTemplate.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">// 设置支持事务</span></span><br><span class="line">        redisTemplate.setEnableTransactionSupport(<span class="literal">true</span>);</span><br><span class="line">        redisTemplate.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisSerializer&lt;Object&gt; <span class="title function_">redisSerializer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//创建JSON序列化器</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        <span class="comment">//必须设置，否则无法将JSON转化为对象，会转化成Map类型</span></span><br><span class="line">        objectMapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>(objectMapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="四、封装RedisTemplate"><a href="#四、封装RedisTemplate" class="headerlink" title="四、封装RedisTemplate"></a>四、封装RedisTemplate</h1><p><code>注意，我这里用的是 Java17 新增的 record 纪录类，如果你们是低版本的 JDK ，把 record 更换成 class ，然后注入RedisTemplate</code><br><img src="https://img-blog.csdnimg.cn/292e8f4b21d0414886f353c638bff477.png" alt="在这里插入图片描述"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.communityinteractionsystem.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/4/3</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 对RedisTemplate进行封装</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;rawtypes&quot;, &quot;ConstantConditions&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">RedisUtil</span>&lt;K, V&gt;(RedisTemplate&lt;K, V&gt; redisTemplate) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RedisUtil &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认存活时间 2 天</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">DEFAULT_EXPIRE_TIME</span> <span class="operator">=</span> <span class="number">60</span> * <span class="number">60</span> * <span class="number">48</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据key 获取过期时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键 不能为null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 时间(秒) 返回0代表为永久有效</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getExpireTime</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.getExpire(key, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定缓存失效时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key        键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expireTime 时间(秒)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setExpireTime</span><span class="params">(K key, <span class="type">long</span> expireTime)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (expireTime &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.expire(key, expireTime, TimeUnit.SECONDS);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 移除指定 key 的过期时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeExpireTime</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        redisTemplate.boundValueOps(key).persist();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取缓存中所有的键</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存中所有的键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;K&gt; <span class="title function_">keys</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.keys(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断key是否存在</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true 存在 false不存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasKey</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Boolean.TRUE.equals(redisTemplate.hasKey(key));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据key删除缓</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keys 键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Collection&lt;K&gt; keys)</span> &#123;</span><br><span class="line">        redisTemplate.delete(keys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置分布式锁</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    键，可以用用户主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value  值，可以传requestId，可以保证锁不会被其他请求释放，增加可靠性</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expire 锁的时间(秒)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 设置成功为 true</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">setNx</span><span class="params">(K key, V value, <span class="type">long</span> expire)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().setIfAbsent(key, value, expire, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置分布式锁，有等待时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     键，可以用用户主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value   值，可以传requestId，可以保证锁不会被其他请求释放，增加可靠性</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expire  锁的时间(秒)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout 在timeout时间内仍未获取到锁，则获取失败</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 设置成功为 true</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">setNx</span><span class="params">(K key, V value, <span class="type">long</span> expire, <span class="type">long</span> timeout)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//在一定时间内获取锁，超时则返回错误</span></span><br><span class="line">        <span class="keyword">for</span> (; ; ) &#123;</span><br><span class="line">            <span class="comment">// 获取到锁，并设置过期时间返回true</span></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">acquire</span> <span class="operator">=</span> redisTemplate.opsForValue().setIfAbsent(key, value, expire, TimeUnit.SECONDS);</span><br><span class="line">            <span class="keyword">if</span> (acquire) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//否则循环等待，在timeout时间内仍未获取到锁，则获取失败</span></span><br><span class="line">            <span class="keyword">if</span> (System.currentTimeMillis() - start &gt; timeout) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 释放分布式锁</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 锁</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值，可以传requestId，可以保证锁不会被其他请求释放，增加可靠性</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 成功返回true, 失败返回false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">releaseNx</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">currentValue</span> <span class="operator">=</span> redisTemplate.opsForValue().get(key);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (String.valueOf(currentValue) != <span class="literal">null</span> &amp;&amp; currentValue.equals(value)) &#123;</span><br><span class="line">            result = redisTemplate.opsForValue().getOperations().delete(key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***********      String 类型操作           **************/</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 普通缓存放入</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForValue().set(key, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 普通缓存放入并设置时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  时间(秒) time要大于0 如果time小于等于0 将设置无限期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(K key, V value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.opsForValue().set(key, value, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                redisTemplate.opsForValue().set(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * value增加值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> number 增加的值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回增加后的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">incrBy</span><span class="params">(String key, <span class="type">long</span> number)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (Long) redisTemplate.execute((RedisCallback) connection -&gt; connection.incrBy(key.getBytes(), number));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * value减少值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> number 减少的值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回减少后的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">decrBy</span><span class="params">(String key, <span class="type">long</span> number)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (Long) redisTemplate.execute((RedisCallback) connection -&gt; connection.decrBy(key.getBytes(), number));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据key获取value</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        BoundValueOperations&lt;K, V&gt; boundValueOperations = redisTemplate.boundValueOps(key);</span><br><span class="line">        <span class="keyword">return</span> boundValueOperations.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***********      list 类型操作           **************/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将value从右边放入缓存</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listRightPush</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        ListOperations&lt;K, V&gt; listOperations = redisTemplate.opsForList();</span><br><span class="line">        <span class="comment">//从队列右插入</span></span><br><span class="line">        listOperations.rightPush(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将value从左边放入缓存</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listLeftPush</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        ListOperations&lt;K, V&gt; listOperations = redisTemplate.opsForList();</span><br><span class="line">        <span class="comment">//从队列右插入</span></span><br><span class="line">        listOperations.leftPush(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将list从右边放入缓存</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listRightPushAll</span><span class="params">(K key, List&lt;V&gt; value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将list从左边放入缓存</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listLeftPushAll</span><span class="params">(K key, List&lt;V&gt; value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().leftPushAll(key, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过索引 获取list中的值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 索引 index&gt;=0时， 0 表头，1 第二个元素，依次类推；index&lt;0时，-1，表尾，-2倒数第二个元素，依次类推</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回列表中的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">listGetWithIndex</span><span class="params">(K key, <span class="type">long</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().index(key, index);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从list左边弹出一条数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 队列中的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">listLeftPop</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        ListOperations&lt;K, V&gt; listOperations = redisTemplate.opsForList();</span><br><span class="line">        <span class="keyword">return</span> listOperations.leftPop(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从list左边定时弹出一条</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout 弹出时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> unit 时间单位</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 队列中的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">listLeftPop</span><span class="params">(K key, <span class="type">long</span> timeout, TimeUnit unit)</span> &#123;</span><br><span class="line">        ListOperations&lt;K, V&gt; listOperations = redisTemplate.opsForList();</span><br><span class="line">        <span class="keyword">return</span> listOperations.leftPop(key, timeout, unit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从list右边弹出一条数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 队列中的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">listRightPop</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        ListOperations&lt;K, V&gt; listOperations = redisTemplate.opsForList();</span><br><span class="line">        <span class="keyword">return</span> listOperations.rightPop(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从list左边定时弹出</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout 弹出时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> unit 时间单位</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 队列中的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">listRightPop</span><span class="params">(K key, <span class="type">long</span> timeout, TimeUnit unit)</span> &#123;</span><br><span class="line">        ListOperations&lt;K, V&gt; listOperations = redisTemplate.opsForList();</span><br><span class="line">        <span class="keyword">return</span> listOperations.leftPop(key, timeout, unit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取list缓存的内容</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start 开始下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end   结束下标  0 到 -1 代表所有值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> list内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;V&gt; <span class="title function_">listRange</span><span class="params">(K key, <span class="type">long</span> start, <span class="type">long</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ListOperations&lt;K, V&gt; listOperations = redisTemplate.opsForList();</span><br><span class="line">            <span class="keyword">return</span> listOperations.range(key, start, end);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取list缓存的长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> list长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listSize</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据索引修改list中的某条数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listSet</span><span class="params">(K key, <span class="type">long</span> index, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().set(key, index, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从lit中移除N个值为value的值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> count 移除多少个</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 移除的个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listRemove</span><span class="params">(K key, <span class="type">long</span> count, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().remove(key, count, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***********      hash 类型操作           **************/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据key和键获取value</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  键 不能为null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item 项 不能为null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;HK, HV&gt; HV <span class="title function_">hashGet</span><span class="params">(K key, String item)</span> &#123;</span><br><span class="line">        HashOperations&lt;K, HK, HV&gt; hashOperations = redisTemplate.opsForHash();</span><br><span class="line">        <span class="keyword">return</span> hashOperations.get(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取key对应的所有键值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 对应的多个键值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;HK, HV&gt; Map&lt;HK, HV&gt; <span class="title function_">hashMGet</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        HashOperations&lt;K, HK, HV&gt; hashOperations = redisTemplate.opsForHash();</span><br><span class="line">        <span class="keyword">return</span> hashOperations.entries(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加map到hash中</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map 对应多个键值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hashMSet</span><span class="params">(K key, Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加map到hash中，并设置过期时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key        键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map        对应多个键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expireTime 时间(秒)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hashMSet</span><span class="params">(K key, Map&lt;String, Object&gt; map, <span class="type">long</span> expireTime)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">if</span> (expireTime &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.expire(key, expireTime, TimeUnit.SECONDS);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向hash表中放入一个数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKey  map 的键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;HK, HV&gt; <span class="keyword">void</span> <span class="title function_">hashPut</span><span class="params">(K key, HK hKey, HV value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            HashOperations&lt;K, HK, HV&gt; hashOperations = redisTemplate.opsForHash();</span><br><span class="line">            hashOperations.put(key, hKey, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向hash表中放入一个数据，并设置过期时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key        键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKey       map 的键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value      值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expireTime 时间(秒) 注意:如果已存在的hash表有时间,这里将会替换原有的时间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;HK, HV&gt; <span class="keyword">void</span> <span class="title function_">hashPut</span><span class="params">(K key, HK hKey, HV value, <span class="type">long</span> expireTime)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, hKey, value);</span><br><span class="line">            <span class="keyword">if</span> (expireTime &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.expire(key, expireTime, TimeUnit.SECONDS);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断hash表中是否有该项的值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  键 不能为null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKey map 的键 不能为null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true 存在 false不存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;HK, HV&gt; <span class="type">boolean</span> <span class="title function_">hashHasKey</span><span class="params">(K key, HK hKey)</span> &#123;</span><br><span class="line">        HashOperations&lt;K, HK, HV&gt; hashOperations = redisTemplate.opsForHash();</span><br><span class="line">        <span class="keyword">return</span> hashOperations.hasKey(key, hKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 取出所有 value</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> map 中所有值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;HK, HV&gt; List&lt;HV&gt; <span class="title function_">hashValues</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        HashOperations&lt;K, HK, HV&gt; hashOperations = redisTemplate.opsForHash();</span><br><span class="line">        <span class="keyword">return</span> hashOperations.values(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 取出所有 hKey</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> map 所有的键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;HK, HV&gt; Set&lt;HK&gt; <span class="title function_">hashHKeys</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        HashOperations&lt;K, HK, HV&gt; hashOperations = redisTemplate.opsForHash();</span><br><span class="line">        <span class="keyword">return</span> hashOperations.keys(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除hash表中的键值，并返回删除个数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hashKeys 要删除的值的键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 删除个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;HK, HV&gt; Long <span class="title function_">hashDelete</span><span class="params">(K key, Object... hashKeys)</span> &#123;</span><br><span class="line">        HashOperations&lt;K, HK, HV&gt; hashOperations = redisTemplate.opsForHash();</span><br><span class="line">        <span class="keyword">return</span> hashOperations.delete(key, hashKeys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***********      set 类型操作           **************/</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将数据放入set缓存</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values 值 可以是多个</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAdd</span><span class="params">(K key, V... values)</span> &#123;</span><br><span class="line">        redisTemplate.opsForSet().add(key, values);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将set数据放入缓存，并设置过期时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key        键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expireTime 时间(秒)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values     值 可以是多个</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAdd</span><span class="params">(K key, <span class="type">long</span> expireTime, V... values)</span> &#123;</span><br><span class="line">        redisTemplate.opsForSet().add(key, values);</span><br><span class="line">        <span class="keyword">if</span> (expireTime &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            redisTemplate.expire(key, expireTime, TimeUnit.SECONDS);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取set缓存的长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> set缓存的长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setSize</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据key获取Set中的所有值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Set中的所有值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;V&gt; <span class="title function_">setValues</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        SetOperations&lt;K, V&gt; setOperations = redisTemplate.opsForSet();</span><br><span class="line">        <span class="keyword">return</span> setOperations.members(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据value从一个set中查询,是否存在</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 要查询的值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true 存在 false不存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">setHasKey</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Boolean.TRUE.equals(redisTemplate.opsForSet().isMember(key, value));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据value删除，并返回删除的个数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 要删除的值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 删除的个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">setDelete</span><span class="params">(K key, Object... value)</span> &#123;</span><br><span class="line">        SetOperations&lt;K, V&gt; setOperations = redisTemplate.opsForSet();</span><br><span class="line">        <span class="keyword">return</span> setOperations.remove(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***********      zset 类型操作           **************/</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在 zset中插入一条数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 要插入的值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> score 设置分数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">zSetAdd</span><span class="params">(K key, V value, <span class="type">long</span> score)</span> &#123;</span><br><span class="line">        ZSetOperations&lt;K, V&gt; zSetOperations = redisTemplate.opsForZSet();</span><br><span class="line">        zSetOperations.add(key, value, score);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到分数在 score1，score2 之间的值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> score1 起始分数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> score2 终止分数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 范围内所有值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;V&gt; <span class="title function_">zSetValuesRange</span><span class="params">(K key, <span class="type">long</span> score1, <span class="type">long</span> score2)</span> &#123;</span><br><span class="line">        ZSetOperations&lt;K, V&gt; zSetOperations = redisTemplate.opsForZSet();</span><br><span class="line">        <span class="keyword">return</span> zSetOperations.range(key, score1, score2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据value删除，并返回删除个数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 要删除的值，可传入多个</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 删除个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">zSetDeleteByValue</span><span class="params">(K key, Object... value)</span> &#123;</span><br><span class="line">        ZSetOperations&lt;K, V&gt; zSetOperations = redisTemplate.opsForZSet();</span><br><span class="line">        <span class="keyword">return</span> zSetOperations.remove(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据下标范围删除，并返回删除个数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size1 起始下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size2 结束下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 删除个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">zSetDeleteRange</span><span class="params">(K key, <span class="type">long</span> size1, <span class="type">long</span> size2)</span> &#123;</span><br><span class="line">        ZSetOperations&lt;K, V&gt; zSetOperations = redisTemplate.opsForZSet();</span><br><span class="line">        <span class="keyword">return</span> zSetOperations.removeRange(key, size1, size2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除分数区间内元素，并返回删除个数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> score1 起始分数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> score2 终止分数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 删除个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">zSetDeleteByScore</span><span class="params">(K key, <span class="type">long</span> score1, <span class="type">long</span> score2)</span> &#123;</span><br><span class="line">        ZSetOperations&lt;K, V&gt; zSetOperations = redisTemplate.opsForZSet();</span><br><span class="line">        <span class="keyword">return</span> zSetOperations.removeRangeByScore(key, score1, score2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="五、controller使用RedisUtil"><a href="#五、controller使用RedisUtil" class="headerlink" title="五、controller使用RedisUtil"></a>五、controller使用RedisUtil</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuyijie.redisdemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xuyijie.redisdemo.utils.RedisUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/20 10:30</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisUtil&lt;String, String&gt; redisUtil;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/helloString/&#123;key&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">helloString</span><span class="params">(<span class="meta">@PathVariable</span> String key)</span>&#123;</span><br><span class="line">        redisUtil.set(<span class="string">&quot;key&quot;</span>, key);</span><br><span class="line">        <span class="keyword">return</span> (String) redisUtil.get(<span class="string">&quot;key&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/helloList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">helloList</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//向key中push一个元素“0”</span></span><br><span class="line">        redisUtil.listLeftPush(<span class="string">&quot;key2&quot;</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">        <span class="comment">//把一个列表push进key</span></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>));</span><br><span class="line">        redisUtil.listLeftPushAll(<span class="string">&quot;key2&quot;</span>, list);</span><br><span class="line">        <span class="comment">//读取存储的列表中的全部元素，0， -1代表从第一个元素到最后一个元素</span></span><br><span class="line">        <span class="keyword">return</span> redisUtil.listRange(<span class="string">&quot;key2&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="六、操作演示"><a href="#六、操作演示" class="headerlink" title="六、操作演示"></a>六、操作演示</h1><p><code>我们先来演示一下第二个方法，直接浏览器请求，可以看到，存入并查询出了我们存入的数据</code><br><img src="https://img-blog.csdnimg.cn/65e7183b79ba4f0b90994fb56ea16dfa.png" alt="在这里插入图片描述"><br><code>redis控制台也能查询出来</code><br><img src="https://img-blog.csdnimg.cn/649b68f5d5d0476d99f59958559b91a9.png" alt="在这里插入图片描述"></p><blockquote><p>为什么先演示第二个方法呢，因为要用第一个向你们展示一个“小错误”，我们输入中文来测试一下<br><img src="https://img-blog.csdnimg.cn/5347d5365be04a2992f55b333b261615.png" alt="在这里插入图片描述"><br>很棒，成功存入并正确读取出来了对不对<br> <b><br> 那我们去控制台看一看，注意看，我们的键还是“key”，没有乱码，value的前半部分中文乱码，后面的String是正常显示的，说明这不是序列化的问题<br> <img src="https://img-blog.csdnimg.cn/87fca7083f4f410f958abc2643b41c51.png" alt="在这里插入图片描述"><br> 解决方案是，使用 redis-cli –raw 进入控制台，flushall 先清空数据，再次请求接口存储数据，查询出来的中文就出来了，但是我们还是看不懂，这和代码和redis没有关系<br> <img src="https://img-blog.csdnimg.cn/761875bad2e14440b1dc3f7a290bbfc7.png" alt="在这里插入图片描述"><br>  原因是电脑的 cmd 字符默认是 GBK，你们bing一下，看看怎么把cmd改为 UTF-8，好像要从注册表里面改，改好就可以正确显示了</p></blockquote><p><code>其实代码可以正确读取出来就说明一切正常的了，我们控制台看到乱码不必理会，这里只是提一下</code></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Redis </tag>
            
            <tag> Lettuce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot引入hibernate配置自动建表并进行增删改查</title>
      <link href="/2022/09/19/Springboot%E5%BC%95%E5%85%A5hibernate%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%BB%BA%E8%A1%A8%E5%B9%B6%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/"/>
      <url>/2022/09/19/Springboot%E5%BC%95%E5%85%A5hibernate%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%BB%BA%E8%A1%A8%E5%B9%B6%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>有些业务比较复杂，比如我们需要新建10张表，每张表有10个字段，如果用手工来操作，肯定非常浪费时间，而且随着代码中对实体类的修改，还要同时修改数据库表，有时候写着写着就忘了，代码改了，数据库没改，这种问题使用 hibernate 的自动建表就好啦。</p></blockquote><hr><h1 id="一、引入依赖"><a href="#一、引入依赖" class="headerlink" title="一、引入依赖"></a>一、引入依赖</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="二、配置yml"><a href="#二、配置yml" class="headerlink" title="二、配置yml"></a>二、配置yml</h1><blockquote><p>自动建表的配置是ddl-auto，有多个属性可选</p></blockquote><h1 id="1-none-永远以数据表字段为准，不做任何修改"><a href="#1-none-永远以数据表字段为准，不做任何修改" class="headerlink" title="1. none 永远以数据表字段为准，不做任何修改"></a>1. none 永远以数据表字段为准，不做任何修改</h1><h1 id="2-validate-加载hibernate时，验证创建数据库表结构，会和数据库中的表进行比较，不会创建新表，但是会插入新值"><a href="#2-validate-加载hibernate时，验证创建数据库表结构，会和数据库中的表进行比较，不会创建新表，但是会插入新值" class="headerlink" title="2. validate 加载hibernate时，验证创建数据库表结构，会和数据库中的表进行比较，不会创建新表，但是会插入新值"></a>2. validate 加载hibernate时，验证创建数据库表结构，会和数据库中的表进行比较，不会创建新表，但是会插入新值</h1><h1 id="3-create-每次加载hibernate，重新创建数据库表结构，这就是导致数据库表数据丢失的原因"><a href="#3-create-每次加载hibernate，重新创建数据库表结构，这就是导致数据库表数据丢失的原因" class="headerlink" title="3. create 每次加载hibernate，重新创建数据库表结构，这就是导致数据库表数据丢失的原因"></a>3. create 每次加载hibernate，重新创建数据库表结构，这就是导致数据库表数据丢失的原因</h1><h1 id="4-create-drop-加载hibernate时创建，退出是删除表结构"><a href="#4-create-drop-加载hibernate时创建，退出是删除表结构" class="headerlink" title="4. create-drop 加载hibernate时创建，退出是删除表结构"></a>4. create-drop 加载hibernate时创建，退出是删除表结构</h1><h1 id="5-update-加载hibernate自动更新数据库结构（最常用的一个）"><a href="#5-update-加载hibernate自动更新数据库结构（最常用的一个）" class="headerlink" title="5. update 加载hibernate自动更新数据库结构（最常用的一个）"></a>5. update 加载hibernate自动更新数据库结构（最常用的一个）</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/test?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai&amp;rewriteBatchedStatements=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">jpa:</span></span><br><span class="line">    <span class="attr">hibernate:</span></span><br><span class="line">      <span class="attr">ddl-auto:</span> <span class="string">update</span></span><br><span class="line">    <span class="comment"># 打印SQL语句</span></span><br><span class="line">    <span class="attr">show-sql:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h1 id="三、写代码"><a href="#三、写代码" class="headerlink" title="三、写代码"></a>三、写代码</h1><h2 id="1、新建数据库（空数据库即可，不要新建表）"><a href="#1、新建数据库（空数据库即可，不要新建表）" class="headerlink" title="1、新建数据库（空数据库即可，不要新建表）"></a>1、新建数据库（空数据库即可，不要新建表）</h2><h2 id="2、实体类"><a href="#2、实体类" class="headerlink" title="2、实体类"></a>2、实体类</h2><blockquote><p>@Id代表这是主键，@GeneratedValue和@GenericGenerator设置主键策略是UUID<br>@Column可以不写，name是数据库中的字段名，如果数据库中要新建的对应字段也叫name，可以不写，columnDefinition指定字段在数据库中的类型、长度、注释等</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuyijie.test.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.persistence.*;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.annotations.GenericGenerator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/19 17:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//JPA(Hibernate)的实体类注解</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="comment">//表名</span></span><br><span class="line"><span class="meta">@Table(name = &quot;people&quot;)</span></span><br><span class="line"><span class="comment">//Lombok</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Id代表这是主键，GeneratedValue和GenericGenerator设置主键策略是UUID</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(generator = &quot;id&quot;)</span></span><br><span class="line">    <span class="meta">@GenericGenerator(name = &quot;id&quot;, strategy = &quot;uuid.hex&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Column可以不写，name是数据库中的字段名，如果数据库中要新建的对应字段也叫name，可以不写，columnDefinition指定字段在数据库中的类型、长度、注释等</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;name&quot;, columnDefinition=&quot;varchar(255) NOT NULL COMMENT &#x27;名字&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;sex&quot;, columnDefinition=&quot;varchar(2) NOT NULL COMMENT &#x27;性别&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;age&quot;, columnDefinition=&quot;int&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3、Dao层"><a href="#3、Dao层" class="headerlink" title="3、Dao层"></a>3、Dao层</h2><blockquote><p>JpaRepository&lt;People, String&gt;尖括号里面填写的是实体类和实体类的主键数据类型，PeopleMapper继承JpaRepository以后，可以把PeopleMapper 注入到Service里，使用很多内置方法</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuyijie.test.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xuyijie.test.entity.People;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/19 17:42</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PeopleMapper</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;People, String&gt; &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4、Controller"><a href="#4、Controller" class="headerlink" title="4、Controller"></a>4、Controller</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuyijie.test.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xuyijie.test.entity.People;</span><br><span class="line"><span class="keyword">import</span> com.xuyijie.test.mapper.PeopleMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/19 17:12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PeopleMapper peopleMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello/&#123;str&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">Hello</span><span class="params">(<span class="meta">@PathVariable</span> String str)</span>&#123;</span><br><span class="line">        <span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>();</span><br><span class="line">        people.setName(str);</span><br><span class="line">        people.setSex(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">        <span class="comment">// 这里的save和findAll都是hibernate自带的方法，里面还有很多内置方法</span></span><br><span class="line">        peopleMapper.save(people);</span><br><span class="line">        System.out.println(peopleMapper.findAll());</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="四、测试结果"><a href="#四、测试结果" class="headerlink" title="四、测试结果"></a>四、测试结果</h1><h2 id="1、表已建好"><a href="#1、表已建好" class="headerlink" title="1、表已建好"></a>1、表已建好</h2><p><img src="https://img-blog.csdnimg.cn/c285a6b368364f4b86cab8a12f480932.png" alt="在这里插入图片描述"></p><h2 id="2、请求接口，打印SQL，插入和查询数据"><a href="#2、请求接口，打印SQL，插入和查询数据" class="headerlink" title="2、请求接口，打印SQL，插入和查询数据"></a>2、请求接口，打印SQL，插入和查询数据</h2><p>使用浏览器调用接口</p><p><img src="https://img-blog.csdnimg.cn/5bf89c248d4e40bea3a2cc7014bdeb91.png" alt="在这里插入图片描述"><br>控制台打印出SQL语句，查询出我们刚刚插入的一条数据，主键为自动生成的UUID</p><p><img src="https://img-blog.csdnimg.cn/ed7b48cdd41c4c71ad599732d4ffcf53.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/baf77bb06cd1406aa195097531c1cf9c.png" alt="在这里插入图片描述"></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> hibernate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pega BPM学习笔记和Demo项目</title>
      <link href="/2022/09/06/Pega%20BPM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%92%8CDemo%E9%A1%B9%E7%9B%AE/"/>
      <url>/2022/09/06/Pega%20BPM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%92%8CDemo%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>Pega&#39;s BPM study notes</code></p><p>Pega的BPM学习笔记</p><p><code>I have just started, and I know that PEGA&#39;s learning resources are scarce, so I hope everyone can make progress together.</code></p><p>本人刚刚入门，深知Pega的学习资源稀少，所以希望大家共同进步</p><p><code>If you have any learning experience, you can upload it to our warehouse.</code></p><p>大家如果有学习心得，可以上传到本仓库哦</p><p><code>My PEGA RPA has also started. I will upload RPA demo and learning notes later.</code></p><p>本人的Pega RPA也入门了，后续会上传RPA的demo和学习笔记&#96;</p><p><a href="https://github.com/XuYijie000416/Pega">Pega-Github地址</a></p><p><img src="https://img-blog.csdnimg.cn/a2aa89d3ea9d4bfdbcc2f488a93299e3.png" alt="在这里插入图片描述"></p><h1 id="项目实例"><a href="#项目实例" class="headerlink" title="项目实例"></a>项目实例</h1><p><img src="https://img-blog.csdnimg.cn/2ddb79a5946b43b38aa53bc1ec4a0fc5.png" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Pega </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pega </tag>
            
            <tag> RPA </tag>
            
            <tag> BPM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>分别使用 BIO 和 NIO 的实现简易群聊系统</title>
      <link href="/2022/08/29/%E5%88%86%E5%88%AB%E4%BD%BF%E7%94%A8%20BIO%20%E5%92%8C%20NIO%20%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E7%BE%A4%E8%81%8A%E7%B3%BB%E7%BB%9F/"/>
      <url>/2022/08/29/%E5%88%86%E5%88%AB%E4%BD%BF%E7%94%A8%20BIO%20%E5%92%8C%20NIO%20%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E7%BE%A4%E8%81%8A%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>下面是BIO和NIO的原理结构图，可以看出使用BIO时，每个客户端都会独占一个线程，而使用NIO时，一个Selector选择器独占一个线程，一个选择器下面可以连接多个客户端，然后Selector开始轮询下面的每一个客户端，这就提高了线程的复用，所以叫非阻塞IO</code></p><p><img src="https://img-blog.csdnimg.cn/9de0e63deef14190b01100372a0e1c73.png" alt="在这里插入图片描述"></p><hr><h1 id="一、BIO"><a href="#一、BIO" class="headerlink" title="一、BIO"></a>一、BIO</h1><blockquote><p>下面的代码已经完成了一个 BIO 服务端的编写，启动下面的代码后，可以用 cmd 的 telnet 命令来连接到服务端（telnet怎么安装可以自己bing一下哦）。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 127.0.0.1 6666</span><br></pre></td></tr></table></figure><blockquote><p>然后回车，就可以输入要发送的文字信息了，有些电脑可能回车以后还需要按一下 Ctrl+J 才能开始输入文字，这时，我们的cmd就变成了客户端，可以向服务端发送信息。</p></blockquote><hr><h2 id="1、代码（含服务端、客户端）"><a href="#1、代码（含服务端、客户端）" class="headerlink" title="1、代码（含服务端、客户端）"></a>1、代码（含服务端、客户端）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.bio;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/8/18 16:40</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> BIO Demo</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BIOServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//创建一个线程池</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">        <span class="comment">//创建ServerSocket</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">6666</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务器已启动&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;等待连接...&quot;</span>);</span><br><span class="line">            <span class="comment">//监听，等待客户端连接</span></span><br><span class="line">            <span class="keyword">final</span> <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">            System.out.println(<span class="string">&quot;连接到一个客户端&quot;</span>);</span><br><span class="line">            <span class="comment">//创建一个线程，与之通信</span></span><br><span class="line">            executorService.execute(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        handler(socket);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span> 2022/8/23</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> 和客户端通信</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">handler</span><span class="params">(Socket socket)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;线程信息：id=&quot;</span> + Thread.currentThread().getId() + <span class="string">&quot; name=&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//通过Socket，获取输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="comment">//循环读取客户端发送的数据</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;正在等待客户端信息...&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">read</span> <span class="operator">=</span> inputStream.read(bytes);</span><br><span class="line">            <span class="keyword">if</span> (read != -<span class="number">1</span>)&#123;</span><br><span class="line">                System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">0</span>, read));</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            socket.close();</span><br><span class="line">            System.out.println(<span class="string">&quot;客户端连接已关闭&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="2、演示"><a href="#2、演示" class="headerlink" title="2、演示"></a>2、演示</h2><p><img src="https://img-blog.csdnimg.cn/42717364a5b14d5799b4476a18f77382.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/047af4efbb5c4e1f8252a1b4150a5178.png" alt="在这里插入图片描述"></p><hr><h1 id="二、NIO"><a href="#二、NIO" class="headerlink" title="二、NIO"></a>二、NIO</h1><blockquote><p>下面的代码分为 Server 和 Client，将idea设置成同时启动多个相同类（看我下面的截图），可以启动多个客户端，而且Server有转发功能，收到任意一个客户端发来的消息，都可以把消息转发给其他所有客户端，也就是说任意一个客户端发送的消息，其他客户端和服务端都可以看到，可以作为一个简易的群聊系统。</p></blockquote><p><code>首先Edit Configurations</code></p><p><img src="https://img-blog.csdnimg.cn/5c739589de8b49aca93b8e4e9f47e43a.png" alt="在这里插入图片描述"><br><code>然后选择要启动多个的类，我这里是 NIOClient，把Allow multiple instance勾上，确定就可以了</code></p><p><img src="https://img-blog.csdnimg.cn/c01bb4b783224d27934982aac4e5e80b.png" alt="在这里插入图片描述"></p><hr><h2 id="1、代码"><a href="#1、代码" class="headerlink" title="1、代码"></a>1、代码</h2><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><p><code>NIOServer.java，这个是服务端，只需要启动一个</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.nio.groupchat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.InetSocketAddress;</span><br><span class="line"><span class="keyword">import</span> java.nio.ByteBuffer;</span><br><span class="line"><span class="keyword">import</span> java.nio.channels.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/8/23 20:10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NIOServer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Selector selector;</span><br><span class="line">    <span class="keyword">private</span> ServerSocketChannel serverSocketChannel;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PORT</span> <span class="operator">=</span> <span class="number">6667</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造器完成初始化工作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NIOServer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//得到选择器</span></span><br><span class="line">            selector = Selector.open();</span><br><span class="line">            <span class="comment">//开启通道</span></span><br><span class="line">            serverSocketChannel = ServerSocketChannel.open();</span><br><span class="line">            <span class="comment">//绑定端口</span></span><br><span class="line">            serverSocketChannel.socket().bind(<span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(PORT));</span><br><span class="line">            <span class="comment">//设置非阻塞</span></span><br><span class="line">            serverSocketChannel.configureBlocking(<span class="literal">false</span>);</span><br><span class="line">            <span class="comment">//把通道注册到选择器</span></span><br><span class="line">            serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 监听</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listen</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//循环处理</span></span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> selector.select(<span class="number">2000</span>);</span><br><span class="line">                <span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">//有事件处理</span></span><br><span class="line">                    <span class="comment">//遍历得到selectionKey集合</span></span><br><span class="line">                    Iterator&lt;SelectionKey&gt; iterator = selector.selectedKeys().iterator();</span><br><span class="line">                    <span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">                        <span class="type">SelectionKey</span> <span class="variable">selectionKey</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">                        <span class="keyword">if</span> (selectionKey.isAcceptable())&#123;</span><br><span class="line">                            <span class="type">SocketChannel</span> <span class="variable">socketChannel</span> <span class="operator">=</span> serverSocketChannel.accept();</span><br><span class="line">                            socketChannel.configureBlocking(<span class="literal">false</span>);</span><br><span class="line">                            <span class="comment">//将通道注册到选择器</span></span><br><span class="line">                            socketChannel.register(selector, SelectionKey.OP_READ);</span><br><span class="line">                            System.out.println(socketChannel.getRemoteAddress() + <span class="string">&quot;上线了！&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (selectionKey.isReadable())&#123;</span><br><span class="line">                            readData(selectionKey);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//从当前keys中删除，防止重复操作</span></span><br><span class="line">                        iterator.remove();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;正在监听...&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 读取客户端消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> selectionKey</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readData</span><span class="params">(SelectionKey selectionKey)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//得到关联的SocketChannel</span></span><br><span class="line">        <span class="type">SocketChannel</span> <span class="variable">socketChannel</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            socketChannel = (SocketChannel) selectionKey.channel();</span><br><span class="line">            <span class="comment">//创建buffer</span></span><br><span class="line">            <span class="type">ByteBuffer</span> <span class="variable">byteBuffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> socketChannel.read(byteBuffer);</span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//将buffer中的数据转成字符串</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(byteBuffer.array());</span><br><span class="line">                System.out.println(<span class="string">&quot;客户端：&quot;</span> + msg);</span><br><span class="line">                <span class="comment">//向其他客户端转发消息</span></span><br><span class="line">                sendMsgToOtherClients(msg, socketChannel);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.println(socketChannel.getRemoteAddress() + <span class="string">&quot;离线了！&quot;</span>);</span><br><span class="line">            <span class="comment">//取消注册</span></span><br><span class="line">            selectionKey.cancel();</span><br><span class="line">            <span class="comment">//关闭通道</span></span><br><span class="line">            socketChannel.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 转发消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> socketChannel</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMsgToOtherClients</span><span class="params">(String msg, SocketChannel socketChannel)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;服务器转发消息&quot;</span>);</span><br><span class="line">        <span class="comment">//遍历所有注册到选择器上的SocketChannel，并排除自己</span></span><br><span class="line">        <span class="keyword">for</span> (SelectionKey selectionKey : selector.keys())&#123;</span><br><span class="line">            <span class="comment">//通过key取出相应的通道</span></span><br><span class="line">            <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> selectionKey.channel();</span><br><span class="line">            <span class="comment">//排除自己</span></span><br><span class="line">            <span class="keyword">if</span> (channel <span class="keyword">instanceof</span> SocketChannel &amp;&amp; channel != socketChannel)&#123;</span><br><span class="line">                <span class="type">SocketChannel</span> <span class="variable">socketChannel1</span> <span class="operator">=</span> (SocketChannel) channel;</span><br><span class="line">                <span class="comment">//将msg存储到buffer</span></span><br><span class="line">                <span class="type">ByteBuffer</span> <span class="variable">byteBuffer</span> <span class="operator">=</span> ByteBuffer.wrap(msg.getBytes());</span><br><span class="line">                <span class="comment">//将buffer的数据写入通道</span></span><br><span class="line">                socketChannel1.write(byteBuffer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建一个服务器对象</span></span><br><span class="line">        <span class="type">NIOServer</span> <span class="variable">nioServer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NIOServer</span>();</span><br><span class="line">        nioServer.listen();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><p><code>NIOClient.java，这时客户端，设置好以后，可以点击多次启动，启动多个</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.nio.groupchat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.InetSocketAddress;</span><br><span class="line"><span class="keyword">import</span> java.nio.ByteBuffer;</span><br><span class="line"><span class="keyword">import</span> java.nio.channels.SelectionKey;</span><br><span class="line"><span class="keyword">import</span> java.nio.channels.Selector;</span><br><span class="line"><span class="keyword">import</span> java.nio.channels.SocketChannel;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/8/23 20:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NIOClient</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">HOST</span> <span class="operator">=</span> <span class="string">&quot;127.0.0.1&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PORT</span> <span class="operator">=</span> <span class="number">6667</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Selector selector;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SocketChannel socketChannel;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造器完成初始化工作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NIOClient</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//得到选择器</span></span><br><span class="line">        selector = Selector.open();</span><br><span class="line">        <span class="comment">//连接服务器</span></span><br><span class="line">        socketChannel = SocketChannel.open(<span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(HOST, PORT));</span><br><span class="line">        <span class="comment">//设置非阻塞</span></span><br><span class="line">        socketChannel.configureBlocking(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//将通道注册到选择器</span></span><br><span class="line">        socketChannel.register(selector, SelectionKey.OP_READ);</span><br><span class="line">        <span class="comment">//得到username</span></span><br><span class="line">        username = socketChannel.getLocalAddress().toString().substring(<span class="number">1</span>);</span><br><span class="line">        System.out.println(username + <span class="string">&quot;已连接&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向服务端发送消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMsg</span><span class="params">(String msg)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        msg = username + <span class="string">&quot;：&quot;</span> + msg;</span><br><span class="line">        socketChannel.write(ByteBuffer.wrap(msg.getBytes()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 接收从其他客户端转发的消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readMsg</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">readChannel</span> <span class="operator">=</span> selector.select();</span><br><span class="line">        <span class="keyword">if</span> (readChannel &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//有可用通道</span></span><br><span class="line">            Iterator&lt;SelectionKey&gt; iterator = selector.selectedKeys().iterator();</span><br><span class="line">            <span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">                <span class="type">SelectionKey</span> <span class="variable">selectionKey</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">                <span class="keyword">if</span> (selectionKey.isReadable())&#123;</span><br><span class="line">                    <span class="comment">//得到相关通道</span></span><br><span class="line">                    <span class="type">SocketChannel</span> <span class="variable">socketChannel1</span> <span class="operator">=</span> (SocketChannel) selectionKey.channel();</span><br><span class="line">                    <span class="comment">//得到buffer</span></span><br><span class="line">                    <span class="type">ByteBuffer</span> <span class="variable">byteBuffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">                    <span class="comment">//读取</span></span><br><span class="line">                    socketChannel1.read(byteBuffer);</span><br><span class="line">                    <span class="comment">//把buffer的数据转换成字符串</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(byteBuffer.array());</span><br><span class="line">                    System.out.println(msg.trim());</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//没有可用通道</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;没有可用通道&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//启动客户端</span></span><br><span class="line">        <span class="type">NIOClient</span> <span class="variable">nioClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NIOClient</span>();</span><br><span class="line">        <span class="comment">//启动一个线程</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        nioClient.readMsg();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        sleep(<span class="number">3000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">        <span class="comment">//发送数据给服务端</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span> (scanner.hasNextLine())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">            nioClient.sendMsg(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="2、演示-1"><a href="#2、演示-1" class="headerlink" title="2、演示"></a>2、演示</h2><blockquote><p>启动两个文件，先启动 NIOServer.java，再启动 NIOClient.java，NIOClient我启动了两个，因为服务器有转发功能，相当于一个群聊系统.</p></blockquote><p><img src="https://img-blog.csdnimg.cn/9efa8e81e838424e929e690d8db201b0.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/e1859a97710644b6ad64e813de508b83.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/1b00e21e59264746b1a656b5aeb312a6.png" alt="![在这里插入图片描述](https://img-blog.csdnimg.cn/faead29b143f"><br><img src="https://img-blog.csdnimg.cn/d38faa8883c24c75bfb0764f50b6289f.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>以上是 JDK 的原生 BIO 和 NIO 的使用 demo，代码的意思在注释里面基本都有写，但是写的不是很详细，因为我也没有完全弄懂，这东西要慢慢自己断点调试来研究，接下来会写 NIO 的框架——Netty</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> BIO </tag>
            
            <tag> NIO </tag>
            
            <tag> Netty </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Pega进行一个简单的RPA程序开发</title>
      <link href="/2022/06/24/%E4%BD%BF%E7%94%A8Pega%E8%BF%9B%E8%A1%8C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84RPA%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/"/>
      <url>/2022/06/24/%E4%BD%BF%E7%94%A8Pega%E8%BF%9B%E8%A1%8C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84RPA%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Pega 和 RPA 可能都是大多数程序员没有了解过的东西，本人在一家外企做 BPM 和 RPA 项目的部门工作，进入公司的时候就遇到了稀缺技术的学习资源少的问题，因此在此将我学习和工作积累下来的一些知识记录下来。</p><p><code>放个 Pega BPM 的笔记连接</code><br><a href="https://blog.csdn.net/qq_48922459/article/details/126729159?spm=1001.2014.3001.5501">CSDN</a><br><a href="https://github.com/XuYijie000416/Pega">Github仓库</a></p><hr><h1 id="一、Pega是什么"><a href="#一、Pega是什么" class="headerlink" title="一、Pega是什么"></a>一、Pega是什么</h1><p>Pega总的来说可以做两件事——BPM(Business Process Management) 和 RPA(Robotic Process Automation)。关于它的最好的事情之一是开发没有代码开发的应用程序，其中整个开发过程都是可视化的。通过这种方式，您可以构建可扩展的自动化应用程序，并从应用程序中引入许多其他必要的功能。当然，如果你喜欢代码，也可以在 Pega 中方便地嵌入 Java 或者 C# 代码。</p><h2 id="BPM（业务流程管理）"><a href="#BPM（业务流程管理）" class="headerlink" title="BPM（业务流程管理）"></a>BPM（业务流程管理）</h2><p>大型企业的业务流程非常复杂，并且需要高效和自动化的重复性操作，比如一个企业的ERP系统有很复杂的逻辑，这用代码实现起来就非常的复杂，并且后来的程序员也很难读懂这些流程，Pega就是为此而生的，它可以将业务流程以可视化的方式进行构建和展示出来，就和画流程图一样，开发方便、后来者读懂流程也更容易，这就叫BPM。</p><h2 id="RPA（机器人流程自动化）"><a href="#RPA（机器人流程自动化）" class="headerlink" title="RPA（机器人流程自动化）"></a>RPA（机器人流程自动化）</h2><p>比如一个企业的电子对账系统上有很多重复性工作，需要会计不断地点击，对比数据，确定账单等，这些工作就可以使用 RPA 来完成，将这个工作的操作方法以可视化的方式告诉Pega，Pega将在设定的时间自动打开电子对账系统，进行对账操作，并通过邮件告诉相关会计人员对账结果。</p><hr><h1 id="二、构建一个简单的-RPA-程序"><a href="#二、构建一个简单的-RPA-程序" class="headerlink" title="二、构建一个简单的 RPA 程序"></a>二、构建一个简单的 RPA 程序</h1><p>我做一个简单的例子，要实现自动打开浏览器，进入Bing主页，然后搜索上海天气，选中一条搜索结果，将里面的天气信息输出来。</p><h2 id="新建一个Pega项目"><a href="#新建一个Pega项目" class="headerlink" title="新建一个Pega项目"></a>新建一个Pega项目</h2><p>打开Visual Studio，当然是配置好Pega的VS，配置教程暂时不写，我也还没弄清楚。</p><p><img src="https://img-blog.csdnimg.cn/220a7339cfdf465781478b8ca7b2bce0.jpeg" alt="在这里插入图片描述"></p><h2 id="新建universal-web-application"><a href="#新建universal-web-application" class="headerlink" title="新建universal web application"></a>新建universal web application</h2><p>指定一个程序要进行操作的网站<br>右键新建的Pega项目“Project6”，添加-新建项，选择universal web application，不选web application是因为它仅支持IE浏览器。</p><p><img src="https://img-blog.csdnimg.cn/6dd57d1274654105a04892fafae4a85f.jpeg" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/07f5a6bd61d44331afeb64293560797e.jpeg" alt="在这里插入图片描述"></p><h2 id="抓取页面元素"><a href="#抓取页面元素" class="headerlink" title="抓取页面元素"></a>抓取页面元素</h2><p>双击右边我们新建的universal web，会打开中间界面，单击左边的web application，右下角会出现属性设置。</p><p><img src="https://img-blog.csdnimg.cn/4dd7484d01f94564b50dd8b99237fc1c.jpeg" alt="在这里插入图片描述"><br>startPage是要打开的网站的网址，我们用Bing搜索引擎来演示。</p><p><img src="https://img-blog.csdnimg.cn/c0300f1b72d542b799d12158ff0f2a24.jpeg" alt="在这里插入图片描述"></p><p>设置完成后点击start interrogation，会打开刚刚设置的startPage网址，并出现一个小弹窗。</p><p><img src="https://img-blog.csdnimg.cn/f2136f9c1ea04478a4138bc3db2c1baf.jpeg" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/c7ce84ad67aa41719694477ba861bb11.jpeg" alt="在这里插入图片描述"><br>我们一般选择模式为select elements，拖动弹窗的那个靶心一样的图标，放到要抓取的页面元素上<br>，这里我抓取搜索框。</p><p><img src="https://img-blog.csdnimg.cn/e27a9e9c33d34d8fa3fa46a295fc4989.png" alt="在这里插入图片描述"><br>会出现抓取的页面结构，我们选择 input 标签，点击 create</p><p><img src="https://img-blog.csdnimg.cn/4b24003ae5ea494eabd98fb48c29c5ab.jpeg" alt="在这里插入图片描述"><br>VS中就出现了我们刚刚抓取的搜索框</p><p><img src="https://img-blog.csdnimg.cn/c7bfe66461bc47f3a7294c0da92efb8a.jpeg" alt="在这里插入图片描述"></p><p>按照刚刚的方法，抓取搜索框右边的搜索按钮</p><hr><h1 id="三、构建流程"><a href="#三、构建流程" class="headerlink" title="三、构建流程"></a>三、构建流程</h1><h2 id="新建Automation"><a href="#新建Automation" class="headerlink" title="新建Automation"></a>新建Automation</h2><p>新建的 Pega 项目应该自带一个 Automation1，如果没有，就自己新建一个，还是右键 pega 项目，新建项</p><p><img src="https://img-blog.csdnimg.cn/f47fa99002684f61a6268e2a25c95579.png" alt="在这里插入图片描述"></p><h2 id="开始构建"><a href="#开始构建" class="headerlink" title="开始构建"></a>开始构建</h2><p>流程的起始要添加一个 Execute ，然后点击左边的 universal web application，选择属性栏里面的 startPage，设置打开的网址，然后选择动作栏里面的 started，然后等待这个动作，防止电脑卡，浏览器打开的慢导致报错，然后选择方法栏里面的 start 方法，setup连接 start，选中我门抓取的搜索框，在左下方属性栏把 text 属性拖进来，连接到fried。图中蓝色的线代表传值，黄色的线代表流程走向。工具箱里面的 string 方法是创建一个变量，赋值给搜索框的 text 属性，然后选中我们抓取的搜索按钮 searchButton，在方法栏中把performClick拖出来，代表点击一下搜索按钮。</p><p>[video(video-4OWXf9Z4-1656057397844)(type-csdn)(url-<a href="https://live.csdn.net/v/embed/218751)(image-https://video-community.csdnimg.cn/vod-84deb4/faa34210cf1041f48c148f54c8acad74/snapshots/946076a9409845c8b503d99022716a25-00005.jpg?auth_key=4809656909-0-0-dc9e0ca767056dbe4eb6437e7e61053c)">https://live.csdn.net/v/embed/218751)(image-https://video-community.csdnimg.cn/vod-84deb4/faa34210cf1041f48c148f54c8acad74/snapshots/946076a9409845c8b503d99022716a25-00005.jpg?auth_key=4809656909-0-0-dc9e0ca767056dbe4eb6437e7e61053c)</a>(title-Pega RPA流程构建视频)]</p><p>上面的演示已经演示了80%的构建过程，下面是完整的，最后的三步要你们自己研究哦，成功后，会和下面的成果演示一样<br><img src="https://img-blog.csdnimg.cn/5a33f0a7ef6c4285ba04961c974a30fb.jpeg" alt="在这里插入图片描述"></p><hr><h1 id="成果演示"><a href="#成果演示" class="headerlink" title="成果演示"></a>成果演示</h1><p><img src="https://img-blog.csdnimg.cn/7cabd6a619ee44ed9efb76ac34d281a2.gif" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Pega </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pega </tag>
            
            <tag> RPA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian(Linux) 安装Windows通用字体(可解决TimesNewRoman等字体的报错)</title>
      <link href="/2022/05/09/Debian(Linux)%20%E5%AE%89%E8%A3%85Windows%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93(%E5%8F%AF%E8%A7%A3%E5%86%B3TimesNewRoman%E7%AD%89%E5%AD%97%E4%BD%93%E7%9A%84%E6%8A%A5%E9%94%99)/"/>
      <url>/2022/05/09/Debian(Linux)%20%E5%AE%89%E8%A3%85Windows%E9%80%9A%E7%94%A8%E5%AD%97%E4%BD%93(%E5%8F%AF%E8%A7%A3%E5%86%B3TimesNewRoman%E7%AD%89%E5%AD%97%E4%BD%93%E7%9A%84%E6%8A%A5%E9%94%99)/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近写了个小玩意儿，PDF转Word，体验很棒，图片和插画都能识别出来正确转换，可是部署到线上以后，转换会有Arial和TImesNewRoman字体的报错</p><p>原因就是Linux的字体和Windows的不太一样，毕竟PDF都是WIndows上面保存下来的。</p><hr><h1 id="一、直接操作"><a href="#一、直接操作" class="headerlink" title="一、直接操作"></a>一、直接操作</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ttf-mscorefonts-installer <span class="comment"># 安装</span></span><br><span class="line"><span class="comment">#这里刷新两遍缓存，保险</span></span><br><span class="line">sudo fc-cache -f -v</span><br><span class="line">sudo fc-cache</span><br><span class="line"><span class="comment">#测试一下TimesNewRoman这个字体有没有安装成功</span></span><br><span class="line">fc-match Times</span><br></pre></td></tr></table></figure><p>大功告成<br><img src="https://img-blog.csdnimg.cn/b24596b2bceb489a931a2d09ac0304a0.png" alt="在这里插入图片描述"><br>然后一定要重启报错的项目</p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>完</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Debian </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS Airport 搭建日志</title>
      <link href="/2022/04/10/AWS%20Airport%20%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/"/>
      <url>/2022/04/10/AWS%20Airport%20%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>仅供学习交流，为了我们大家好，不要在网络上传播本篇内容</code></p><p>&#x3D;&#x3D;注意，下面的服务器操作请务必使用root用户，或者每句命令前加 sudo&#x3D;&#x3D;</p><hr><h1 id="一、安装谷歌BBR加速"><a href="#一、安装谷歌BBR加速" class="headerlink" title="一、安装谷歌BBR加速"></a>一、安装谷歌BBR加速</h1><blockquote><p>TCP BBR是谷歌出品的TCP拥塞控制算法。BBR目的是要尽量跑满带宽，并且尽量不要有排队的情况。BBR可以起到单边加速TCP连接的效果。Google提交到Linux主线并发表在ACM queue期刊上的TCP-BBR拥塞控制算法。继承了Google“先在生产环境上部署，再开源和发论文”的研究传统。</p><p>TCP-BBR已经再YouTube服务器和Google跨数据中心的内部广域网(B4)上部署。由此可见出该算法的前途。TCP-BBR的目标就是最大化利用网络上瓶颈链路的带宽。一条网络链路就像一条水管，要想最大化利用这条水管，最好的办法就是给这跟水管灌满水。</p><p>BBR解决了两个问题：在有一定丢包率的网络链路上充分利用带宽。非常适合高延迟，高带宽的网络链路。降低网络链路上的buffer占用率，从而降低延迟。非常适合慢速接入网络的用户。Google 在 2016年9月份开源了他们的优化网络拥堵算法BBR，最新版本的 Linux内核(4.9-rc8)中已经集成了该算法。对于TCP单边加速，并非所有人都很熟悉，不过有另外一个大名鼎鼎的商业软件“锐速”，相信很多人都清楚。特别是对于使用国外服务器或者VPS的人来说，效果更佳。</p></blockquote><p><a href="https://raw.githubusercontent.com/teddysun/across/master/bbr.sh">https://raw.githubusercontent.com/teddysun/across/master/bbr.sh</a></p><p>有些服务器系统在进行<code>wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh &amp;&amp; chmod +x bbr.sh &amp;&amp; ./bbr.sh</code>这行命令时会出现权限不足的问题，所以可以使用上面的地址自行新建一个 <code>bbr.sh</code> 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[ec2-user@ip-172-31-29-157 ~]$ vim bbr.sh <span class="comment"># 新建一个bbr.sh，文件内容在上方链接</span></span><br><span class="line">[ec2-user@ip-172-31-29-157 ~]$ <span class="built_in">chmod</span> 777 bbr.sh <span class="comment"># 赋予最高权限</span></span><br><span class="line">[ec2-user@ip-172-31-29-157 ~]$ sh bbr.sh <span class="comment"># 运行sh文件，如果不使用root权限会报错</span></span><br><span class="line">[Error] This script must be run as root</span><br><span class="line">[ec2-user@ip-172-31-29-157 ~]$ su root</span><br><span class="line">Password: </span><br><span class="line">su: Authentication failure</span><br><span class="line">[ec2-user@ip-172-31-29-157 ~]$ sudo -s <span class="comment"># 切换到root用户，两种方式，上面那个需要密码</span></span><br><span class="line">[root@ip-172-31-29-157 ec2-user] <span class="built_in">ls</span></span><br><span class="line">bbr.sh</span><br><span class="line">[root@ip-172-31-29-157 ec2-user] sh bbr.sh <span class="comment"># 运行sh文件</span></span><br><span class="line">---------- System Information ----------</span><br><span class="line"> OS      : Amazon Linux 2</span><br><span class="line"> Arch    : x86_64 (64 Bit)</span><br><span class="line"> Kernel  : 5.10.102-99.473.amzn2.x86_64</span><br><span class="line">----------------------------------------</span><br><span class="line"> Automatically <span class="built_in">enable</span> TCP BBR script</span><br><span class="line"></span><br><span class="line"> URL: https://teddysun.com/489.html</span><br><span class="line">----------------------------------------</span><br><span class="line"></span><br><span class="line">Press any key to start...or Press Ctrl+C to cancel</span><br><span class="line"></span><br><span class="line">[Info] The kernel version is greater than 4.9, directly setting TCP BBR...</span><br><span class="line">[Info] Setting TCP BBR completed...</span><br><span class="line">[root@ip-172-31-29-157 ec2-user] lsmod | grep bbr <span class="comment">#检查谁否安装成功</span></span><br><span class="line">tcp_bbr                20480  1</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="二、安装小飞机"><a href="#二、安装小飞机" class="headerlink" title="二、安装小飞机"></a>二、安装小飞机</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br></pre></td><td class="code"><pre><span class="line">[root@ip-172-31-29-157 ec2-user] wget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh <span class="comment">#下载小飞机运行脚本</span></span><br><span class="line">--2022-04-10 03:12:12--  https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh</span><br><span class="line">Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.108.133, 185.199.109.133, 185.199.110.133, ...</span><br><span class="line">Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.108.133|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 46729 (46K) [text/plain]</span><br><span class="line">Saving to: ‘shadowsocks-all.sh’</span><br><span class="line"></span><br><span class="line">100%[=========================================================================================================================================================================&gt;] 46,729      --.-K/s   <span class="keyword">in</span> 0.001s  </span><br><span class="line"></span><br><span class="line">2022-04-10 03:12:12 (67.2 MB/s) - ‘shadowsocks-all.sh’ saved [46729/46729]</span><br><span class="line"></span><br><span class="line">[root@ip-172-31-29-157 ec2-user] <span class="built_in">chmod</span> 777 shadowsocks-all.sh <span class="comment"># 赋予脚本最高权限</span></span><br><span class="line">[root@ip-172-31-29-157 ec2-user] ./shadowsocks-all.sh 2&gt;＆1 | <span class="built_in">tee</span> shadowsocks-all.log <span class="comment"># 执行脚</span></span><br><span class="line">Which Shadowsocks server you select: <span class="comment">#选择客户端语言，我们一般选python</span></span><br><span class="line">1) Shadowsocks-Python</span><br><span class="line">2) ShadowsocksR</span><br><span class="line">3) Shadowsocks-Go</span><br><span class="line">4) Shadowsocks-libev</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">You choose = Shadowsocks-Python</span><br><span class="line"></span><br><span class="line">Please enter password <span class="keyword">for</span> Shadowsocks-Python <span class="comment">#设置连接密码</span></span><br><span class="line">XuYijie312416</span><br><span class="line"></span><br><span class="line">password = XuYijie312416</span><br><span class="line"></span><br><span class="line">Please enter a port <span class="keyword">for</span> Shadowsocks-Python [1-65535] <span class="comment"># 设置连接端口（不要忘记防火墙放行）</span></span><br><span class="line">5000</span><br><span class="line"></span><br><span class="line">port = 5000</span><br><span class="line"></span><br><span class="line">Please select stream cipher <span class="keyword">for</span> Shadowsocks-Python: <span class="comment"># 选择加密方式</span></span><br><span class="line">1) aes-256-gcm</span><br><span class="line">2) aes-192-gcm</span><br><span class="line">3) aes-128-gcm</span><br><span class="line">4) aes-256-ctr</span><br><span class="line">5) aes-192-ctr</span><br><span class="line">6) aes-128-ctr</span><br><span class="line">7) aes-256-cfb</span><br><span class="line">8) aes-192-cfb</span><br><span class="line">9) aes-128-cfb</span><br><span class="line">10) camellia-128-cfb</span><br><span class="line">11) camellia-192-cfb</span><br><span class="line">12) camellia-256-cfb</span><br><span class="line">13) xchacha20-ietf-poly1305</span><br><span class="line">14) chacha20-ietf-poly1305</span><br><span class="line">15) chacha20-ietf</span><br><span class="line">16) chacha20</span><br><span class="line">17) salsa20</span><br><span class="line">18) rc4-md5</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">cipher = aes-256-gcm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Press any key to start...or Press Ctrl+C to cancel <span class="comment"># 按下回车，可能出现以下报错</span></span><br><span class="line">[Info] Checking the EPEL repository...</span><br><span class="line">[Error] Install EPEL repository failed, please check it.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#解决方案，修复epel</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@ip-172-31-29-157 ec2-user] yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span><br><span class="line">Loaded plugins: extras_suggestions, langpacks, priorities, update-motd</span><br><span class="line">epel-release-latest-7.noarch.rpm                                                                                                                                                            |  15 kB  00:00:00     </span><br><span class="line">Examining /var/tmp/yum-root-oCtaN1/epel-release-latest-7.noarch.rpm: epel-release-7-14.noarch</span><br><span class="line">Marking /var/tmp/yum-root-oCtaN1/epel-release-latest-7.noarch.rpm to be installed</span><br><span class="line">Resolving Dependencies</span><br><span class="line">--&gt; Running transaction check</span><br><span class="line">---&gt; Package epel-release.noarch 0:7-14 will be installed</span><br><span class="line">--&gt; Finished Dependency Resolution</span><br><span class="line"></span><br><span class="line">Dependencies Resolved</span><br><span class="line"></span><br><span class="line">===================================================================================================================================================================================================================</span><br><span class="line"> Package                                           Arch                                        Version                                    Repository                                                          Size</span><br><span class="line">===================================================================================================================================================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> epel-release                                      noarch                                      7-14                                       /epel-release-latest-7.noarch                                       25 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">===================================================================================================================================================================================================================</span><br><span class="line">Install  1 Package</span><br><span class="line"></span><br><span class="line">Total size: 25 k</span><br><span class="line">Installed size: 25 k</span><br><span class="line">Is this ok [y/d/N]: y</span><br><span class="line">Downloading packages:</span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction <span class="built_in">test</span></span><br><span class="line">Transaction <span class="built_in">test</span> succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  Installing : epel-release-7-14.noarch                                                                                                                                                                        1/1 </span><br><span class="line">  Verifying  : epel-release-7-14.noarch                                                                                                                                                                        1/1 </span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  epel-release.noarch 0:7-14                                                                                                                                                                                       </span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">[root@ip-172-31-29-157 ec2-user]<span class="comment"># yum-config-manager --enable epel</span></span><br><span class="line">Loaded plugins: extras_suggestions, langpacks, priorities, update-motd</span><br><span class="line">=================================================================================================== repo: epel ====================================================================================================</span><br><span class="line">[epel]</span><br><span class="line">async = True</span><br><span class="line">bandwidth = 0</span><br><span class="line">base_persistdir = /var/lib/yum/repos/x86_64/2</span><br><span class="line">baseurl = </span><br><span class="line">cache = 0</span><br><span class="line">cachedir = /var/cache/yum/x86_64/2/epel</span><br><span class="line">check_config_file_age = True</span><br><span class="line">compare_providers_priority = 80</span><br><span class="line">cost = 1000</span><br><span class="line">deltarpm_metadata_percentage = 100</span><br><span class="line">deltarpm_percentage = </span><br><span class="line">enabled = True</span><br><span class="line">enablegroups = True</span><br><span class="line">exclude = </span><br><span class="line">failovermethod = priority</span><br><span class="line">ftp_disable_epsv = False</span><br><span class="line">gpgcadir = /var/lib/yum/repos/x86_64/2/epel/gpgcadir</span><br><span class="line">gpgcakey = </span><br><span class="line">gpgcheck = True</span><br><span class="line">gpgdir = /var/lib/yum/repos/x86_64/2/epel/gpgdir</span><br><span class="line">gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line">hdrdir = /var/cache/yum/x86_64/2/epel/headers</span><br><span class="line">http_caching = all</span><br><span class="line">includepkgs = </span><br><span class="line">ip_resolve = </span><br><span class="line">keepalive = True</span><br><span class="line">keepcache = False</span><br><span class="line">mddownloadpolicy = sqlite</span><br><span class="line">mdpolicy = group:small</span><br><span class="line">mediaid = </span><br><span class="line">metadata_expire = 21600</span><br><span class="line">metadata_expire_filter = read-only:present</span><br><span class="line">metalink = https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;<span class="built_in">arch</span>=x86_64&amp;infra=<span class="variable">$infra</span>&amp;content=<span class="variable">$contentdir</span></span><br><span class="line">minrate = 0</span><br><span class="line">mirrorlist = </span><br><span class="line">mirrorlist_expire = 86400</span><br><span class="line">name = Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - x86_64</span><br><span class="line">old_base_cache_dir = </span><br><span class="line">password = </span><br><span class="line">persistdir = /var/lib/yum/repos/x86_64/2/epel</span><br><span class="line">pkgdir = /var/cache/yum/x86_64/2/epel/packages</span><br><span class="line">priority = 99</span><br><span class="line">proxy = False</span><br><span class="line">proxy_dict = </span><br><span class="line">proxy_password = </span><br><span class="line">proxy_username = </span><br><span class="line">repo_gpgcheck = False</span><br><span class="line">report_instanceid = False</span><br><span class="line">retries = 7</span><br><span class="line">skip_if_unavailable = False</span><br><span class="line">ssl_check_cert_permissions = True</span><br><span class="line">sslcacert = </span><br><span class="line">sslclientcert = </span><br><span class="line">sslclientkey = </span><br><span class="line">sslverify = True</span><br><span class="line">throttle = 0</span><br><span class="line"><span class="built_in">timeout</span> = 5.0</span><br><span class="line">ui_id = epel/x86_64</span><br><span class="line">ui_repoid_vars = releasever,</span><br><span class="line">   basearch</span><br><span class="line">username = </span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后再运行一次小飞机脚本，成功</span></span><br><span class="line"></span><br><span class="line">[root@ip-172-31-29-157 ec2-user] ./shadowsocks-all.sh 2&gt;＆1 | <span class="built_in">tee</span> shadowsocks-all.log</span><br><span class="line">Which Shadowsocks server you select:</span><br><span class="line">1) Shadowsocks-Python</span><br><span class="line">2) ShadowsocksR</span><br><span class="line">3) Shadowsocks-Go</span><br><span class="line">4) Shadowsocks-libev</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">You choose = Shadowsocks-Python</span><br><span class="line"></span><br><span class="line">Please enter password <span class="keyword">for</span> Shadowsocks-Python</span><br><span class="line">XuYijie312416</span><br><span class="line"></span><br><span class="line">password = XuYijie312416</span><br><span class="line"></span><br><span class="line">Please enter a port <span class="keyword">for</span> Shadowsocks-Python [1-65535]</span><br><span class="line">5000</span><br><span class="line"></span><br><span class="line">port = 5000</span><br><span class="line"></span><br><span class="line">Please select stream cipher <span class="keyword">for</span> Shadowsocks-Python:</span><br><span class="line">1) aes-256-gcm</span><br><span class="line">2) aes-192-gcm</span><br><span class="line">3) aes-128-gcm</span><br><span class="line">4) aes-256-ctr</span><br><span class="line">5) aes-192-ctr</span><br><span class="line">6) aes-128-ctr</span><br><span class="line">7) aes-256-cfb</span><br><span class="line">8) aes-192-cfb</span><br><span class="line">9) aes-128-cfb</span><br><span class="line">10) camellia-128-cfb</span><br><span class="line">11) camellia-192-cfb</span><br><span class="line">12) camellia-256-cfb</span><br><span class="line">13) xchacha20-ietf-poly1305</span><br><span class="line">14) chacha20-ietf-poly1305</span><br><span class="line">15) chacha20-ietf</span><br><span class="line">16) chacha20</span><br><span class="line">17) salsa20</span><br><span class="line">18) rc4-md5</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">cipher = aes-256-gcm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Press any key to start...or Press Ctrl+C to cancel</span><br><span class="line">[Info] Checking the EPEL repository...</span><br><span class="line">[Info] Checking the EPEL repository complete...</span><br><span class="line">[Info] Starting to install package unzip</span><br><span class="line">[Info] Starting to install package gzip</span><br><span class="line">[Info] Starting to install package openssl</span><br><span class="line">[Info] Starting to install package openssl-devel</span><br><span class="line">[Info] Starting to install package gcc</span><br><span class="line">[Info] Starting to install package python</span><br><span class="line">[Info] Starting to install package python-devel</span><br><span class="line">[Info] Starting to install package python-setuptools</span><br><span class="line">[Info] Starting to install package pcre</span><br><span class="line">[Info] Starting to install package pcre-devel</span><br><span class="line">[Info] Starting to install package libtool</span><br><span class="line">[Info] Starting to install package libevent</span><br><span class="line">[Info] Starting to install package autoconf</span><br><span class="line">[Info] Starting to install package automake</span><br><span class="line">[Info] Starting to install package make</span><br><span class="line">[Info] Starting to install package curl</span><br><span class="line">[Info] Starting to install package curl-devel</span><br><span class="line">[Info] Starting to install package zlib-devel</span><br><span class="line">[Info] Starting to install package perl</span><br><span class="line">[Info] Starting to install package perl-devel</span><br><span class="line">[Info] Starting to install package cpio</span><br><span class="line">[Info] Starting to install package expat-devel</span><br><span class="line">[Info] Starting to install package gettext-devel</span><br><span class="line">[Info] Starting to install package libev-devel</span><br><span class="line">[Info] Starting to install package c-ares-devel</span><br><span class="line">[Info] Starting to install package git</span><br><span class="line">[Info] Starting to install package qrencode</span><br><span class="line">shadowsocks-master.zip not found, download now...</span><br><span class="line">shadowsocks-python not found, download now...</span><br><span class="line">libsodium-1.0.18.tar.gz not found, download now...</span><br><span class="line">checking build system <span class="built_in">type</span>... x86_64-pc-linux-gnu</span><br><span class="line">checking host system <span class="built_in">type</span>... x86_64-pc-linux-gnu</span><br><span class="line">checking <span class="keyword">for</span> a BSD-compatible install... /bin/install -c</span><br><span class="line">checking whether build environment is sane... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> a thread-safe <span class="built_in">mkdir</span> -p... /bin/mkdir -p</span><br><span class="line">checking <span class="keyword">for</span> gawk... gawk</span><br><span class="line">checking whether make sets $(MAKE)... <span class="built_in">yes</span></span><br><span class="line">checking whether make supports nested variables... <span class="built_in">yes</span></span><br><span class="line">checking whether UID <span class="string">&#x27;0&#x27;</span> is supported by ustar format... <span class="built_in">yes</span></span><br><span class="line">checking whether GID <span class="string">&#x27;0&#x27;</span> is supported by ustar format... <span class="built_in">yes</span></span><br><span class="line">checking how to create a ustar tar archive... gnutar</span><br><span class="line">checking whether make supports nested variables... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether to <span class="built_in">enable</span> maintainer-specific portions of Makefiles... no</span><br><span class="line">checking whether make supports the include directive... <span class="built_in">yes</span> (GNU style)</span><br><span class="line">checking <span class="keyword">for</span> gcc... gcc</span><br><span class="line">checking whether the C compiler works... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> C compiler default output file name... a.out</span><br><span class="line">checking <span class="keyword">for</span> suffix of executables... </span><br><span class="line">checking whether we are cross compiling... no</span><br><span class="line">checking <span class="keyword">for</span> suffix of object files... o</span><br><span class="line">checking whether we are using the GNU C compiler... <span class="built_in">yes</span></span><br><span class="line">checking whether gcc accepts -g... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> gcc option to accept ISO C89... none needed</span><br><span class="line">checking whether gcc understands -c and -o together... <span class="built_in">yes</span></span><br><span class="line">checking dependency style of gcc... gcc3</span><br><span class="line">checking <span class="keyword">for</span> a sed that does not <span class="built_in">truncate</span> output... /bin/sed</span><br><span class="line">checking how to run the C preprocessor... gcc -E</span><br><span class="line">checking <span class="keyword">for</span> grep that handles long lines and -e... /bin/grep</span><br><span class="line">checking <span class="keyword">for</span> egrep... /bin/grep -E</span><br><span class="line">checking whether gcc is Clang... no</span><br><span class="line">checking whether pthreads work with -pthread... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> joinable pthread attribute... PTHREAD_CREATE_JOINABLE</span><br><span class="line">checking whether more special flags are required <span class="keyword">for</span> pthreads... no</span><br><span class="line">checking <span class="keyword">for</span> PTHREAD_PRIO_INHERIT... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> gcc option to accept ISO C99... none needed</span><br><span class="line">checking dependency style of gcc... gcc3</span><br><span class="line">checking <span class="keyword">for</span> ANSI C header files... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> sys/types.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> sys/stat.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> stdlib.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> string.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> memory.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> strings.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> inttypes.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> stdint.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> unistd.h... <span class="built_in">yes</span></span><br><span class="line">checking minix/config.h usability... no</span><br><span class="line">checking minix/config.h presence... no</span><br><span class="line">checking <span class="keyword">for</span> minix/config.h... no</span><br><span class="line">checking whether it is safe to define __EXTENSIONS__... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> variable-length arrays... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> __wasi__ defined... no</span><br><span class="line">checking <span class="keyword">for</span> _FORTIFY_SOURCE defined... no</span><br><span class="line">checking whether C compiler accepts -D_FORTIFY_SOURCE=2... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -fvisibility=hidden... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -fPIC... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -fPIE... <span class="built_in">yes</span></span><br><span class="line">checking whether the linker accepts -pie... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -fno-strict-aliasing... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -fno-strict-overflow... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -fstack-protector... <span class="built_in">yes</span></span><br><span class="line">checking whether the linker accepts -fstack-protector... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wall... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> clang... no</span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span>... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration -Wpointer-arith... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration -Wpointer-arith -Wredundant-decls... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration -Wpointer-arith -Wredundant-decls -Wrestrict... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration -Wpointer-arith -Wredundant-decls -Wrestrict -Wshorten-64-to-32... no</span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration -Wpointer-arith -Wredundant-decls -Wrestrict -Wsometimes-uninitialized... no</span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration -Wpointer-arith -Wredundant-decls -Wrestrict -Wstrict-prototypes... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration -Wpointer-arith -Wredundant-decls -Wrestrict -Wstrict-prototypes -Wswitch-enum... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration -Wpointer-arith -Wredundant-decls -Wrestrict -Wstrict-prototypes -Wswitch-enum -Wvariable-decl... no</span><br><span class="line">checking whether C compiler accepts -g -O2 -pthread -fvisibility=hidden -fPIC -fPIE -fno-strict-aliasing -fno-strict-overflow -fstack-protector -Wextra -Wbad-function-cast -Wcast-qual -Wdiv-by-zero -Wduplicated-branches -Wduplicated-cond -Wfloat-equal -Wformat=2 -Wlogical-op -Wmaybe-uninitialized -Wmisleading-indentation -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wno-type-limits -Wno-unknown-pragmas -Wnormalized=<span class="built_in">id</span> -Wnull-dereference -Wold-style-declaration -Wpointer-arith -Wredundant-decls -Wrestrict -Wstrict-prototypes -Wswitch-enum -Wwrite-strings... <span class="built_in">yes</span></span><br><span class="line">checking whether the linker accepts -Wl,-z,relro... <span class="built_in">yes</span></span><br><span class="line">checking whether the linker accepts -Wl,-z,now... <span class="built_in">yes</span></span><br><span class="line">checking whether the linker accepts -Wl,-z,noexecstack... <span class="built_in">yes</span></span><br><span class="line">checking whether segmentation violations can be caught when using the C compiler... <span class="built_in">yes</span></span><br><span class="line">checking whether SIGABRT can be caught when using the C compiler... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> thread <span class="built_in">local</span> storage (TLS) class... _Thread_local</span><br><span class="line">thread <span class="built_in">local</span> storage is supported</span><br><span class="line">checking whether C compiler accepts -ftls-model=local-dynamic... <span class="built_in">yes</span></span><br><span class="line">checking how to <span class="built_in">print</span> strings... <span class="built_in">printf</span></span><br><span class="line">checking <span class="keyword">for</span> a sed that does not <span class="built_in">truncate</span> output... (cached) /bin/sed</span><br><span class="line">checking <span class="keyword">for</span> fgrep... /bin/grep -F</span><br><span class="line">checking <span class="keyword">for</span> ld used by gcc... /bin/ld</span><br><span class="line">checking <span class="keyword">if</span> the linker (/bin/ld) is GNU ld... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> BSD- or MS-compatible name lister (nm)... /bin/nm -B</span><br><span class="line">checking the name lister (/bin/nm -B) interface... BSD nm</span><br><span class="line">checking whether <span class="built_in">ln</span> -s works... <span class="built_in">yes</span></span><br><span class="line">checking the maximum length of <span class="built_in">command</span> line arguments... 1572864</span><br><span class="line">checking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop</span><br><span class="line">checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop</span><br><span class="line">checking <span class="keyword">for</span> /bin/ld option to reload object files... -r</span><br><span class="line">checking <span class="keyword">for</span> objdump... objdump</span><br><span class="line">checking how to recognize dependent libraries... pass_all</span><br><span class="line">checking <span class="keyword">for</span> dlltool... no</span><br><span class="line">checking how to associate runtime and <span class="built_in">link</span> libraries... <span class="built_in">printf</span> %s\n</span><br><span class="line">checking <span class="keyword">for</span> ar... ar</span><br><span class="line">checking <span class="keyword">for</span> archiver @FILE support... @</span><br><span class="line">checking <span class="keyword">for</span> strip... strip</span><br><span class="line">checking <span class="keyword">for</span> ranlib... ranlib</span><br><span class="line">checking <span class="built_in">command</span> to parse /bin/nm -B output from gcc object... ok</span><br><span class="line">checking <span class="keyword">for</span> sysroot... no</span><br><span class="line">checking <span class="keyword">for</span> a working <span class="built_in">dd</span>... /bin/dd</span><br><span class="line">checking how to <span class="built_in">truncate</span> binary pipes... /bin/dd bs=4096 count=1</span><br><span class="line">checking <span class="keyword">for</span> mt... no</span><br><span class="line">checking <span class="keyword">if</span> : is a manifest tool... no</span><br><span class="line">checking <span class="keyword">for</span> dlfcn.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> objdir... .libs</span><br><span class="line">checking <span class="keyword">if</span> gcc supports -fno-rtti -fno-exceptions... no</span><br><span class="line">checking <span class="keyword">for</span> gcc option to produce PIC... -fPIC -DPIC</span><br><span class="line">checking <span class="keyword">if</span> gcc PIC flag -fPIC -DPIC works... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">if</span> gcc static flag -static works... no</span><br><span class="line">checking <span class="keyword">if</span> gcc supports -c -o file.o... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">if</span> gcc supports -c -o file.o... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether the gcc linker (/bin/ld -m elf_x86_64) supports shared libraries... <span class="built_in">yes</span></span><br><span class="line">checking whether -lc should be explicitly linked <span class="keyword">in</span>... no</span><br><span class="line">checking dynamic linker characteristics... GNU/Linux ld.so</span><br><span class="line">checking how to hardcode library paths into programs... immediate</span><br><span class="line">checking whether stripping libraries is possible... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">if</span> libtool supports shared libraries... <span class="built_in">yes</span></span><br><span class="line">checking whether to build shared libraries... <span class="built_in">yes</span></span><br><span class="line">checking whether to build static libraries... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> ar... (cached) ar</span><br><span class="line">checking whether C compiler accepts -mmmx... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> MMX instructions <span class="built_in">set</span>... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mmmx... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -msse2... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> SSE2 instructions <span class="built_in">set</span>... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -msse2... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -msse3... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> SSE3 instructions <span class="built_in">set</span>... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -msse3... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mssse3... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> SSSE3 instructions <span class="built_in">set</span>... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mssse3... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -msse4.1... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> SSE4.1 instructions <span class="built_in">set</span>... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -msse4.1... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mavx... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> AVX instructions <span class="built_in">set</span>... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mavx... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mavx2... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> AVX2 instructions <span class="built_in">set</span>... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mavx2... (cached) <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">if</span> _mm256_broadcastsi128_si256 is correctly defined... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mavx512f... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> AVX512F instructions <span class="built_in">set</span>... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mavx512f... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -maes... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mpclmul... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> AESNI instructions <span class="built_in">set</span> and PCLMULQDQ... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -maes... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mpclmul... (cached) <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mrdrnd... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> RDRAND... <span class="built_in">yes</span></span><br><span class="line">checking whether C compiler accepts -mrdrnd... (cached) <span class="built_in">yes</span></span><br><span class="line">checking sys/mman.h usability... <span class="built_in">yes</span></span><br><span class="line">checking sys/mman.h presence... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> sys/mman.h... <span class="built_in">yes</span></span><br><span class="line">checking sys/random.h usability... <span class="built_in">yes</span></span><br><span class="line">checking sys/random.h presence... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> sys/random.h... <span class="built_in">yes</span></span><br><span class="line">checking intrin.h usability... no</span><br><span class="line">checking intrin.h presence... no</span><br><span class="line">checking <span class="keyword">for</span> intrin.h... no</span><br><span class="line">checking <span class="keyword">if</span> _xgetbv() is available... no</span><br><span class="line">checking <span class="keyword">for</span> inline... inline</span><br><span class="line">checking whether byte ordering is bigendian... (cached) no</span><br><span class="line">checking whether __STDC_LIMIT_MACROS is required... no</span><br><span class="line">checking whether we can use inline asm code... <span class="built_in">yes</span></span><br><span class="line">no</span><br><span class="line">checking whether we can use x86_64 asm code... <span class="built_in">yes</span></span><br><span class="line">checking whether we can assemble AVX opcodes... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> 128-bit arithmetic... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> cpuid instruction... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">if</span> the .private_extern asm directive is supported... no</span><br><span class="line">checking <span class="keyword">if</span> the .hidden asm directive is supported... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">if</span> weak symbols are supported... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">if</span> data alignment is required... no</span><br><span class="line">checking <span class="keyword">if</span> atomic operations are supported... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> size_t... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> working alloca.h... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> alloca... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> arc4random... no</span><br><span class="line">checking <span class="keyword">for</span> arc4random_buf... no</span><br><span class="line">checking <span class="keyword">for</span> mmap... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> mlock... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> madvise... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> mprotect... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> getrandom with a standard API... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> getrandom... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> getentropy with a standard API... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> getentropy... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> posix_memalign... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> getpid... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> nanosleep... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> memset_s... no</span><br><span class="line">checking <span class="keyword">for</span> explicit_bzero... <span class="built_in">yes</span></span><br><span class="line">checking <span class="keyword">for</span> explicit_memset... no</span><br><span class="line">checking <span class="keyword">if</span> gcc/ld supports -Wl,--output-def... no</span><br><span class="line">checking that generated files are newer than configure... <span class="keyword">done</span></span><br><span class="line">configure: creating ./config.status</span><br><span class="line">config.status: creating Makefile</span><br><span class="line">config.status: creating builds/Makefile</span><br><span class="line">config.status: creating contrib/Makefile</span><br><span class="line">config.status: creating dist-build/Makefile</span><br><span class="line">config.status: creating libsodium.pc</span><br><span class="line">config.status: creating libsodium-uninstalled.pc</span><br><span class="line">config.status: creating msvc-scripts/Makefile</span><br><span class="line">config.status: creating src/Makefile</span><br><span class="line">config.status: creating src/libsodium/Makefile</span><br><span class="line">config.status: creating src/libsodium/include/Makefile</span><br><span class="line">config.status: creating src/libsodium/include/sodium/version.h</span><br><span class="line">config.status: creating <span class="built_in">test</span>/default/Makefile</span><br><span class="line">config.status: creating <span class="built_in">test</span>/Makefile</span><br><span class="line">config.status: executing depfiles commands</span><br><span class="line">config.status: executing libtool commands</span><br><span class="line">Making all <span class="keyword">in</span> builds</span><br><span class="line">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/builds<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[1]: Nothing to be done for `all&#x27;</span>.</span><br><span class="line">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/builds<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making all in contrib</span></span><br><span class="line"><span class="string">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/contrib&#x27;</span></span><br><span class="line">make[1]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `all<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/contrib&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> dist-build</span><br><span class="line">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/dist-build<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[1]: Nothing to be done for `all&#x27;</span>.</span><br><span class="line">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/dist-build<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making all in msvc-scripts</span></span><br><span class="line"><span class="string">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/msvc-scripts&#x27;</span></span><br><span class="line">make[1]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `all<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/msvc-scripts&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> src</span><br><span class="line">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/src<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making all in libsodium</span></span><br><span class="line"><span class="string">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/src/libsodium&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> include</span><br><span class="line">make[3]: Entering directory `/home/ec2-user/libsodium-1.0.18/src/libsodium/include<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[3]: Nothing to be done for `all&#x27;</span>.</span><br><span class="line">make[3]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src/libsodium/include<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[3]: Entering directory `/home/ec2-user/libsodium-1.0.18/src/libsodium&#x27;</span></span><br><span class="line">  CC       crypto_aead/chacha20poly1305/sodium/libsodium_la-aead_chacha20poly1305.lo</span><br><span class="line">  CC       crypto_aead/xchacha20poly1305/sodium/libsodium_la-aead_xchacha20poly1305.lo</span><br><span class="line">  CC       crypto_auth/libsodium_la-crypto_auth.lo</span><br><span class="line">  CC       crypto_auth/hmacsha256/libsodium_la-auth_hmacsha256.lo</span><br><span class="line">  CC       crypto_auth/hmacsha512/libsodium_la-auth_hmacsha512.lo</span><br><span class="line">  CC       crypto_auth/hmacsha512256/libsodium_la-auth_hmacsha512256.lo</span><br><span class="line">  CC       crypto_box/libsodium_la-crypto_box.lo</span><br><span class="line">  CC       crypto_box/libsodium_la-crypto_box_easy.lo</span><br><span class="line">  CC       crypto_box/libsodium_la-crypto_box_seal.lo</span><br><span class="line">  CC       crypto_box/curve25519xsalsa20poly1305/libsodium_la-box_curve25519xsalsa20poly1305.lo</span><br><span class="line">  CC       crypto_core/ed25519/ref10/libsodium_la-ed25519_ref10.lo</span><br><span class="line">  CC       crypto_core/hchacha20/libsodium_la-core_hchacha20.lo</span><br><span class="line">  CC       crypto_core/hsalsa20/ref2/libsodium_la-core_hsalsa20_ref2.lo</span><br><span class="line">  CC       crypto_core/hsalsa20/libsodium_la-core_hsalsa20.lo</span><br><span class="line">  CC       crypto_core/salsa/ref/libsodium_la-core_salsa_ref.lo</span><br><span class="line">  CC       crypto_generichash/libsodium_la-crypto_generichash.lo</span><br><span class="line">  CC       crypto_generichash/blake2b/libsodium_la-generichash_blake2.lo</span><br><span class="line">  CC       crypto_generichash/blake2b/ref/libsodium_la-blake2b-compress-ref.lo</span><br><span class="line">  CC       crypto_generichash/blake2b/ref/libsodium_la-blake2b-ref.lo</span><br><span class="line">  CC       crypto_generichash/blake2b/ref/libsodium_la-generichash_blake2b.lo</span><br><span class="line">  CC       crypto_hash/libsodium_la-crypto_hash.lo</span><br><span class="line">  CC       crypto_hash/sha256/libsodium_la-hash_sha256.lo</span><br><span class="line">  CC       crypto_hash/sha256/cp/libsodium_la-hash_sha256_cp.lo</span><br><span class="line">  CC       crypto_hash/sha512/libsodium_la-hash_sha512.lo</span><br><span class="line">  CC       crypto_hash/sha512/cp/libsodium_la-hash_sha512_cp.lo</span><br><span class="line">  CC       crypto_kdf/blake2b/libsodium_la-kdf_blake2b.lo</span><br><span class="line">  CC       crypto_kdf/libsodium_la-crypto_kdf.lo</span><br><span class="line">  CC       crypto_kx/libsodium_la-crypto_kx.lo</span><br><span class="line">  CC       crypto_onetimeauth/libsodium_la-crypto_onetimeauth.lo</span><br><span class="line">  CC       crypto_onetimeauth/poly1305/libsodium_la-onetimeauth_poly1305.lo</span><br><span class="line">  CC       crypto_onetimeauth/poly1305/donna/libsodium_la-poly1305_donna.lo</span><br><span class="line">  CC       crypto_pwhash/argon2/libsodium_la-argon2-core.lo</span><br><span class="line">  CC       crypto_pwhash/argon2/libsodium_la-argon2-encoding.lo</span><br><span class="line">  CC       crypto_pwhash/argon2/libsodium_la-argon2-fill-block-ref.lo</span><br><span class="line">  CC       crypto_pwhash/argon2/libsodium_la-argon2.lo</span><br><span class="line">  CC       crypto_pwhash/argon2/libsodium_la-blake2b-long.lo</span><br><span class="line">  CC       crypto_pwhash/argon2/libsodium_la-pwhash_argon2i.lo</span><br><span class="line">  CC       crypto_pwhash/argon2/libsodium_la-pwhash_argon2id.lo</span><br><span class="line">  CC       crypto_pwhash/libsodium_la-crypto_pwhash.lo</span><br><span class="line">  CC       crypto_scalarmult/libsodium_la-crypto_scalarmult.lo</span><br><span class="line">  CC       crypto_scalarmult/curve25519/ref10/libsodium_la-x25519_ref10.lo</span><br><span class="line">  CC       crypto_scalarmult/curve25519/libsodium_la-scalarmult_curve25519.lo</span><br><span class="line">  CC       crypto_secretbox/libsodium_la-crypto_secretbox.lo</span><br><span class="line">  CC       crypto_secretbox/libsodium_la-crypto_secretbox_easy.lo</span><br><span class="line">  CC       crypto_secretbox/xsalsa20poly1305/libsodium_la-secretbox_xsalsa20poly1305.lo</span><br><span class="line">  CC       crypto_secretstream/xchacha20poly1305/libsodium_la-secretstream_xchacha20poly1305.lo</span><br><span class="line">  CC       crypto_shorthash/libsodium_la-crypto_shorthash.lo</span><br><span class="line">  CC       crypto_shorthash/siphash24/libsodium_la-shorthash_siphash24.lo</span><br><span class="line">  CC       crypto_shorthash/siphash24/ref/libsodium_la-shorthash_siphash24_ref.lo</span><br><span class="line">  CC       crypto_sign/libsodium_la-crypto_sign.lo</span><br><span class="line">  CC       crypto_sign/ed25519/libsodium_la-sign_ed25519.lo</span><br><span class="line">  CC       crypto_sign/ed25519/ref10/libsodium_la-keypair.lo</span><br><span class="line">  CC       crypto_sign/ed25519/ref10/libsodium_la-open.lo</span><br><span class="line">  CC       crypto_sign/ed25519/ref10/libsodium_la-sign.lo</span><br><span class="line">  CC       crypto_stream/chacha20/libsodium_la-stream_chacha20.lo</span><br><span class="line">  CC       crypto_stream/chacha20/ref/libsodium_la-chacha20_ref.lo</span><br><span class="line">  CC       crypto_stream/libsodium_la-crypto_stream.lo</span><br><span class="line">  CC       crypto_stream/salsa20/libsodium_la-stream_salsa20.lo</span><br><span class="line">  CC       crypto_stream/xsalsa20/libsodium_la-stream_xsalsa20.lo</span><br><span class="line">  CC       crypto_verify/sodium/libsodium_la-verify.lo</span><br><span class="line">  CC       randombytes/libsodium_la-randombytes.lo</span><br><span class="line">  CC       sodium/libsodium_la-codecs.lo</span><br><span class="line">  CC       sodium/libsodium_la-core.lo</span><br><span class="line">  CC       sodium/libsodium_la-runtime.lo</span><br><span class="line">  CC       sodium/libsodium_la-utils.lo</span><br><span class="line">  CC       sodium/libsodium_la-version.lo</span><br><span class="line">  CPPAS    crypto_stream/salsa20/xmm6/libsodium_la-salsa20_xmm6-asm.lo</span><br><span class="line">  CC       crypto_stream/salsa20/xmm6/libsodium_la-salsa20_xmm6.lo</span><br><span class="line">  CC       crypto_scalarmult/curve25519/sandy2x/libsodium_la-curve25519_sandy2x.lo</span><br><span class="line">  CC       crypto_scalarmult/curve25519/sandy2x/libsodium_la-fe51_invert.lo</span><br><span class="line">  CC       crypto_scalarmult/curve25519/sandy2x/libsodium_la-fe_frombytes_sandy2x.lo</span><br><span class="line">  CPPAS    crypto_scalarmult/curve25519/sandy2x/libsodium_la-sandy2x.lo</span><br><span class="line">  CC       crypto_box/curve25519xchacha20poly1305/libsodium_la-box_curve25519xchacha20poly1305.lo</span><br><span class="line">  CC       crypto_box/curve25519xchacha20poly1305/libsodium_la-box_seal_curve25519xchacha20poly1305.lo</span><br><span class="line">  CC       crypto_core/ed25519/libsodium_la-core_ed25519.lo</span><br><span class="line">  CC       crypto_core/ed25519/libsodium_la-core_ristretto255.lo</span><br><span class="line">  CC       crypto_pwhash/scryptsalsa208sha256/libsodium_la-crypto_scrypt-common.lo</span><br><span class="line">  CC       crypto_pwhash/scryptsalsa208sha256/libsodium_la-scrypt_platform.lo</span><br><span class="line">  CC       crypto_pwhash/scryptsalsa208sha256/libsodium_la-pbkdf2-sha256.lo</span><br><span class="line">  CC       crypto_pwhash/scryptsalsa208sha256/libsodium_la-pwhash_scryptsalsa208sha256.lo</span><br><span class="line">  CC       crypto_pwhash/scryptsalsa208sha256/nosse/libsodium_la-pwhash_scryptsalsa208sha256_nosse.lo</span><br><span class="line">  CC       crypto_scalarmult/ed25519/ref10/libsodium_la-scalarmult_ed25519_ref10.lo</span><br><span class="line">  CC       crypto_scalarmult/ristretto255/ref10/libsodium_la-scalarmult_ristretto255_ref10.lo</span><br><span class="line">  CC       crypto_secretbox/xchacha20poly1305/libsodium_la-secretbox_xchacha20poly1305.lo</span><br><span class="line">  CC       crypto_shorthash/siphash24/libsodium_la-shorthash_siphashx24.lo</span><br><span class="line">  CC       crypto_shorthash/siphash24/ref/libsodium_la-shorthash_siphashx24_ref.lo</span><br><span class="line">  CC       crypto_sign/ed25519/ref10/libsodium_la-obsolete.lo</span><br><span class="line">  CC       crypto_stream/salsa2012/ref/libsodium_la-stream_salsa2012_ref.lo</span><br><span class="line">  CC       crypto_stream/salsa2012/libsodium_la-stream_salsa2012.lo</span><br><span class="line">  CC       crypto_stream/salsa208/ref/libsodium_la-stream_salsa208_ref.lo</span><br><span class="line">  CC       crypto_stream/salsa208/libsodium_la-stream_salsa208.lo</span><br><span class="line">  CC       crypto_stream/xchacha20/libsodium_la-stream_xchacha20.lo</span><br><span class="line">  CC       randombytes/sysrandom/libsodium_la-randombytes_sysrandom.lo</span><br><span class="line">  CC       crypto_aead/aes256gcm/aesni/libaesni_la-aead_aes256gcm_aesni.lo</span><br><span class="line">  CCLD     libaesni.la</span><br><span class="line">  CC       crypto_onetimeauth/poly1305/sse2/libsse2_la-poly1305_sse2.lo</span><br><span class="line">  CC       crypto_pwhash/scryptsalsa208sha256/sse/libsse2_la-pwhash_scryptsalsa208sha256_sse.lo</span><br><span class="line">  CCLD     libsse2.la</span><br><span class="line">  CC       crypto_generichash/blake2b/ref/libssse3_la-blake2b-compress-ssse3.lo</span><br><span class="line">  CC       crypto_pwhash/argon2/libssse3_la-argon2-fill-block-ssse3.lo</span><br><span class="line">  CC       crypto_stream/chacha20/dolbeau/libssse3_la-chacha20_dolbeau-ssse3.lo</span><br><span class="line">  CCLD     libssse3.la</span><br><span class="line">  CC       crypto_generichash/blake2b/ref/libsse41_la-blake2b-compress-sse41.lo</span><br><span class="line">  CCLD     libsse41.la</span><br><span class="line">  CC       crypto_generichash/blake2b/ref/libavx2_la-blake2b-compress-avx2.lo</span><br><span class="line">  CC       crypto_pwhash/argon2/libavx2_la-argon2-fill-block-avx2.lo</span><br><span class="line">  CC       crypto_stream/chacha20/dolbeau/libavx2_la-chacha20_dolbeau-avx2.lo</span><br><span class="line">  CC       crypto_stream/salsa20/xmm6int/libavx2_la-salsa20_xmm6int-avx2.lo</span><br><span class="line">  CCLD     libavx2.la</span><br><span class="line">  CC       crypto_pwhash/argon2/libavx512f_la-argon2-fill-block-avx512f.lo</span><br><span class="line">  CCLD     libavx512f.la</span><br><span class="line">  CC       randombytes/internal/librdrand_la-randombytes_internal_random.lo</span><br><span class="line">  CCLD     librdrand.la</span><br><span class="line">  CCLD     libsodium.la</span><br><span class="line">make[3]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src/libsodium<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src/libsodium&#x27;</span></span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/src<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Nothing to be done for `all-am&#x27;</span>.</span><br><span class="line">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> <span class="built_in">test</span></span><br><span class="line">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/test<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making all in default</span></span><br><span class="line"><span class="string">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/test/default&#x27;</span></span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `all<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/test/default&#x27;</span></span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/test<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Nothing to be done for `all-am&#x27;</span>.</span><br><span class="line">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/test<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/test&#x27;</span></span><br><span class="line">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[1]: Nothing to be done for `all-am&#x27;</span>.</span><br><span class="line">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making install in builds</span></span><br><span class="line"><span class="string">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/builds&#x27;</span></span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/builds<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Nothing to be done for `install-exec-am&#x27;</span>.</span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `install-data-am<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/builds&#x27;</span></span><br><span class="line">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/builds<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making install in contrib</span></span><br><span class="line"><span class="string">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/contrib&#x27;</span></span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/contrib<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Nothing to be done for `install-exec-am&#x27;</span>.</span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `install-data-am<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/contrib&#x27;</span></span><br><span class="line">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/contrib<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making install in dist-build</span></span><br><span class="line"><span class="string">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/dist-build&#x27;</span></span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/dist-build<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Nothing to be done for `install-exec-am&#x27;</span>.</span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `install-data-am<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/dist-build&#x27;</span></span><br><span class="line">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/dist-build<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making install in msvc-scripts</span></span><br><span class="line"><span class="string">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/msvc-scripts&#x27;</span></span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/msvc-scripts<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Nothing to be done for `install-exec-am&#x27;</span>.</span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `install-data-am<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/msvc-scripts&#x27;</span></span><br><span class="line">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/msvc-scripts<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making install in src</span></span><br><span class="line"><span class="string">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/src&#x27;</span></span><br><span class="line">Making install <span class="keyword">in</span> libsodium</span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/src/libsodium<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making install in include</span></span><br><span class="line"><span class="string">make[3]: Entering directory `/home/ec2-user/libsodium-1.0.18/src/libsodium/include&#x27;</span></span><br><span class="line">make[4]: Entering directory `/home/ec2-user/libsodium-1.0.18/src/libsodium/include<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[4]: Nothing to be done for `install-exec-am&#x27;</span>.</span><br><span class="line"> /bin/mkdir -p <span class="string">&#x27;/usr/include&#x27;</span></span><br><span class="line"> /bin/mkdir -p <span class="string">&#x27;/usr/include/sodium&#x27;</span></span><br><span class="line"> /bin/install -c -m 644  sodium/core.h sodium/crypto_aead_aes256gcm.h sodium/crypto_aead_chacha20poly1305.h sodium/crypto_aead_xchacha20poly1305.h sodium/crypto_auth.h sodium/crypto_auth_hmacsha256.h sodium/crypto_auth_hmacsha512.h sodium/crypto_auth_hmacsha512256.h sodium/crypto_box.h sodium/crypto_box_curve25519xchacha20poly1305.h sodium/crypto_box_curve25519xsalsa20poly1305.h sodium/crypto_core_ed25519.h sodium/crypto_core_ristretto255.h sodium/crypto_core_hchacha20.h sodium/crypto_core_hsalsa20.h sodium/crypto_core_salsa20.h sodium/crypto_core_salsa2012.h sodium/crypto_core_salsa208.h sodium/crypto_generichash.h sodium/crypto_generichash_blake2b.h sodium/crypto_hash.h sodium/crypto_hash_sha256.h sodium/crypto_hash_sha512.h sodium/crypto_kdf.h sodium/crypto_kdf_blake2b.h sodium/crypto_kx.h sodium/crypto_onetimeauth.h sodium/crypto_onetimeauth_poly1305.h sodium/crypto_pwhash.h sodium/crypto_pwhash_argon2i.h sodium/crypto_pwhash_argon2id.h sodium/crypto_pwhash_scryptsalsa208sha256.h sodium/crypto_scalarmult.h sodium/crypto_scalarmult_curve25519.h sodium/crypto_scalarmult_ed25519.h sodium/crypto_scalarmult_ristretto255.h sodium/crypto_secretbox.h sodium/crypto_secretbox_xchacha20poly1305.h sodium/crypto_secretbox_xsalsa20poly1305.h sodium/crypto_secretstream_xchacha20poly1305.h <span class="string">&#x27;/usr/include/sodium&#x27;</span></span><br><span class="line"> /bin/mkdir -p <span class="string">&#x27;/usr/include/sodium&#x27;</span></span><br><span class="line"> /bin/install -c -m 644  sodium/crypto_shorthash.h sodium/crypto_shorthash_siphash24.h sodium/crypto_sign.h sodium/crypto_sign_ed25519.h sodium/crypto_sign_edwards25519sha512batch.h sodium/crypto_stream.h sodium/crypto_stream_chacha20.h sodium/crypto_stream_salsa20.h sodium/crypto_stream_salsa2012.h sodium/crypto_stream_salsa208.h sodium/crypto_stream_xchacha20.h sodium/crypto_stream_xsalsa20.h sodium/crypto_verify_16.h sodium/crypto_verify_32.h sodium/crypto_verify_64.h sodium/export.h sodium/randombytes.h sodium/randombytes_internal_random.h sodium/randombytes_sysrandom.h sodium/runtime.h sodium/utils.h <span class="string">&#x27;/usr/include/sodium&#x27;</span></span><br><span class="line"> /bin/install -c -m 644  sodium.h <span class="string">&#x27;/usr/include/.&#x27;</span></span><br><span class="line"> /bin/mkdir -p <span class="string">&#x27;/usr/include&#x27;</span></span><br><span class="line"> /bin/mkdir -p <span class="string">&#x27;/usr/include/sodium&#x27;</span></span><br><span class="line"> /bin/install -c -m 644  sodium/version.h <span class="string">&#x27;/usr/include/sodium&#x27;</span></span><br><span class="line">make[4]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src/libsodium/include<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[3]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src/libsodium/include&#x27;</span></span><br><span class="line">make[3]: Entering directory `/home/ec2-user/libsodium-1.0.18/src/libsodium<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[4]: Entering directory `/home/ec2-user/libsodium-1.0.18/src/libsodium&#x27;</span></span><br><span class="line"> /bin/mkdir -p <span class="string">&#x27;/usr/lib&#x27;</span></span><br><span class="line"> /bin/sh ../../libtool   --mode=install /bin/install -c   libsodium.la <span class="string">&#x27;/usr/lib&#x27;</span></span><br><span class="line">libtool: install: /bin/install -c .libs/libsodium.so.23.3.0 /usr/lib/libsodium.so.23.3.0</span><br><span class="line">libtool: install: (<span class="built_in">cd</span> /usr/lib &amp;&amp; &#123; <span class="built_in">ln</span> -s -f libsodium.so.23.3.0 libsodium.so.23 || &#123; <span class="built_in">rm</span> -f libsodium.so.23 &amp;&amp; <span class="built_in">ln</span> -s libsodium.so.23.3.0 libsodium.so.23; &#125;; &#125;)</span><br><span class="line">libtool: install: (<span class="built_in">cd</span> /usr/lib &amp;&amp; &#123; <span class="built_in">ln</span> -s -f libsodium.so.23.3.0 libsodium.so || &#123; <span class="built_in">rm</span> -f libsodium.so &amp;&amp; <span class="built_in">ln</span> -s libsodium.so.23.3.0 libsodium.so; &#125;; &#125;)</span><br><span class="line">libtool: install: /bin/install -c .libs/libsodium.lai /usr/lib/libsodium.la</span><br><span class="line">libtool: install: /bin/install -c .libs/libsodium.a /usr/lib/libsodium.a</span><br><span class="line">libtool: install: <span class="built_in">chmod</span> 644 /usr/lib/libsodium.a</span><br><span class="line">libtool: install: ranlib /usr/lib/libsodium.a</span><br><span class="line">libtool: finish: PATH=<span class="string">&quot;/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:/root/bin:/sbin&quot;</span> ldconfig -n /usr/lib</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">Libraries have been installed <span class="keyword">in</span>:</span><br><span class="line">   /usr/lib</span><br><span class="line"></span><br><span class="line">If you ever happen to want to <span class="built_in">link</span> against installed libraries</span><br><span class="line"><span class="keyword">in</span> a given directory, LIBDIR, you must either use libtool, and</span><br><span class="line">specify the full pathname of the library, or use the <span class="string">&#x27;-LLIBDIR&#x27;</span></span><br><span class="line">flag during linking and <span class="keyword">do</span> at least one of the following:</span><br><span class="line">   - add LIBDIR to the <span class="string">&#x27;LD_LIBRARY_PATH&#x27;</span> environment variable</span><br><span class="line">     during execution</span><br><span class="line">   - add LIBDIR to the <span class="string">&#x27;LD_RUN_PATH&#x27;</span> environment variable</span><br><span class="line">     during linking</span><br><span class="line">   - use the <span class="string">&#x27;-Wl,-rpath -Wl,LIBDIR&#x27;</span> linker flag</span><br><span class="line">   - have your system administrator add LIBDIR to <span class="string">&#x27;/etc/ld.so.conf&#x27;</span></span><br><span class="line"></span><br><span class="line">See any operating system documentation about shared libraries <span class="keyword">for</span></span><br><span class="line">more information, such as the ld(1) and ld.so(8) manual pages.</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">make[4]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `install-data-am<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[4]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src/libsodium&#x27;</span></span><br><span class="line">make[3]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src/libsodium<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src/libsodium&#x27;</span></span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/src<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[3]: Entering directory `/home/ec2-user/libsodium-1.0.18/src&#x27;</span></span><br><span class="line">make[3]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `install-exec-am<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[3]: Nothing to be done for `install-data-am&#x27;</span>.</span><br><span class="line">make[3]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src&#x27;</span></span><br><span class="line">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/src<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Making install in test</span></span><br><span class="line"><span class="string">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18/test&#x27;</span></span><br><span class="line">Making install <span class="keyword">in</span> default</span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/test/default<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[3]: Entering directory `/home/ec2-user/libsodium-1.0.18/test/default&#x27;</span></span><br><span class="line">make[3]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `install-exec-am<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[3]: Nothing to be done for `install-data-am&#x27;</span>.</span><br><span class="line">make[3]: Leaving directory `/home/ec2-user/libsodium-1.0.18/test/default<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/test/default&#x27;</span></span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18/test<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[3]: Entering directory `/home/ec2-user/libsodium-1.0.18/test&#x27;</span></span><br><span class="line">make[3]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> `install-exec-am<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">make[3]: Nothing to be done for `install-data-am&#x27;</span>.</span><br><span class="line">make[3]: Leaving directory `/home/ec2-user/libsodium-1.0.18/test<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18/test&#x27;</span></span><br><span class="line">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18/test<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[1]: Entering directory `/home/ec2-user/libsodium-1.0.18&#x27;</span></span><br><span class="line">make[2]: Entering directory `/home/ec2-user/libsodium-1.0.18<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[2]: Nothing to be done for `install-exec-am&#x27;</span>.</span><br><span class="line"> /bin/mkdir -p <span class="string">&#x27;/usr/lib/pkgconfig&#x27;</span></span><br><span class="line"> /bin/install -c -m 644 libsodium.pc <span class="string">&#x27;/usr/lib/pkgconfig&#x27;</span></span><br><span class="line">make[2]: Leaving directory `/home/ec2-user/libsodium-1.0.18<span class="string">&#x27;</span></span><br><span class="line"><span class="string">make[1]: Leaving directory `/home/ec2-user/libsodium-1.0.18&#x27;</span></span><br><span class="line">running install</span><br><span class="line">running bdist_egg</span><br><span class="line">running egg_info</span><br><span class="line">creating shadowsocks.egg-info</span><br><span class="line">writing shadowsocks.egg-info/PKG-INFO</span><br><span class="line">writing top-level names to shadowsocks.egg-info/top_level.txt</span><br><span class="line">writing dependency_links to shadowsocks.egg-info/dependency_links.txt</span><br><span class="line">writing entry points to shadowsocks.egg-info/entry_points.txt</span><br><span class="line">writing manifest file <span class="string">&#x27;shadowsocks.egg-info/SOURCES.txt&#x27;</span></span><br><span class="line">reading manifest file <span class="string">&#x27;shadowsocks.egg-info/SOURCES.txt&#x27;</span></span><br><span class="line">reading manifest template <span class="string">&#x27;MANIFEST.in&#x27;</span></span><br><span class="line">writing manifest file <span class="string">&#x27;shadowsocks.egg-info/SOURCES.txt&#x27;</span></span><br><span class="line">installing library code to build/bdist.linux-x86_64/egg</span><br><span class="line">running install_lib</span><br><span class="line">running build_py</span><br><span class="line">creating build</span><br><span class="line">creating build/lib</span><br><span class="line">creating build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/__init__.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/asyncdns.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/common.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/cryptor.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/daemon.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/eventloop.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/local.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/lru_cache.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/manager.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/server.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/shell.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/tcprelay.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/tunnel.py -&gt; build/lib/shadowsocks</span><br><span class="line">copying shadowsocks/udprelay.py -&gt; build/lib/shadowsocks</span><br><span class="line">creating build/lib/shadowsocks/crypto</span><br><span class="line">copying shadowsocks/crypto/__init__.py -&gt; build/lib/shadowsocks/crypto</span><br><span class="line">copying shadowsocks/crypto/aead.py -&gt; build/lib/shadowsocks/crypto</span><br><span class="line">copying shadowsocks/crypto/hkdf.py -&gt; build/lib/shadowsocks/crypto</span><br><span class="line">copying shadowsocks/crypto/mbedtls.py -&gt; build/lib/shadowsocks/crypto</span><br><span class="line">copying shadowsocks/crypto/openssl.py -&gt; build/lib/shadowsocks/crypto</span><br><span class="line">copying shadowsocks/crypto/rc4_md5.py -&gt; build/lib/shadowsocks/crypto</span><br><span class="line">copying shadowsocks/crypto/sodium.py -&gt; build/lib/shadowsocks/crypto</span><br><span class="line">copying shadowsocks/crypto/table.py -&gt; build/lib/shadowsocks/crypto</span><br><span class="line">copying shadowsocks/crypto/util.py -&gt; build/lib/shadowsocks/crypto</span><br><span class="line">creating build/bdist.linux-x86_64</span><br><span class="line">creating build/bdist.linux-x86_64/egg</span><br><span class="line">creating build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/__init__.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/asyncdns.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/common.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/cryptor.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/daemon.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/eventloop.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/local.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/lru_cache.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/manager.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/server.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/shell.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/tcprelay.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/tunnel.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">copying build/lib/shadowsocks/udprelay.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks</span><br><span class="line">creating build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">copying build/lib/shadowsocks/crypto/__init__.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">copying build/lib/shadowsocks/crypto/aead.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">copying build/lib/shadowsocks/crypto/hkdf.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">copying build/lib/shadowsocks/crypto/mbedtls.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">copying build/lib/shadowsocks/crypto/openssl.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">copying build/lib/shadowsocks/crypto/rc4_md5.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">copying build/lib/shadowsocks/crypto/sodium.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">copying build/lib/shadowsocks/crypto/table.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">copying build/lib/shadowsocks/crypto/util.py -&gt; build/bdist.linux-x86_64/egg/shadowsocks/crypto</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/__init__.py to __init__.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/asyncdns.py to asyncdns.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/common.py to common.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/cryptor.py to cryptor.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/daemon.py to daemon.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/eventloop.py to eventloop.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/local.py to local.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/lru_cache.py to lru_cache.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/manager.py to manager.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/server.py to server.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/shell.py to shell.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/tcprelay.py to tcprelay.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/tunnel.py to tunnel.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/udprelay.py to udprelay.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/crypto/__init__.py to __init__.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/crypto/aead.py to aead.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/crypto/hkdf.py to hkdf.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/crypto/mbedtls.py to mbedtls.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/crypto/openssl.py to openssl.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/crypto/rc4_md5.py to rc4_md5.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/crypto/sodium.py to sodium.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/crypto/table.py to table.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/shadowsocks/crypto/util.py to util.pyc</span><br><span class="line">creating build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying shadowsocks.egg-info/PKG-INFO -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying shadowsocks.egg-info/SOURCES.txt -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying shadowsocks.egg-info/dependency_links.txt -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying shadowsocks.egg-info/entry_points.txt -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying shadowsocks.egg-info/top_level.txt -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">creating dist</span><br><span class="line">creating <span class="string">&#x27;dist/shadowsocks-3.0.0-py2.7.egg&#x27;</span> and adding <span class="string">&#x27;build/bdist.linux-x86_64/egg&#x27;</span> to it</span><br><span class="line">removing <span class="string">&#x27;build/bdist.linux-x86_64/egg&#x27;</span> (and everything under it)</span><br><span class="line">Processing shadowsocks-3.0.0-py2.7.egg</span><br><span class="line">creating /usr/lib/python2.7/site-packages/shadowsocks-3.0.0-py2.7.egg</span><br><span class="line">Extracting shadowsocks-3.0.0-py2.7.egg to /usr/lib/python2.7/site-packages</span><br><span class="line">Adding shadowsocks 3.0.0 to easy-install.pth file</span><br><span class="line">Installing sslocal script to /usr/bin</span><br><span class="line">Installing ssserver script to /usr/bin</span><br><span class="line"></span><br><span class="line">Installed /usr/lib/python2.7/site-packages/shadowsocks-3.0.0-py2.7.egg</span><br><span class="line">Processing dependencies <span class="keyword">for</span> shadowsocks==3.0.0</span><br><span class="line">Finished processing dependencies <span class="keyword">for</span> shadowsocks==3.0.0</span><br><span class="line">writing list of installed files to <span class="string">&#x27;/usr/local/shadowsocks_python.log&#x27;</span></span><br><span class="line">Starting Shadowsocks success</span><br><span class="line"></span><br><span class="line">Congratulations, Shadowsocks-Python server install completed!</span><br><span class="line">Your Server IP        :  3.88.156.118 </span><br><span class="line">Your Server Port      :  5000 </span><br><span class="line">Your Password         :  XuYijie312416 </span><br><span class="line">Your Encryption Method:  aes-256-gcm </span><br><span class="line"></span><br><span class="line">Your QR Code: (For Shadowsocks Windows, OSX, Android and iOS clients)</span><br><span class="line"> ss://YWVzLTI1Ni1nY206WHVZaWppZTMxMjQxNkAzLjg4LjE1Ni4xMTg6NTAwMA== </span><br><span class="line">Your QR Code has been saved as a PNG file path:</span><br><span class="line"> /home/ec2-user/shadowsocks_python_qr.png </span><br><span class="line"></span><br><span class="line">Welcome to visit: https://teddysun.com/486.html</span><br><span class="line">Enjoy it!</span><br><span class="line"></span><br><span class="line">[root@ip-172-31-29-157 ec2-user]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="三、连接方法"><a href="#三、连接方法" class="headerlink" title="三、连接方法"></a>三、连接方法</h1><p>下载小飞机，手机版小飞机为例</p><p><img src="https://img-blog.csdnimg.cn/d2a3e9b457224d09a535a6e889b54ff0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> AWS </tag>
            
            <tag> 虚拟专用网络 </tag>
            
            <tag> 网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EasyExcel 样式注解大全</title>
      <link href="/2022/04/08/EasyExcel%20%E6%A0%B7%E5%BC%8F%E6%B3%A8%E8%A7%A3%E5%A4%A7%E5%85%A8/"/>
      <url>/2022/04/08/EasyExcel%20%E6%A0%B7%E5%BC%8F%E6%B3%A8%E8%A7%A3%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>太详细了，转载做笔记用，原文作者如下，我又加了点自己的详细示例</p></blockquote><p><a href="https://www.cnblogs.com/bluekang/p/13438666.html#!comments">https://www.cnblogs.com/bluekang/p/13438666.html#!comments</a><br><a href="https://www.cnblogs.com/Brainpan/p/5804167.html">https://www.cnblogs.com/Brainpan/p/5804167.html</a><br><img src="https://img-blog.csdnimg.cn/43a01f80e22a4dfdbfcdd6dade8f7074.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/82038780caea4d088e2686c729307f5e.png" alt="在这里插入图片描述"></p><hr><h1 id="11个注解"><a href="#11个注解" class="headerlink" title="11个注解"></a>11个注解</h1><blockquote><p>@ExcelProperty<br>@ColumnWith 列宽<br>@ContentFontStyle 文本字体样式<br>@ContentLoopMerge 文本合并<br>@ContentRowHeight 文本行高度<br>@ContentStyle 文本样式<br>@HeadFontStyle 标题字体样式<br>@HeadRowHeight 标题高度<br>@HeadStyle 标题样式<br>@ExcelIgnore 忽略项<br>@ExcelIgnoreUnannotated 忽略未注解</p></blockquote><h1 id="字段注解类注解"><a href="#字段注解类注解" class="headerlink" title="字段注解类注解"></a>字段注解类注解</h1><p><code>@ColumnWith(列宽)</code><br><code>@ColumnWidth(全局列宽)</code><br><code>@ExcelProperty(字段配置)</code><br><code>@HeadFontStyle(头样式)</code><br><code>@HeadRowHeight(标题高度)</code><br><code>@ContentFontStyle(内容字体样式)</code><br><code>@ContentRowHeight(内容高度)</code><br><code>@ExcelProperty</code><br><code>必要的一个注解，注解中有三个参数value,index,converter分别代表列明，列序号，数据转换方式 value和index只能二选一，通常不用设置converter</code><br><code>1.value 通过标题文本对应</code><br><code>2.index 通过文本行号对应</code><br><code>3.converter 转换器，通常入库和出库转换使用，如性别入库0和1，出库男和女</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImeiEncrypt</span> &#123;</span><br><span class="line">    <span class="meta">@ExcelProperty(value = &quot;值&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String valueField;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty(value = 1,converter =IndustryIdConverter.class)</span></span><br><span class="line">    <span class="keyword">private</span> String indexField;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty(value = &quot;值对应和转换器&quot;,converter =IndustryIdConverter.class)</span></span><br><span class="line">    <span class="keyword">private</span> String valueAndConverterField;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@ColumnWith 设置列宽度,只有一个参数value，value的单位是字符长度，最大可以设置255个字符，因为一个excel单元格最大可以写入的字符个数就是255个字符。 </code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImeiEncrypt</span> &#123;</span><br><span class="line">    <span class="meta">@ColumnWidth(value = 18)</span></span><br><span class="line">    <span class="keyword">private</span> String imei;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@ContentFontStyle 用于设置单元格内容字体格式的注解</code></p><blockquote><p>参数：<br>fontName字体名称<br>fontHeightInPoints字体高度<br>italic是否斜体<br>strikeout是否设置删除水平线<br>color字体颜色<br>typeOffset偏移量<br>underline下划线<br>bold是否加粗<br>charset编码格式</p></blockquote><p><code>@ContentLoopMerge 用于设置合并单元格的注解</code></p><blockquote><p>参数：<br>eachRow<br>columnExtend</p></blockquote><p><code>@ContentRowHeight 用于设置行高</code></p><blockquote><p>参数：<br>value行高，-1代表自动行高</p></blockquote><p><code>@ContentStyle 设置内容格式注解</code></p><blockquote><p>参数：<br>dataFormat日期格式<br>hidden设置单元格使用此样式隐藏<br>locked设置单元格使用此样式锁定<br>quotePrefix在单元格前面增加&#96;符号，数字或公式将以字符串形式展示<br>horizontalAlignment设置是否水平居中<br>wrapped设置文本是否应换行。将此标志设置为true通过在多行上显示使单元格中的所有内容可见<br>verticalAlignment设置是否垂直居中<br>rotation设置单元格中文本旋转角度。03版本的Excel旋转角度区间为-90°90°，07版本的Excel旋转角度区间为0°180°<br>indent设置单元格中缩进文本的空格数<br>borderLeft设置左边框的样式<br>borderRight设置右边框样式<br>borderTop设置上边框样式<br>borderBottom设置下边框样式<br>leftBorderColor设置左边框颜色<br>rightBorderColor设置右边框颜色<br>topBorderColor设置上边框颜色<br>bottomBorderColor设置下边框颜色<br>fillPatternType设置填充类型<br>fillBackgroundColor设置背景色<br>fillForegroundColor设置前景色<br>shrinkToFit设置自动单元格自动大小</p></blockquote><p><code>@HeadFontStyle 用于定制标题字体格式</code></p><blockquote><p>参数含义<br>fontName设置字体名称<br>fontHeightInPoints设置字体高度<br>italic设置字体是否斜体<br>strikeout是否设置删除线<br>color设置字体颜色<br>typeOffset设置偏移量<br>underline设置下划线<br>charset设置字体编码<br>bold设置字体是否加粗</p></blockquote><p><code>@HeadRowHeight 设置标题行行高</code></p><blockquote><p>参数含义<br>value设置行高，-1代表自动行高</p></blockquote><p><code>@HeadStyle 设置标题样式</code></p><blockquote><p>参数含义<br>dataFormat日期格式<br>hidden设置单元格使用此样式隐藏<br>locked设置单元格使用此样式锁定<br>quotePrefix在单元格前面增加&#96;符号，数字或公式将以字符串形式展示<br>horizontalAlignment设置是否水平居中<br>wrapped设置文本是否应换行。将此标志设置为true通过在多行上显示使单元格中的所有内容可见<br>verticalAlignment设置是否垂直居中<br>rotation设置单元格中文本旋转角度。03版本的Excel旋转角度区间为-90°90°，07版本的Excel旋转角度区间为0°180°<br>indent设置单元格中缩进文本的空格数<br>borderLeft设置左边框的样式<br>borderRight设置右边框样式<br>borderTop设置上边框样式<br>borderBottom设置下边框样式<br>leftBorderColor设置左边框颜色<br>rightBorderColor设置右边框颜色<br>topBorderColor设置上边框颜色<br>bottomBorderColor设置下边框颜色<br>fillPatternType设置填充类型<br>fillBackgroundColor设置背景色<br>fillForegroundColor设置前景色<br>shrinkToFit设置自动单元格自动大小</p></blockquote><p><code>@ExcelIgnore 不将该字段转换成Excel</code></p><p><code>@ExcelIgnoreUnannotated 没有注解的字段都不转换</code></p><h1 id="基础综合示例"><a href="#基础综合示例" class="headerlink" title="基础综合示例"></a>基础综合示例</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//行高全部设为40</span></span><br><span class="line"><span class="meta">@HeadRowHeight(value = 40)</span></span><br><span class="line"><span class="comment">//标题全部居中</span></span><br><span class="line"><span class="meta">@HeadStyle(horizontalAlignment = CENTER)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SupervisionDailyExportProcessDTO</span> &#123;</span><br><span class="line"><span class="comment">//&quot;二、问题整改情况&quot;是大标题，&quot;序号&quot;是大标题下面的子标题</span></span><br><span class="line">    <span class="meta">@ExcelProperty(&#123;&quot;二、问题整改情况&quot;, &quot;序号&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ContentStyle(horizontalAlignment = CENTER)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@ExcelProperty(&#123;&quot;二、问题整改情况&quot;, &quot;问题来源&quot;&#125;)</span></span><br><span class="line">    <span class="comment">//单独设置这一列列宽为40</span></span><br><span class="line">    <span class="meta">@ColumnWidth(value = 40)</span></span><br><span class="line">    <span class="meta">@ContentStyle(wrapped = true, horizontalAlignment = CENTER)</span></span><br><span class="line">    <span class="keyword">private</span> String questionOrigin;</span><br><span class="line">    <span class="meta">@ExcelProperty(&#123;&quot;二、问题整改情况&quot;, &quot;督察点位&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ColumnWidth(value = 40)</span></span><br><span class="line">    <span class="meta">@ContentStyle(wrapped = true, horizontalAlignment = CENTER)</span></span><br><span class="line">    <span class="keyword">private</span> String supervisionPoint;</span><br><span class="line">    <span class="meta">@ExcelProperty(&#123;&quot;二、问题整改情况&quot;, &quot;问题内容&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ColumnWidth(value = 40)</span></span><br><span class="line">    <span class="meta">@ContentStyle(wrapped = true, horizontalAlignment = CENTER)</span></span><br><span class="line">    <span class="keyword">private</span> String questionContents;</span><br><span class="line">    <span class="meta">@ExcelProperty(&#123;&quot;二、问题整改情况&quot;, &quot;责任单位&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ColumnWidth(value = 30)</span></span><br><span class="line">    <span class="meta">@ContentStyle(horizontalAlignment = CENTER)</span></span><br><span class="line">    <span class="keyword">private</span> String orgName;</span><br><span class="line">    <span class="meta">@ExcelProperty(&#123;&quot;二、问题整改情况&quot;, &quot;整改情况&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ColumnWidth(value = 40)</span></span><br><span class="line">    <span class="meta">@ContentStyle(wrapped = true, horizontalAlignment = CENTER)</span></span><br><span class="line">    <span class="keyword">private</span> String processSituation;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="补充颜色"><a href="#补充颜色" class="headerlink" title="补充颜色"></a>补充颜色</h1><blockquote><p>NPOI Excel 单元格颜色对照表，在引用了 NPOI.dll 后可通过 ICellStyle 接口的 FillForegroundColor 属性实现 Excel 单元格的背景色设置，FillPattern 为单元格背景色的填充样式。<br>NPOI Excel 单元格背景颜色设置方法以及颜色对照表：</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ICellStyle</span> <span class="variable">style</span> <span class="operator">=</span> workbook.CreateCellStyle();</span><br><span class="line">style.FillForegroundColor = NPOI.HSSF.Util.HSSFColor.Red.Index;</span><br><span class="line">style.FillPattern = FillPattern.SolidForeground;</span><br><span class="line"> </span><br><span class="line"><span class="type">ICell</span> <span class="variable">cell</span> <span class="operator">=</span> workbook.CreateSheet().CreateRow(<span class="number">0</span>).CreateCell(<span class="number">0</span>);</span><br><span class="line">cell.CellStyle = style;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/2d743a2dbdd04b12a1113d12d90bfc89.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_12,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/b5b12a894b524dd0829487194c325c39.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_12,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> EasyExcel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 配置使用Swagger3</title>
      <link href="/2022/03/12/Springboot%20%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8Swagger3/"/>
      <url>/2022/03/12/Springboot%20%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8Swagger3/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Swagger是一个可以根据你的代码，自动生成接口文档的一个工具，并且可以用作接口测试工具，2022年了，Swagger也要用3.0版本了吧</p><hr><h1 id="一、引入依赖"><a href="#一、引入依赖" class="headerlink" title="一、引入依赖"></a>一、引入依赖</h1><p>没错，Swagger 3.0版本只需要引入这一个依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-boot-starter --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a>二、配置</h1><p>在项目中新建 Swagger3Config</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.communityinteractionsystem.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.oas.annotations.EnableOpenApi;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.ApiInfo;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.Contact;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/3/12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: Swagger3配置文件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableOpenApi</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Swagger3Config</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *   application中还配置了mvc，因为springboot2.6.1与swagger3不兼容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">createRestApi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.OAS_30)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                <span class="comment">// ture 启用Swagger3.0， false 禁用（生产环境要禁用）</span></span><br><span class="line">                .enable(<span class="literal">false</span>)</span><br><span class="line">                .select()</span><br><span class="line">                <span class="comment">// 扫描的路径使用@Api的controller</span></span><br><span class="line">                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))</span><br><span class="line">                <span class="comment">// 指定路径处理PathSelectors.any()代表所有的路径</span></span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * API 页面上半部分展示信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">                .title(<span class="string">&quot;Swagger3接口文档&quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;海里社区交互软件接口文档&quot;</span>)</span><br><span class="line">                .contact(<span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;徐一杰&quot;</span>, <span class="string">&quot;https://xuyijie.icu/&quot;</span>, <span class="string">&quot;1119461672@qq.com&quot;</span>))</span><br><span class="line">                .version(<span class="string">&quot;1.0&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="三、配置-application-yml"><a href="#三、配置-application-yml" class="headerlink" title="三、配置 application.yml"></a>三、配置 application.yml</h1><p>如果你使用的是 Springboot 2.6 版本，需要配置，否则报下面的错，现在 Springboot 3.0 和 Springboot 2.5.8 不需要配置下面这个，你们看情况怎么办</p><p><code>Caused by: java.lang.NullPointerException: Cannot invoke &quot;org.springframework.web.servlet.mvc.condition.PatternsRequestCondition.getPatterns()&quot; because &quot;this.condition&quot; is null</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment">#  这个mvc的配置是springboot2.6.1不支持swagger3的折衷配置，后面考虑升级Springboot版本或降级版本</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">pathmatch:</span></span><br><span class="line">      <span class="attr">matching-strategy:</span> <span class="string">ant_path_matcher</span></span><br></pre></td></tr></table></figure><hr><h1 id="四、使用方法"><a href="#四、使用方法" class="headerlink" title="四、使用方法"></a>四、使用方法</h1><p>在 controller 上面增加 <code>@Api(tags = &quot;发贴版块的社区交流和匿名举报&quot;)</code>注解，tags里面是你对这个 controller 的描述</p><p>在 controller 里面的方法上增加<code>@ApiOperation(value = &quot;发布帖子&quot;)</code>注解，value是你对这个方法的描述</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/3/8</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 社区交流、匿名举报</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;发贴版块的社区交流和匿名举报&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/blog&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlogController</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BlogService blogService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BlogController</span><span class="params">(BlogService blogService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.blogService = blogService;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/posted&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;发布帖子&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResultCode&lt;Blog&gt; <span class="title function_">posted</span><span class="params">(<span class="meta">@RequestBody</span> Blog blog, HttpServletRequest request)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">        <span class="keyword">return</span> blogService.posted(blog,request);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实体类也可以增加注解，也可以不加，主要是 controller 加就行</p><p>实体类上面增加<code>@ApiModel(value = &quot;Blog&quot;, description = &quot;社区交流、匿名举报帖子实体类&quot;)</code>，下面的字段增加<code>@ApiModelProperty(value = &quot;主键&quot;)</code>，value 是 Swagger 生成的文档中显示的名字，description 是你对实体类的描述</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/3/8</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 社区交流、匿名举报帖子实体类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;blog&quot;)</span></span><br><span class="line"><span class="meta">@ApiModel(value = &quot;Blog&quot;, description = &quot;社区交流、匿名举报帖子实体类&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Blog</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;主键&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;所属社区&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String belongCommunity;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>启动项目，访问<code>http://localhost:8081/swagger-ui/</code>，注意 Swagger3 和 2 访问的页面有细微差别</p><p><img src="https://img-blog.csdnimg.cn/abdd69f2cabe4c1fbb42583d680a83e5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Swagger </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 配置 Retrofit 并使用各种请求方式</title>
      <link href="/2022/03/04/Springboot%20%E9%85%8D%E7%BD%AE%20Retrofit%20%E5%B9%B6%E4%BD%BF%E7%94%A8%E5%90%84%E7%A7%8D%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/"/>
      <url>/2022/03/04/Springboot%20%E9%85%8D%E7%BD%AE%20Retrofit%20%E5%B9%B6%E4%BD%BF%E7%94%A8%E5%90%84%E7%A7%8D%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >Retrofit 这个东西是简化我们在 java 代码里面书写 http 请求的工具，支持 restful 风格的请求，我们通常发送请求，要用到 hutools 和 httpUtil 这些东西，要写好多行，现在用 Retrofit 只需要两三行。</font></p><p>源码先给你们：<a href="https://download.csdn.net/download/qq_48922459/83321037">retrofit-demo</a></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、引入依赖"><a href="#一、引入依赖" class="headerlink" title="一、引入依赖"></a>一、引入依赖</h1><h2 id="MAVEN"><a href="#MAVEN" class="headerlink" title="MAVEN"></a>MAVEN</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.lianjiatech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>retrofit-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">&#x27;com.github.lianjiatech&#x27;</span>, name: <span class="string">&#x27;retrofit-spring-boot-starter&#x27;</span>, version: <span class="string">&#x27;2.3.8&#x27;</span></span><br></pre></td></tr></table></figure><p><font color=#999AAA >这个工具尚不成熟，最好紧跟版本，使用最新版</p><h1 id="二、使用步骤"><a href="#二、使用步骤" class="headerlink" title="二、使用步骤"></a>二、使用步骤</h1><h2 id="1-在启动类上添加注解"><a href="#1-在启动类上添加注解" class="headerlink" title="1.在启动类上添加注解"></a>1.在启动类上添加注解</h2><p>这个路径是用书写 retrofit 请求方法的文件的包路径，下面我有介绍</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RetrofitScan(&quot;com.example.retrofitdemo.retrofitinterface&quot;)</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/4e6ccdb61e644743a0d4de93f7c6425c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_17,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h2 id="2-项目解析"><a href="#2-项目解析" class="headerlink" title="2.项目解析"></a>2.项目解析</h2><h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><p><font color=#999AAA >entity、controller 和 service 都是普通的 entity、controller和service，<code>retrofit</code> 要创建的东西只有 <code>interceptor</code> 和 <code>retrofitInterceptor</code></p><p><img src="https://img-blog.csdnimg.cn/f774617c487d4bee8325b013d5b2af71.png" alt="在这里插入图片描述"></p><h3 id="各种请求方法的书写方式"><a href="#各种请求方法的书写方式" class="headerlink" title="各种请求方法的书写方式"></a>各种请求方法的书写方式</h3><p><font color=#999AAA >retrofit 的请求方法有很多，除了普通请求，还支持 Restful 风格，我在 RetrofitTest 里面几乎把所有请求方式的demo都写了，并且有详细的注释</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.retrofitdemo.retrofitinterface;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.retrofitdemo.entity.TestEntity;</span><br><span class="line"><span class="keyword">import</span> com.example.retrofitdemo.interceptor.TokenInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.github.lianjiatech.retrofit.spring.boot.annotation.Intercept;</span><br><span class="line"><span class="keyword">import</span> com.github.lianjiatech.retrofit.spring.boot.annotation.RetrofitClient;</span><br><span class="line"><span class="keyword">import</span> okhttp3.MultipartBody;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Response;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> retrofit2.http.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">//路径前缀，必须以 / 结尾</span></span><br><span class="line"><span class="meta">@RetrofitClient(baseUrl = &quot;http://localhost:8081/&quot;)</span></span><br><span class="line"><span class="comment">//include里面是要拦截的路径，还可配置exclude = &quot;&quot;不包含路径</span></span><br><span class="line"><span class="meta">@Intercept(handler = TokenInterceptor.class, include = &quot;test/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RetrofitTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *方法注解：<span class="doctag">@GET</span>、<span class="doctag">@POST</span>、<span class="doctag">@PUT</span>、<span class="doctag">@DELETE</span>、<span class="doctag">@PATH</span>、<span class="doctag">@HEAD</span>、<span class="doctag">@OPTIONS</span>、<span class="doctag">@HTTP</span>。</span></span><br><span class="line"><span class="comment">     * 标记注解：<span class="doctag">@FormUrlEncoded</span>、<span class="doctag">@Multipart</span>、<span class="doctag">@Streaming</span>。</span></span><br><span class="line"><span class="comment">     * 参数注解：<span class="doctag">@Query</span>，<span class="doctag">@QueryMap</span>；<span class="doctag">@Body</span>；<span class="doctag">@Field</span>、<span class="doctag">@FieldMap</span>；<span class="doctag">@Part</span>，<span class="doctag">@PartMap</span>。</span></span><br><span class="line"><span class="comment">     * 其他注解：<span class="doctag">@Path</span>；<span class="doctag">@Header</span>,<span class="doctag">@Headers</span>；<span class="doctag">@Url</span></span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 下面是一些使用示例</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送 Get 请求时，不可传值实体类，会报错</span></span><br><span class="line">    <span class="comment">//传送实体类的时候必须加 @Body</span></span><br><span class="line">    <span class="meta">@POST(&quot;test/postList&quot;)</span></span><br><span class="line">    List&lt;TestEntity&gt; <span class="title function_">postList</span><span class="params">(<span class="meta">@Body</span> TestEntity testEntity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GET(&quot;test/getList&quot;)</span></span><br><span class="line">    List&lt;TestEntity&gt; <span class="title function_">getList</span><span class="params">(<span class="meta">@Query(&quot;pageNum&quot;)</span> Integer pageNum, <span class="meta">@Query(&quot;pageSize&quot;)</span> Integer pageSize)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GET(&quot;test/&#123;id&#125;&quot;)</span></span><br><span class="line">    List&lt;TestEntity&gt; <span class="title function_">getList2</span><span class="params">(<span class="meta">@Path(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//!!!!!</span></span><br><span class="line">    <span class="comment">//注意</span></span><br><span class="line">    <span class="comment">//注意，没有返回值，用void会启动报错，要用大写的 Void 才不会报错</span></span><br><span class="line">    <span class="meta">@GET(&quot;test/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    Void <span class="title function_">delete</span><span class="params">(<span class="meta">@Path(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@POST(&quot;test/add&quot;)</span></span><br><span class="line">    Void <span class="title function_">add</span><span class="params">(<span class="meta">@Body</span> TestEntity testEntity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@POST(&quot;test/update/&#123;id&#125;&quot;)</span></span><br><span class="line">    Void <span class="title function_">update</span><span class="params">(<span class="meta">@Path(&quot;id&quot;)</span> Long id, <span class="meta">@Body</span> TestEntity testEntity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@FormUrlEncoded 代表发送表单数据</span></span><br><span class="line">    <span class="comment">//@Field会拼接name和age为 name1=age1&amp;name2=age2 这种格式</span></span><br><span class="line">    <span class="meta">@FormUrlEncoded</span></span><br><span class="line">    <span class="meta">@POST(&quot;test&quot;)</span></span><br><span class="line">    Void <span class="title function_">postFrom</span><span class="params">(<span class="meta">@Field(&quot;name&quot;)</span> String name,<span class="meta">@Field(&quot;occupation&quot;)</span> String age)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//还有一个@FieldMap</span></span><br><span class="line">    <span class="meta">@FormUrlEncoded</span></span><br><span class="line">    <span class="meta">@POST(&quot;test&quot;)</span></span><br><span class="line">    Void <span class="title function_">postMap</span><span class="params">(<span class="meta">@FieldMap</span> Map&lt;String, String&gt; fields)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Header注解:作用于方法的参数,用于添加请求头，使用该注解定义的请求头可以为空,当为空时,会自动忽略,当传入一个List或array时,为拼接每个非空的item的值到请求头中</span></span><br><span class="line">    <span class="comment">//可作用在参数上</span></span><br><span class="line">    <span class="meta">@GET(&quot;test&quot;)</span></span><br><span class="line">    Void <span class="title function_">header</span><span class="params">(<span class="meta">@Header(&quot;Accept-Language&quot;)</span> String head)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//还有一个@HeaderMap：以map的方式添加多个请求头,map中的key为请求头的名称,value为请求头的值,且value使用String.valueOf()统一转换为String类型，</span></span><br><span class="line">    <span class="comment">//map中每一项的键和值都不能为空,否则抛出IllegalArgumentException异常</span></span><br><span class="line">    <span class="meta">@GET(&quot;test&quot;)</span></span><br><span class="line">    Void <span class="title function_">headers</span><span class="params">(<span class="meta">@HeaderMap</span> Map&lt;String, String&gt; headers)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//也可作用于方法上,具有相同名称的请求头不会相互覆盖,而是会照样添加到请求头中</span></span><br><span class="line">    <span class="meta">@Headers(&quot;Accept: text/plain&quot;)</span></span><br><span class="line">    <span class="meta">@GET(&quot;/&quot;)</span></span><br><span class="line">    Void <span class="title function_">headers2</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//HTTP注解：作用于方法,用于发送一个自定义的HTTP请求</span></span><br><span class="line">    <span class="comment">//发送一个DELETE请求,发送实体类要加hasBody</span></span><br><span class="line">    <span class="meta">@HTTP(method = &quot;DELETE&quot;, path = &quot;test/delete&quot;, hasBody = true)</span></span><br><span class="line">    Void <span class="title function_">delete2</span><span class="params">(<span class="meta">@Body</span> TestEntity testEntity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//也可以自定义HTTP请求的标准样式</span></span><br><span class="line">    <span class="meta">@HTTP(method = &quot;CUSTOM&quot;, path = &quot;test/&quot;)</span></span><br><span class="line">    Void <span class="title function_">custom</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@HTTP(method = &quot;DELETE&quot;）等价于 @DELETE(&quot;/&quot;)，@HTTP(method = &quot;PUT&quot;）等价于 @PUT(&quot;/&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//Multipart注解：使用该注解,表示请求体是多部分的。 每一部分作为一个参数,且用Part注解声明</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用Part注解定义的参数类型有以下3种方式可选:</span></span><br><span class="line">    <span class="comment">//1, 如果类型是okhttp3.MultipartBody.Part，内容将被直接使用。 省略part中的名称,即 @Part MultipartBody.Part part</span></span><br><span class="line">    <span class="comment">//2, 如果类型是RequestBody，那么该值将直接与其内容类型一起使用。 在注释中提供part名称（例如，@Part（“foo”）RequestBody foo）。</span></span><br><span class="line">    <span class="comment">//3, 其他对象类型将通过使用转换器转换为适当的格式。 在注释中提供part名称（例如，@Part（“foo”）Image photo）</span></span><br><span class="line">    <span class="meta">@Multipart</span><span class="meta">@POST(&quot;/&quot;)</span></span><br><span class="line">    Void <span class="title function_">multipartExample</span><span class="params">(<span class="meta">@Part(&quot;description&quot;)</span> String description, <span class="meta">@Part(value = &quot;image&quot;, encoding = &quot;8-bit&quot;)</span> TestEntity image, <span class="meta">@PartMap</span> Map&lt;String, String&gt; params)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//下面演示一下上传文件和下载文件，serviceImpl 的写法有些不一样</span></span><br><span class="line">    <span class="meta">@POST(&quot;test/upload&quot;)</span></span><br><span class="line">    <span class="meta">@Multipart</span></span><br><span class="line">    Void <span class="title function_">upload</span><span class="params">(<span class="meta">@Part</span> MultipartBody.Part file)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GET(&quot;test/&#123;fileKey&#125;&quot;)</span></span><br><span class="line">    Response <span class="title function_">download</span><span class="params">(<span class="meta">@Path(&quot;fileKey&quot;)</span> String fileKey)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="在-ServiceImpl-中调用"><a href="#在-ServiceImpl-中调用" class="headerlink" title="在 ServiceImpl 中调用"></a>在 ServiceImpl 中调用</h3><p>在 <code>service</code> 中注入上面的类，然后调用里面的方法，就可以发送请求了</p><p><font color=#999AAA >使用 retrofit 发送上传和下载请求时，serviceImpl 要做一些处理</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.retrofitdemo.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.retrofitdemo.entity.TestEntity;</span><br><span class="line"><span class="keyword">import</span> com.example.retrofitdemo.retrofitinterface.RetrofitTest;</span><br><span class="line"><span class="keyword">import</span> com.example.retrofitdemo.service.TestService;</span><br><span class="line"><span class="keyword">import</span> okhttp3.MediaType;</span><br><span class="line"><span class="keyword">import</span> okhttp3.MultipartBody;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Response;</span><br><span class="line"><span class="keyword">import</span> okhttp3.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">TestService</span> &#123;</span><br><span class="line">    <span class="comment">//注入 retrofitTest</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RetrofitTest retrofitTest;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">TestEntity</span> <span class="variable">testEntity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestEntity</span>();</span><br><span class="line">        testEntity.setPageNum(<span class="number">1</span>);</span><br><span class="line">        testEntity.setPageQuantity(<span class="number">5</span>);</span><br><span class="line">        System.out.println(retrofitTest.postList(testEntity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这是上传文件的代码，需对文件名使用URLEncoder进行编码</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> URLEncoder.encode(Objects.requireNonNull(file.getOriginalFilename()),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        okhttp3.RequestBody requestBody=okhttp3.RequestBody.create(MediaType.parse(<span class="string">&quot;multipart/form-data&quot;</span>),file.getBytes());</span><br><span class="line">        MultipartBody.<span class="type">Part</span> <span class="variable">part</span> <span class="operator">=</span> MultipartBody.Part.createFormData(<span class="string">&quot;file&quot;</span>,fileName,requestBody);</span><br><span class="line">        <span class="comment">//处理完成，调用请求</span></span><br><span class="line">        retrofitTest.upload(part);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这是下载文件的代码</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileKey</span> <span class="operator">=</span> <span class="string">&quot;6302d742-ebc8-4649-95cf-62ccf57a1add&quot;</span>;</span><br><span class="line">        <span class="comment">//调用请求</span></span><br><span class="line">        <span class="type">Response</span> <span class="variable">response</span> <span class="operator">=</span> retrofitTest.download(fileKey);</span><br><span class="line">        <span class="type">ResponseBody</span> <span class="variable">responseBody</span> <span class="operator">=</span> response.body();</span><br><span class="line">        <span class="comment">// 二进制流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> responseBody.byteStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 具体如何处理二进制流，由业务自行控制。这里以写入文件为例</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">tempDirectory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;temp&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!tempDirectory.exists()) &#123;</span><br><span class="line">            tempDirectory.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(tempDirectory, UUID.randomUUID().toString());</span><br><span class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">            file.createNewFile();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line">        <span class="type">byte</span>[] b = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> length;</span><br><span class="line">        <span class="keyword">while</span> ((length = is.read(b)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            fos.write(b, <span class="number">0</span>, length);</span><br><span class="line">        &#125;</span><br><span class="line">        is.close();</span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="按需配置拦截器"><a href="#按需配置拦截器" class="headerlink" title="按需配置拦截器"></a>按需配置拦截器</h3><p><font color=#999AAA >这个拦截器的功能是请求前在请求中加入 token 的功能，可以按需创建，也可以不创建，拦截器分为局部拦截器和全局拦截器，我在TokenInterceptor 里写了很详细的注释。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.retrofitdemo.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.lianjiatech.retrofit.spring.boot.interceptor.BasePathMatchInterceptor;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Request;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Response;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这个拦截器是局部拦截器，可以在请求之前加入一些东西，比如token</span></span><br><span class="line"><span class="comment"> * 调用拦截器，在 RetrofitTest 里面用<span class="doctag">@Intercept</span>注解配置拦截器和拦截路径</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 如果要创建全局拦截器，把 extends 后面换成 BaseGlobalInterceptor 就可以了，这样不需要加注解，全局生效</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenInterceptor</span> <span class="keyword">extends</span> <span class="title class_">BasePathMatchInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Response <span class="title function_">doIntercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> <span class="string">&quot;加入这是一个token&quot;</span>;</span><br><span class="line">        <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> chain.request();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">&quot;&quot;</span>.equals(token)) &#123;</span><br><span class="line">            request = request.newBuilder()</span><br><span class="line">                    .header(<span class="string">&quot;Authorization&quot;</span>, token)</span><br><span class="line">                    .build();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> chain.proceed(request);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="进阶配置文件"><a href="#进阶配置文件" class="headerlink" title="进阶配置文件"></a>进阶配置文件</h1><p><font color=#999AAA >retrofit 下面的配置可选，不配置也不影响使用</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"><span class="comment"># 下面配置可选，不配置也不影响使用</span></span><br><span class="line"><span class="attr">retrofit:</span></span><br><span class="line">  <span class="comment"># 连接池配置</span></span><br><span class="line">  <span class="attr">pool:</span></span><br><span class="line">    <span class="comment"># test1连接池配置</span></span><br><span class="line">    <span class="attr">test1:</span></span><br><span class="line">      <span class="comment"># 最大空闲连接数</span></span><br><span class="line">      <span class="attr">max-idle-connections:</span> <span class="number">3</span></span><br><span class="line">      <span class="comment"># 连接保活时间(秒)</span></span><br><span class="line">      <span class="attr">keep-alive-second:</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 是否禁用void返回值类型</span></span><br><span class="line">  <span class="attr">disable-void-return-type:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 全局转换器工厂</span></span><br><span class="line">  <span class="attr">global-converter-factories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">com.github.lianjiatech.retrofit.spring.boot.core.BasicTypeConverterFactory</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">retrofit2.converter.jackson.JacksonConverterFactory</span></span><br><span class="line">  <span class="comment"># 全局调用适配器工厂</span></span><br><span class="line">  <span class="attr">global-call-adapter-factories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">com.github.lianjiatech.retrofit.spring.boot.core.BodyCallAdapterFactory</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">com.github.lianjiatech.retrofit.spring.boot.core.ResponseCallAdapterFactory</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 日志打印配置</span></span><br><span class="line">  <span class="attr">log:</span></span><br><span class="line">    <span class="comment"># 启用日志打印</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 日志打印拦截器</span></span><br><span class="line">    <span class="attr">logging-interceptor:</span> <span class="string">com.github.lianjiatech.retrofit.spring.boot.interceptor.DefaultLoggingInterceptor</span></span><br><span class="line">    <span class="comment"># 全局日志打印级别</span></span><br><span class="line">    <span class="attr">global-log-level:</span> <span class="string">info</span></span><br><span class="line">    <span class="comment"># 全局日志打印策略</span></span><br><span class="line">    <span class="attr">global-log-strategy:</span> <span class="string">body</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 重试配置</span></span><br><span class="line">  <span class="attr">retry:</span></span><br><span class="line">    <span class="comment"># 是否启用全局重试</span></span><br><span class="line">    <span class="attr">enable-global-retry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 全局重试间隔时间</span></span><br><span class="line">    <span class="attr">global-interval-ms:</span> <span class="number">1</span></span><br><span class="line">    <span class="comment"># 全局最大重试次数</span></span><br><span class="line">    <span class="attr">global-max-retries:</span> <span class="number">1</span></span><br><span class="line">    <span class="comment"># 全局重试规则</span></span><br><span class="line">    <span class="attr">global-retry-rules:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">response_status_not_2xx</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">occur_io_exception</span></span><br><span class="line">    <span class="comment"># 重试拦截器</span></span><br><span class="line">    <span class="attr">retry-interceptor:</span> <span class="string">com.github.lianjiatech.retrofit.spring.boot.retry.DefaultRetryInterceptor</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 熔断降级配置</span></span><br><span class="line">  <span class="attr">degrade:</span></span><br><span class="line">    <span class="comment"># 是否启用熔断降级</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 熔断降级实现方式</span></span><br><span class="line">    <span class="attr">degrade-type:</span> <span class="string">sentinel</span></span><br><span class="line">    <span class="comment"># 熔断资源名称解析器</span></span><br><span class="line">    <span class="attr">resource-name-parser:</span> <span class="string">com.github.lianjiatech.retrofit.spring.boot.degrade.DefaultResourceNameParser</span></span><br><span class="line">  <span class="comment"># 全局连接超时时间，还有局部的，在@RetrofitClient注解上可以设置超时时间，针对当前接口生效，优先级更高。具体字段有connectTimeoutMs、readTimeoutMs、writeTimeoutMs、callTimeoutMs等</span></span><br><span class="line">  <span class="attr">global-connect-timeout-ms:</span> <span class="number">5000</span></span><br><span class="line">  <span class="comment"># 全局读取超时时间</span></span><br><span class="line">  <span class="attr">global-read-timeout-ms:</span> <span class="number">5000</span></span><br><span class="line">  <span class="comment"># 全局写入超时时间</span></span><br><span class="line">  <span class="attr">global-write-timeout-ms:</span> <span class="number">5000</span></span><br><span class="line">  <span class="comment"># 全局完整调用超时时间</span></span><br><span class="line">  <span class="attr">global-call-timeout-ms:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >还可以请求微服务，不过我不懂，更多详细的用法可以看 gitee 的详解 <a href="https://gitee.com/lianjiatech/retrofit-spring-boot-starter">https://gitee.com/lianjiatech/retrofit-spring-boot-starter</a></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Retrofit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 配合 Vue 保存前端上传的文件</title>
      <link href="/2022/02/25/Springboot%20%E9%85%8D%E5%90%88%20Vue%20%E4%BF%9D%E5%AD%98%E5%89%8D%E7%AB%AF%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%96%87%E4%BB%B6/"/>
      <url>/2022/02/25/Springboot%20%E9%85%8D%E5%90%88%20Vue%20%E4%BF%9D%E5%AD%98%E5%89%8D%E7%AB%AF%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >新建一个 Springboot 项目，前端我使用原生 html 来演示上传，你们用 element 或者其他什么的比较方便。</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、后端代码"><a href="#一、后端代码" class="headerlink" title="一、后端代码"></a>一、后端代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">upload</span><span class="params">(MultipartFile multipartFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//获取前端上传的文件</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> multipartFile.getOriginalFilename();</span><br><span class="line">    <span class="comment">//创建文件对象，用于保存文件到该路径</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Users\\DELL\\Desktop\\文件\\&quot;</span> + fileName);</span><br><span class="line">    <span class="comment">//如果上面的路径文件夹没有，则创建文件夹</span></span><br><span class="line">    <span class="keyword">if</span>(!file.exists()) &#123;</span><br><span class="line">       <span class="comment">//先得到文件的上级目录，并创建上级目录，在创建文件</span></span><br><span class="line">       file.getParentFile().mkdir();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//创建文件</span></span><br><span class="line">            file.createNewFile();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//将上传的文件保存到路径下</span></span><br><span class="line">    multipartFile.transferTo(file);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="二、前端"><a href="#二、前端" class="headerlink" title="二、前端"></a>二、前端</h1><p><font color=#999AAA >自行安装axios，也可以不用axios</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">&lt;<span class="attr">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;file&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;upload()&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line"><span class="title function_">upload</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line"><span class="comment">// 获取到this 赋值个that</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">file</span>.<span class="property">files</span>[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// 如果没有文件就返回</span></span><br><span class="line">    <span class="keyword">if</span>(!file)&#123;<span class="keyword">return</span>&#125;</span><br><span class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line"><span class="comment">// 将文件加入到data中</span></span><br><span class="line">data.<span class="title function_">append</span>(<span class="string">&quot;file&quot;</span>,file);</span><br><span class="line">axios.<span class="title function_">post</span>(</span><br><span class="line"><span class="string">&quot;/upload&quot;</span>,</span><br><span class="line">data,</span><br><span class="line">)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">consolo.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 清空文件列表</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">file</span>.<span class="property">value</span>=<span class="string">&quot;&quot;</span>；</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 配合 Vue 让用户下载文件</title>
      <link href="/2022/02/25/Springboot%20%E9%85%8D%E5%90%88%20Vue%20%E8%AE%A9%E7%94%A8%E6%88%B7%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/"/>
      <url>/2022/02/25/Springboot%20%E9%85%8D%E5%90%88%20Vue%20%E8%AE%A9%E7%94%A8%E6%88%B7%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >创建一个 Springboot 项目，也可以是普通 Java 项目，前端用 Vue 的 axios 接收下载</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、后端"><a href="#一、后端" class="headerlink" title="一、后端"></a>一、后端</h1><p><font color=#999AAA >解析都在注释里</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/download&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">   <span class="comment">//这里写要让前端下载的文件的路径</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;F:/uploadFiles/test.xlsx&quot;</span>);</span><br><span class="line">        <span class="comment">//设置编码格式，防止下载的文件内乱码</span></span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">//获取路径文件对象</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realFileName</span> <span class="operator">=</span> file.getName();</span><br><span class="line">        <span class="comment">//设置响应头类型，这里可以根据文件类型设置，text/plain、application/vnd.ms-excel等</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;application/octet-stream;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/octet-stream;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">//如果不设置响应头大小，可能报错：“Excel 已完成文件级验证和修复。此工作簿的某些部分可能已被修复或丢弃”</span></span><br><span class="line">        response.addHeader(<span class="string">&quot;Content-Length&quot;</span>, String.valueOf(file.length()));</span><br><span class="line">        <span class="keyword">try</span> </span><br><span class="line">        <span class="comment">//Content-Disposition的作用：告知浏览器以何种方式显示响应返回的文件，用浏览器打开还是以附件的形式下载到本地保存</span></span><br><span class="line">            <span class="comment">//attachment表示以附件方式下载   inline表示在线打开   &quot;Content-Disposition: inline; filename=文件名.mp3&quot;</span></span><br><span class="line">            <span class="comment">// filename表示文件的默认名称，因为网络传输只支持URL编码的相关支付，因此需要将文件名URL编码后进行传输,前端收到后需要反编码才能获取到真正的名称</span></span><br><span class="line">            response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + java.net.URLEncoder.encode(realFileName.trim(), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//初始化文件流字节缓存</span></span><br><span class="line">        <span class="type">byte</span>[] buff = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">       <span class="comment">//开始写入</span></span><br><span class="line">            <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">            <span class="comment">//写入完成，创建文件流</span></span><br><span class="line">            <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file));</span><br><span class="line">            <span class="comment">// bis.read(data)：将字符读入数组。在某个输入可用、发生I/O错误或者已到达流的末尾前，此方法一直阻塞。</span></span><br><span class="line">            <span class="comment">// 读取的字符数，如果已到达流的末尾，则返回 -1</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> bis.read(buff);</span><br><span class="line">            <span class="keyword">while</span> (i != -<span class="number">1</span>) &#123;</span><br><span class="line">                os.write(buff, <span class="number">0</span>, buff.length);</span><br><span class="line">                os.flush();</span><br><span class="line">                i = bis.read(buff);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (bis != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    bis.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="二、前端接收下载"><a href="#二、前端接收下载" class="headerlink" title="二、前端接收下载"></a>二、前端接收下载</h1><p><font color=#999AAA >我这里使用的是 axios，你们如果不是需要修改一下，但是下载文件的方法代码都是一样的</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">download</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;http://localhost:19021/api/fwq/fwqProduct/downloadFile&#x27;</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="comment">//和后端设置的一样</span></span><br><span class="line">          <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/octet-stream;charset=UTF-8&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">responseType</span>: <span class="string">&#x27;blob&#x27;</span></span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="title function_">axios</span>(config).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(<span class="keyword">new</span> <span class="title class_">Blob</span>([response.<span class="property">data</span>]));</span><br><span class="line">        <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">        link.<span class="property">href</span> = url;</span><br><span class="line">        link.<span class="title function_">setAttribute</span>(<span class="string">&#x27;download&#x27;</span>, <span class="string">&#x27;xxxx.pdf&#x27;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link);</span><br><span class="line">        link.<span class="title function_">click</span>();</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java File文件流读取文件夹内的文件并替换文件内容</title>
      <link href="/2022/02/24/Java%20File%E6%96%87%E4%BB%B6%E6%B5%81%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%B9%E5%86%85%E7%9A%84%E6%96%87%E4%BB%B6%E5%B9%B6%E6%9B%BF%E6%8D%A2%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9/"/>
      <url>/2022/02/24/Java%20File%E6%96%87%E4%BB%B6%E6%B5%81%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%B9%E5%86%85%E7%9A%84%E6%96%87%E4%BB%B6%E5%B9%B6%E6%9B%BF%E6%8D%A2%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p><font color=#999AAA >批量读取文件夹内的文件，并替换各个文件的内容</p><h1 id="二、代码"><a href="#二、代码" class="headerlink" title="二、代码"></a>二、代码</h1><p><font color=#999AAA >新建一个普通 Java 项目就可以，创建文件 ReadFile.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadFile</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">replaceFileStr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//遍历文件夹内所有内容，不包换文件夹里的文件夹里的内容</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;F:\\工作和作业\\Java\\IDEA项目\\读取文件替换文件内容\\txt&quot;</span>;</span><br><span class="line">        <span class="comment">//获取其file对象</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="comment">//遍历path下的文件和目录，放在File数组中</span></span><br><span class="line">        File[] fileArray = file.listFiles();</span><br><span class="line">        <span class="comment">//判断文件夹内是否有文件</span></span><br><span class="line">        <span class="keyword">if</span> (fileArray != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//遍历File[]数组</span></span><br><span class="line">            <span class="keyword">for</span>(File f : fileArray)&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">filepath</span> <span class="operator">=</span> f.getPath();</span><br><span class="line">                <span class="comment">//要替换的旧内容</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">oldStr</span> <span class="operator">=</span> <span class="string">&quot;1010&quot;</span>;</span><br><span class="line">                <span class="comment">//替换成的新内容</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">newtStr</span> <span class="operator">=</span> <span class="string">&quot;哈哈哈&quot;</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// 创建文件输入流</span></span><br><span class="line">                    <span class="type">FileReader</span> <span class="variable">fileReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(filepath);</span><br><span class="line">                    <span class="comment">// 创建缓冲字符数组</span></span><br><span class="line">                    <span class="type">char</span>[] data = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>];</span><br><span class="line">                    <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">                    <span class="comment">// fis.read(data)：将字符读入数组。在某个输入可用、发生I/O错误或者已到达流的末尾前，此方法一直阻塞。</span></span><br><span class="line">                    <span class="comment">// 读取的字符数，如果已到达流的末尾，则返回 -1</span></span><br><span class="line">                    <span class="type">int</span> <span class="variable">rn</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">while</span> ((rn = fileReader.read(data)) &gt; <span class="number">0</span>) &#123; <span class="comment">// 读取文件内容到字符串构建器</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> String.valueOf(data, <span class="number">0</span>, rn);<span class="comment">// 把数组转换成字符串</span></span><br><span class="line">                        sb.append(str);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// 生成字符串，并替换搜索文本</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> sb.toString().replace(oldStr, newtStr);</span><br><span class="line">                    <span class="comment">// 创建文件输出流</span></span><br><span class="line">                    <span class="type">FileWriter</span> <span class="variable">fileWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(filepath);</span><br><span class="line">                    <span class="comment">// 把替换完成的字符串写入文件内</span></span><br><span class="line">                    fileWriter.write(str.toCharArray());</span><br><span class="line">                    <span class="comment">// 关闭文件流，释放资源</span></span><br><span class="line">                    fileReader.close();</span><br><span class="line">                    fileWriter.close();</span><br><span class="line">                    <span class="comment">//若非目录(即文件)，则打印，提示替换完成</span></span><br><span class="line">                    <span class="keyword">if</span>(!f.isDirectory()) &#123;</span><br><span class="line">                        System.out.println(f.getPath() + <span class="string">&quot;已完成替换。&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;文件夹为空！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ReadFile</span> <span class="variable">readFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReadFile</span>();</span><br><span class="line">        readFile.replaceFileStr();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、运行结果"><a href="#三、运行结果" class="headerlink" title="三、运行结果"></a>三、运行结果</h1><p><font color=#999AAA >我新建了一个 test.txt ，里面写了 <code>1010嘻嘻嘻</code>，你们可以多建几个，可以批量读取替换的<br><img src="https://img-blog.csdnimg.cn/f514471595fb41febaacdd3dad213792.png" alt="在这里插入图片描述"><br><font color=#999AAA >运行项目，发现 <code>1010</code> 被替换为了 <code>哈哈哈</code></p><p><img src="https://img-blog.csdnimg.cn/988f5be721cb4a3ca21ddb4881ee5f70.png" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决 Vue 使用 $ref 调用子组件方法时的控制台报错</title>
      <link href="/2022/02/16/%E8%A7%A3%E5%86%B3%20Vue%20%E4%BD%BF%E7%94%A8%20$ref%20%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95%E6%97%B6%E7%9A%84%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%8A%A5%E9%94%99/"/>
      <url>/2022/02/16/%E8%A7%A3%E5%86%B3%20Vue%20%E4%BD%BF%E7%94%A8%20$ref%20%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95%E6%97%B6%E7%9A%84%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%8A%A5%E9%94%99/</url>
      
        <content type="html"><![CDATA[<h1 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h1><p><font color=#999AAA >代码和控制台报错, Uncaught TypeError: Cannot read properties of undefined</font></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">chatting</span>.<span class="title function_">getMessageLib</span>()</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/e4f88abe4ea34ff58fa52c5c627af6d7.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >上述报错大多出现在操作弹窗子组件的页面元素的情景中，原因是子组件还未渲染到父组件的 <code>DOM</code> 中，就开始对子组件的元素进行操作了</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p><font color=#999AAA >解决办法是把 <code>ref</code> 方法放到 vue 的内置函数中，<code>$nextTick</code> 可以等待 DOM 渲染完成后在调用里面的方法，这样控制台就不会出现报错了。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">chatting</span>.<span class="title function_">getMessageLib</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于 AOP 切面导致 WebSocket 的 @ServerEndPoint 无法注入的问题</title>
      <link href="/2022/01/24/%E5%85%B3%E4%BA%8E%20AOP%20%E5%88%87%E9%9D%A2%E5%AF%BC%E8%87%B4%20WebSocket%20%E7%9A%84%20@ServerEndPoint%20%E6%97%A0%E6%B3%95%E6%B3%A8%E5%85%A5%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2022/01/24/%E5%85%B3%E4%BA%8E%20AOP%20%E5%88%87%E9%9D%A2%E5%AF%BC%E8%87%B4%20WebSocket%20%E7%9A%84%20@ServerEndPoint%20%E6%97%A0%E6%B3%95%E6%B3%A8%E5%85%A5%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >今天给我的毕业设计加上了 <code>AOP</code> 日志拦截，结果导致了 <code>WebSocket</code> 的报错。，错误信息为：</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Failed to register @ServerEndpoint class: class pers.xuyijie.communityinteractionsystem.websocket.MyWebSocket$<span class="variable">$EnhancerBySpringCGLIB</span></span><br><span class="line">Caused by: javax.websocket.DeploymentException: Cannot deploy POJO class [pers.xuyijie.communityinteractionsystem.websocket.MyWebSocket$<span class="variable">$EnhancerBySpringCGLIB</span></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="原因和解决方案"><a href="#原因和解决方案" class="headerlink" title="原因和解决方案"></a>原因和解决方案</h1><p><font color=#999AAA >原因是因为 <code>WebServerContainer</code> 里面的 <code>addEndPoint</code> 方法里的 <code>annotation</code> 为 null。<img src="https://img-blog.csdnimg.cn/c3191d4ed9844f3d91c99bca7fa9ad57.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><font color=#999AAA >感谢 华阳余文乐<a href="https://blog.csdn.net/qq_15807785/article/details/83547978">https://blog.csdn.net/qq_15807785/article/details/83547978</a> ，上图是他的调试截图。</p><p><font color=#999AAA >导致为 null 的原因是因为 aop 的 <code>@PointCut</code> 注解和 Aop 自定义的 <code>@Log</code> 注解，总之，aop 不能作用到 websocket 的文件，否则就会导致问题。</p><p><img src="https://img-blog.csdnimg.cn/361908975fad453e9da976b281d113ec.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/bd9943208a464ff18ac3cb4751503558.png" alt="在这里插入图片描述"><br><font color=#999AAA >去掉 WebSocket 上的 <code>@Log</code>，并确保 <code>@PointCut 的 execution 中的包路径不包含</code> WebSocket 的文件就可以了。</p><p>启动成功<br><img src="https://img-blog.csdnimg.cn/f56aad6ac3ba4ae6abf391cd1b074fcc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> WebSocket </tag>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 JMeter 对 MySQL 数据库进行压力测试</title>
      <link href="/2022/01/20/%E4%BD%BF%E7%94%A8%20JMeter%20%E5%AF%B9%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/"/>
      <url>/2022/01/20/%E4%BD%BF%E7%94%A8%20JMeter%20%E5%AF%B9%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >暂无</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、安装并配置-JMeter"><a href="#一、安装并配置-JMeter" class="headerlink" title="一、安装并配置 JMeter"></a>一、安装并配置 JMeter</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><font color=#999AAA ><a href="https://jmeter.apache.org/download_jmeter.cgi">官网下载</a>，下载二进制的这个 zip<br><img src="https://img-blog.csdnimg.cn/8845e12f1f754b6793d9c04400847290.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><p><font color=#999AAA >然后解压到你喜欢的位置，配置环境变量，新建一个 JMETER_HOME</p><p><font color=#999AAA >然后在 path 里添加 <code>%JMETER_HOME%\bin</code></p><p><font color=#999AAA >在 CLASSPATH 的最前部加上<br><code>%JMETER_HOME%\lib\ext\ApacheJMeter_core.jar;%JMETER_HOME%\lib\jorphan.jar;%JMETER_HOME%\lib\logkit-2.0.jar;</code></p><p><img src="https://img-blog.csdnimg.cn/705ce571af0641049321690cb25635c1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h2 id="导入-MySQL-驱动"><a href="#导入-MySQL-驱动" class="headerlink" title="导入 MySQL 驱动"></a>导入 MySQL 驱动</h2><p><font color=#999AAA >把 MySQL 的驱动放进解压的 jmeter 根目录的 lib 文件夹里（这个下载不用教了吧）<br><img src="https://img-blog.csdnimg.cn/477ee88af59d4db09482e71c92801055.png" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、启动-JMeter"><a href="#二、启动-JMeter" class="headerlink" title="二、启动 JMeter"></a>二、启动 JMeter</h1><p><font color=#999AAA >打开命令行，输入<code>jmeter.bat</code>就会自动打开 jmeter 的图形界面，建议勾选一下中文</p><p><img src="https://img-blog.csdnimg.cn/86f11a3d2894433e8d8e61b676ec72a9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/8098b7d3e7554a86a656d595515271b3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_18,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><font color=#999AAA >点击下面的浏览，找到你的 lib 里的驱动，双击一下</p><p><img src="https://img-blog.csdnimg.cn/cfc373dd3646441aaa3ad6351b5f887c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、开始进行压力测试"><a href="#三、开始进行压力测试" class="headerlink" title="三、开始进行压力测试"></a>三、开始进行压力测试</h1><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><font color=#999AAA >右键 TestPlan 新建 线程组<br><img src="https://img-blog.csdnimg.cn/abd37794e02045a5882ef4e9472ffa06.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_13,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >线程数就是模拟的用户数， Ramp-Up时间 是指用户在多久时间内请求完毕，<br>下面的意思是 在 1 秒内，100 个用户同时请求数据库，循环次数代表一共执行 5 次。建议线程数设置大一点，效果好。</p><p><img src="https://img-blog.csdnimg.cn/e0b5ffd15d8c47d49d6691e525c2e4a5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >右键线程组，添加一个 JDBC 的配置元件，里面只需要配置下面框选的</p><p><img src="https://img-blog.csdnimg.cn/e1a872ac00b347e191accac2a0930f59.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/0d11ed7b432d42f7aa155b3d4a1a004a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >右键 线程组，添加一个 JDBC Request 取样器，test 是前面配置的 pool name，框里写 SQL 语句，类型可以选查询或修改</p><p><img src="https://img-blog.csdnimg.cn/6e3826a1daa74736b7f5a1b63d1dd865.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/302a8f7e41544cdfbb60cfb67122de71.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >右键 线程组，添加几个监听器，这是看测试结果的东西，你们可以多加点自己玩玩。</p><p><img src="https://img-blog.csdnimg.cn/9b99f2ee07004b23a56a82a1afa0c1c5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h2 id="观察结果"><a href="#观察结果" class="headerlink" title="观察结果"></a>观察结果</h2><p><font color=#999AAA >如果 结果树 里面大多都是报错，说明 线程数 设置的太大了，也就是你的数据库承受不起。</p><p><img src="https://img-blog.csdnimg.cn/2f40537ef3664a1a98c11a14bcb64070.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/db0fef2163c64403b63f0d7dcc53ed1a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><code>样本数目 ：</code>是指在测试过程中，总共向服务器发出的请求数目。成功的情况下等于你设定的并发数目 ×   循环次数<br><code>最大值：</code>响应时间的最大值<br><code>吞吐量 ：</code> 表示服务器每分钟处理的请求数目。<br><code>平均值 ：</code> 总的运行时间除以发送到服务器的请求数目；<br><code>偏离 ：</code> 服务器响应时间变化、离散程度测量值的大小，或者，换句话说，就是数据的分布。<br><code>中位数 :</code>  时间的数字，有一半的服务器响应时间低于该值而另一半高于该值。<br><code>异常 :</code>  样本接收失败率 </p>]]></content>
      
      
      <categories>
          
          <category> 运维测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 数据库 </tag>
            
            <tag> JMeter </tag>
            
            <tag> 运维测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>优雅地使用 idea 远程调试服务器上部署的 Springboot 项目</title>
      <link href="/2022/01/18/%E4%BC%98%E9%9B%85%E5%9C%B0%E4%BD%BF%E7%94%A8%20idea%20%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2%E7%9A%84%20Springboot%20%E9%A1%B9%E7%9B%AE/"/>
      <url>/2022/01/18/%E4%BC%98%E9%9B%85%E5%9C%B0%E4%BD%BF%E7%94%A8%20idea%20%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2%E7%9A%84%20Springboot%20%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >听起来好像没有什么用，为什么不在本地调试？因为有一些项目功能需要部署在线上才能正常使用，比如有些接口只能通过服务器来进行访问，而本地是不能访问的，所以要在服务器上进行调试。</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、启动服务器上的项目"><a href="#一、启动服务器上的项目" class="headerlink" title="一、启动服务器上的项目"></a>一、启动服务器上的项目</h1><p><font color=#999AAA >为了简单我们直接 jar 方式启动，<code>-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=10000</code>就是远程调试需要的配置，<code>address</code> 设置为和你的项目不同的端口，<code>XXX.jar</code> 是你的 jar 包名字。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> java -jar -Xdebug -Xrunjdwp:transport=dt_socket,server=y,<span class="built_in">suspend</span>=n,address=10000 XXX.jar &gt; system.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h1 id="二、配置-idea"><a href="#二、配置-idea" class="headerlink" title="二、配置 idea"></a>二、配置 idea</h1><p><font color=#999AAA >Edit Configurations，添加一个 Remote JVM Debug，写上你的服务器 ip 和刚刚启动的 adress 端口—-10000<br><img src="https://img-blog.csdnimg.cn/8f2263f8df2848f9993c5685b583a56c.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/f113d0d903a44e1bbb05b78fd3cb475e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >然后点击 Debug ，控制台出现下方即为成功</p><p><img src="https://img-blog.csdnimg.cn/ccbca659cf3844cba5d3a50f5461d10c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_14,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、开始调试"><a href="#三、开始调试" class="headerlink" title="三、开始调试"></a>三、开始调试</h1><p><font color=#999AAA >直接在 idea 的代码上打断点（当然你的代码要和服务器上的一致），调用服务器接口就行，从前端直接操作也行，用 Postman 也行，后面就和普通调试一样了。</p><p><font color=#999AAA >别搞混了，调用的端口还是你原本项目的端口，不是 10000 这个端口</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Java </tag>
            
            <tag> idea </tag>
            
            <tag> 线上调试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot 引入 EasyExcel 写入数据到流 直接让前端下载（Vue + axios请求）</title>
      <link href="/2022/01/17/Springboot%20%E5%BC%95%E5%85%A5%20EasyExcel%20%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E5%88%B0%E6%B5%81%20%E7%9B%B4%E6%8E%A5%E8%AE%A9%E5%89%8D%E7%AB%AF%E4%B8%8B%E8%BD%BD%EF%BC%88Vue%20+%20axios%E8%AF%B7%E6%B1%82%EF%BC%89/"/>
      <url>/2022/01/17/Springboot%20%E5%BC%95%E5%85%A5%20EasyExcel%20%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E5%88%B0%E6%B5%81%20%E7%9B%B4%E6%8E%A5%E8%AE%A9%E5%89%8D%E7%AB%AF%E4%B8%8B%E8%BD%BD%EF%BC%88Vue%20+%20axios%E8%AF%B7%E6%B1%82%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>easyexcel重写了poi对07版Excel的解析，能够原本一个3M的excel用POI sax依然需要100M左右内存降低到几M，并且再大的excel不会出现内存溢出，03版依赖POI的sax模式。在上层做了模型转换的封装，让使用者更加简单方便。</p><p>有时我们的用户需要导出他们查询到的数据，这时，就可以使用easyexcel直接将数据写入流，提供下载。</p><h1 id="一、Springboot-引入-EasyExcel-依赖"><a href="#一、Springboot-引入-EasyExcel-依赖" class="headerlink" title="一、Springboot 引入 EasyExcel 依赖"></a>一、Springboot 引入 EasyExcel 依赖</h1><p><font color=#999AAA >如果你在网上看到还要引入 poi 什么的依赖，那是针对旧版 easyexcel ，现在的版本不需要引入其他依赖，就下面的就可以了。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easyexcel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、后端代码"><a href="#二、后端代码" class="headerlink" title="二、后端代码"></a>二、后端代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 这里的 ContentType 要和前端请求携带的 ContentType 相对应</span></span><br><span class="line">    response.setContentType(<span class="string">&quot;application/vnd.ms-excel&quot;</span>);</span><br><span class="line">    response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    <span class="comment">// 这里URLEncoder.encode可以防止中文乱码 当然和easyexcel没有关系</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> URLEncoder.encode(<span class="string">&quot;测试&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + fileName + <span class="string">&quot;.xlsx&quot;</span>);</span><br><span class="line">    <span class="comment">// DownloadData 是实体类，sheet 里面是 sheet 名称，doWrite 里面放要写入的数据，类型为 List&lt;DownloadData&gt;</span></span><br><span class="line">    EasyExcel.write(response.getOutputStream(), DownloadData.class).autoCloseStream(Boolean.FALSE).sheet(<span class="string">&quot;模板&quot;</span>).doWrite(downloadDataList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、前端代码"><a href="#三、前端代码" class="headerlink" title="三、前端代码"></a>三、前端代码</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getExcel</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//你们的函数不一定是 axios ，根据你们自己配置的来</span></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line"><span class="attr">headers</span>: &#123;</span><br><span class="line"><span class="comment">//这里和后端的相对应</span></span><br><span class="line"><span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/vnd.ms-excel&quot;</span>,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//这里也可以是 blob</span></span><br><span class="line"><span class="attr">responseType</span>: <span class="string">&quot;arraybuffer&quot;</span></span><br><span class="line"><span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line"><span class="attr">url</span>: <span class="string">&#x27;/download&#x27;</span>,</span><br><span class="line"><span class="comment">// 请求参数，可以为空</span></span><br><span class="line"><span class="attr">params</span>: &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">successResponse</span>=&gt;</span> &#123;</span><br><span class="line"><span class="comment">//这里面是请求成功以后下载文件的方法</span></span><br><span class="line"><span class="keyword">let</span> objectUrl = successResponse</span><br><span class="line"><span class="keyword">const</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([successResponse], &#123;<span class="string">&#x27;application/vnd.ms-excel&#x27;</span>&#125;);</span><br><span class="line">objectUrl = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span><br><span class="line"><span class="keyword">const</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">a.<span class="property">href</span> = objectUrl;</span><br><span class="line"><span class="comment">//这里可以重新定义文件名，以前端为准</span></span><br><span class="line">a.<span class="property">download</span> = <span class="string">&quot;test.xlsx&quot;</span>;</span><br><span class="line">a.<span class="title function_">click</span>();</span><br><span class="line">a.<span class="title function_">remove</span>();</span><br><span class="line"><span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(objectUrl)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="四、PostMan测试方法"><a href="#四、PostMan测试方法" class="headerlink" title="四、PostMan测试方法"></a>四、PostMan测试方法</h1><p><img src="https://img-blog.csdnimg.cn/6335f699e08e4e45b3b2b8d5d5cab061.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/347976639de341c0ac7ac6ee3397a9de.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/1dc19202dfbe4397948acd479fb8562e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> EasyExcel </tag>
            
            <tag> Vue </tag>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisPlus 开启事务并交由 SpringBoot 管理</title>
      <link href="/2022/01/09/MyBatisPlus%20%E5%BC%80%E5%90%AF%E4%BA%8B%E5%8A%A1%E5%B9%B6%E4%BA%A4%E7%94%B1%20SpringBoot%20%E7%AE%A1%E7%90%86/"/>
      <url>/2022/01/09/MyBatisPlus%20%E5%BC%80%E5%90%AF%E4%BA%8B%E5%8A%A1%E5%B9%B6%E4%BA%A4%E7%94%B1%20SpringBoot%20%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >网络上对于事务的解释都太过官方，太过晦涩，导致我们都看不懂，我来用人话解释一下什么是事务。</font></p><p><font color=#999AAA >而开启事务也很简单，只需要<code>@EnableTransactionManagement</code>和<code>@Transactional</code>两个注解。</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、什么是事务"><a href="#一、什么是事务" class="headerlink" title="一、什么是事务"></a>一、什么是事务</h1><p><font color=#999AAA >假如你的程序正在进行数据库写操作，但是中途程序报错了，所以数据库里被写入了一些残缺的东西；</p><p><font color=#999AAA >如果开启了事务功能，springboot会在程序正常结束后才会写入数据库，如果程序中途报错，事务会回滚，也就是数据库不会被残缺的数据污染</p><p>&#x3D;&#x3D;一句话，不开启事务是实时写入，写入语句执行完数据库就有数据了，开启事务，是所有程序执行完，数据库才有数据。&#x3D;&#x3D;</p><p>程序运行时如果控制台有下面 SqlSession was not registered for synchronization 意思就是事务没有开启。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8811ab]</span><br><span class="line">Creating a new SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd82b9a] was not registered <span class="keyword">for</span> synchronization because synchronization is not active</span><br></pre></td></tr></table></figure><h1 id="二、开启方法"><a href="#二、开启方法" class="headerlink" title="二、开启方法"></a>二、开启方法</h1><p><font color=#999AAA> 在启动类上添加一个注解 <code>@EnableTransactionManagement</code>，最好自己手打然后回车键自动 import class，复制粘贴的话可能无法识别到这个注解。</p><p><img src="https://img-blog.csdnimg.cn/3083c337c466404b8fb638559d5a567b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >然后在每个 Service 上都添加一个注解 <code>@Transactional(rollbackFor = RuntimeException.class)</code>，代表在 RuntimeException 异常发生时进行回滚，@Transactional里面的参数类型还有很多，有兴趣可以自己学习学习<br><img src="https://img-blog.csdnimg.cn/2ad1344ad981465387f1de32fe2cd31b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><font color=#999AAA >然后查询的时控制台出现以下信息 Registering transaction synchronization for SqlSession ，就是配置成功了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Registering transaction synchronization <span class="keyword">for</span> SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c34c1ee]</span><br><span class="line">JDBC Connection [HikariProxyConnection@405147465 wrapping com.mysql.jdbc.JDBC4Connection@7e6e118a] will be managed by Spring</span><br><span class="line">Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c34c1ee]</span><br><span class="line">Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c34c1ee] from current transactio</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >具体 MyBatisPlus 的配置和 Druid 或者 Hikari 连接池的配置，看我的传送门<a href="https://blog.csdn.net/qq_48922459/article/details/122051528?spm=1001.2014.3001.5501">Springboot配置Druid或Hikari连接池（并开启MyBatisPlus事务）</a></p><p>更复杂的 LambdaQurryWrrapper 构造器使用请看<a href="https://blog.csdn.net/qq_48922459/article/details/127044399?spm=1001.2014.3001.5502">Springboot 使用 Mybatis Plus LambdaQueryWrapper 构造器和注解自定义SQL</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> MyBatisPlus </tag>
            
            <tag> 事务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 修复 yum</title>
      <link href="/2022/01/06/CentOS%20%E4%BF%AE%E5%A4%8D%20yum/"/>
      <url>/2022/01/06/CentOS%20%E4%BF%AE%E5%A4%8D%20yum/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >在配置 yum 以后，也许某一天这个源失效了，你也无法使用 wget 下载其他的源，好吧如果你下载了其他的源，但是也可能会遇到 yum 无法刷新缓存或者一直卡在fastestmirror和下载界面的情况，当你如此绝望的要重装 yum 甚至重装系统的时候，那么你只需要 <code>3</code> 步就可以挽救你的系统。</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、删除原来的配置"><a href="#一、删除原来的配置" class="headerlink" title="一、删除原来的配置"></a>一、删除原来的配置</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /etc/yum.repos.d/*</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、官方途径"><a href="#二、官方途径" class="headerlink" title="二、官方途径"></a>二、官方途径</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh --force http://mirror.centos.org/centos-7/7/os/x86_64/Packages/centos-release-7-9.2009.0.el7.centos.x86_64.rpm</span><br></pre></td></tr></table></figure><p>注意后面的 <code>http://mirror.centos.org/centos-7/7/os/x86_64/Packages/centos-release-7-9.2009.0.el7.centos.x86_64.rpm</code> 官方会删除旧版，只留下新版，所以先打开这个网址看看， 404 的话就访问这个网址<code>http://mirror.centos.org/centos-7/7/os/</code>，寻找<code>centos-release-7-9.2009.0.el7.centos.x86_64.rpm</code>这种样式的复制链接再运行命令。<br><img src="https://img-blog.csdnimg.cn/14883d3b6f704df2828f1c6c15162aff.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、重新生成缓存"><a href="#三、重新生成缓存" class="headerlink" title="三、重新生成缓存"></a>三、重新生成缓存</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all<span class="comment"># 清空缓存 </span></span><br><span class="line">yum makecache<span class="comment"># 生成缓存</span></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >完</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> yum </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 配置 MySQL 定时自动备份到另一台服务器</title>
      <link href="/2022/01/05/Linux%20%E9%85%8D%E7%BD%AE%20MySQL%20%E5%AE%9A%E6%97%B6%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E5%88%B0%E5%8F%A6%E4%B8%80%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2022/01/05/Linux%20%E9%85%8D%E7%BD%AE%20MySQL%20%E5%AE%9A%E6%97%B6%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E5%88%B0%E5%8F%A6%E4%B8%80%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >此方案可使一台服务器上的 MySQL 中的所有数据库每天 0 点自动转储为 .sql 文件，然后将文件同步到另一台服务器上，可以作为一个简单的数据容灾。</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、配置服务器-ssh"><a href="#一、配置服务器-ssh" class="headerlink" title="一、配置服务器 ssh"></a>一、配置服务器 ssh</h1><p><font color=#999AAA >从一台服务器同步文件到另一台服务器，需要使两台服务器之间建立 ssh 连接，不然每次执行备份的时候你还要半夜爬起来去输入服务器密码。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p><font color=#999AAA >运行这句，一直敲击回车，会在 <code>/root/.ssh</code> 目录下生成两个文件，我使用的是 xftp 查看的文件，这个 .ssh 文件夹是<code>隐藏文件夹</code>，所以 xftp 下面看不到，你要手动输入地址 &#x2F;root&#x2F;.ssh 就可以进去了，把 <code>id_rsa.pub</code> 里的内容全选复制。<br><img src="https://img-blog.csdnimg.cn/7cc7c8c05a2f44709b63d08ba532e302.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_12,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/888bb1f1266f4ea2b559b87ca95a93cc.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >来到目标服务器，也是进入 <code>/root/.ssh</code> 文件夹，把刚刚复制的内容粘贴进 <code>authorized_keys</code> 的尾部（authorized_keys 可能没有，自己新建，里面可以有多个 key，互不影响，换一行粘贴就行了）</p><p><img src="https://img-blog.csdnimg.cn/4ad1a3757b8f4d5a88710cccf5d7fac3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/2dd8151717dc428891e391eb83a4c8c2.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >保存，这样我们两台服务器的 ssh 连接就建立好了。</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、编写自动备份-sh-文件"><a href="#二、编写自动备份-sh-文件" class="headerlink" title="二、编写自动备份 sh 文件"></a>二、编写自动备份 sh 文件</h1><p><font color=#999AAA >在数据库所在的服务器新建一个 sh 文件，放在哪里、怎样命名都随意（<code>此处注意！！！不要使用 xftp 右键新建文件来编写 sh 文件，那样编码会出问题，比如新建的文件名后面会多出一个问号“?”，使用命令行vim或vi来新建</code>）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> mysqlAutoBackupTo24</span><br><span class="line"><span class="built_in">cd</span> mysqlAutoBackupTo24</span><br><span class="line"><span class="built_in">mkdir</span> backup</span><br><span class="line">vim AutoBackup.sh</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/c7a9227f880d422a84036059e2780ad4.png" alt="在这里插入图片描述"><br><font color=#999AAA >我建立的文件夹是这样的</p><p><img src="https://img-blog.csdnimg.cn/7fe3aba1924d4d3e88d4399145407839.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >AutoBackup.sh 里面的内容</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下面生成的sql在本服务器存放的文件夹，就是我上面建立的</span></span><br><span class="line">BACKUP=/<span class="keyword">data</span>/mysqlAutoBackupTo24/backup</span><br><span class="line"><span class="comment">#当前时间，用来命名sql文件</span></span><br><span class="line">DATETIME=<span class="variable">$</span>(date +%Y-%m-%d)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;===备份开始===&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;备份文件存放于<span class="variable">$</span>&#123;BACKUP&#125;/<span class="variable">$DATABASE</span>-<span class="variable">$DATETIME</span>.sql&quot;</span></span><br><span class="line"><span class="comment">#生成sql文件，命名</span></span><br><span class="line">DATABASE=dbBackup</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$DATABASE</span>-<span class="variable">$DATETIME</span></span><br><span class="line"><span class="comment">#mysqldump -h localhost -u$&#123;DB_USER&#125; -p$&#123;DB_PW&#125; --all-databases &gt; $&#123;BACKUP&#125;/$DATABASE-$DATETIME.sql</span></span><br><span class="line">mysqldump <span class="literal">-h</span> <span class="number">11.11</span>.<span class="number">111.28</span> <span class="literal">-uroot</span> <span class="literal">-proot</span> <span class="literal">--databases</span> dba dbb &gt; <span class="variable">$</span>&#123;BACKUP&#125;/<span class="variable">$DATABASE</span>-<span class="variable">$DATETIME</span>.sql</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;===导出成功，开始传输===&quot;</span></span><br><span class="line"><span class="comment">#将sql文件从服务器28备份到服务器24自己建立的文件夹/data/mysqlAutoBackupFrom28下面</span></span><br><span class="line">scp <span class="literal">-P</span> <span class="number">122</span> <span class="variable">$DATABASE</span>-<span class="variable">$DATETIME</span>.sql root@<span class="number">11.11</span>.<span class="number">11.24</span>:/<span class="keyword">data</span>/mysqlAutoBackupFrom28</span><br><span class="line"><span class="comment">#删除备份目录</span></span><br><span class="line"><span class="comment">#rm -rf $&#123;BACKUP&#125;/$DATETIME</span></span><br><span class="line"><span class="comment">#删除7天前备份的数据，自行更改</span></span><br><span class="line"><span class="comment">#find $BACKUP -mtime +7 -name &quot;*.sql&quot; -exec rm -rf &#123;&#125; \;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;===数据库备份到服务器成功===&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><font color=#999AAA ><code>mysqldump</code> 的 -h 后面写所在服务器的 IP，也就是24，不要写 localhost，因为如果是离线安装的 mysql 可能没有 mysqld.socket ，导致连接失败。</p><p><font color=#999AAA ><code>scp -P 122</code> 是指定 ssh 端口，不指定默认为 22，root 是目标服务器24 的用户名</p><p><font color=#999AAA ><code>scp</code> 的 <code>--databases dba dbb</code> 的意思是指定备份 dba 和 dbb 这个两个数据库，指定多个数据库要加 –databases ，数据库用空格隔开，上面一句注释掉的是 <code>--all-databases</code> ，意思是备份全部数据库，但是我的报错，不知道为什么。你们可以试一下。</p><p>下面我们运行一下这个 sh 看看效果，cd 到你的 sh 存放的文件夹 <code>sh AutoBackup.sh</code>，首次进行 ssh 连接要输入一个 <code>yes</code> 回车，然后去目标服务器 24 查看，sql 文件已经同步过去。</p><p><img src="https://img-blog.csdnimg.cn/6ded890c67f94762a535dd6656502a8d.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f0a03101fe4f4443a2a417a15a4b300e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_15,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、设置定时自动执行"><a href="#三、设置定时自动执行" class="headerlink" title="三、设置定时自动执行"></a>三、设置定时自动执行</h1><p><font color=#999AAA >上面的测试没有问题，下面我们设定一个每天 0 点自动执行 sh 脚本，就可以失效每天的自动同步。</p><p><font color=#999AAA >首先赋予要执行的 shell 脚本权限，给高一点，不然没法自动执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 777 /data/mysqlAutoBackupTo24/AutoBackup.sh</span><br></pre></td></tr></table></figure><p><font color=#999AAA >输入下面语句，vim 会打开一个文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><p><font color=#999AAA >里面这样写，保存，前面的 <code>02 00 * * *</code> 是 cron 表达式，代表每天 00:02 执行 <code>/data/mysqlAutoBackupTo24/AutoBackup.sh</code>，之所以设置 00:02 是因为避免服务器在 0 点的时候有其他数据同步任务，所以晚一点。cron 表达式的语法你们可以学一下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">02 00 * * * sh /data/mysqlAutoBackupTo24/AutoBackup.sh</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/a8db4aa12a004fe0989d811cfe2eed1f.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >保险起见再刷新一下配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service crond reload</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >感谢<a href="https://blog.csdn.net/qq_33966519/article/details/103761673%E8%BF%99%E7%AF%87%E6%96%87%E7%AB%A0%EF%BC%8CWindows">https://blog.csdn.net/qq_33966519/article/details/103761673这篇文章，Windows</a> 的 MySQL 备份要编写一个 bat 文件，在系统自带的计划任务里设置定时，后面研究研究再写吧。</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> MySQL </tag>
            
            <tag> Shell脚本 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx 配置 SSL 证书（网站变为 HTTPS）</title>
      <link href="/2021/12/31/Nginx%20%E9%85%8D%E7%BD%AE%20SSL%20%E8%AF%81%E4%B9%A6%EF%BC%88%E7%BD%91%E7%AB%99%E5%8F%98%E4%B8%BA%20HTTPS%EF%BC%89/"/>
      <url>/2021/12/31/Nginx%20%E9%85%8D%E7%BD%AE%20SSL%20%E8%AF%81%E4%B9%A6%EF%BC%88%E7%BD%91%E7%AB%99%E5%8F%98%E4%B8%BA%20HTTPS%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >一键建站工具例如 宝塔、wordpress 都有一键配置 https 的选项，虽然我写了这篇文章，但我还是推荐使用建站软件嘿嘿，没有建站软件的小伙伴门只能自己配了，但也是非常简单的。</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、把-SSL-证书的上传到服务器"><a href="#一、把-SSL-证书的上传到服务器" class="headerlink" title="一、把 SSL 证书的上传到服务器"></a>一、把 SSL 证书的上传到服务器</h1><p><font color=#999AAA >把ssl证书的pem和key传到服务器的nginx的根目录的cert（这个文件夹自己创建，可以不叫这个名字），这两文件 pem 和 key 传上来就可以了。</p><p><img src="https://img-blog.csdnimg.cn/9b7048dacf34491991e26f90fa61c9d8.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/7dc38fee577a43ca9dce17c4dd4e8c93.png" alt="在这里插入图片描述"></p><h1 id="二、修改-nginx-conf"><a href="#二、修改-nginx-conf" class="headerlink" title="二、修改 nginx.conf"></a>二、修改 nginx.conf</h1><p><font color=#999AAA >然后修改nginx.conf，添加（路径和端口和 ip 自己修改）：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen   443;</span><br><span class="line">server_name  111.111.111.111; </span><br><span class="line">ssl on;</span><br><span class="line"># 下面两个 pem 和 key 换成你自己证书的</span><br><span class="line">ssl_certificate /data/nginx/cert/6722197_godata.dongtou.gov.cn.pem;</span><br><span class="line">ssl_certificate_key /data/nginx/cert/6722197_godata.dongtou.gov.cn.key;</span><br><span class="line">ssl_session_timeout 5m;</span><br><span class="line">ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">ssl_prefer_server_ciphers on;</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、重启-Nginx"><a href="#三、重启-Nginx" class="headerlink" title="三、重启 Nginx"></a>三、重启 Nginx</h1><p><font color=#999AAA >然后保存，重启 nginx 就可以了</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Nginx </tag>
            
            <tag> SSL </tag>
            
            <tag> HTTPS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python 调用高德 API 实现地址转为经纬度</title>
      <link href="/2021/12/31/Python%20%E8%B0%83%E7%94%A8%E9%AB%98%E5%BE%B7%20API%20%E5%AE%9E%E7%8E%B0%E5%9C%B0%E5%9D%80%E8%BD%AC%E4%B8%BA%E7%BB%8F%E7%BA%AC%E5%BA%A6/"/>
      <url>/2021/12/31/Python%20%E8%B0%83%E7%94%A8%E9%AB%98%E5%BE%B7%20API%20%E5%AE%9E%E7%8E%B0%E5%9C%B0%E5%9D%80%E8%BD%AC%E4%B8%BA%E7%BB%8F%E7%BA%AC%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >偶然接触到这个东西，记录一下</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、申请高德的Key"><a href="#一、申请高德的Key" class="headerlink" title="一、申请高德的Key"></a>一、申请高德的Key</h1><p><a href="https://lbs.amap.com/">高德开放平台网址</a></p><p><font color=#999AAA >注册登录后，点击右上角头像旁边的控制台</p><p><font color=#999AAA >点击“我的应用”，然后右边有个“创建新应用”，点击后输入一些内容，就创建成功了，<code>key</code> 就获取到了</p><p><img src="https://img-blog.csdnimg.cn/788630f95a354b38bb93f272ec2979fd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、要转换的地址放入文件"><a href="#二、要转换的地址放入文件" class="headerlink" title="二、要转换的地址放入文件"></a>二、要转换的地址放入文件</h1><p><font color=#999AAA >可选 csv、xlsx、txt，推荐 txt ，因为 txt 无论如何都不会报错，csv 和 xlsx 高概率会报 UTF-8 编码无法转换的错，网上的解决方案都是修改编码，这样不行，所以还是 txt 吧</p><p>一个地址换一行，如果用 xlsx 的话也一样，一个地址换一行</p><p><img src="https://img-blog.csdnimg.cn/8b8e404a324649e48279b28a43deb703.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_8,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、编写代码"><a href="#三、编写代码" class="headerlink" title="三、编写代码"></a>三、编写代码</h1><p><font color=#999AAA >这代码也不是我本人写的，我也不怎么会 Python ，所以没有注释讲解。。。</p><p><font color=#999AAA >将下面的 <code>key</code> 替换成你刚刚创建的新应用下面的 key，然后地址文件改成你们刚刚创建的 <code>txt</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line"></span><br><span class="line">wb = Workbook()</span><br><span class="line">sheet = wb.active</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_location</span>(<span class="params">address, i</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="comment"># 这是高德的API接口地址</span></span><br><span class="line">    url = <span class="string">&quot;https://restapi.amap.com/v3/geocode/geo&quot;</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="comment"># 替换为你在高德地图开发者平台申请的key</span></span><br><span class="line">        <span class="string">&#x27;key&#x27;</span>: <span class="string">&#x27;a8c3f94ebc2fea82c283effa241aa066&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;address&#x27;</span>: address</span><br><span class="line">    &#125;</span><br><span class="line">    r = requests.post(url, data=data).json()</span><br><span class="line">    sheet[<span class="string">&quot;A&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(i)].value = address.strip(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(r)</span><br><span class="line">    <span class="keyword">if</span> r[<span class="string">&#x27;status&#x27;</span>] == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(r[<span class="string">&#x27;geocodes&#x27;</span>]) &gt; <span class="number">0</span>:</span><br><span class="line">            GPS = r[<span class="string">&#x27;geocodes&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;location&#x27;</span>]</span><br><span class="line">            sheet[<span class="string">&quot;B&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(i)].value = <span class="string">&#x27;[&#x27;</span> + GPS + <span class="string">&#x27;]&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            sheet[<span class="string">&quot;B&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(i)].value = <span class="string">&#x27;[]&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        sheet[<span class="string">&quot;B&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(i)].value = <span class="string">&#x27;未找到&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将地址信息替换为自己的文件，一行代表一个地址，根据需要也可以自定义分隔符</span></span><br><span class="line"><span class="comment"># 读取地址文件。我的为D:\下载\Documents\地点.txt</span></span><br><span class="line">f = codecs.<span class="built_in">open</span>(<span class="string">r&quot;D:\下载\Documents\地点.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, <span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    line = f.readline()</span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> line:</span><br><span class="line">        f.close()</span><br><span class="line">        <span class="comment"># 设置保存路径</span></span><br><span class="line">        wb.save(<span class="string">r&quot;D:\下载\Documents\经纬度信息.xlsx&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    get_location(line, i)</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="四、运行结果"><a href="#四、运行结果" class="headerlink" title="四、运行结果"></a>四、运行结果</h1><p><font color=#999AAA >你设置的路径下生成了结果文件，打开看看</p><p><img src="https://img-blog.csdnimg.cn/3535b3b23e7340fdbb5819183972f611.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/a41e5df7d9a64fdea96c704f5c11d1f9.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >准确度还挺高，这种直接写小区名和学校名都能识别到，高德 niubility</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 高德API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 挂载磁盘和扩展现有分区大小（无需格式化、无需关机）</title>
      <link href="/2021/12/30/Linux%20%E6%8C%82%E8%BD%BD%E7%A3%81%E7%9B%98%E5%92%8C%E6%89%A9%E5%B1%95%E7%8E%B0%E6%9C%89%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F%EF%BC%88%E6%97%A0%E9%9C%80%E6%A0%BC%E5%BC%8F%E5%8C%96%E3%80%81%E6%97%A0%E9%9C%80%E5%85%B3%E6%9C%BA%EF%BC%89/"/>
      <url>/2021/12/30/Linux%20%E6%8C%82%E8%BD%BD%E7%A3%81%E7%9B%98%E5%92%8C%E6%89%A9%E5%B1%95%E7%8E%B0%E6%9C%89%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F%EF%BC%88%E6%97%A0%E9%9C%80%E6%A0%BC%E5%BC%8F%E5%8C%96%E3%80%81%E6%97%A0%E9%9C%80%E5%85%B3%E6%9C%BA%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >Centos、Ubuntu、Debian，xfs 和 ext 文件系统都可以，我全都在虚拟机试过一遍，先讲挂载磁盘，因为扩容也需要挂载的前几步操作。</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、磁盘挂载"><a href="#一、磁盘挂载" class="headerlink" title="一、磁盘挂载"></a>一、磁盘挂载</h1><p><font color=#999AAA >如果是虚拟机，先在虚拟机设置里面增加磁盘，点右边扩展，然后输入的最大磁盘大小，原本20G，输入40G，也就是扩容20G，完成后开启虚拟机，在系统里继续配置。<br><img src="https://img-blog.csdnimg.cn/ef20b435877847f4bed96b17d1a53b36.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >进入系统以后，输入<code>df -lh</code>查看现有分区挂载状态，再输入<code>fdisk -l</code>查看所拥有的的磁盘，我只有一个磁盘，就是 &#x2F;dev&#x2F;sda，现在是42.9G，可以看到磁盘容量已经增加了（之前是22G）</p><p><img src="https://img-blog.csdnimg.cn/0ccefacb2d1646529de85df3ad7b98ac.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_17,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >如果我们要挂载这块磁盘到一个新的文件夹叫 &#x2F;new，我们这样操作</p><p><font color=#999AAA >输入<code>fdisk /dev/sda</code>回车，（&#x2F;dev&#x2F;sda换成你的磁盘名）</p><p><font color=#999AAA >会提示你一些信息，输入 “p”查看分区表信息，输入“n”创建分区，慢点回车，一直到看见 <code>分区 * 已设置为 Linux 类型，大小设为 * GiB</code> （有些系统这个提示是英文的），就输入 wq ，回车</p><p>&#x3D;&#x3D;提示：如果不想把这块磁盘的空间全部分区，就在“Last 扇区”那里，不要直接回车，输入数字修改大小再回车&#x3D;&#x3D;</p><p><img src="https://img-blog.csdnimg.cn/edbdf09c01114a35b2ab81d5f2ddae80.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_13,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA > 再次输入 <code>fdisk -l</code>你会发现下面比之前多了一个 sda4（你们的可能不叫sda4哈，反正就是多了一个），就是刚刚新建的分区<br><img src="https://img-blog.csdnimg.cn/a22a92a8cb5140feb2414fb88bec5fd3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_11,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><font color=#999AAA > 如果要把这个新分区挂载到文件夹的话就输入 <code>mount /dev/sdb4 /new</code>，后面的 &#x2F;new 是你要挂载的文件夹，再运行<code>vi /etc/fstab</code>，设置开机自动挂载，然后<code>vi /etc/fstab</code>在文件里添加以下内容<code>/dev/sdb    /data    ext4    defaults    0 0</code>，完成</p><p><font color=#999AAA > 如果是扩容就不需要上面那一步操作了，直接进行下一步</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、分区扩容"><a href="#二、分区扩容" class="headerlink" title="二、分区扩容"></a>二、分区扩容</h1><p><font color=#999AAA >运行 <code>vgdisplay</code>，显示卷组信息，查看VG Name，下面要用，这时 Free PE 为0</p><p><img src="https://img-blog.csdnimg.cn/1b2f3c85d70f4e30a3ded99790206726.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_12,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >运行<code>partprobe - inform the os of partition table changes</code> 来使分区表生效（提示没有那个文件或目录不用管）</p><p><font color=#999AAA >然后运行<code>pvcreate /dev/sda4</code> 将刚才的分区初始化为物理卷，以便被 LVM 使用</p><p><img src="https://img-blog.csdnimg.cn/ada8e4ebf0674e6cb4ff88692e62b6e3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_12,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >运行<code>vgextend centos /dev/sda4</code>，  扩展卷组（上面的VG Name换成你自己的，我的叫centos，你们自己换一下）</p><p><font color=#999AAA >再次运行<code>vgdisplay</code>查看卷组信息，发现Free PE有空间了</p><p><img src="https://img-blog.csdnimg.cn/0424aea0602242dd9b439bcb39c183be.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_11,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><p><font color=#999AAA >然后开始扩容啦，有两种写法，百分比和直接指定扩容大小（下面有图）</p><p><font color=#999AAA >指定扩展大小：<br><code>lvextend -L+9.9G /dev/mapper/centos-root /dev/sda4</code><br>意思是为 &#x2F;dev&#x2F;mapper&#x2F;centos-root 增加10G空间，这个 &#x2F;dev&#x2F;mapper&#x2F;centos-root 是 df -lh 那一步你要扩容的分区名称，你们自己改一下，&#x3D;&#x3D;直接写10G系统会判定超出磁盘大小，所以写9.9G，建议下面那种写100%不浪费空间&#x3D;&#x3D;</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><p><font color=#999AAA >按照百分比扩展：<br><code>lvextend -l +100%FREE /dev/mapper/centos-root /dev/sda4</code><br>意思是把 &#x2F;dev&#x2F;sda4 的全部空间扩容给 &#x2F;dev&#x2F;mapper&#x2F;centos-root ，注意命令大小写</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><p><font color=#999AAA >最后一步，看一下你的分区文件系统，运行<code>cat /etc/fstab</code>，我的是 xfs</p><p>如果是ext文件系统：<code>resize2fs /dev/mapper/centos-root</code><br>如果是XFS文件系统：<code>xfs_growfs /dev/mapper/centos-root</code></p><p><font color=#999AAA >然后<code>df -lh</code>发现扩容成功</p><p><img src="https://img-blog.csdnimg.cn/6bce0e66a2dc4f4d9fa8afeb26e97e0f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_16,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL数据库创建用户并赋予数据库的操作和登录权限</title>
      <link href="/2021/12/27/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%B9%B6%E8%B5%8B%E4%BA%88%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%93%8D%E4%BD%9C%E5%92%8C%E7%99%BB%E5%BD%95%E6%9D%83%E9%99%90/"/>
      <url>/2021/12/27/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%B9%B6%E8%B5%8B%E4%BA%88%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%93%8D%E4%BD%9C%E5%92%8C%E7%99%BB%E5%BD%95%E6%9D%83%E9%99%90/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >两种方法，第一种方法确保你的账号拥有全部权限，你安装数据库的时候默认的 root 用户就拥有全部权限。</font></p><p><font color=#999AAA >第二张方法可以是你的账号不具备管理员权限，所以要直接操作 mysql 表，使用 insert 语句添加用户。</font></p><p><font color=#999AAA >可以设置用户对某个数据库的某个表的增删改查权限，还能限制操作 IP </font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="第一种方法"><a href="#第一种方法" class="headerlink" title="第一种方法"></a>第一种方法</h1><h2 id="一、创建一个新用户-test-，密码设置为-123456"><a href="#一、创建一个新用户-test-，密码设置为-123456" class="headerlink" title="一、创建一个新用户 test ，密码设置为 123456"></a>一、创建一个新用户 test ，密码设置为 123456</font></h2><p>@’%’ 的意思是允许 test 用户在任意 IP 登录，如果是 @’localhost’，意思就是只能在本机登录不能远程登录，如果是 @’111.111.111.111’，意思是只能在 IP 为111.111.111.111 的设备上登录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;123456&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="二、赋予用户权限"><a href="#二、赋予用户权限" class="headerlink" title="二、赋予用户权限"></a>二、赋予用户权限</h2><h3 id="赋予全部权限"><a href="#赋予全部权限" class="headerlink" title="赋予全部权限"></a>赋予全部权限</h3><p><code>all</code>代表全部权限（增删改查），<code>*.*</code>  代表全部的数据库的全部表，后面的<code>@&#39;%&#39;</code>是在任何 IP 都可以拥有这些权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on *.* to <span class="string">&#x27;yj_gongdian&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="赋予部分表的部分权限"><a href="#赋予部分表的部分权限" class="headerlink" title="赋予部分表的部分权限"></a>赋予部分表的部分权限</h3><p>&#x3D;&#x3D;下面这种写法自定义权限和表&#x3D;&#x3D;</p><p>我先创建个数据库 school，数据库里我又建了个表 students</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database school;</span><br><span class="line">create table students;</span><br></pre></td></tr></table></figure><p>这个意思是把 school 这个数据库下面的 students 表的 select 权限赋给 test 用户，而且限制 IP 为111.111.111.111</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant select on school.students to <span class="built_in">test</span>@111.111.111.111;</span><br></pre></td></tr></table></figure><p><font color=#999AAA >三、刷新权限</p><p>必须刷新，不然不生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="第二种方法"><a href="#第二种方法" class="headerlink" title="第二种方法"></a>第二种方法</h1><p><font color=#999AAA >字段意思和上面的一样，意思是在 mysql 数据库里的 user 表，插入一条数据， mysql这个表是自带的，里面存储的都是用户的信息。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">INSERT INTO user(host,user,password,select_priv,insert_priv,update_priv) VALUES(<span class="string">&#x27;%&#x27;</span>,<span class="string">&#x27;test&#x27;</span>,password(<span class="string">&#x27;wulw2022!@#&#x27;</span>),<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;y&#x27;</span>);</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux系统一键安装Docker（并更改Docker的容器默认存储位置）</title>
      <link href="/2021/12/27/Linux%E7%B3%BB%E7%BB%9F%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85Docker%EF%BC%88%E5%B9%B6%E6%9B%B4%E6%94%B9Docker%E7%9A%84%E5%AE%B9%E5%99%A8%E9%BB%98%E8%AE%A4%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE%EF%BC%89/"/>
      <url>/2021/12/27/Linux%E7%B3%BB%E7%BB%9F%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85Docker%EF%BC%88%E5%B9%B6%E6%9B%B4%E6%94%B9Docker%E7%9A%84%E5%AE%B9%E5%99%A8%E9%BB%98%E8%AE%A4%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >Linux系统Docker的安装非常简单，官方的一键安装命令，无需配置任何东西，如果你的服务器无法联网就只能用麻烦的离线安装了。</font></p><p><font color=#999AAA >就是如果你的服务器的磁盘分了不同区的话，要更改一下 Docker 的容器和镜像的默认存储位置，否则的话默认会安装在<code>/var/lib/docker</code>目录下，日志也会在这个目录生成，慢慢把系统盘空间占满。</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、一键安装命令"><a href="#一、一键安装命令" class="headerlink" title="一、一键安装命令"></a>一、一键安装命令</h1><h2 id="Ubuntu、Debian、UOS、Deepin、CentOS都一样"><a href="#Ubuntu、Debian、UOS、Deepin、CentOS都一样" class="headerlink" title="Ubuntu、Debian、UOS、Deepin、CentOS都一样"></a>Ubuntu、Debian、UOS、Deepin、CentOS都一样</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br></pre></td></tr></table></figure><p><font color=#999AAA >等待安装完成后，运行<code>docker ps</code>，这样就算是安装好了</p><p><img src="https://img-blog.csdnimg.cn/405117dca48d4b7e95a2ce8ec6924dd7.png" alt="在这里插入图片描述"><br><font color=#999AAA >启动服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker.service</span><br></pre></td></tr></table></figure><p><font color=#999AAA >开机自启</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、更改默认存储路径"><a href="#二、更改默认存储路径" class="headerlink" title="二、更改默认存储路径"></a>二、更改默认存储路径</h1><p><font color=#999AAA >命令行输入 <code>vi /etc/docker/daemon.json</code>，在这个文件里输入以下内容，&#x2F;data&#x2F;docker 是要修改的存储路径，你们看自己想修改到哪里。</p><p><font color=#999AAA >vi 的操作和 vim 一样，进去以后按一下 “a”就可以输入了，然后保存是先按一下“esc”，再按住“shift + z + z”就可以了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;graph&quot;</span>:<span class="string">&quot;/data/docker&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/78c610e33c7048129ea9320aea2f8f80.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_9,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >然后重启一下 Docker ，命令行输入 <code>systemctl restart docker.service</code></p><p><font color=#999AAA >然后命令行输入<code>docker info</code>，看我鼠标拉白的那个路径，我没有改，所以还是原来的路径</p><p><img src="https://img-blog.csdnimg.cn/ddf7e8ccb3ad4125a5f07a8726597e34.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_11,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><font color=#999AAA >]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> apt </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue和Springboot实现SM4加密和解密（前、后端均可）</title>
      <link href="/2021/12/24/Vue%E5%92%8CSpringboot%E5%AE%9E%E7%8E%B0SM4%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86%EF%BC%88%E5%89%8D%E7%AB%AF%E5%8F%AF%E5%8A%A0%E5%AF%86%EF%BC%8C%E5%90%8E%E7%AB%AF%E5%8F%AF%E5%8A%A0%E8%A7%A3%E5%AF%86%EF%BC%8CMD5%E5%90%8C%E7%90%86%EF%BC%89/"/>
      <url>/2021/12/24/Vue%E5%92%8CSpringboot%E5%AE%9E%E7%8E%B0SM4%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86%EF%BC%88%E5%89%8D%E7%AB%AF%E5%8F%AF%E5%8A%A0%E5%AF%86%EF%BC%8C%E5%90%8E%E7%AB%AF%E5%8F%AF%E5%8A%A0%E8%A7%A3%E5%AF%86%EF%BC%8CMD5%E5%90%8C%E7%90%86%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >网站配置 https 比较麻烦，所以为了我们的用户账户安全，密码在从前端传输到后端的过程中，最好加密一下，选用 SM4 有两个原因，一是国产加密算法，二是这个国密算法是对称的，只要加密和解密的 key 和 vi 相同，可以很容易的解密，同时需要匹配 key 和 vi 又兼顾了安全。</font></p><p><font color=#999AAA >我下面会提供前端的 SM4 加密 js 文件，vue 项目也可以使用，还有 Java 的 SM4 加密和解密文件。可实现前端加密传输到后端解密，存到数据库，后端也可以解密传输到前端进行明文的显示。</font></p><p><code>加密源代码网上有很多，但是代码语法和jar包陈旧，导致新版本jdk无法运行；以及 js 使用的语法太旧，导致 Vue 编译不通过（即使不使用 ESLint也不通过），所以我这个在他们的基础上修改了，后端只需引入一个依赖，前端语法已经规范修改，而且可通过 ESLint 的检测。</code></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><blockquote><p>另外前后端的 SM4 加解密我已经上传到 npm 和 maven 中央仓库了，你们可以 npm install sm4util 和 引入到 pom 使用</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>icu.xuyijie<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SM4Utils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 安装</span><br><span class="line">npm install sm4util</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入和使用</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">SM4Util</span>&#125; <span class="keyword">from</span> <span class="string">&quot;sm4util&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> sm4 = <span class="keyword">new</span> <span class="title class_">SM4Util</span>();</span><br><span class="line">sm4.<span class="title function_">encryptDefault_ECB</span>(<span class="string">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure><blockquote><p> ECB 加密模式<br>&#x2F;&#x2F;不使用自定义 secretKey，一般用于后端自行加解密，如果是前端加密后端解密，则需要自定义secretKey，secretKey一致才能正确解密<br>System.out.println(“经过ECB加密的密文为：” + SM4Utils.encryptData_ECB(“123456”));<br>System.out.println(“经过ECB解密的密文为：” + SM4Utils.decryptData_ECB(“UQZqWWcVSu7MIrMzWRD&#x2F;wA&#x3D;&#x3D;”));<br>&#x2F;&#x2F;使用自定义 secretKey，传入的 secretKey 必须为16位，可包含字母、数字、标点<br>System.out.println(“经过ECB加密的密文为：” + SM4Utils.encryptData_ECB(“123456”));<br>System.out.println(“经过ECB解密的密文为：” + SM4Utils.decryptData_ECB(“UQZqWWcVSu7MIrMzWRD&#x2F;wA&#x3D;&#x3D;”));</p></blockquote><blockquote><p>CBC 加密模式（更加安全）需要两个密钥 secretKey 和 iv<br>System.out.println(“经过CBC加密的密文为：” + SM4Utils.encryptData_CBC(“123456”));<br>System.out.println(“经过CBC解密的密文为：” + SM4Utils.decryptData_CBC(“hbMK6&#x2F;IeJ3UTzaTgLb3f3A&#x3D;&#x3D;”));<br>&#x2F;&#x2F;同样可以自定义 secretKey 和 iv，需要两个密钥前后端都一致<br>System.out.println(“经过CBC加密的密文为：” + SM4Utils.encryptData_CBC(“123456”, “asdfghjklzxcvb!<em>“, “1234567890123456”));<br>System.out.println(“经过CBC解密的密文为：” + SM4Utils.decryptData_CBC(“sTyCl3G6TF311kIENzsKNg&#x3D;&#x3D;”, “asdfghjklzxcvb!</em>“, “1234567890123456”));</p></blockquote><p><a href="https://download.csdn.net/download/qq_48922459/85001193">SM4前后端加解密下载链接</a><br>有很多用户反映CSDN这个资源要什么下载码，我下面放一个github的仓库，里面有文件和演示demo<br><a href="https://github.com/XuYijie000416/SM4EncryptAndDecrypt">SM4前后端加解密Demo Github地址</a></p><h1 id="一、前端加密输入的密码"><a href="#一、前端加密输入的密码" class="headerlink" title="一、前端加密输入的密码"></a>一、前端加密输入的密码</h1><h2 id="前置检测"><a href="#前置检测" class="headerlink" title="前置检测"></a>前置检测</h2><p>我使用 Vue 项目做示范吧，一个很&#x3D;&#x3D;重要&#x3D;&#x3D;的事情，如果的项目有 <code>ESLint</code> ，或者你使用的是 Vue3 或者 Vue-cli3 以上的项目，ESLint 应该都会默认开启，如果没有这个更好。</p><p>看一看你的项目根目录，应该会有一个 <code>.eslintrc.js</code> 文件，添加 rules 和 ‘globals’，即使我已经很努力的修改代码了，但是还是有一个方法 “base64js” 会报错，所以我们把这个方法忽略掉。</p><p><img src="https://img-blog.csdnimg.cn/3d82af26a9384635be58fb427dfcf47c.png" alt="在这里插入图片描述"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;no-debugger&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;globals&quot;</span>:&#123;</span><br><span class="line">    <span class="string">&quot;base64js&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="粘贴我的-SM4-js-代码"><a href="#粘贴我的-SM4-js-代码" class="headerlink" title="粘贴我的 SM4.js 代码"></a>粘贴我的 SM4.js 代码</h2><blockquote><p>前端的 SM4 加解密我已经上传到 npm 仓库了，你们可以<code>npm install sm4util</code>直接安装使用，无需进行下载代码</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入和使用</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">SM4Util</span>&#125; <span class="keyword">from</span> <span class="string">&quot;sm4util&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> sm4 = <span class="keyword">new</span> <span class="title class_">SM4Util</span>();</span><br></pre></td></tr></table></figure><p><font color=#999AAA >这个 <code>sm4.js</code>就是加密用的 ，位置随意放，代码太长了，我上传到文件了，前后端的文件给你们放一起了，不需要积分。</p><p><a href="https://download.csdn.net/download/qq_48922459/85001193">SM4前后端加解密下载链接</a><br>有很多用户反映CSDN这个资源要什么下载码，我下面放一个github的仓库，里面有文件和演示demo<br><a href="https://github.com/XuYijie000416/SM4EncryptAndDecrypt">Github地址</a></p><p><img src="https://img-blog.csdnimg.cn/048779b747ec417599276c93a20fcef3.png" alt="在这里插入图片描述"></p><h2 id="在组件中调用"><a href="#在组件中调用" class="headerlink" title="在组件中调用"></a>在组件中调用</h2><p><font color=#999AAA >如图，引入 <code>import &#123;SM4Util&#125; from &#39;@/utils/sm4&#39;;</code> from后面的路径自己调整<br><img src="https://img-blog.csdnimg.cn/0f6dfeb056184b13b363892875a02558.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >如图，开始加密输入框的密码，并传输到后端，mounted 这样写可以在控制台直接输出 123456 的加密结果。传输到后端我就不演示了。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;mobilePhone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入手机号&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;<span class="title class_">SM4Util</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/sm4&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;<span class="title class_">Notify</span>&#125; <span class="keyword">from</span> <span class="string">&quot;vant&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;Register&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">mobilePhone</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">rePassword</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> sm4 = <span class="keyword">new</span> <span class="title class_">SM4Util</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> test = sm4.<span class="title function_">encryptData_CBC</span>(<span class="string">&#x27;123456&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;123456的加密结果：&#x27;</span> + test)</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">register</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// sm4加密</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> sm4 = <span class="keyword">new</span> <span class="title class_">SM4Util</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$axios</span></span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">post</span>(<span class="string">&quot;/user/register&quot;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">mobilePhone</span>: <span class="variable language_">this</span>.<span class="property">mobilePhone</span>.<span class="title function_">trim</span>(),</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">password</span>: sm4.<span class="title function_">encryptData_CBC</span>(<span class="variable language_">this</span>.<span class="property">password</span>.<span class="title function_">trim</span>()),</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="加密结果"><a href="#加密结果" class="headerlink" title="加密结果"></a>加密结果</h2><p><img src="https://img-blog.csdnimg.cn/9e4ad6e28d4343cc9d9dc71a69438fc8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_10,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、Springboot-后端进行-SM4-的解密和加密"><a href="#二、Springboot-后端进行-SM4-的解密和加密" class="headerlink" title="二、Springboot 后端进行 SM4 的解密和加密"></a>二、Springboot 后端进行 SM4 的解密和加密</h1><blockquote><p>后端的 SM4 加解密我已经上传到 maven 中央仓库了，你们可以直接引入到 pom，无需进行下面的 commons-codec 引入和复制代码操作</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>icu.xuyijie<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SM4Utils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="引入库"><a href="#引入库" class="headerlink" title="引入库"></a>引入库</h2><p><font color=#999AAA >需要引入一个依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="复制我的-SM4-加解密代码"><a href="#复制我的-SM4-加解密代码" class="headerlink" title="复制我的 SM4 加解密代码"></a>复制我的 SM4 加解密代码</h2><p><font color=#999AAA >一共有 4 个文件，我直接给你们下载吧，不需要积分，下载后在项目里放在一起<br><img src="https://img-blog.csdnimg.cn/0af0e0bc96834e28a0a4a46edc4cdaea.png" alt="在这里插入图片描述"></p><p><a href="https://download.csdn.net/download/qq_48922459/85001193">SM4前后端加解密下载链接</a><br>有很多用户反映CSDN这个资源要什么下载码，我下面放一个github的仓库，里面有文件和演示demo<br><a href="https://github.com/XuYijie000416/SM4EncryptAndDecrypt">SM4前后端加解密Demo Github地址</a></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h2 id="调用方法"><a href="#调用方法" class="headerlink" title="调用方法"></a>调用方法</h2><p><font color=#999AAA >在 <code>SM4Utils</code> 那个文件里面有一个 main 方法，我写好了，运行</p><p><img src="https://img-blog.csdnimg.cn/1ffc1f4412b64585946372301ffffb9e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >看，和，和前端的加密结果一样，也可以解密出来，秘诀就是前面说的前后端的“钥匙要一样”<br><img src="https://img-blog.csdnimg.cn/f22cee555b4d43df9cb1e30ef08680c8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_15,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >ECB 和 CBC 的区别你们可以自己了解一些，反正用 CBC 就完事了，据说更安全</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >这是一个总结</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Vue </tag>
            
            <tag> SM4 </tag>
            
            <tag> 数据加密 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux使用Docker安装Nacos并配置MySQL数据源，将Springboot的配置文件部署到Nacos</title>
      <link href="/2021/12/24/Linux%E4%BD%BF%E7%94%A8Docker%E5%AE%89%E8%A3%85Nacos%E5%B9%B6%E9%85%8D%E7%BD%AEMySQL%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%8C%E5%B0%86Springboot%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2%E5%88%B0Nacos/"/>
      <url>/2021/12/24/Linux%E4%BD%BF%E7%94%A8Docker%E5%AE%89%E8%A3%85Nacos%E5%B9%B6%E9%85%8D%E7%BD%AEMySQL%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%8C%E5%B0%86Springboot%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2%E5%88%B0Nacos/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>为什么要把配置文件放到 Nacos 上<br>1、 采用本地配置，不方便查看当前项目配置，也不方便修改（要重新打包重启），在 Nacos 上可以方便地查看和修改<br>2、易引发生产事故&#x2F;方便开发测试：比如在发布的时候，容易将测试环境的配置带到生产上，引发生产事故，而项目的启动脚本可以指定 Nacos 上面的配置文件，从而使测试配置文件失效，所以开发的时候无需把精力放在修改配置文件上</p></blockquote><hr><h1 id="一、Docker中安装配置Nacos"><a href="#一、Docker中安装配置Nacos" class="headerlink" title="一、Docker中安装配置Nacos"></a>一、Docker中安装配置Nacos</h1><p><font color=#999AAA >当然如果不安装在 Docker 里也行，不安装在 Docker 把在 Nacos 的官网下载文件，直接解压就行，跳过 docker pull 和 run 的过程就可以了，然后你要把 nacos 注册为服务，开机启动，然后其他步骤都一样，总之不安装在 Docker 有点麻烦的。</p><h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><p><font color=#999AAA >所有 Linux 系统通用安装命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br></pre></td></tr></table></figure><h2 id="拉取Nacos镜像"><a href="#拉取Nacos镜像" class="headerlink" title="拉取Nacos镜像"></a>拉取Nacos镜像</h2><p><font color=#999AAA >注意，一定要拉取 1.4.1 的版本，因为下面我给的配置文件是 1.4.1 的，其他版本都会启动失败，Nacos 就是这么的恶心。拉取有点慢，耐心等待。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nacos/nacos-server:1.4.1</span><br></pre></td></tr></table></figure><h2 id="启动Nacos容器"><a href="#启动Nacos容器" class="headerlink" title="启动Nacos容器"></a>启动Nacos容器</h2><p><font color=#999AAA >全都粘贴到命令行一直回车就行了，不是一行一行粘的哈</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name nacos \</span><br><span class="line">-e PREFER_HOST_MODE=hostname \</span><br><span class="line">-e MODE=standalone \</span><br><span class="line">-e SPRING_DATASOURCE_PLATFORM=mysql \</span><br><span class="line">-e MYSQL_SERVICE_HOST=111.111.111.111 \</span><br><span class="line">-e MYSQL_SERVICE_PORT=3306 \</span><br><span class="line">-e MYSQL_SERVICE_DB_NAME=nacos \</span><br><span class="line">-e MYSQL_SERVICE_USER=root \</span><br><span class="line">-e MYSQL_SERVICE_PASSWORD=root \</span><br><span class="line">-p 8848:8848 nacos/nacos-server:1.4.1</span><br></pre></td></tr></table></figure><p><font color=#999AAA >上面的 111.111.111.111 写你的 MySQL 数据库的 IP，然后是端口，数据库名称 &#x3D;&#x3D;（数据库名称一定要是 nacos，这是官方指定的，nacos库要自己创建，sql 文件官网下载的压缩包解压出来就有，为了方便我下面教你们安装 MySQL 和建库的时候直接贴给你们）&#x3D;&#x3D; ，账号，密码</p><h2 id="开放防火墙端口"><a href="#开放防火墙端口" class="headerlink" title="开放防火墙端口"></a>开放防火墙端口</h2><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld    <span class="comment">#首先查看火墙状态，如果防火墙没开，下面的不用看了</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=8848/tcp --permanent <span class="comment">#意思是放行 8848 端口</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent <span class="comment">#你指定的数据库的端口也要放行</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload   <span class="comment">##重新加载火墙,使放行的端口生效</span></span><br></pre></td></tr></table></figure><h3 id="Debian-x2F-Ubuntu"><a href="#Debian-x2F-Ubuntu" class="headerlink" title="Debian&#x2F;Ubuntu"></a>Debian&#x2F;Ubuntu</h3><p>分为两种，有些服务器安装的是 iptables 防火墙，有些是 ufw</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 8848 -j ACCEPT</span><br><span class="line">iptables -I INPUT -p tcp --dport 3306 -j ACCEPT</span><br><span class="line">netfilter-persistent save</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 8848</span><br><span class="line">sudo ufw allow 3306</span><br><span class="line">sudo ufw reload</span><br></pre></td></tr></table></figure><h2 id="在-MySQL-中创建-nacos-数据库"><a href="#在-MySQL-中创建-nacos-数据库" class="headerlink" title="在 MySQL 中创建 nacos 数据库"></a>在 MySQL 中创建 nacos 数据库</h2><p><font color=#999AAA > nacos 数据库用于给 nacos 指定数据源，用于持久化配置文件到硬盘，Docker 安装 MySQL 的方法后面这里就不赘述了</p><p><font color=#999AAA >进入 MySQL 容器，创建 nacos 数据库，切换到创建的 nacos 数据库，基本操作代码自己敲<br><img src="https://img-blog.csdnimg.cn/54f4dc6d37a4405eaec7530abc9e1f3d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_13,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >&#x3D;&#x3D;然后！！！把下面的 SQL 文件全都复制到 mysql&gt; 后面，然后等它运行完，运行完以后看看是不是最后一句话没有运行，我的最后一句就没有运行，再敲一下回车就 OK&#x3D;&#x3D;<br><img src="https://img-blog.csdnimg.cn/1e5aaa4d623944d18d45db2d9ca753fe.png" alt="在这里插入图片描述"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info` (</span><br><span class="line"></span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;修改时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;租户字段&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `c_desc` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `c_use` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `effect` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `type` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `c_schema` text,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class="line"></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_aggr` (</span><br><span class="line"></span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `datum_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;datum_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;内容&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;修改时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;租户字段&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)</span><br><span class="line"></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;增加租户字段&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_beta` (</span><br><span class="line"></span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `beta_ips` <span class="type">varchar</span>(<span class="number">1024</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;betaIps&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;修改时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;租户字段&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class="line"></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info_beta&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_tag` (</span><br><span class="line"></span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tag_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;修改时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)</span><br><span class="line"></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info_tag&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_tags_relation` (</span><br><span class="line"></span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tag_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_name&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tag_type` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_type&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `nid` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`nid`),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),</span><br><span class="line"></span><br><span class="line">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class="line"></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_tag_relation&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `group_capacity` (</span><br><span class="line"></span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;Group ID，空字符表示整个集群&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `quota` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;配额，0表示使用默认值&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `usage` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;使用量&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `max_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;单个配置大小上限，单位为字节，0表示使用默认值&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `max_aggr_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;聚合子配置最大个数，，0表示使用默认值&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `max_aggr_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `max_history_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;最大变更历史数量&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;修改时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_group_id` (`group_id`)</span><br><span class="line"></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;集群、各Group容量信息表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `his_config_info` (</span><br><span class="line"></span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">64</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `nid` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line"></span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `src_user` text,</span><br><span class="line"></span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `op_type` <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;租户字段&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`nid`),</span><br><span class="line"></span><br><span class="line">  KEY `idx_gmt_create` (`gmt_create`),</span><br><span class="line"></span><br><span class="line">  KEY `idx_gmt_modified` (`gmt_modified`),</span><br><span class="line"></span><br><span class="line">  KEY `idx_did` (`data_id`)</span><br><span class="line"></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;多租户改造&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tenant_capacity` (</span><br><span class="line"></span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;Tenant ID&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `quota` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;配额，0表示使用默认值&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `usage` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;使用量&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `max_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;单个配置大小上限，单位为字节，0表示使用默认值&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `max_aggr_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;聚合子配置最大个数&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `max_aggr_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `max_history_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;最大变更历史数量&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;修改时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_tenant_id` (`tenant_id`)</span><br><span class="line"></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;租户容量信息表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tenant_info` (</span><br><span class="line"></span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `kp` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;kp&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_name&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `tenant_desc` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tenant_desc&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `create_source` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;create_source&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_create` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  `gmt_modified` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;修改时间&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"></span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),</span><br><span class="line"></span><br><span class="line">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class="line"></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;tenant_info&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (</span><br><span class="line"></span><br><span class="line">username <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line"></span><br><span class="line">password <span class="type">varchar</span>(<span class="number">500</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">enabled <span class="type">boolean</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> roles (</span><br><span class="line"></span><br><span class="line">username <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">role <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line"><span class="keyword">constraint</span> uk_username_role <span class="keyword">UNIQUE</span> (username,role)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> permissions (</span><br><span class="line"></span><br><span class="line">    role <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">    resource <span class="type">varchar</span>(<span class="number">512</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">    action <span class="type">varchar</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constraint</span> uk_role_permission <span class="keyword">UNIQUE</span> (role,resource,action)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> users (username, password, enabled) <span class="keyword">VALUES</span> (<span class="string">&#x27;nacos&#x27;</span>, <span class="string">&#x27;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#x27;</span>, <span class="literal">TRUE</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> roles (username, role) <span class="keyword">VALUES</span> (<span class="string">&#x27;nacos&#x27;</span>, <span class="string">&#x27;ROLE_ADMIN&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><font color=#999AAA >&#x3D;&#x3D;最重要的是！！！，要记得重启一下 nacos&#x3D;&#x3D;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart nacos</span><br></pre></td></tr></table></figure><h2 id="登录-nacos"><a href="#登录-nacos" class="headerlink" title="登录 nacos"></a>登录 nacos</h2><p><font color=#999AAA >如果你的 Linux 服务器没有界面，就在一台 Windows 电脑上登录，因为上面防火墙已经开放端口，浏览器地址栏输入 IP:8848&#x2F;nacos 就可以了。默认账号密码都是 nacos<br><img src="https://img-blog.csdnimg.cn/ce58b52eb55a4b9da6aba8c50d0c2a81.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><font color=#999AAA >然后按照我下面的标记，创建新的 命名空间 ，默认的命名空间是 public，不建议用，最好一个项目一个命名空间。</p><p><img src="https://img-blog.csdnimg.cn/debf3f5f121b4b488aad297ad712aeb0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >回到我们的配置列表，点击刚刚创建的命名空间</p><p><img src="https://img-blog.csdnimg.cn/077b8535812f4c4cb5f0ff4f46977dcf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><font color=#999AAA >点击右边蓝色 + 号，创建一个 yaml，这个 Data Id 建议都是这个格式，如果项目有多个配置文件，就 application-xx.yaml ，默认就起这个名字 application.yaml</p><p><font color=#999AAA >Group 的话默认是这个，建议改一下，不改的话可能会出问题，只是可能，我就先不改了，然后下面类型选择 yaml，把你的 springboot 项目配置文件全都粘贴到下面的框里。</p><p><img src="https://img-blog.csdnimg.cn/391e697f19e44a858a32635399ca6ed2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >Nacos 的安装和配置就完成了，下面我们开始把 Springboot 的配置文件放到 nacos 并使用</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、把-Springboot-的配置文件放到-nacos-并使用"><a href="#二、把-Springboot-的配置文件放到-nacos-并使用" class="headerlink" title="二、把 Springboot 的配置文件放到 nacos 并使用"></a>二、把 Springboot 的配置文件放到 nacos 并使用</h1><h2 id="1-引入依赖"><a href="#1-引入依赖" class="headerlink" title="1.引入依赖"></a>1.引入依赖</h2><p><font color=#999AAA >只需要这两个，网上那些引了一堆的不要信，版本不要改，nacos 很恶心</p><p>&#x3D;&#x3D;Maven这样引&#x3D;&#x3D;</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.nacos<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>nacos-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-stream-rocketmq<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;Gradle这样引&#x3D;&#x3D;</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">compile group: &#x27;com.alibaba.cloud&#x27;, name: &#x27;spring-cloud-stream-binder-rocketmq&#x27;, version: &#x27;2.2.0.RELEASE&#x27;</span><br><span class="line">compile group: &#x27;com.alibaba.nacos&#x27;, name: &#x27;nacos-client&#x27;, version: &#x27;1.4.1&#x27;</span><br></pre></td></tr></table></figure><h2 id="2-配置-nacos-的yaml"><a href="#2-配置-nacos-的yaml" class="headerlink" title="2.配置 nacos 的yaml"></a>2.配置 nacos 的yaml</h2><p><font color=#999AAA >在 resources 下面新建 bootstrap.properties ，yml 也行<br><img src="https://img-blog.csdnimg.cn/96b61afa70a14b4cb94d094346d2131e.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >里面这样写</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=test #不重要，可以不写，写你的项目名就行</span><br><span class="line">spring.cloud.nacos.config.group=DEFAULT_GROUP #这个组就是上面创建的时候填的那个</span><br><span class="line">spring.main.allow-bean-definition-overriding=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">#nacos配置中心</span><br><span class="line">spring.cloud.nacos.config.server-addr=<span class="number">111.111</span><span class="number">.111</span><span class="number">.111</span>:<span class="number">8848</span>  #这个IP就是你的nacos的地址</span><br><span class="line">#命名空间</span><br><span class="line">spring.cloud.nacos.config.namespace=51f82ad7-11fd-413a-9b0a-fd11ee1213d7 #这个是你创建的命名空间 test 右边的那一串很长的字符，看我上面的图片</span><br><span class="line">#默认加载配置前缀后缀</span><br><span class="line">spring.cloud.nacos.config.prefix=application</span><br><span class="line">spring.cloud.nacos.config.file-extension=yaml</span><br><span class="line"></span><br><span class="line">#额外的配置文件，这个就是我上面说的如果一个项目有多个配置文件要启动，就可以在nacos再新建一个文件，我只用一个，所以下面的注释掉</span><br><span class="line">#database</span><br><span class="line">#spring.cloud.nacos.config.shared-configs[<span class="number">0</span>].data-id=application-database.yaml</span><br><span class="line">#spring.cloud.nacos.config.shared-configs[<span class="number">0</span>].group=DEFAULT_GROUP</span><br><span class="line">#spring.cloud.nacos.config.shared-configs[<span class="number">0</span>].refresh=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">#这一句<span class="literal">true</span>就是优先使用nacos里的配置文件，注意只是优先，也就是说，nacos和本地都有的配置，nacos的起作用，如果本地有的而nacos没有的配置，本地的那个比nacos多出来的配置还是会加载的</span><br><span class="line">#如果是<span class="literal">false</span>就是不使用nacos里的，只是本地配置文件生效</span><br><span class="line">spring.cloud.nacos.config.enabled=<span class="literal">true</span></span><br></pre></td></tr></table></figure><p><font color=#999AAA >然后全部结束，直接启动项目吧</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >本篇的 nacos 是单机部署，后面研究研究配合 Dubbo 的集群部署吧</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Nacos </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue+Springboot上传图片将 Base64 码转换为图片保存在指定文件夹</title>
      <link href="/2021/12/21/Vue+Springboot%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E5%B0%86%20Base64%20%E7%A0%81%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E5%9C%A8%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9/"/>
      <url>/2021/12/21/Vue+Springboot%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E5%B0%86%20Base64%20%E7%A0%81%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E5%9C%A8%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >整体思路：</p><p>vant插件默认的图片从前端上传到后端，是以 base64 码的形式传输的，而 base64 码很长很长，有几千个字符，存入数据库会占用空间，每次读取都传输 base64 的话也很消耗带宽和流量，所以后端接收以后要转化 base64 为图片存到硬盘或服务器，而数据库只保存图片的物理地址的路径，例如 F:&#x2F;img&#x2F;aa.png</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、Vue-前端"><a href="#一、Vue-前端" class="headerlink" title="一、Vue 前端"></a>一、Vue 前端</h1><p><font color=#999AAA >我用的时 vant 的上传框架，你们用js什么的把图片转化为 base64 码。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-uploader</span> <span class="attr">:after-read</span>=<span class="string">&quot;uploadImg&quot;</span> <span class="attr">preview-size</span>=<span class="string">&quot;50px&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userHead&quot;</span> <span class="attr">:max-count</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">submit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$axios</span></span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">post</span>(<span class="string">&quot;/user/userInfo&quot;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//userHead传给后台的是一串base64，后台要进行转化</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">userHead</span>: <span class="variable language_">this</span>.<span class="property">file</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="function"><span class="params">successResponse</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(successResponse)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一-五-注意！！！"><a href="#一-五-注意！！！" class="headerlink" title="一.五 注意！！！"></a>一.五 注意！！！</h1><p>&#x3D;&#x3D;注意！！！&#x3D;&#x3D;</p><blockquote><p>1、现在我已经将把 <code>base64</code> 转换成文件保存到指定位置的代码上传到了 <code>maven 中央仓库</code>，你们可以直接引入这个依赖使用<br>2、如果想学习源码，那么就继续往下面看二，二里面是我最简化的代码，实际我封装的方法要更复杂，支持更多传参类型和容错，比如可以自动判断文件类型而你不需要传入文件后缀名，接受包含或以 ‘&#x2F;‘ 、’\‘ 结尾或者以 ‘’ 结尾的路径格式，增加方法，将文件转换为 base64 码，你可以传入文件路径或者二进制文件流。<br>3、下面是引入依赖和使用方法</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/icu.xuyijie/Base64Utils --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>icu.xuyijie<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Base64Utils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将文件编码成Base64，可传入文件全路径，或者一个 File 对象</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> Base64Util.transferToBase64(<span class="string">&quot;D:/下载/Screenshot_20221008-090627.png&quot;</span>);</span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(filePath);</span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> Base64Util.transferToBase64(file);</span><br><span class="line">System.out.println(s);</span><br><span class="line"><span class="comment">// 将Base64转换成文件保存到指定位置，可传入文件全路径或者分别传入保存位置和文件名</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> Base64Util.generateFile(s, <span class="string">&quot;D:/下载/aaa.png&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> Base64Util.generateFile(s, <span class="string">&quot;D:/下载&quot;</span>, <span class="string">&quot;aaa.png&quot;</span>);</span><br><span class="line">System.out.println(s1);</span><br></pre></td></tr></table></figure><h1 id="二、Springboot-后端"><a href="#二、Springboot-后端" class="headerlink" title="二、Springboot 后端"></a>二、Springboot 后端</h1><h2 id="引入Base64依赖"><a href="#引入Base64依赖" class="headerlink" title="引入Base64依赖"></a>引入Base64依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        工具（包含Base64）--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="在项目里新建-utils-包，新建一个Base64Util类"><a href="#在项目里新建-utils-包，新建一个Base64Util类" class="headerlink" title="在项目里新建 utils 包，新建一个Base64Util类"></a>在项目里新建 utils 包，新建一个Base64Util类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.communityinteractionsystem.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.binary.Base64;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Base64Util</span> &#123;</span><br><span class="line">    <span class="comment">// 对字节数组字符串进行Base64解码并生成图片</span></span><br><span class="line">    <span class="comment">//imgFilePath 待保存的本地路径</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">GenerateImage</span><span class="params">(String base64Str, String imgFilePath)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (base64Str == <span class="literal">null</span>) <span class="comment">// 图像数据为空</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Base64解码</span></span><br><span class="line">            <span class="type">byte</span>[] bytes = Base64.decodeBase64(base64Str);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; bytes.length; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span> (bytes[i] &lt; <span class="number">0</span>) &#123;<span class="comment">// 调整异常数据</span></span><br><span class="line">                    bytes[i] += <span class="number">256</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 生成jpeg图片</span></span><br><span class="line">            <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(imgFilePath);</span><br><span class="line">            out.write(bytes);</span><br><span class="line">            out.flush();</span><br><span class="line">            out.close();</span><br><span class="line">            <span class="comment">//====</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><font color=#999AAA >Service 代码如下：</p><p>&#x3D;&#x3D;String base64 &#x3D; StringUtils.substringAfter(userInfo.getUserHead(),”;base64,”);&#x3D;&#x3D; 这句是把 base64 码的前缀去掉</p><p>&#x3D;&#x3D;path&#x3D;&#x3D; 里面就写你要保存图片的位置，和文件名，意思是保存到 F 盘根目录，文件名是以用户名+当前时间毫秒数命名的。</p><p>&#x3D;&#x3D;Base64Util.GenerateImage(base64,path);&#x3D;&#x3D; 是用我们的工具把前端传来的 base64 解析成图片保存在path定义的路径下</p><p>&#x3D;&#x3D;File file &#x3D; new File(path)；userInfo1.setUserHead(file.getPath());&#x3D;&#x3D; 就是保存 path 路径到数据库</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ResultCode <span class="title function_">userInfo</span><span class="params">(UserInfo userInfo, HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">mobilePhone</span> <span class="operator">=</span> user.getMobilePhone();</span><br><span class="line">        QueryWrapper&lt;UserInfo&gt; selectQuery = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>();</span><br><span class="line">        selectQuery.eq(<span class="string">&quot;mobile_phone&quot;</span>, mobilePhone);</span><br><span class="line">        <span class="comment">//用户表和用户信息表里面的mobile_phone是一一对应的</span></span><br><span class="line">        <span class="type">UserInfo</span> <span class="variable">userInfo1</span> <span class="operator">=</span> userInfoMapper.selectOne(selectQuery);</span><br><span class="line">        <span class="comment">//处理前端传来的base64为文件路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">base64</span> <span class="operator">=</span> StringUtils.substringAfter(userInfo.getUserHead(),<span class="string">&quot;;base64,&quot;</span>);</span><br><span class="line">        <span class="comment">//保存到设置的路径下，文件名手机号加毫秒命名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;F:\\&quot;</span> + user.getMobilePhone() + System.currentTimeMillis() + <span class="string">&quot;.png&quot;</span>;</span><br><span class="line">        Base64Util.GenerateImage(base64,path);</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        userInfo1.setUserHead(file.getPath());</span><br><span class="line">        userInfo1.setUsername(userInfo.getUsername());</span><br><span class="line">        userInfo1.setAge(userInfo.getAge());</span><br><span class="line">        userInfo1.setSex(userInfo.getSex());</span><br><span class="line">        userInfo1.setHomeTown(userInfo.getHomeTown());</span><br><span class="line">        userInfo1.setEditTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        userInfoMapper.updateById(userInfo1);</span><br><span class="line">        user.setUsername(userInfo.getUsername());</span><br><span class="line">        userMapper.updateById(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResultCode</span>(<span class="number">200</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/f40d171b73764c7d8b200020dd503acf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_12,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/89cb0a72f8724ce3a4cf67d6918af437.png" alt="在这里插入图片描述"></p><h2 id="2-读取的话就不写了，看我的另一篇，另一篇怎么从服务器读取也有教"><a href="#2-读取的话就不写了，看我的另一篇，另一篇怎么从服务器读取也有教" class="headerlink" title="2.读取的话就不写了，看我的另一篇，另一篇怎么从服务器读取也有教"></a>2.读取的话就不写了，看我的另一篇，另一篇怎么从服务器读取也有教</h2><p>传送门：<a href="https://blog.csdn.net/qq_48922459/article/details/122035967?spm=1001.2014.3001.5501">Springboot物理地址映射+Nginx静态资源代理实现前端上传并访问服务器图片</a></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Vue </tag>
            
            <tag> Base64 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot配置Druid或Hikari连接池（并开启MyBatisPlus事务）</title>
      <link href="/2021/12/20/Springboot%E9%85%8D%E7%BD%AEDruid%E6%88%96Hikari%E8%BF%9E%E6%8E%A5%E6%B1%A0%EF%BC%88%E5%B9%B6%E5%BC%80%E5%90%AFMyBatisPlus%E4%BA%8B%E5%8A%A1%EF%BC%89/"/>
      <url>/2021/12/20/Springboot%E9%85%8D%E7%BD%AEDruid%E6%88%96Hikari%E8%BF%9E%E6%8E%A5%E6%B1%A0%EF%BC%88%E5%B9%B6%E5%BC%80%E5%90%AFMyBatisPlus%E4%BA%8B%E5%8A%A1%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >阿里巴巴的 <code>Druid</code> 连接池应该是咱国内用的最广泛的连接池了，而Hikari是Springboot2以后默认最优先使用的连接池。</font></p><p><font color=#999AAA > <code>Hikari</code> 连接池的特点就是极快，比 Druid 快了不止一个数量级，而功能较少，Druid的功能很全面，防火墙、拦截器、监控、检测慢SQL等</font></p><p><font color=#999AAA >选哪一个根据需求，我个人做项目不需要太多的功能，快就完事，所以我用 Hikari</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、引入和配置-Hikari"><a href="#一、引入和配置-Hikari" class="headerlink" title="一、引入和配置 Hikari"></a>一、引入和配置 Hikari</h1><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><p><font color=#999AAA >依赖里面，引入 spring-boot-starter-jdbc 就可以了，包含Hikar。</p><p><font color=#999AAA >给你们讲一下哦，Mybatis-Plus 一定要引 <code>mybatis-plus-boot-starter</code>，不要引 <code>mybatisplus</code>，因为 <code>mybatis-plus-boot-starter</code>专门为Springboot打造，引入这个依赖可以不用配置任何 xml 文件，Springboot 和 Spring 最大的区别就是不需要 xml 配置，网上那些配置 xml 的都是用的旧依赖，没有跟上时代的潮流。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--此依赖默认使用Hikari连接池--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- MybatisPlus 核心库 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="配置yml"><a href="#配置yml" class="headerlink" title="配置yml"></a>配置yml</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">808</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://IP:3306/xuyijie_icu?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line">    <span class="attr">username:</span></span><br><span class="line">    <span class="attr">password:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">    <span class="comment"># 连接池中允许的最小连接数。缺省值：10</span></span><br><span class="line">      <span class="attr">minimum-idle:</span> <span class="number">10</span></span><br><span class="line">    <span class="comment"># 连接池中允许的最大连接数。缺省值：10</span></span><br><span class="line">      <span class="attr">maximum-pool-size:</span> <span class="number">100</span></span><br><span class="line">    <span class="comment"># 自动提交</span></span><br><span class="line">      <span class="attr">auto-commit:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 一个连接idle状态的最大时长（毫秒），超时则被释放（retired），缺省:10分钟</span></span><br><span class="line">      <span class="attr">idle-timeout:</span> <span class="number">600</span></span><br><span class="line">    <span class="comment"># 连接池名字</span></span><br><span class="line">      <span class="attr">pool-name:</span> <span class="string">泡泡的HikariCP</span></span><br><span class="line">    <span class="comment"># 一 个连接的生命时长（毫秒），超时而且没被使用则被释放（retired），缺省:30分钟，建议设置比数据库超时时长少30秒</span></span><br><span class="line">      <span class="attr">max-lifetime:</span> <span class="number">1800000</span></span><br><span class="line">    <span class="comment"># 等待连接池分配连接的最大时长（毫秒），超过这个时长还没可用的连接则发生SQLException， 缺省:30秒</span></span><br><span class="line">      <span class="attr">connection-timeout:</span> <span class="number">30000</span>    </span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/*.xml</span></span><br><span class="line">  <span class="comment"># 打印出SQL语句</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure><h2 id="将事务交由Springboot管理"><a href="#将事务交由Springboot管理" class="headerlink" title="将事务交由Springboot管理"></a>将事务交由Springboot管理</h2><p><font color=#999AAA >如果没有这一步的话，查询时连接池会报 synchronization 的错，意思是连接池的事务没有开启给Springboot管理，而且每次连接都要创建新的SqlSession，失去了连接池的意义。（<code>具体什么是事务，大概解释一下，假如你的程序正在进行数据库写操作，但是中途程序报错了，所以数据库里被写入了一些残缺的东西，如果开启了事务功能，springboot会在程序正常结束后才会写入数据库，如果程序中途报错，事务会回滚，也就是数据库不会被残缺的数据污染</code>，&#x3D;&#x3D;一句话，不开启事务是实时写入，写入语句执行完数据库就有数据了，开启事务，是所有程序执行完，数据库才有数据。&#x3D;&#x3D;）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8811ab]</span><br><span class="line">Creating a new SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd82b9a] was not registered <span class="keyword">for</span> synchronization because synchronization is not active</span><br></pre></td></tr></table></figure><p><font color=#999AAA >配置方法太简单了，就是在启动类上添加一个注解 <code>@EnableTransactionManagement</code>，最好自己手打然后回车键自动 import class，复制粘贴的话可能无法找到这个注解。</p><p><img src="https://img-blog.csdnimg.cn/3083c337c466404b8fb638559d5a567b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >然后在每个 Service 上都添加一个注解 <code>@Transactional</code><br><img src="https://img-blog.csdnimg.cn/2ad1344ad981465387f1de32fe2cd31b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><font color=#999AAA >然后查询的时候没有报错出现以下信息，就是配置成功了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Registering transaction synchronization <span class="keyword">for</span> SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c34c1ee]</span><br><span class="line">JDBC Connection [HikariProxyConnection@405147465 wrapping com.mysql.jdbc.JDBC4Connection@7e6e118a] will be managed by Spring</span><br><span class="line">Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c34c1ee]</span><br><span class="line">Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c34c1ee] from current transactio</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、引入和配置-Druid"><a href="#二、引入和配置-Druid" class="headerlink" title="二、引入和配置 Druid"></a>二、引入和配置 Druid</h1><h2 id="依赖-1"><a href="#依赖-1" class="headerlink" title="依赖"></a>依赖</h2><p><font color=#999AAA >给你们讲一下哦，一定要引 <code>druid-spring-boot-starter</code>，不要引 <code>druid</code>，原因和上面 Mybatis-plus 的依赖一样，这样就不用配置 xml 注入数据源。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- mybatisPlus 核心库 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 引入阿里数据库连接池，暂时注掉，听说springboot2默认使用的Hikari连接池最快 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>--&gt;</span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>--&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>--&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span>--&gt;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>--&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="配置yml-1"><a href="#配置yml-1" class="headerlink" title="配置yml"></a>配置yml</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://IP:3306/xuyijie_icu?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line">    <span class="attr">username:</span></span><br><span class="line">    <span class="attr">password:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">initial-size:</span> <span class="number">10</span> <span class="comment"># 初始化时建立物理连接的个数。初始化发生在显示调用init方法，或者第一次getConnection时</span></span><br><span class="line">      <span class="attr">min-idle:</span> <span class="number">10</span> <span class="comment"># 最小连接池数量</span></span><br><span class="line">      <span class="attr">maxActive:</span> <span class="number">200</span> <span class="comment"># 最大连接池数量</span></span><br><span class="line">      <span class="attr">maxWait:</span> <span class="number">60000</span> <span class="comment"># 获取连接时最大等待时间，单位毫秒。配置了maxWait之后，缺省启用公平锁，并发效率会有所下降，如果需要可以通过配置</span></span><br><span class="line">      <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span> <span class="comment"># 关闭空闲连接的检测时间间隔.Destroy线程会检测连接的间隔时间，如果连接空闲时间大于等于minEvictableIdleTimeMillis则关闭物理连接。</span></span><br><span class="line">      <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span> <span class="comment"># 连接的最小生存时间.连接保持空闲而不被驱逐的最小时间</span></span><br><span class="line">      <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span> <span class="comment"># 验证数据库服务可用性的sql.用来检测连接是否有效的sql 因数据库方言而差, 例如 oracle 应该写成 SELECT 1 FROM DUAL</span></span><br><span class="line">      <span class="attr">testWhileIdle:</span> <span class="literal">true</span> <span class="comment"># 申请连接时检测空闲时间，根据空闲时间再检测连接是否有效.建议配置为true，不影响性能，并且保证安全性。申请连接的时候检测，如果空闲时间大于timeBetweenEvictionRun</span></span><br><span class="line">      <span class="attr">testOnBorrow:</span> <span class="literal">false</span> <span class="comment"># 申请连接时直接检测连接是否有效.申请连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能。</span></span><br><span class="line">      <span class="attr">testOnReturn:</span> <span class="literal">false</span> <span class="comment"># 归还连接时检测连接是否有效.归还连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能。</span></span><br><span class="line">      <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span> <span class="comment"># 开启PSCache</span></span><br><span class="line">      <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span> <span class="comment">#设置PSCache值</span></span><br><span class="line">      <span class="attr">connectionErrorRetryAttempts:</span> <span class="number">3</span> <span class="comment"># 连接出错后再尝试连接三次</span></span><br><span class="line">      <span class="attr">breakAfterAcquireFailure:</span> <span class="literal">true</span> <span class="comment"># 数据库服务宕机自动重连机制</span></span><br><span class="line">      <span class="attr">timeBetweenConnectErrorMillis:</span> <span class="number">300000</span> <span class="comment"># 连接出错后重试时间间隔</span></span><br><span class="line">      <span class="attr">asyncInit:</span> <span class="literal">true</span> <span class="comment"># 异步初始化策略</span></span><br><span class="line">      <span class="attr">remove-abandoned:</span> <span class="literal">true</span> <span class="comment"># 是否自动回收超时连接</span></span><br><span class="line">      <span class="attr">remove-abandoned-timeout:</span> <span class="number">1800</span> <span class="comment"># 超时时间(以秒数为单位)</span></span><br><span class="line">      <span class="attr">transaction-query-timeout:</span> <span class="number">6000</span> <span class="comment"># 事务超时时间</span></span><br><span class="line">      <span class="attr">filters:</span> <span class="string">stat,wall,log4j2</span></span><br><span class="line">      <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span> <span class="comment">#合并多个DruidDataSource的监控数据</span></span><br><span class="line">      <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql\=true;druid.stat.slowSqlMillis\=5000</span> <span class="comment">#通过connectProperties属性来打开mergeSql功能；慢SQL记录</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/*.xml</span></span><br><span class="line">  <span class="comment"># 打印出SQL语句</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure><h2 id="将事务交由Springboot管理（和Hikari一样）"><a href="#将事务交由Springboot管理（和Hikari一样）" class="headerlink" title="将事务交由Springboot管理（和Hikari一样）"></a>将事务交由Springboot管理（和Hikari一样）</h2><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >这是一个总结</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatisPlus </tag>
            
            <tag> 事务 </tag>
            
            <tag> Druid </tag>
            
            <tag> Hikari </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot物理地址映射和Nginx静态资源代理实现前端上传并访问服务器图片</title>
      <link href="/2021/12/20/Springboot%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E5%92%8CNginx%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E5%89%8D%E7%AB%AF%E4%B8%8A%E4%BC%A0%E5%B9%B6%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E7%89%87/"/>
      <url>/2021/12/20/Springboot%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E5%92%8CNginx%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E5%89%8D%E7%AB%AF%E4%B8%8A%E4%BC%A0%E5%B9%B6%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>为什么要配置物理地址映射：<font color=#999AAA >因为前端的 <code>&lt;img :src=&quot;&quot;&gt;</code>或者 <code>:style=&quot;background-img(url)&quot;</code>这些，如果要给这些标签动态赋值，从后端传来的路径必须是 url 形式，也就是说带冒号的动态src或者url不支持绝对路径的物理地址。 所以要配置物理地址映射把图片的的物理地址映射为 url 地址传给前端。比如 &#x3D;&#x3D;D:&#x2F;aa.png&#x3D;&#x3D; 前端 &#x3D;&#x3D;:src&#x3D;&#x3D; 无法识别，映射为 &#x3D;&#x3D;<a href="http://localhost/aa.png==">http://localhost/aa.png==</a> 就可以识别了。</font></p><p>为什么要配置静态资源代理：<font color=#999AAA >理由和上面一样，只是这个配置是项目部署到服务器上必须要添加的。也就是说项目在本地跑，上传和访问本地的图片，只需要配置Springboot的物理地址映射就可以了。</font></p><p>本篇文章没有介绍如何从前端上传图片并使用后端处理后讲 base64 转化为 url 存入数据库，我的另一篇有详细讲。传送门：<a href="https://blog.csdn.net/qq_48922459/article/details/122054809">Vue+Springboot上传图片将 Base64 码转换为图片保存在指定文件夹</a></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、Nginx-静态资源代理配置"><a href="#一、Nginx-静态资源代理配置" class="headerlink" title="一、Nginx 静态资源代理配置"></a>一、Nginx 静态资源代理配置</h1><p><font color=#999AAA >先放这个，因为简单，下面配置了两个目录的代理，也就是</p><p>&#x3D;&#x3D;http:&#x2F;&#x2F;你的IP:端口号&#x2F;user_head&#x2F;aa.png&#x3D;&#x3D;可以访问到 &#x3D;&#x3D;&#x2F;www&#x2F;wwwroot&#x2F;xuyijie.icu&#x2F;upload_file&#x2F;user_head&#x2F;&#x3D;&#x3D; 里面的aa.png</p><p>&#x3D;&#x3D;http:&#x2F;&#x2F;你的IP:端口号&#x2F;blog_img&#x2F;aa.png&#x3D;&#x3D;可以访问到 &#x3D;&#x3D;&#x2F;www&#x2F;wwwroot&#x2F;xuyijie.icu&#x2F;upload_file&#x2F;blog_img&#x2F;&#x3D;&#x3D; 里面的aa.png</p><p><code>注意！如果你的服务器配置了类似下面的接口反向代理，你的访问 url 要加上 api 哦，也就是下面这样</code></p><p><code>http://你的IP:端口号/api/user_head/aa.png</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /api/ &#123;</span><br><span class="line">     proxy_pass http://127.0.0.1:8082/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 下面两个location的意思是访问 http://你的IP:端口号/user_head/aa.png 就可以访问到在 </span><br><span class="line">/www/wwwroot/xuyijie.icu/upload_file/user_head/ 目录下的aa图片了</span><br><span class="line"></span><br><span class="line">#然后你就可以把http://你的IP:端口号/user_head/aa.png写到你的前端的 scr 里面就可以访问到了</span><br><span class="line"></span><br><span class="line">location /user_head/ &#123;</span><br><span class="line">root /www/wwwroot/xuyijie.icu/upload_file/;</span><br><span class="line">autoindex  on;</span><br><span class="line">&#125;</span><br><span class="line">location /blog_img/ &#123;</span><br><span class="line">root /www/wwwroot/xuyijie.icu/upload_file/;</span><br><span class="line">autoindex  on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、Springboot-物理地址映射配置"><a href="#二、Springboot-物理地址映射配置" class="headerlink" title="二、Springboot 物理地址映射配置"></a>二、Springboot 物理地址映射配置</h1><p><font color=#999AAA >新建 config 包，在里面新建 WebConfig 类<br><img src="https://img-blog.csdnimg.cn/8ffeecb137444e498917476e66c2208d.png" alt="在这里插入图片描述"><br><font color=#999AAA >代码如下，解析都在注释里</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.communityinteractionsystem.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfigurer</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//映射到本地路径的代码意思是</span></span><br><span class="line">    <span class="comment">// 在F:/uploadFiles/user_head/目录下如果有一张aa.png的图片，那么</span></span><br><span class="line">    <span class="comment">// 访问：http://localhost:8081/user_head/aa.png就可以访问到它</span></span><br><span class="line">    <span class="comment">// 静态html 中这样写 &lt;img src=&quot;http://localhost:8081/user_head/aa.png&quot;&gt;</span></span><br><span class="line">    <span class="comment">// 动态html 中这样写 &lt;img :src=&quot;imgUrl&quot;&gt; 把值赋给imgUrl就行，(this.imgUrl=&quot;http://localhost:8081/user_head/aa.png&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//映射到本地路径</span></span><br><span class="line">    registry.addResourceHandler(<span class="string">&quot;/user_head/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:F:/uploadFiles/user_head/&quot;</span>);</span><br><span class="line">    registry.addResourceHandler(<span class="string">&quot;/blog_img/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:F:/uploadFiles/blog_img/&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//映射到服务器的保存路径也可以(和上面的本地路径只能二选一，两个路径不能同时生效）</span></span><br><span class="line">        <span class="comment">//不推荐用代码映射服务器地址，因为我们已经用 Nginx 来代理服务器地址了)</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/user_head/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:/www/wwwroot/xuyijie.icu/upload_file/user_head/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/blog_img/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:/www/wwwroot/xuyijie.icu/upload_file/blog_img/&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font color=#999AAA >其实“addResourceLocations”里的路径指图片的真是存储路径，和数据库里存储的图片物理路径的字段的值无关<br>“数据库”里的路径瞎写都可以，只要对应图片的地址就可以，比如图片存在服务器的&#x2F;www&#x2F;wwwroot&#x2F;xuyijie.icu&#x2F;upload_file&#x2F;user_head&#x2F;目录，<br>“addResourceLocations”里和数据库里都写F:&#x2F;&#x2F;，这样也可以访问到，addResourceLocations是解析路径前端的:src路径，使图片的物理路径转换为url</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >这是一个总结</p><p><font color=#999AAA >哦对了，如果前后端不会打包部署到服务器，我的另外一篇文章有详细讲解，</p><p>传送门：<a href="https://blog.csdn.net/qq_48922459/article/details/121901441?spm=1001.2014.3001.5501">记Linux使用宝塔部署Vue+Springboot前后端分离项目</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记Linux使用宝塔部署Vue+Springboot前后端分离项目</title>
      <link href="/2021/12/13/%E8%AE%B0Linux%E4%BD%BF%E7%94%A8%E5%AE%9D%E5%A1%94%E9%83%A8%E7%BD%B2Vue+Springboot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE/"/>
      <url>/2021/12/13/%E8%AE%B0Linux%E4%BD%BF%E7%94%A8%E5%AE%9D%E5%A1%94%E9%83%A8%E7%BD%B2Vue+Springboot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><p>（已解决事务未注册和数据库连接超时问题、nginx转发后端接口问题，访问静态资源配置，配置获取登录用户设备所在的 IP）</p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>毕业设计，第一次部署到自己的服务器，记一下详细的教程还有过程中遇到的坑</font></p><p><font color=#999AAA >需要的详细后端打包教程和 Linux 服务器上传文件，连接服务器方法和命令，看我的另一篇很详细的，前端打包不需要教程，直接 npm run build 完事儿<br><a href="https://editor.csdn.net/md/?articleId=121718064">Java非Web的Springboot项目打包部署到Linux服务器并运行（Maven、Gradle）</a></p><p><font color=#999AAA >本篇也没有介绍如何从前端上传图片并使用后端处理后讲 base64 转化为 url 存入数据库，需要学习的传送门：<a href="https://blog.csdn.net/qq_48922459/article/details/122054809">Vue+Springboot上传图片将 Base64 码转换为图片保存在指定文件夹</a></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、项目打包"><a href="#一、项目打包" class="headerlink" title="一、项目打包"></a>一、项目打包</h1><p>将 Vue 项目里所有向后端请求的地址都修改为将要部署的服务器的 IP ，端口号可以不变，因为在服务器上使用 nginx 可以转发。</p><p><font color=#999AAA >后端数据库连接修改成服务器的 IP 和端口（下面会教在服务器创建数据库），需要注意的是后端 Java 的打包，项目创建用的JDK版本要和服务器上一样，不然运行会报错；</p><p><font color=#999AAA >数据库连接的 mysql-connect jar 包一定要和服务器上的 MySQL 环境的大版本相同，比如服务器上安装的是 MySQL 5.7，你就不能用 8.0.27 版本的 mysql-connect jar 包，否则会报错；</p><p><font color=#999AAA >还有 application.yml 里数据库连接的配置 <code>jdbc:mysql://111.24.211.111:3306/xuyijie_icu?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</code> 里面的 <code>useSSL=false</code>  一定要设置成 false ，不然有概率连接数据库报错</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、上传打包文件"><a href="#二、上传打包文件" class="headerlink" title="二、上传打包文件"></a>二、上传打包文件</h1><h2 id="1-Vue"><a href="#1-Vue" class="headerlink" title="1.Vue"></a>1.Vue</h2><p><font color=#999AAA >首先在宝塔上新建站点和数据库，域名那里如果没有域名，就写自己的服务器IP，端口可以指定，但是不允许是8080，记得开放服务器和宝塔防火墙（&#x3D;&#x3D;服务器和宝塔各有防火墙，都要开放，自己设置的网站端口要开放，数据库的3306要开放，根据需要）&#x3D;&#x3D;，数据库可以选择创建或者以后再创建，提交</p><p><img src="https://img-blog.csdnimg.cn/e8d3592299064917beb6aa8131b953af.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >我以前创建好了点开网站根目录，初始有两张页面，我们可以把 index.html 和 404.html 删了，因为要放我们的 Vue 项目</p><p><img src="https://img-blog.csdnimg.cn/8a79d158993e4254945458c2a8e53e5f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >直接把打包好的 dist 文件夹里面的东西，上传到这里就行了，里面的 &#x3D;&#x3D;java_back&#x3D;&#x3D;文件夹是我自己创建的，里面放了 Springboot 打的包，后端项目放哪里其实无所谓，你们自己看着办</p><p><img src="https://img-blog.csdnimg.cn/58e1aa4dce68489eb76a4670121c69c8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h2 id="1-Springboot"><a href="#1-Springboot" class="headerlink" title="1.Springboot"></a>1.Springboot</h2><p><font color=#999AAA >首先下载我给的文件，这是jar在linux上启动的通用脚本，不需要积分，一定要下，网上的 java jar 这种启动方式是暂时启动<br><a href="https://download.csdn.net/download/qq_48922459/55643280">启动脚本和配置文件下载</a><br><font color=#999AAA >下载完成后把解压出来的文件夹里的文件拖到服务器jar包所在的文件夹</p><p><img src="https://img-blog.csdnimg.cn/9f7429df33c648cab0284de905c0d34c.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/f2b8aecf2eb44ae1b1e40114e42fc5c2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >建议用 <strong>XShell</strong> 连接你的数据库，<code>cd</code> 到 jar 包位置，输入 <code>ls</code> 查看文件，然后输入 <code>sh build.sh</code> 来运行这个文件，会显示构建成功，这时会发现多了一个autoScript文件夹，<code>cd autoScript</code>，里面有几个sh文件，<code>sh startup.sh</code> ，项目就会启动了，并且永远不会停止，除非你运行 <code>sh shutdown.sh</code>。OK，完成。放心的退出你的服务器吧。</p><p>如果 XShell 还有连接数据库、命令什么的不会，我的另一篇很详细，看我的传送门 <a href="https://editor.csdn.net/md/?articleId=121718064">Java非Web的Springboot项目打包部署到Linux服务器并运行（Maven、Gradle）</a></p><p><img src="https://img-blog.csdnimg.cn/e35c42596c58477db98839a40eb57e1c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、配置Nginx反向代理"><a href="#三、配置Nginx反向代理" class="headerlink" title="三、配置Nginx反向代理"></a>三、配置Nginx反向代理</h1><p><font color=#999AAA >因为前后端项目运行在同一台服务器，所以必定端口不同，需要配置 Nginx 才能请求到后端</p><p><font color=#999AAA >站点设置里的配置文件，添加我鼠标选中的东西，里面的 IP 和端口填你自己的服务器 IP 和后端设置的端口，&#x3D;&#x3D;&#x2F;api&#x2F;&#x3D;&#x3D; 是你 Vue 里面自己配置的 axios 的 baseURL 的转发地址，如果没有配置，把 &#x3D;&#x3D;&#x2F;api&#x2F;&#x3D;&#x3D; 换成  &#x2F;  就行了</p><p><img src="https://img-blog.csdnimg.cn/c28ceddecc3a4fe18584124f447b8380.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /api/ &#123;</span><br><span class="line">     proxy_pass http://111.111.11.111:8081/;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="四、配置静态资源（可以上传图片到服务器并访问）"><a href="#四、配置静态资源（可以上传图片到服务器并访问）" class="headerlink" title="四、配置静态资源（可以上传图片到服务器并访问）"></a>四、配置静态资源（可以上传图片到服务器并访问）</h1><p>要想网页上传图片到服务器指定文件夹并访问到服务器的图片，要配置两个东西，后端代码和服务器的Nginx。</p><h2 id="1、Nginx配置静态资源代理"><a href="#1、Nginx配置静态资源代理" class="headerlink" title="1、Nginx配置静态资源代理"></a>1、Nginx配置静态资源代理</h2><p>下面的配置的意思是说：</p><p>&#x3D;&#x3D;http:&#x2F;&#x2F;你的IP:端口号&#x2F;user_head&#x2F;aa.png&#x3D;&#x3D;可以访问到 &#x3D;&#x3D;&#x2F;www&#x2F;wwwroot&#x2F;xuyijie.icu&#x2F;upload_file&#x2F;user_head&#x2F;&#x3D;&#x3D; 里面的aa.png</p><p>&#x3D;&#x3D;http:&#x2F;&#x2F;你的IP:端口号&#x2F;blog_img&#x2F;aa.png&#x3D;&#x3D;可以访问到 &#x3D;&#x3D;&#x2F;www&#x2F;wwwroot&#x2F;xuyijie.icu&#x2F;upload_file&#x2F;blog_img&#x2F;&#x3D;&#x3D; 里面的aa.png</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 下面两个location的意思是访问 http://你的IP:端口号/user_head/aa.png 就可以访问到在 </span><br><span class="line">/www/wwwroot/xuyijie.icu/upload_file/user_head/ 目录下的aa图片了，可以配置多个 location</span><br><span class="line">#然后你就可以把http://你的IP:端口号/user_head/aa.png写到你的前端的 scr 里面就可以访问到了</span><br><span class="line"># ^~ 表示 如果把这个前缀用于一个常规字符串,那么告诉nginx 如果路径匹配那么不测试正则表达式。</span><br><span class="line">location ^~ /user_head/ &#123;</span><br><span class="line">root /www/wwwroot/xuyijie.icu/upload_file/user_head/;     #指定图片存放路径    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ^~ /user_head/ &#123;</span><br><span class="line">root /www/wwwroot/xuyijie.icu/upload_file/user_head/;     #指定图片存放路径    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/130a297a3d484cd29066caa8b1a2a6fc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h2 id="2、Springboot配置物理地址映射"><a href="#2、Springboot配置物理地址映射" class="headerlink" title="2、Springboot配置物理地址映射"></a>2、Springboot配置物理地址映射</h2><p><font color=#999AAA >新建 config 包，在里面新建 WebConfig 类<br><img src="https://img-blog.csdnimg.cn/8ffeecb137444e498917476e66c2208d.png" alt="在这里插入图片描述"><br><font color=#999AAA >代码如下，解析都在注释里</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.xuyijie.communityinteractionsystem.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfigurer</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//映射到本地路径的代码意思是</span></span><br><span class="line">    <span class="comment">// 在F:/uploadFiles/user_head/目录下如果有一张aa.png的图片，那么</span></span><br><span class="line">    <span class="comment">// 访问：http://localhost:8081/user_head/aa.png就可以访问到它</span></span><br><span class="line">    <span class="comment">// 静态html 中这样写 &lt;img src=&quot;http://localhost:8081/user_head/aa.png&quot;&gt;</span></span><br><span class="line">    <span class="comment">// 动态html 中这样写 &lt;img :src=&quot;imgUrl&quot;&gt; 把值赋给imgUrl就行，(this.imgUrl=&quot;http://localhost:8081/user_head/aa.png&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//映射到本地路径</span></span><br><span class="line">    registry.addResourceHandler(<span class="string">&quot;/user_head/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:F:/uploadFiles/user_head/&quot;</span>);</span><br><span class="line">    registry.addResourceHandler(<span class="string">&quot;/blog_img/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:F:/uploadFiles/blog_img/&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//映射到服务器的保存路</span></span><br><span class="line">        <span class="comment">//记得还要配置Nginx的静态资源代理</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/user_head/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:/www/wwwroot/xuyijie.icu/upload_file/user_head/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/blog_img/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:/www/wwwroot/xuyijie.icu/upload_file/blog_img/&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font color=#999AAA >其实 “addResourceLocations” 里的路径指图片的真是存储路径，和数据库里存储的图片物理路径的字段的值无关，“数据库”里的路径瞎写都可以，只要对应图片的地址就可以，比如图片存在服务器的 &#x2F;www&#x2F;wwwroot&#x2F;xuyijie.icu&#x2F;upload_file&#x2F;user_head&#x2F; 目录， “addResourceLocations” 里和数据库里都写 F:&#x2F;&#x2F; ，这样也可以访问到， addResourceLocations 是解析路径前端的 :src 路径，使图片的物理路径转换为 url 。</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="五、导入数据库"><a href="#五、导入数据库" class="headerlink" title="五、导入数据库"></a>五、导入数据库</h1><p><font color=#999AAA >你创建的数据库右边，有一个管理，点一下，用数据库账号和密码登录进去</p><p><img src="https://img-blog.csdnimg.cn/f5f092af5af04f1286c0b4325d1dde44.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >左边会显示你创建的数据库，选中它，点上面的“导入”，就可以选择 .sql 文件进行数据导入了</p><p><img src="https://img-blog.csdnimg.cn/cd379e1376ef4d5797c059b03c265f37.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="六、访问自己的项目"><a href="#六、访问自己的项目" class="headerlink" title="六、访问自己的项目"></a>六、访问自己的项目</h1><p>在浏览器网址栏输入你 Nginx 那一步配置的 IP 和端口，就可以了，图片也可以上传访问</p><p><img src="https://img-blog.csdnimg.cn/6df2a7d823414c3cba044cac7802ae19.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >需要的详细后端打包教程和 Linux 服务器上传文件，连接服务器方法和命令，看我的另一篇很详细的，前端打包不需要教程，直接 npm run build 完事儿，还有 XShell 操作服务器和 Xftp 给服务器上传文件不会的，项目启动脚本，链接统一放一下<br><a href="https://blog.csdn.net/qq_48922459/article/details/121718064?spm=1001.2014.3001.5501">Java非Web的Springboot项目打包部署到Linux服务器并运行（Maven、Gradle）</a><br><a href="https://download.csdn.net/download/qq_48922459/55643280">启动脚本和配置文件下载</a></p><p><font color=#999AAA >本篇也没有介绍如何从前端上传图片并使用后端处理后讲 base64 转化为 url 存入数据库，需要学习的传送门：<a href="https://blog.csdn.net/qq_48922459/article/details/122054809">Vue+Springboot上传图片将 Base64 码转换为图片保存在指定文件夹</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> 宝塔面板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux配置宝塔面板并一键部署网站（免手动安装、免配置环境、可部署多个）</title>
      <link href="/2021/12/09/Linux%E9%85%8D%E7%BD%AE%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E5%B9%B6%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E7%BD%91%E7%AB%99%EF%BC%88%E5%85%8D%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85%E3%80%81%E5%85%8D%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E3%80%81%E5%8F%AF%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA%EF%BC%89/"/>
      <url>/2021/12/09/Linux%E9%85%8D%E7%BD%AE%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E5%B9%B6%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E7%BD%91%E7%AB%99%EF%BC%88%E5%85%8D%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85%E3%80%81%E5%85%8D%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E3%80%81%E5%8F%AF%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >你们写项目是为了干什么，写项目的最终目的不就是要部署部署部署！！！上线上线上线！！！那么棒的项目当然要所有人都看见啦，要不然写它用来孤芳自赏吗</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><p><font color=#999AAA >提示：需要有一服务器，虚拟机或者腾讯云购买的都可以，不允许是已经配置了环境的服务器，比如Apache&#x2F;Nginx&#x2F;php&#x2F;MySQL，如果已经安装了这些都要彻底卸载，系统不限（不过听说Windows Server 的服务器用自带的 IIS 比较好，以后讲）</p><h1 id="一、打包你的前后端项目"><a href="#一、打包你的前后端项目" class="headerlink" title="一、打包你的前后端项目"></a>一、打包你的前后端项目</h1><p><font color=#999AAA >传送门：我的另一篇<a href="https://blog.csdn.net/qq_48922459/article/details/121718064?spm=1001.2014.3001.5501">Java非Web的Springboot项目打包部署到Linux服务器并运行（Maven、Gradle）</a></p><p><font color=#999AAA >当然也可以不用看，很简单的，后端 Maven 项目直接在 idea 的 Terminal 控制台运行 <code>maven clean package</code> 就可以了，Gradle 在 idea 的右侧 “Gradle” 点开，里面慢慢找，有个“build”，双击。最终都是得到一个 jar 包。</p><p><font color=#999AAA >前端一般用 Vue ，打包方法就是在项目的控制台 <code>npm run build</code> 就可以了，会生成一个 dist 文件夹。</p><p>&#x3D;&#x3D;当然，静态网页也可以部署，如果后端没写完，可以只部署前端网页，这篇讲一键建站，所以不讲后端怎么部署和启动，想知道的还是看我上面的那个传送门&#x3D;&#x3D;</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、下载宝塔"><a href="#二、下载宝塔" class="headerlink" title="二、下载宝塔"></a>二、下载宝塔</h1><p><font color=#999AAA >所有系统安装都很傻瓜，Linux 命令行只需一行（如果可以打开图形界面也可以直接去官网下载Linux版），Windows去官网下载 exe 文件一键安装</p><p><font color=#999AAA >系统兼容性推荐 Centos7.x &gt; Debian10 &gt; Ubuntu 20.04 &gt; Cenots8.x &gt; Ubuntu 18.04 &gt; 其它系统</p><p>Centos安装脚本 <code>yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh</code><br>Ubuntu&#x2F;Deepin安装脚本 <code>wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh</code><br>Debian安装脚本 <code>wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; bash install.sh</code><br>Fedora安装脚本 <code>wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; bash install.sh</code></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、登录宝塔面板"><a href="#三、登录宝塔面板" class="headerlink" title="三、登录宝塔面板"></a>三、登录宝塔面板</h1><p><font color=#999AAA >安装成功后在随便一台电脑的浏览器输入 bt.cn 进入官网，安装 &#x3D;&#x3D;堡塔SSH终端&#x3D;&#x3D;连接到你的服务器，也可以不下载，直接在电脑浏览器里输入 &#x3D;&#x3D;服务器IP:8888&#x3D;&#x3D; 就可以访问到服务器里的宝塔，记得开放服务器的防火墙</p><p><font color=#999AAA >然后刚进去就提示你安装套件，强烈推荐！！！直接安装 LNMP 就行了，记得选 “编译安装”，差不多半小时，就可以了。</p><p><img src="https://img-blog.csdnimg.cn/57c44ab48d4347dabe0e015c06361be4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >一顿简单的操作，最终你的宝塔界面是这样的，点击左边 “网站”</p><p><img src="https://img-blog.csdnimg.cn/18b27bde7f7948e3b88757e128345338.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >根据我的标注操作，域名那里如果没有域名，就写自己的服务器IP，端口可以指定，但是不允许是8080，记得开放服务器防火墙，数据库可以选择创建或者以后再创建，提交<br><img src="https://img-blog.csdnimg.cn/b9181358d1f74b8b95afe39be67d12e3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >我以前已经部署了两个了，两个网站写不同的端口就行了，点开网站根目录，初始有两张页面，我们可以把 index.html 和 404.html 删了，因为要放我们的 Vue 项目</p><p><img src="https://img-blog.csdnimg.cn/c7a37e29e2854ab1bea6eb9a532b72cd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/8a79d158993e4254945458c2a8e53e5f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >直接把打包好的 dist 文件夹里面的东西，上传到这里就行了，然后就可以访问了，神奇吧</p><p><img src="https://img-blog.csdnimg.cn/1cdfdbb5a229467c820052125e869b2b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、访问自己的网站"><a href="#三、访问自己的网站" class="headerlink" title="三、访问自己的网站"></a>三、访问自己的网站</h1><p><font color=#999AAA >浏览器输入自己配置的域名，我的是 175.24.228.202:8081  ，完成<br><img src="https://img-blog.csdnimg.cn/5a9dc81f3da6432e9e4453308e1e5d98.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >暂时没有总结吧，总之觉得宝塔还不错，文件、网站、数据库、FTP、VPN 这些都可以在上面管理，告别命令行，告别繁琐的环境配置</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 宝塔面板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Springboot的AOP日志拦截获取前端网站的操作记录</title>
      <link href="/2021/12/08/%E4%BD%BF%E7%94%A8Springboot%E7%9A%84AOP%E6%97%A5%E5%BF%97%E6%8B%A6%E6%88%AA%E8%8E%B7%E5%8F%96%E5%89%8D%E7%AB%AF%E7%BD%91%E7%AB%99%E7%9A%84%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
      <url>/2021/12/08/%E4%BD%BF%E7%94%A8Springboot%E7%9A%84AOP%E6%97%A5%E5%BF%97%E6%8B%A6%E6%88%AA%E8%8E%B7%E5%8F%96%E5%89%8D%E7%AB%AF%E7%BD%91%E7%AB%99%E7%9A%84%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >随着我们的不断学习，我们的技术不断沉淀，做出来的项目也不断成熟</font></p><p><font color=#999AAA >所以，我们的网站怎么能没有日志记录呢</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="1、创建Springboot-Web项目并添加依赖"><a href="#1、创建Springboot-Web项目并添加依赖" class="headerlink" title="1、创建Springboot Web项目并添加依赖"></a>1、创建Springboot Web项目并添加依赖</h1><p><font color=#999AAA >选择左边那个 Spring Initializr 来创建<br><img src="https://img-blog.csdnimg.cn/b3e3c4b42d5a4ad38915a6cdb760bddb.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >这一步是选择项目要用到的依赖，勾选以后就不用配置 Maven 的 pom 了，当然这里面都是些常用依赖，里面没有的还是要手动添加 pom，Springboot 的Web项目选择Spring Web就行了，根据需要选择</p><p><img src="https://img-blog.csdnimg.cn/ad4cb1031cac46ccb917cffecae10765.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >完成后我们向 &#x3D;&#x3D;pom.xml&#x3D;&#x3D; 中添加一条依赖，用于日志的拦截和输出</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--aop--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><font color=#999AAA >先建立项目结构， annotation 和 aop 就是用于日志拦截的文件</p><p><img src="https://img-blog.csdnimg.cn/655b405402bd4867bc373b926316eb26.png" alt="在这里插入图片描述"></p><hr><h1 id="2、新建保存日志实体类（非必须）"><a href="#2、新建保存日志实体类（非必须）" class="headerlink" title="2、新建保存日志实体类（非必须）"></a>2、新建保存日志实体类（非必须）</h1><p><font color=#999AAA >我们先新建一个实体类来存储我们拦截到的日志，如果不想存储就不用新建这个了，直接把日志打印到控制台就行。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/17</span></span><br><span class="line"><span class="comment"> * 存储操作日志的实体类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogSave</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 操作模块</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String operationModule;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 操作类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String operationType;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 具体操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String operationDescription;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求的接口地址</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String requestUrl;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求方法，get/post</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String requestMethod;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求的后台接口</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String requestInterface;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String requestParam;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String responseResult;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 方法执行时长</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> operationPeriod;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 操作时间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Date operationTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="3、简简单单写个Controller"><a href="#3、简简单单写个Controller" class="headerlink" title="3、简简单单写个Controller"></a>3、简简单单写个Controller</h1><p><font color=#999AAA ><code>controller</code> 里面很简单，就是在网页打印一句话，然后加上我们自定义的 <code>@Log</code> 注解，@Log代码在下面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xuyijie.aoplogintercept.annotation.Log;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/10/17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * log里自定义的内容，用于存入数据库对这个方法的日志进行描述</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Log(operationModule = &quot;主题&quot;, operationType = &quot;操作类型：查询/删除&quot;, operationDescription = &quot;具体操作：删除了文件&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/log&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">log</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;这是自定义的返回结果&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="4、自定义注解"><a href="#4、自定义注解" class="headerlink" title="4、自定义注解"></a>4、自定义注解</h1><p><font color=#999AAA ><code>annotation包</code> 下面的 <code>Log</code>，是自定义注解，字段的解释下面的注释中很清晰哦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/11/24</span></span><br><span class="line"><span class="comment"> * Aop日志拦截自定义注解</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span> <span class="comment">//注解放置的目标位置即方法级别，也就是注解放在controller里的方法上面</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="comment">//注解在哪个阶段执行</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Log &#123;</span><br><span class="line">    <span class="comment">//写在注解里面，可以用于存到数据库时的对方法的描述，可以写多个</span></span><br><span class="line">    String <span class="title function_">operationModule</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>; <span class="comment">// 操作模块</span></span><br><span class="line"></span><br><span class="line">    String <span class="title function_">operationType</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;  <span class="comment">// 操作类型</span></span><br><span class="line"></span><br><span class="line">    String <span class="title function_">operationDescription</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;  <span class="comment">// 操作说明</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//@Aspect 面向切面编程注解，通常应用在类上</span></span><br><span class="line"><span class="comment">//@Pointcut Pointcut是植入Advice的触发条件。每个Pointcut的定义包括2部分，一是表达式，二是方法签名。方法签名必须是 public及void型。可以将Pointcut中的方法看作是一个被Advice引用的助记符，因为表达式不直观，因此我们可以通过方法签名的方式为 此表达式命名。因此Pointcut中的方法只需要方法签名，而不需要在方法体内编写实际代码</span></span><br><span class="line"><span class="comment">//@Around：环绕增强，相当于MethodInterceptor</span></span><br><span class="line"><span class="comment">//@AfterReturning：后置增强，相当于AfterReturningAdvice，方法正常退出时执行</span></span><br><span class="line"><span class="comment">//@Before：标识一个前置增强方法，相当于BeforeAdvice的功能，相似功能的还有</span></span><br><span class="line"><span class="comment">//@AfterThrowing：异常抛出增强，相当于ThrowsAdvice</span></span><br><span class="line"><span class="comment">//@After: final增强，不管是抛出异常或者正常退出都会执行</span></span><br></pre></td></tr></table></figure><h1 id="5、开始拦截"><a href="#5、开始拦截" class="headerlink" title="5、开始拦截"></a>5、开始拦截</h1><p><font color=#999AAA ><code>aop包</code> 下面的<code>LogAspect</code>， <code>@Pointcut</code> 里面的包名修改成你们自己的</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xuyijie.aoplogintercept.annotation.Log;</span><br><span class="line"><span class="keyword">import</span> entity.LogSave;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.reflect.MethodSignature;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 徐一杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/11/24</span></span><br><span class="line"><span class="comment"> * Aop日志拦截，并保存日志到数据库，如果不想存储数据库，直接打印到控制台也行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">LogSave</span> <span class="variable">logSave</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LogSave</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@annotation</span>: 指定 <span class="doctag">@Log</span> 注解位置，这里 <span class="doctag">@annotation</span> 里的配置代表只拦截增加了自定义注解 <span class="doctag">@Log</span> 的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * execution：指定 controller 包下的注解，.*代表controller包下所有文件，*(..)代表所有方法</span></span><br><span class="line"><span class="comment">     * 这里execution是拦截全部controller接口的意思，如果只想拦截增加了自定义注解的方法，使用<span class="doctag">@annotation</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// @Pointcut(&quot;execution(* com.xuyijie.aoplogintercept.controller.*.*(..))&quot;)</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.xuyijie.aoplogintercept.annotation.Log)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logPointCut</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定当前执行方法在logPointCut之前执行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before(&quot;logPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doBefore</span><span class="params">(JoinPoint joinPoint)</span> &#123;</span><br><span class="line">        <span class="comment">// 接收到请求，记录请求内容</span></span><br><span class="line">        <span class="type">ServletRequestAttributes</span> <span class="variable">attributes</span> <span class="operator">=</span> (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">        <span class="keyword">assert</span> attributes != <span class="literal">null</span>;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> attributes.getRequest();</span><br><span class="line">        <span class="comment">// 记录下请求内容</span></span><br><span class="line">        logSave = <span class="keyword">new</span> <span class="title class_">LogSave</span>();</span><br><span class="line">        logSave.setRequestUrl(request.getRequestURI());</span><br><span class="line">        logSave.setRequestMethod(request.getMethod());</span><br><span class="line">        logSave.setRequestInterface(joinPoint.getSignature().getDeclaringTypeName() + <span class="string">&quot;.&quot;</span> + joinPoint.getSignature().getName());</span><br><span class="line">        logSave.setRequestParam(Arrays.toString(joinPoint.getArgs()));</span><br><span class="line">        <span class="comment">// 从切面织入点处通过反射机制获取织入点处的方法</span></span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">signature</span> <span class="operator">=</span> (MethodSignature) joinPoint.getSignature();</span><br><span class="line">        <span class="comment">//获取切入点所在的方法</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> signature.getMethod();</span><br><span class="line">        <span class="comment">//获取操作，也就是前面 OperationLogAnnotation 里定义的</span></span><br><span class="line">        <span class="type">Log</span> <span class="variable">logAnnotation</span> <span class="operator">=</span> method.getAnnotation(Log.class);</span><br><span class="line">        logSave.setOperationModule(logAnnotation.operationModule());</span><br><span class="line">        logSave.setOperationType(logAnnotation.operationType());</span><br><span class="line">        logSave.setOperationDescription(logAnnotation.operationDescription());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定在方法之后返回</span></span><br><span class="line"><span class="comment">     * returning的值和doAfterReturning的参数名一致</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterReturning(returning = &quot;ret&quot;, pointcut = &quot;logPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterReturning</span><span class="params">(Object ret)</span> &#123;</span><br><span class="line">        logSave.setResponseResult(ret.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;logPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">doAround</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// ob 为方法的返回值</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">ob</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        logSave.setOperationPeriod(System.currentTimeMillis() - startTime);</span><br><span class="line">        <span class="comment">//TODO 存储日志到数据库</span></span><br><span class="line">        <span class="comment">// LogSaveDao.save(log);</span></span><br><span class="line">        <span class="keyword">return</span> ob;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="6、运行项目"><a href="#6、运行项目" class="headerlink" title="6、运行项目"></a>6、运行项目</h1><p><font color=#999AAA >启动项目</p><p><font color=#999AAA >然后在浏览器的地址栏里输入 localhost:8080&#x2F;log&#x2F;?name&#x3D;啦啦啦 ，回车访问</p><p><font color=#999AAA >我没有配置 application.properties 文件，所以端口默认8080，&#x2F;log是controller里面方法上面配置的请求路径，?name&#x3D;啦啦啦 ，name 是 controller 里面方法的传参。</p><p><img src="https://img-blog.csdnimg.cn/9a8c4fe91c50448dac165f0cd04d4f80.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >你们自己在在 <code>LogAspect</code> 里面添加一点打印语句，控制台打印出拦截结果，请求地址、请求方法、传参 等等</p><p><img src="https://img-blog.csdnimg.cn/9317421854874cb987e050aa473bbf4e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="7、代码解析"><a href="#7、代码解析" class="headerlink" title="7、代码解析"></a>7、代码解析</h1><p><font color=#999AAA >首先是各注解的意思</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span> 面向切面编程注解，通常应用在类上</span><br><span class="line"><span class="meta">@Pointcut</span> Pointcut是植入Advice的触发条件。每个Pointcut的定义包括<span class="number">2</span>部分，一是表达式，二是方法签名。方法签名必须是 <span class="keyword">public</span>及<span class="keyword">void</span>型。可以将Pointcut中的方法看作是一个被Advice引用的助记符，因为表达式不直观，因此我们可以通过方法签名的方式为 此表达式命名。因此Pointcut中的方法只需要方法签名，而不需要在方法体内编写实际代码</span><br><span class="line"><span class="meta">@Around</span>：环绕增强，相当于MethodInterceptor</span><br><span class="line"><span class="meta">@AfterReturning</span>：后置增强，相当于AfterReturningAdvice，方法正常退出时执行</span><br><span class="line"><span class="meta">@Before</span>：标识一个前置增强方法，相当于BeforeAdvice的功能，相似功能的还有</span><br><span class="line"><span class="meta">@AfterThrowing</span>：异常抛出增强，相当于ThrowsAdvice</span><br><span class="line"><span class="meta">@After</span>: <span class="keyword">final</span>增强，不管是抛出异常或者正常退出都会执行</span><br><span class="line"></span><br><span class="line">然后是，LogAspect 里面的包路径配置，</span><br><span class="line"><span class="meta">@annotation</span>: 指定 <span class="meta">@Log</span> 注解位置，这里 <span class="meta">@annotation</span> 里的配置代表只拦截增加了自定义注解 <span class="meta">@Log</span> 的方法，想要拦截哪个方法的日志，就在哪个方法上面加注解 `<span class="meta">@Log()</span>`</span><br><span class="line">execution：指定 controller 包下的注解，.*代表controller包下所有文件，*(..)代表所有方法</span><br><span class="line">这里execution是拦截全部controller接口的意思，如果只想拦截增加了自定义注解的方法，使用<span class="meta">@annotation</span></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >@Arround 是个万能注解，可以代替 @Before 和 @After，所以我在保存数据库的那个文件里只是用了 @Arround，保存到数据库的字段可以自己定制，下面是我另一个项目的日志，给你们参考一下。<br><img src="https://img-blog.csdnimg.cn/77b717e552e94421a00aae464b0a83fe.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java运行非Web的Springboot项目（测试类或启动主类两种方法）</title>
      <link href="/2021/12/05/Java%E8%BF%90%E8%A1%8C%E9%9D%9EWeb%E7%9A%84Springboot%E9%A1%B9%E7%9B%AE%EF%BC%88%E6%B5%8B%E8%AF%95%E7%B1%BB%E6%88%96%E5%90%AF%E5%8A%A8%E4%B8%BB%E7%B1%BB%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89/"/>
      <url>/2021/12/05/Java%E8%BF%90%E8%A1%8C%E9%9D%9EWeb%E7%9A%84Springboot%E9%A1%B9%E7%9B%AE%EF%BC%88%E6%B5%8B%E8%AF%95%E7%B1%BB%E6%88%96%E5%90%AF%E5%8A%A8%E4%B8%BB%E7%B1%BB%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >如果springboot不是一个Web项目，大家知道，项目启动以后马上就会停止，并且 controller 等各层里面的方法也不会被执行，下面有两种方式可以运行容器里面的方法，测试类或者修改启动主类，都非常简单，几行代码的事情。</font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、创建打开一个Springboot项目"><a href="#一、创建打开一个Springboot项目" class="headerlink" title="一、创建打开一个Springboot项目"></a>一、创建打开一个Springboot项目</h1><p><font color=#999AAA >使用idea，选择Spring Initializr进行创建</p><p><img src="https://img-blog.csdnimg.cn/07361c4ca30145b7bc58107476585501.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >next，这一步不要勾选 Spring Web 依赖，不然就是个 Web 项目了</p><p><img src="https://img-blog.csdnimg.cn/d1032ccb3a1a4827b422ab242caf69ed.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >完成以后大家发现，已经为我们创建好了 测试类，那我们就先讲用测试类运行吧<br><img src="https://img-blog.csdnimg.cn/eca9128425e04561930badf4c9024424.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_17,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >先写好基本结构，我的这个 demo方法就是一个 System.out.println(“Hello World”);</p><p><img src="https://img-blog.csdnimg.cn/fcd80ca0340448bcbd76b61b5faf32c5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、运行项目"><a href="#二、运行项目" class="headerlink" title="二、运行项目"></a>二、运行项目</h1><h2 id="1、Test测试类运行"><a href="#1、Test测试类运行" class="headerlink" title="1、Test测试类运行"></a>1、Test测试类运行</h2><p><font color=#999AAA >打开测试类，我的叫 UseToTestApplicationTests，不同项目名字不一样，里面的初始代码是这样的，每个人都一样</p><p><img src="https://img-blog.csdnimg.cn/3f0a8286a0cf403eab4163ba8ba754fa.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >在里面直接 @Autowired 你的 controller 层的文件，在下面 contextLoads 里面调用方法，右键，运行 contextLoads 就可以了。然后输出了 HelloWorld</p><p><img src="https://img-blog.csdnimg.cn/15bb9b7a8cdb4327a96e58fc3724dc95.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/4a0ea43f8edb4c2d99ad73296b646665.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h2 id="2、启动主类运行"><a href="#2、启动主类运行" class="headerlink" title="2、启动主类运行"></a>2、启动主类运行</h2><p><font color=#999AAA >下面使用 UseToTestApplication 启动主类来运行项目</p><p><font color=#999AAA >修改代码为下图所示，要获取哪个容器就<code>getBean</code>哪个容器名，右键启动 UseToTestApplication</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ConfigurableApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> SpringApplication.run(UseToTestApplication.class, args);</span><br><span class="line">        <span class="comment">//获取容器DemoController</span></span><br><span class="line">        <span class="type">DemoController</span> <span class="variable">demoController</span> <span class="operator">=</span> (DemoController) context.getBean(<span class="string">&quot;demoController&quot;</span>);</span><br><span class="line">        <span class="comment">//DemoController获取成功，调用demo方法</span></span><br><span class="line">        demoController.demo();</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/3deaecf4106b4486ac60b7a6d088ed01.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >输出 HelloWorld</p><p><img src="https://img-blog.csdnimg.cn/1fa3647e27254e5b81d7caf1e78aaf0a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、持续运行不停止（定时任务、自动执行）"><a href="#三、持续运行不停止（定时任务、自动执行）" class="headerlink" title="三、持续运行不停止（定时任务、自动执行）"></a>三、持续运行不停止（定时任务、自动执行）</h1><p><font color=#999AAA >如果想要让项目不停止，一直打印HelloWorld，可以在启动类 UseToTestApplication  上添加注解 <code>@EnableScheduling</code> ，意思为开启定时任务，这个时候启动类就不能修改成上面的<code>getBean</code>那样了，要改回原来的样子</p><p><font color=#999AAA >然后在 controller 层的DemoControlelr里面加上注解 <code>@Component</code> 可以确保这个类会被定时任务扫描到，然后在下面的 demo 方法上加上 <code>@Scheduled(fixedRate = 3000)</code>，意思为每1000毫秒执行一次 demo 方法</p><p><img src="https://img-blog.csdnimg.cn/460bdd6856dd47e78e0d37e425fd4605.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/5eeabfbc0e5846bab3b4fb8836edbb2b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >启动主类，运行结果，每1秒打印一个 HelloWorld ，永不停止<br><img src="https://img-blog.csdnimg.cn/0bc1d66c0f9748e487be16c5c0eb8f82.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >如果需要更详细的定时任务的操作，我的另一篇文章有详解，可以定制逻辑更复杂的定时任务</p><p>传送门：<a href="https://blog.csdn.net/qq_48922459/article/details/121687993?spm=1001.2014.3001.5501">Java实现非Web项目的Springboot定时任务（每3秒自动执行一次）</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Java非Web的Springboot项目打包部署到Linux服务器并运行（Maven、Gradle）</title>
      <link href="/2021/12/04/Java%E9%9D%9EWeb%E7%9A%84Springboot%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E9%83%A8%E7%BD%B2%E5%88%B0Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B9%B6%E8%BF%90%E8%A1%8C%EF%BC%88Maven%E3%80%81Gradle%EF%BC%89/"/>
      <url>/2021/12/04/Java%E9%9D%9EWeb%E7%9A%84Springboot%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E9%83%A8%E7%BD%B2%E5%88%B0Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B9%B6%E8%BF%90%E8%A1%8C%EF%BC%88Maven%E3%80%81Gradle%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >直接开始吧，非Web项目部署很简单的，没有繁杂的配置</font></p><p><font color=#999AAA >有些小伙伴说非Web的项目运行一下就自己停止了，我还写了一篇很简单的设置定时任务，就是每隔5秒运行一次，永不停止这样，传送门：<a href="https://blog.csdn.net/qq_48922459/article/details/121687993?spm=1001.2014.3001.5501">Java实现非Web项目的Springboot定时任务（每3秒自动执行一次）</a></font></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、修改pom-xml配置文件"><a href="#一、修改pom-xml配置文件" class="headerlink" title="一、修改pom.xml配置文件"></a>一、修改pom.xml配置文件</h1><p><font color=#999AAA >我以Maven为例</p><p><font color=#999AAA >我的项目在本地启动以后是这样的，等下部署后在服务器启动也是这个样子的，先停止它。</p><p><img src="https://img-blog.csdnimg.cn/c3903cd5384b4729b39ab1484bdcc205.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >打开pom.xml，对比一下你的 <code>&lt;build&gt;</code> 里面是不是缺少下方的代码，自行添加缺少的配置。注意！如果你的 <code>&lt;build&gt;</code> 里面 spring-boot-maven-plugin 的 configuration 里面有 &#x3D;&#x3D;lombok&#x3D;&#x3D; 的配置，一定要&#x3D;&#x3D;删掉&#x3D;&#x3D;，不然可能会打包失败，删掉lombok的配置不会影响lombok的使用。<code>&lt;mainClass&gt;</code>标签里面是自己项目的主启动类路径，自己换一下。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                       <span class="comment">&lt;!--打包部署需要的配置，开启true--&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">includeSystemScope</span>&gt;</span>true<span class="tag">&lt;/<span class="name">includeSystemScope</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">           <span class="comment">&lt;!--打包部署需要的配置--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--解决打包部署报错no main manifest attribute, in 。。。jar--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.zjsos.pingyangparkinglot.PingyangParkinglotApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span>   </span><br><span class="line">                  <span class="comment">&lt;!--第三方包需要这个配置才能打包进去--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">includeSystemScope</span>&gt;</span>true<span class="tag">&lt;/<span class="name">includeSystemScope</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!--热部署配置--&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="comment">&lt;!--fork：如果没有该项配置，整个devtools不会起效果--&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、开始打包"><a href="#二、开始打包" class="headerlink" title="二、开始打包"></a>二、开始打包</h1><p><font color=#999AAA >首先，点击idea下方的“Terminal”</p><p><img src="https://img-blog.csdnimg.cn/5ec1a80182864bd29a12aac0de14da39.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >然后在里面输入“<code>mvn clean</code>”，回车</p><p><img src="https://img-blog.csdnimg.cn/670f8ec7739f409892ef733dcce0eece.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >等待它完成后，再输入“<code>mvn package</code>”，回车，等待出现到这一步，打包就完成啦，jar包路径在项目根目录的target文件夹里</p><p><img src="https://img-blog.csdnimg.cn/c5d147f966c743cfb63519e3f9b2d3c1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >打开 target ，里面有以你的项目名命名的jar包</p><p><img src="https://img-blog.csdnimg.cn/99d8b126ba0a4fca84506b8f52bbd29a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_16,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >部署到服务器之前可以先测试一下jar包是否正常，在jar包所在的文件夹路径栏输入cmd，回车，会打开命令行</p><p><img src="https://img-blog.csdnimg.cn/347bb37ad7d64efcb91eb75135d83949.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >在命令行里输入 <code>java -jar 你的jar包名.jar</code> ，回车，即可运行</p><p><img src="https://img-blog.csdnimg.cn/6a946529cf60417c8e42e7e83d3f1628.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >运行正常，我们把它部署到服务器</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、部署到服务器"><a href="#三、部署到服务器" class="headerlink" title="三、部署到服务器"></a>三、部署到服务器</h1><p><font color=#999AAA >服务器系统以没有界面的 Centos7 为例，连接工具使用的是 Xshell ，打开 Xshell ，左上角新建，“主机”输入要连接的服务器IP，端口如果没有特别改动的话一般是 22 或者 122</p><p><img src="https://img-blog.csdnimg.cn/bd1f54c8c72b403aa4d8b1078447c746.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >输入完 IP 和端口以后，点击左边“用户身份验证”，输入账号密码，点连接</p><p><img src="https://img-blog.csdnimg.cn/5ea2b3957fcb4d5f836c9049ba49d6f9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_16,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >出现 Welcome to xxx 连接成功</p><p><img src="https://img-blog.csdnimg.cn/24db33e4d9b34efe8f76d7df14e3ff95.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_12,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >把项目部署在我们挂载的主目录，挂载就不讲了，你们购买的服务器都是挂载好的，弄清楚是哪个文件夹就可以了，我的是&#x2F;data，进入到&#x2F;data，创建项目文件夹，进入文件夹</p><p><img src="https://img-blog.csdnimg.cn/d8cc776653b444d7aedde6371782ac03.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >然后点击Xshell上面这个绿色的，是开启本机和服务器图形界面的文件传输框Xftp，左边在本机找到jar包，拖到右边服务器</p><p><img src="https://img-blog.csdnimg.cn/fd1a0ed923e64a29b2890ad80ec0d762.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/ae7a047cb7cb4cba9d40a1412cfd66be.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >然后返回到 Xshell ，运行jar包，但是这种运行方式只是暂时的，离开这个界面就会停止，下面的方法可以让项目一直运行</p><p><img src="https://img-blog.csdnimg.cn/60723dbe1d3a4471bc7b1a95cac56025.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >首先下载我给的文件，这是jar在linux上启动的通用脚本，不需要积分<br><a href="https://download.csdn.net/download/qq_48922459/55643280">启动脚本和配置文件下载</a><br><font color=#999AAA >下载完成后把解压出来的文件夹里的文件拖到服务器jar包所在的文件夹</p><p><img src="https://img-blog.csdnimg.cn/9f7429df33c648cab0284de905c0d34c.png" alt="在这里插入图片描述"></p><p><font color=#999AAA >输入 <code>ls</code> 查看文件，然后输入 <code>sh build.sh</code> 来运行这个文件，会显示构建成功，这时会发现多了一个autoScript文件夹，<code>cd autoScript</code>，里面有几个sh文件，<code>sh startup.sh</code> ，项目就会启动了，并且永远不会停止，除非你运行 <code>sh shutdown.sh</code>。OK，完成。放心的退出你的服务器吧。</p><p><img src="https://img-blog.csdnimg.cn/e35c42596c58477db98839a40eb57e1c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >本编以Maven为例打包，但是打完包以后，部署到服务器的操作都是一样的，启动脚本里面的 indolent.properties 配置文件可以配置 nacos 上的配置文件，个人的小项目暂时用不到，后面会写部署Springboot的Web项目，这个环境的配置就比较复杂了，但是我目前用的是一键部署的神器，宝塔面板，不用安装和配置环境，传送门：<a href="https://blog.csdn.net/qq_48922459/article/details/121901441?spm=1001.2014.3001.5501">记Linux使用宝塔部署Vue+Springboot前后端分离项目</a>。</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Java 实现 Springboot 定时任务（每隔一段时间自动执行一次）</title>
      <link href="/2021/12/02/Java%20%E5%AE%9E%E7%8E%B0%20Springboot%20%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%EF%BC%88%E6%AF%8F%E9%9A%94%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%EF%BC%89/"/>
      <url>/2021/12/02/Java%20%E5%AE%9E%E7%8E%B0%20Springboot%20%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%EF%BC%88%E6%AF%8F%E9%9A%94%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>运行非Web的Springboot项目时，会发现启动主类后马上就会停止，普通的Timer定时器无法达到定时自动执行Springboot项目的效果，下面我们用Springboot自带的注解（@Component、@Scheduled、@EnableScheduling）来进行定时任务。</p><p><strong>@Component 加在类名上，代表这个类确保会被springboot扫描到</strong><br><strong>@Scheduled 加在方法名上来声明下面的方法是一个定时任务，注解的括号里包括 cron，fixDelay，fixRate 等类型</strong><br><strong>@EnableScheduling 加在启动类上，意思是 开启定时器任务</strong></p><p>下面有各注解和参数的详解。</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="一、新建Java-Springboot项目"><a href="#一、新建Java-Springboot项目" class="headerlink" title="一、新建Java Springboot项目"></a>一、新建Java Springboot项目</h1><p>选择Spring Initializr进行创建<br><img src="https://img-blog.csdnimg.cn/503219d5137446ea862d042ef63a820b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h1 id="二、示例代码"><a href="#二、示例代码" class="headerlink" title="二、示例代码"></a>二、示例代码</h1><p>我们像往常的写法一样，把Springboot的结构随便写一写。<br><img src="https://img-blog.csdnimg.cn/18bf66e27f7f43889aa2d74d73a92315.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_7,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><p>首先是service和impl的代码，没什么不同</p><p>IDemoService：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IDemoService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">demo</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>DemoServiceImpl：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.service.IDemoService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">IDemoService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">demo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><p>不同的是controller层和启动主类</p><p>下面是DemoController代码，注意看，我多加了@Component注解，下面的demo()方法上面多加了一个@Scheduled(fixedRate &#x3D; 3000)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.service.IDemoService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Scheduled;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IDemoService demoService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Scheduled(fixedRate = 3000)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">demo</span><span class="params">()</span> &#123;</span><br><span class="line">        demoService.demo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>@Component 代表这个类确保会被springboot扫描到</strong><br><strong>@Scheduled 来声明下面的方法是一个定时任务，注解的括号里包括 cron，fixDelay，fixRate 等类型</strong><br><strong>@Scheduled(fixedRate &#x3D; 3000)里的fixedRate &#x3D; 3000代表每3000毫秒执行一次，也就是3秒</strong></p><p><strong>也可以写@Scheduled(cron&#x3D;”0&#x2F;3 * *  * * ? “)  意思也是每3秒执行一次，cron表达式大家可以百度一下，比较复杂的执行逻辑可以用，很简单</strong></p><p>@Scheduled注解可以控制方法定时执行，括号里参数可选</p><p>1、fixedDelay控制方法执行的间隔时间，是以上一次方法执行完开始算起，如上一次方法执行阻塞住了，那么直到上一次执行完，并间隔给定的时间后，执行下一次。</p><p>2、fixedRate是按照一定的速率执行，是从上一次方法执行开始的时间算起，如果上一次方法阻塞住了，下一次也是不会执行，但是在阻塞这段时间内累计应该执行的次数，当不再阻塞时，一下子把这些全部执行掉，而后再按照固定速率继续执行。</p><p>3、cron表达式可以定制化执行任务，但是执行的方式是与fixedDelay相近的，也是会按照上一次方法结束时间开始算起。</p><p>4、initialDelay 。如： @Scheduled(initialDelay &#x3D; 10000,fixedRate &#x3D; 15000<br>这个定时器就是在上一个的基础上加了一个initialDelay &#x3D; 10000 意思就是在容器启动后,延迟10秒后再执行一次定时器,以后每15秒再执行一次该定时器。</p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><p>DemoApplication启动类代码</p><p><strong>上面新加了@EnableScheduling注解，意思是 开启定时器任务</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="运行效果"><a href="#运行效果" class="headerlink" title="运行效果"></a>运行效果</h1><p>启动DemoApplication，效果如下，每3秒输出一次时间，也就是DemoController下面的demo方法被每3秒执行了一次，而且会一直运行，不会停止。</p><p><img src="https://img-blog.csdnimg.cn/d47e056ff1f94ce6b0faf9e24500f4af.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_14,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>定时任务可以干很多事情，可以自定义执行方法，比如每天0点自动调用一次接口更新数据库数据，等等</p><p>如果想要让Springboot项目执行1天以后或者执行100次以后自动停止定时任务，以及更复杂的执行逻辑，就要使用定时任务框架quartz、xxl-job-elastic-job了，后面会写</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue使用alibaba的iconfont矢量图标</title>
      <link href="/2021/11/30/Vue%E4%BD%BF%E7%94%A8alibaba%E7%9A%84iconfont%E7%9F%A2%E9%87%8F%E5%9B%BE%E6%A0%87/"/>
      <url>/2021/11/30/Vue%E4%BD%BF%E7%94%A8alibaba%E7%9A%84iconfont%E7%9F%A2%E9%87%8F%E5%9B%BE%E6%A0%87/</url>
      
        <content type="html"><![CDATA[<h4 id="网上有很多引入方法，官方也给出了三种引入方法，但是大多数人引入后都不会显示，或者是不能自定义样式，下面这种方法不会存在上面的那些问题，是目前最好的引入方式。"><a href="#网上有很多引入方法，官方也给出了三种引入方法，但是大多数人引入后都不会显示，或者是不能自定义样式，下面这种方法不会存在上面的那些问题，是目前最好的引入方式。" class="headerlink" title="网上有很多引入方法，官方也给出了三种引入方法，但是大多数人引入后都不会显示，或者是不能自定义样式，下面这种方法不会存在上面的那些问题，是目前最好的引入方式。"></a>网上有很多引入方法，官方也给出了三种引入方法，但是大多数人引入后都不会显示，或者是不能自定义样式，下面这种方法不会存在上面的那些问题，是目前最好的引入方式。</h4><hr><p>1、网址 <a href="https://www.iconfont.cn/">阿里巴巴矢量图库</a> ，要求登陆后使用，先注册登录吧</p><p>2、登陆后，搜索想要的图标，比如用户、购物车什么的<br><img src="https://img-blog.csdnimg.cn/b6f0df920777462cbb64392f2d377772.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>3、鼠标移动到想要的图标上，点击“添加入库”，建议不要直接用复制SVG代码引入或者其他引入方式，先加入库在下载下来是最好的选择。<br><img src="https://img-blog.csdnimg.cn/d1a0ade2f544471c882d0fa457122505.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_17,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>4、打开网址右上角的购物车，将所选的图标“添加至项目”<br><img src="https://img-blog.csdnimg.cn/f4ec8caca39a4a61839c8ffa84e10b5f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_8,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>5、下载至本地，会得到一个压缩包，解压到当前文件夹</p><p><img src="https://img-blog.csdnimg.cn/d6ed0d1b1fd14131bb6ef7b4fc953252.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>6、会出现这些内容，将除了demo开头的所有文件全部复制进项目的“asset”文件夹下的“iconfont”文件夹，没有的话自己新建文件夹<img src="https://img-blog.csdnimg.cn/fd94833cf0af4c0a9b0e96a6cd80cad1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_17,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/d2bcc277fb344015b919f1ade4c62a0d.png" alt="在这里插入图片描述"></p><hr><p>7、接下来用浏览器打开解压出来的文件夹里的demo_index.html，这些代码就是对应的每个图标，等下要用到<br><img src="https://img-blog.csdnimg.cn/1a9fc9fa884c408e844906e0fb897804.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_19,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>8、在代码中这样写，你的项目网页就会显示第一个图标，上图&#x3D;&#x3D; &amp;#xe601 &#x3D;&#x3D;对应的那个图标</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe601;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="string">&#x27;../asset/iconfont/iconfont.css&#x27;</span>; <span class="comment">//这里是你的iconfont.css路径，和我的可能不一</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p>9、要修改图标样式，就在style标签里修改.iconfont类就可以了</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe601;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="string">&#x27;../asset/iconfont/iconfont.css&#x27;</span>; <span class="comment">//这里是你的iconfont.css路径，和我的可能不一</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.iconfont</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-style</span>: normal;</span></span><br><span class="line"><span class="language-css">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span></span><br><span class="line"><span class="language-css">  -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p>10、结束，在哪个页面使用图标就在哪个页面先 <code>import &#39;../asset/iconfont/iconfont.css&#39;;</code> 一下就可以了</p><p>11、&#x3D;&#x3D;注意&#x3D;&#x3D;，如果还想从阿里矢量图库新添加一些图标，则需要删除项目里的iconfont文件夹，重新从本文章第2步开始，选择，下载，引入</p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>摄影 闪光灯同步（前帘同步，后帘同步，后期堆栈）</title>
      <link href="/2021/11/27/%E6%91%84%E5%BD%B1%20%E9%97%AA%E5%85%89%E7%81%AF%E5%90%8C%E6%AD%A5%EF%BC%88%E5%89%8D%E5%B8%98%E5%90%8C%E6%AD%A5%EF%BC%8C%E5%90%8E%E5%B8%98%E5%90%8C%E6%AD%A5%EF%BC%8C%E5%90%8E%E6%9C%9F%E5%A0%86%E6%A0%88%EF%BC%89/"/>
      <url>/2021/11/27/%E6%91%84%E5%BD%B1%20%E9%97%AA%E5%85%89%E7%81%AF%E5%90%8C%E6%AD%A5%EF%BC%88%E5%89%8D%E5%B8%98%E5%90%8C%E6%AD%A5%EF%BC%8C%E5%90%8E%E5%B8%98%E5%90%8C%E6%AD%A5%EF%BC%8C%E5%90%8E%E6%9C%9F%E5%A0%86%E6%A0%88%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><font color=#999AAA >当需要进行长曝光拍摄，如前景和后景亮度差异较大的照片，或者拍摄记录运行轨迹的照片，又或者拍摄人像站在车流中的照片时，单纯的长曝光拍出的照片往往有些差强人意，这时候的拍摄就需要用到闪光灯同步技巧。先给大家展示一下不同同步方式的效果，再为大家介绍原理。</font></p><h1 id="一、闪光灯同步成像结果"><a href="#一、闪光灯同步成像结果" class="headerlink" title="一、闪光灯同步成像结果"></a>一、闪光灯同步成像结果</h1><p><font color=#999AAA > 闪光灯同步原本是指相机与闪光灯能够正常工作下的最高快门速度，随着摄影技术的发展，现在衍生出前帘同步和后帘同步，统称为慢同步。</p><h2 id="前帘同步"><a href="#前帘同步" class="headerlink" title="前帘同步"></a>前帘同步</h2><p><font color=#999AAA > 前帘同步是在快门完全开启的瞬间，开启闪光灯，随后熄灭，进行长曝光。</p><p><font color=#999AAA > 常用来拍摄前景亮度较低，后景亮度高的照片，如人像车轨。如果不使用前帘同步，而是直接长曝光，会出现后方车辆灯光太强过曝，而人物还是黑暗的情况。</p><p><img src="https://img-blog.csdnimg.cn/a3415938e880417daa376302fac5d86f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h2 id="后帘同步"><a href="#后帘同步" class="headerlink" title="后帘同步"></a>后帘同步</h2><p><font color=#999AAA > 后帘同步是先进行长曝光，然后在曝光结束的时候，快门开始关闭的瞬间，开启闪光灯。</p><p><font color=#999AAA > 常用来凸显物体的运动轨迹，但是同时可以清晰的记录物体的最后状态，如下图。如果不使用前帘同步，而是直接长曝光，不会记录到人物的具体形态，会全部是虚影。</p><p><img src="https://img-blog.csdnimg.cn/2b9ddc89b72d4f8b97d100a6a98b06aa.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="二、曝光原理"><a href="#二、曝光原理" class="headerlink" title="二、曝光原理"></a>二、曝光原理</h1><p><font color=#999AAA >长曝光情况下，可以理解为快门一直在记录景物的亮度，之所以可以拍出来车流，而不留下车辆本身的身影，是因为车辆车辆和马路亮度差不多，而灯光却比它们亮的多。</p><p><font color=#999AAA >比如曝光时间3s，马路的任意位置的亮度都被记录了将近3s，只有汽车驶过的0.几秒的时间里遮挡了马路，才没有被记录，汽车是移动的，汽车在每个位置被记录的时间只是0.几秒，所以马路被记录的亮度远大于汽车被记录的亮度，所以汽车被马路的光盖住了，而灯的轨迹可以被记录是因为车灯太亮了，即使0.几秒的记录，亮度也比道路和车辆大很多。</p><p><font color=#999AAA >如果是短曝光，在晚上大家拍出来的形势比较快的车是会有重影的，因为拍摄时间在0.0几秒内完成，各部分被记录的亮度几乎相同，所以都会显示出来。</p><p><font color=#999AAA >放一张经典的前帘同步和后帘同步的对比图，现在大家肯定可以区分两种同步方式的成像效果了<br><img src="https://img-blog.csdnimg.cn/f0073fb2b55f4b71b85c913a84a2bec9.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_14,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="三、后期堆栈实现闪光灯慢同步效果"><a href="#三、后期堆栈实现闪光灯慢同步效果" class="headerlink" title="三、后期堆栈实现闪光灯慢同步效果"></a>三、后期堆栈实现闪光灯慢同步效果</h1><p><font color=#999AAA >别问，问就是博主玩不起相机，只能用手机，而手机我目前使用过的没有见过支持闪光灯慢同步的。但是可以通过PS后期实现慢同步效果。</p><p><font color=#999AAA >堆栈就是多张照片叠加，在索尼和三星都没有支持那么高像素的ISP的2017年，小米的6400万像素就是使用了类似堆栈的合成技术，堆栈技术不仅可以实现慢同步效果，还可以实现平静的湖面和车流量太少的车轨问题，还可以进行照片降噪等，操作方法都一样。</p><p><font color=#999AAA >比如我昨天拍摄的车流，环境亮度太高，而车流量又小，所以不能进行长时间曝光而且拍摄的车轨只有一两条，我拍了2张这样的照片，理论上照片越多效果越好，因为我是一时心血来潮，没有准备，只拍了2张。大家拍摄的时候一定不要移动相机位置，我拍摄的时候移动了位置，所以堆栈以后照片很诡异。先开始吧。</p><p><font color=#999AAA >1、打开PS，点击“文件”</p><p><img src="https://img-blog.csdnimg.cn/1eb8475b196346399a7e4988766c3c9d.png" alt="在这里插入图片描述"><br><font color=#999AAA >2、文件下面有“脚本”，里面有“将文件载入堆栈”</p><p><img src="https://img-blog.csdnimg.cn/adfa534c1cdb4066ad105221309c516a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_12,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><font color=#999AAA >3、”浏览”，多选文件，“打开”</p><p><img src="https://img-blog.csdnimg.cn/e6955a10a00c4f6f83acfcaf5b34c353.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_13,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f27bdc8b63314ce48f4573e17f206f3d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >4、点击菜单栏的“图层”</p><p><img src="https://img-blog.csdnimg.cn/da6402b7f02745f68b589708baaf99ac.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_16,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >3、图层下面有“智能对象”，如果“智能对象”里面的选项是灰色的，就点击，“转换为智能对象”。<br><img src="https://img-blog.csdnimg.cn/04e24bcb3a6a46d09cca44c6e3e5d753.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_14,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >4、然后就不是灰色了，点击“智能对象”里面的“堆栈模式”</p><p><img src="https://img-blog.csdnimg.cn/dcc4ae59c3fa4c468a2f8b53c7f0851a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_12,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><font color=#999AAA >4、然后就不是灰色了，点击“智能对象”里面的“堆栈模式”，建议选择“最大值”，因为效果明显，大家自己调。</p><p><font color=#999AAA >【平均值】：所有非透明像素的平均通道值渲染，简单来说就是模拟长曝光，譬如上图说的用的就是平均值堆栈，堆栈后可以有效降低噪点，提升画质，另外还能带来长爆的效果，多用于拍摄有水面、流动的云彩这样的照片。</p><p><font color=#999AAA >【中间值】：所有非透明像素的中间通道值，对减少杂色和从图像中移去不需要的内容很有效果。多用来降噪，或者“广场去人”这种照片。</p><p><font color=#999AAA >【最大值】：所有非透明像素的最大通道值。一般用于星轨的后期，将最亮的点进行叠加。</p><p><font color=#999AAA >5、效果对比</p><p>————————————————————–堆栈之前————————————————————–<br><img src="https://img-blog.csdnimg.cn/c831c0de4f1c464e9b7e26e104dd91d9.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_9,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>————————————————————–堆栈之后—————————————————————</p><p><img src="https://img-blog.csdnimg.cn/0cbc7b98f038477ba933e2ef1264b74d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_10,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1"><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><font color=#999AAA >可以看到2张照片的车流叠加在了一起，照片很诡异，因为是随手拍的两张，手中没有好的照片。</p><p><font color=#999AAA >上面为大家演示的是车轨的堆栈，如果想拍摄上面前帘同步的人像车轨，可以先把车轨堆栈，然后在同一个位置，正常拍摄出人像，叠加上去就可以了。同样流云、水流、平静湖面也是一样的操作。</p><p>相信大家会合成出很棒的照片。</p><p><img src="https://img-blog.csdnimg.cn/280ac6c1002a466ca9ac8cd712c3c433.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/6635074ef5c34c0da4490b250280eb03.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_13,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> 摄影 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摄影 </tag>
            
            <tag> 随便写写 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>给兰姐姐的苹果爱思下载和使用教程</title>
      <link href="/2021/10/25/%E7%BB%99%E5%85%B0%E5%A7%90%E5%A7%90%E7%9A%84%E8%8B%B9%E6%9E%9C%E7%88%B1%E6%80%9D%E4%B8%8B%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
      <url>/2021/10/25/%E7%BB%99%E5%85%B0%E5%A7%90%E5%A7%90%E7%9A%84%E8%8B%B9%E6%9E%9C%E7%88%B1%E6%80%9D%E4%B8%8B%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>爱思助手 又称爱思苹果刷机助手，是一款专业的苹果刷机助手、苹果越狱助手。免费为苹果用户提供百万正版苹果软件，不越狱也能安装。 爱思助手是全球首款集一键查询shsh、一键备份shsh、一键刷机、一键越狱功能于一身的强大利器。</p><hr><h1 id="如何安装"><a href="#如何安装" class="headerlink" title="如何安装"></a>如何安装</h1><h2 id="1、下载："><a href="#1、下载：" class="headerlink" title="1、下载："></a>1、下载：</h2><p><strong>请使用电脑查看本篇文章！！！要先在电脑上操作！！！</strong></p><p><a href="https://www.i4.cn/pros.html">点击这里去官网下载爱思助手</a>，进去以后点击这里下面图片标记的这里就开始下载啦</p><p><img src="https://img-blog.csdnimg.cn/581bfc6bd4fa4550bdb5730262100c28.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><h2 id="2、安装"><a href="#2、安装" class="headerlink" title="2、安装"></a>2、安装</h2><p><strong><font color=red>一定要看完再安装！！！</font></strong></p><p>&#x3D;&#x3D;首先双击下好的安装包&#x3D;&#x3D;<br><img src="https://img-blog.csdnimg.cn/8ef1874b8caf42909ba81594ac20628b.png" alt="在这里插入图片描述"><br>然后是这个样子，注意了！我们点一下这个<font color=red>“自定义安装”</font>，会弹出来这样，然后把<font color=red>“C”</font>改为<font color=red>“D”</font>，改完以后像下面这样。然后点击<font color=red>“安装”</font><br><img src="https://img-blog.csdnimg.cn/39e310d9816748f5a736975b4b74151b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_14,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>&#x3D;&#x3D;安装完成后第一次进去是这样，会自动下载一些东西，等着&#x3D;&#x3D;<br><img src="https://img-blog.csdnimg.cn/9ef4477f23814c32804aab5e7c83028f.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><h1 id="开始操作啦"><a href="#开始操作啦" class="headerlink" title="开始操作啦"></a>开始操作啦</h1><p>&#x3D;&#x3D;大概5分钟，等它自己完事儿&#x3D;&#x3D;</p><hr><h2 id="信任电脑"><a href="#信任电脑" class="headerlink" title="信任电脑"></a>信任电脑</h2><p>&#x3D;&#x3D;然后，先把你的iPad屏幕解锁！！！然后用线把手机插在电脑上，这时候，手机屏幕上会马上出现<font color=red>“要信任此电脑吗？”</font>，当然是<font color=red>“信任”</font>啦&#x3D;&#x3D;</p><p><img src="https://img-blog.csdnimg.cn/a6b0b9a6efba4d61b5352c612d872265.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>&#x3D;&#x3D;然后点完以后可能会让你输入屏幕解锁密码&#x3D;&#x3D;<br><img src="https://img-blog.csdnimg.cn/e58444bb320e45cc978df6da2dba5292.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>&#x3D;&#x3D;信任电脑以后，电脑上的软件会变成这样，点击确定&#x3D;&#x3D;</p><p><img src="https://img-blog.csdnimg.cn/8a3c5f80a6f8480d992eef691f55efed.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><h2 id="控制电脑给手机安装爱思"><a href="#控制电脑给手机安装爱思" class="headerlink" title="控制电脑给手机安装爱思"></a>控制电脑给手机安装爱思</h2><p>&#x3D;&#x3D;保持你的iPad屏幕解锁，看到这个选项没有，点它&#x3D;&#x3D;<br><img src="https://img-blog.csdnimg.cn/15d4ea73ef704bf892496c8c45bd5566.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>&#x3D;&#x3D;然后等待20秒，喝一杯热水&#x3D;&#x3D;<img src="https://img-blog.csdnimg.cn/fb87b57f91744e2dbea84657047941ba.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>&#x3D;&#x3D;大功告成，点开它&#x3D;&#x3D;</p><h1 id="开始下载喜欢的软件啦"><a href="#开始下载喜欢的软件啦" class="headerlink" title="开始下载喜欢的软件啦"></a>开始下载喜欢的软件啦</h1><p><font color=red>但是！！！！！注意</font></p><p>&#x3D;&#x3D;点开一下，它要什么权限都点一下同意就行了，然后放下手机，剩下的去电脑上操作，因为手机上有的软件搜不到，还是在电脑上操作！不要拔掉手机哦&#x3D;&#x3D;</p><p><img src="https://img-blog.csdnimg.cn/8c01709228434704b28acac6b3ae27d2.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><hr><p>&#x3D;&#x3D;电脑上，点击<font color=red>“应用游戏”</font>，选择<font color=red>“iPad”</font>，我们来下载一个iPad上最好的画画软件，搜索框搜索<font color=blue>procreate pocket</font>，然后点击安装&#x3D;&#x3D;<br><img src="https://img-blog.csdnimg.cn/a8ea2e020efc4c3285ac7c967593d415.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>&#x3D;&#x3D;等它下载安装完，手机上就可以用啦&#x3D;&#x3D;</p><hr><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p><strong><font color=pink>简单吗宝儿</font></strong></p>]]></content>
      
      
      <categories>
          
          <category> 随便写写 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随便写写 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vuex.Store里mutations和actions的区别，并实现异步加载的延时计数器</title>
      <link href="/2021/05/10/Vuex.Store%E9%87%8Cmutations%E5%92%8Cactions%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E5%B9%B6%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E7%9A%84%E5%BB%B6%E6%97%B6%E8%AE%A1%E6%95%B0%E5%99%A8/"/>
      <url>/2021/05/10/Vuex.Store%E9%87%8Cmutations%E5%92%8Cactions%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E5%B9%B6%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E7%9A%84%E5%BB%B6%E6%97%B6%E8%AE%A1%E6%95%B0%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>mutations和actions都是Vuex.Store里定义函数的方法</p><p>mutations定义的函数的参数都有一个state，表示store里的整个state数据，同步加载</p><p>actions定义的函数里的参数是content，代表整个store对象，用于异步加载</p><h1 id="先上代码在说话"><a href="#先上代码在说话" class="headerlink" title="先上代码在说话"></a>先上代码在说话</h1><p>便于比较，我把mutations和actions写到了一起</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>store-mutations和actions实现的计数器<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vuex.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>mutations<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add1&quot;</span>&gt;</span>actions<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">state</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">count</span>:<span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//mutations定义的函数的参数都是state，表示整个state数据，同步加载</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">mutations</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params">state,value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    state.<span class="property">count</span>++,</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(state);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//actions定义的函数使用dispatch触发，函数里的content是整个store对象，异步加载</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">actions</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params">content</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(content);</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;   <span class="comment">//设置延迟执行</span></span></span><br><span class="line"><span class="language-javascript">                        content.<span class="title function_">commit</span>(<span class="string">&quot;add&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;,<span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            store,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">pare</span>:<span class="string">&quot;五一劳动节&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//pare可以传递到mutations的add方法里，在控制台输出pare</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;add&quot;</span>,<span class="variable language_">this</span>.<span class="property">pare</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">add1</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;add&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">computed</span>:<span class="title class_">Vuex</span>.<span class="title function_">mapState</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">count</span>:<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">count</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h1><p>DOM结构是这样的</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>mutations<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add1&quot;</span>&gt;</span>actions<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>两个按钮分别调用了Vue里的add和add1方法，add和add1的区别在于commit和dispatch</p><p>我还在commit里面加上了一个参数pare，这个pare是定义在Vue的data里的，值是“五一劳动节”，这个值可以传递到mutations里的add方法里，下面会介绍</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">       <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">//pare可以传递到mutations的add方法里，在控制台输出pare</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;add&quot;</span>,<span class="variable language_">this</span>.<span class="property">pare</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">add1</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;add&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><p>commit调用的是mutations里的add方法，dispatch调用的是actions里的add方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>:&#123;</span><br><span class="line">         <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">             state.<span class="property">count</span>++,</span><br><span class="line">             <span class="variable language_">console</span>.<span class="title function_">log</span>(state);</span><br><span class="line">             <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="comment">//actions定义的函数使用dispatch触发，函数里的content是整个store对象，异步加载</span></span><br><span class="line"><span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params">content</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(content);</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;   <span class="comment">//设置延迟执行</span></span><br><span class="line">            content.<span class="title function_">commit</span>(<span class="string">&quot;add&quot;</span>)</span><br><span class="line">        &#125;,<span class="number">1000</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="运行代码"><a href="#运行代码" class="headerlink" title="运行代码"></a>运行代码</h1><p><img src="https://img-blog.csdnimg.cn/20210510113954880.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>如上图，我们先点击mutations按钮，右边控制台输出了mutations里add方法的state的值和传来的pare的值</p><p>接下来我们再点击actions按钮，右边控制台输出了actions里add方法的content的值，content的值里面包含上面的state<br><img src="https://img-blog.csdnimg.cn/20210510114826664.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="异步加载延时计数器"><a href="#异步加载延时计数器" class="headerlink" title="异步加载延时计数器"></a>异步加载延时计数器</h1><p>看这一段代码，我们在actions的add方法里面，并没有直接使用count++来使计数加1，而是调用了mutations里的add方法来进行加1，目的就是实现异步加载，把commit(“add”)放在setTiomeout里面，代表1000毫秒以后调用mutations里的add方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>:&#123;</span><br><span class="line">         <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">             state.<span class="property">count</span>++,</span><br><span class="line">             <span class="variable language_">console</span>.<span class="title function_">log</span>(state);</span><br><span class="line">             <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="comment">//actions定义的函数使用dispatch触发，函数里的content是整个store对象，异步加载</span></span><br><span class="line"><span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params">content</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(content);</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;   <span class="comment">//设置延迟执行</span></span><br><span class="line">            content.<span class="title function_">commit</span>(<span class="string">&quot;add&quot;</span>)</span><br><span class="line">        &#125;,<span class="number">1000</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当然你也可以直接写成</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;   <span class="comment">//设置延迟执行</span></span><br><span class="line">               content.<span class="property">state</span>.<span class="property">count</span>++</span><br><span class="line">          &#125;,<span class="number">1000</span>);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue动态路由的Query和Params传参方式</title>
      <link href="/2021/05/10/Vue%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84Query%E5%92%8CParams%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F/"/>
      <url>/2021/05/10/Vue%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84Query%E5%92%8CParams%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="一、Query传参"><a href="#一、Query传参" class="headerlink" title="一、Query传参"></a>一、Query传参</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态路由Query方式<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue-router.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">tag</span>=<span class="string">&quot;div&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/login?id=1111&amp;name=2222&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;lg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;&#123;this.$route.query.id&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="title class_">Login</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">template</span>:<span class="string">&quot;#lg&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">routes</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">path</span>:<span class="string">&quot;/login&quot;</span>,<span class="attr">component</span>:<span class="title class_">Login</span>&#125;</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            router</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="二、Params传参"><a href="#二、Params传参" class="headerlink" title="二、Params传参"></a>二、Params传参</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态路由params方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue-router.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">tag</span>=<span class="string">&quot;div&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/login/1111/2222&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;lg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;&#123;this.$route.params.id&#125;&#125;&#123;&#123;this.$route.params.name&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="title class_">Login</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">template</span>:<span class="string">&quot;#lg&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">routes</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">path</span>:<span class="string">&quot;/login/:name/:id&quot;</span>,<span class="attr">component</span>:<span class="title class_">Login</span>&#125;</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            router</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="两种传参方式的区别"><a href="#两种传参方式的区别" class="headerlink" title="两种传参方式的区别"></a>两种传参方式的区别</h1><h2 id="Query"><a href="#Query" class="headerlink" title="Query"></a>Query</h2><p>Query方法的router-link里面的to，to&#x3D;”&#x2F;login?id&#x3D;1111&amp;name&#x3D;2222”，<br>路由配置是</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var router = new VueRouter(&#123;</span><br><span class="line">            routes: [</span><br><span class="line">                &#123;path:&quot;/login&quot;,component:Login&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure><p>Query方式的网页地址栏后面是这样：<br><img src="https://img-blog.csdnimg.cn/20210510110403931.png" alt="在这里插入图片描述"></p><h2 id="Params"><a href="#Params" class="headerlink" title="Params"></a>Params</h2><p>Params方法的router-link里面的to，to&#x3D;”&#x2F;login&#x2F;1111&#x2F;2222”，<br>路由配置是</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var router = new VueRouter(&#123;</span><br><span class="line">           routes: [</span><br><span class="line">               &#123;path:&quot;/login/:name/:id&quot;,component:Login&#125;</span><br><span class="line">           ]</span><br><span class="line">       &#125;)</span><br></pre></td></tr></table></figure><p>Params方式的网页地址栏后面是这样：<br><img src="https://img-blog.csdnimg.cn/20210510110420216.png" alt="在这里插入图片描述"><br>注意Params传参的路由配置里，我故意把path里写成{path:”&#x2F;login&#x2F;:name&#x2F;:id”,component:Login}，把name放到了前面，所以name排在第一位，对应router-link里面的to&#x3D;”&#x2F;login&#x2F;1111&#x2F;2222”的第一位“1111”</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;this.$route.params.id&#125;&#125;&#123;&#123;this.$route.params.name&#125;&#125;</span><br></pre></td></tr></table></figure><p>这两句获取参数是下面这样的，也就是id是2222，name是1111<br><img src="https://img-blog.csdnimg.cn/20210510111041254.png" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MapReduce基础编程，Hadoop实现WordCount实例（打包上传到Linux服务器运行）</title>
      <link href="/2021/04/29/MapReduce%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B%EF%BC%8CHadoop%E5%AE%9E%E7%8E%B0WordCount%E5%AE%9E%E4%BE%8B%EF%BC%88%E6%89%93%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8C%EF%BC%89/"/>
      <url>/2021/04/29/MapReduce%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B%EF%BC%8CHadoop%E5%AE%9E%E7%8E%B0WordCount%E5%AE%9E%E4%BE%8B%EF%BC%88%E6%89%93%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="没有配置好环境的同学看我的传送门"><a href="#没有配置好环境的同学看我的传送门" class="headerlink" title="没有配置好环境的同学看我的传送门"></a>没有配置好环境的同学看我的传送门</h1><p><a href="https://blog.csdn.net/qq_48922459/article/details/115515516">Deepin（Ubuntu通用）安装Hadoop伪分布环境（集成Hbase、Hive、MySQL、Spark、Scala）</a></p><hr><h1 id="1、在Windows下下载Hadoop"><a href="#1、在Windows下下载Hadoop" class="headerlink" title="1、在Windows下下载Hadoop"></a>1、在Windows下下载Hadoop</h1><p><a href="https://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-3.2.2/hadoop-3.2.2.tar.gz">Hadoop下载地址</a></p><p>bfsu这个镜像最快，清华的经常断<br><img src="https://img-blog.csdnimg.cn/20210429181140851.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>下载完成后解压</p><hr><h1 id="2、使用idea新建Java工程"><a href="#2、使用idea新建Java工程" class="headerlink" title="2、使用idea新建Java工程"></a>2、使用idea新建Java工程</h1><p>新建一个普通的java项目就行，jdk最好用1.8，不然有可能会报错</p><p>首先在新建的项目文件夹里新建一个文件夹，存放要导入的jar包<br><img src="https://img-blog.csdnimg.cn/20210429184017828.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>将下载的Hadoop解压后share里面的这五个文件夹里的jar包全部粘贴到项目目录下新建的“引入的jar包”内<br><img src="https://img-blog.csdnimg.cn/20210429184114827.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210429184159149.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>在 idea 中配置引入的 jar 包</p><p><img src="https://img-blog.csdnimg.cn/20210429184244518.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>选择自己新建的存放 jar 包的文件夹</p><p><img src="https://img-blog.csdnimg.cn/20210429184313537.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><hr><h1 id="3、编写代码"><a href="#3、编写代码" class="headerlink" title="3、编写代码"></a>3、编写代码</h1><p>新建 WordCount java 文件<br><img src="https://img-blog.csdnimg.cn/20210429184438317.png" alt="在这里插入图片描述"></p><p>代码如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WordCount_final</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">WordCount_final</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="comment">//第一个表示输入key的类型；第二个Text表示输入value的类型；第三个Text表示表示输出键的类型；第四个IntWritable表示输出值的类型</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WordCountMapper</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;LongWritable, Text, Text, IntWritable&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//对数据进行打散</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">map</span><span class="params">(LongWritable key, Text value, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException</span><br><span class="line">        &#123;</span><br><span class="line"><span class="comment">//System.out.println(&quot;Map function: &quot; + value);</span></span><br><span class="line">            <span class="comment">//1.接收到的每行数据转换成字符串</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> value.toString();</span><br><span class="line">            <span class="comment">//2.按照指定分隔符进行分隔</span></span><br><span class="line">            String[] words = line.split(<span class="string">&quot; &quot;</span>);<span class="comment">// 注意此处的分割符</span></span><br><span class="line">            <span class="comment">//3.输出结果以&lt;key,value&gt;形式</span></span><br><span class="line">            <span class="keyword">for</span>(String w : words)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//写到Reducer端</span></span><br><span class="line">                context.write(<span class="keyword">new</span> <span class="title class_">Text</span>(w), <span class="keyword">new</span> <span class="title class_">IntWritable</span>(<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//自定义一个reduce类，归并</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WordCountReducer</span> <span class="keyword">extends</span> <span class="title class_">Reducer</span>&lt;Text, IntWritable, Text, IntWritable&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//key是单词，values是次数</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reduce</span><span class="params">(Text key, Iterable&lt;IntWritable&gt; values, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//1.reduce参数中values是一个集合，表示相同单词出现的次数，可能有好几个1，所以要求和</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (IntWritable v : values)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//统计单词key出现的次数</span></span><br><span class="line">                sum += v.get();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//2.最终统计结果的输出,即&lt;k3,v3&gt;,</span></span><br><span class="line">            context.write(key, <span class="keyword">new</span> <span class="title class_">IntWritable</span>(sum));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//封装MapReduce作业的所有信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, InterruptedException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (args.length != <span class="number">2</span>)<span class="comment">// debug only!</span></span><br><span class="line">        &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;Usage: WordCount &lt;PathToInputFile&gt; &lt;PathToOutput&gt;&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.创建Job任务</span></span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">conf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建Job之前，准备清理已经存在的输出目录</span></span><br><span class="line">        Path outputPath= <span class="keyword">new</span> <span class="title class_">Path</span>(args[<span class="number">1</span>]);</span><br><span class="line">        <span class="type">FileSystem</span> <span class="variable">fileSystem</span> <span class="operator">=</span>FileSystem.get(conf);</span><br><span class="line">        <span class="keyword">if</span>(fileSystem.exists(outputPath))&#123;</span><br><span class="line">            fileSystem.delete(outputPath,<span class="literal">true</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;输出文件夹存在且已被删除&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.创建job，通过getInstance 拿到一个实例</span></span><br><span class="line">        <span class="type">Job</span> <span class="variable">job</span> <span class="operator">=</span> Job.getInstance(conf, <span class="string">&quot;word counter&quot;</span>);</span><br><span class="line">        <span class="comment">//3.指定Jar包位置</span></span><br><span class="line">        job.setJarByClass(WordCount_final.class);</span><br><span class="line">        <span class="comment">//4.关联使用的Mapper类</span></span><br><span class="line">        job.setMapperClass(WordCountMapper.class);</span><br><span class="line">        <span class="comment">//5.关联使用的Reducer类</span></span><br><span class="line">        job.setReducerClass(WordCountReducer.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.设置Mapper阶段输出的数据类型</span></span><br><span class="line">        job.setMapOutputKeyClass(Text.class);</span><br><span class="line">        job.setMapOutputValueClass(IntWritable.class);</span><br><span class="line"><span class="comment">//System.out.println(&quot;setMapOutputKeyClass: &quot; + Text.class.toString());</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//7.设置Reducer阶段输出的数据类型</span></span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(IntWritable.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//8.设置数据输入的路径</span></span><br><span class="line">        FileInputFormat.setInputPaths(job, <span class="keyword">new</span> <span class="title class_">Path</span>(args[<span class="number">0</span>]));</span><br><span class="line">        <span class="comment">//9.设置数据输出的路径</span></span><br><span class="line">        FileOutputFormat.setOutputPath(job, <span class="keyword">new</span> <span class="title class_">Path</span>(args[<span class="number">1</span>]));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//10.提交任务</span></span><br><span class="line">        <span class="comment">//参数true表示将运行进度等信息及时输出给用户，false的话只是等待作业结束</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">rs</span> <span class="operator">=</span> job.waitForCompletion(<span class="literal">true</span>);</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(rs ? <span class="string">&quot;wow, succeed!&quot;</span> : <span class="string">&quot;not so bad&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.exit(rs ? <span class="number">0</span> : <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后就可以运行了<br><img src="https://img-blog.csdnimg.cn/20210429184525316.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><hr><h1 id="4、将编写的Java项目导出成jar包"><a href="#4、将编写的Java项目导出成jar包" class="headerlink" title="4、将编写的Java项目导出成jar包"></a>4、将编写的Java项目导出成jar包</h1><p><img src="https://img-blog.csdnimg.cn/20210429184244518.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210429184710798.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点击OK<br><img src="https://img-blog.csdnimg.cn/20210429184800803.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点击OK<br><img src="https://img-blog.csdnimg.cn/20210429184818713.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后<br><img src="https://img-blog.csdnimg.cn/20210429185120137.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210429185137470.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>完成后就在项目目录下的 out 文件夹下的 artifacts 生成了 jar 包</p><p><img src="https://img-blog.csdnimg.cn/20210429184952876.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><hr><h1 id="5、将jar包导入到Linux"><a href="#5、将jar包导入到Linux" class="headerlink" title="5、将jar包导入到Linux"></a>5、将jar包导入到Linux</h1><p>进入到你的服务器的hadoop所在的文件夹，我的在 &#x2F;usr&#x2F;local&#x2F;hadoop 你们的可能不一样</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/hadoop</span><br></pre></td></tr></table></figure><p>在 hadoop 的 bin 文件夹下的 hadoop 文件夹创建文件夹 input</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hadoop fs -<span class="built_in">mkdir</span> /input</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/2021042918533672.png" alt="在这里插入图片描述"><br>把 jar 包复制到服务器<br>移动到创建的文件夹 input 里面<br>&#x2F;home&#x2F;xyj&#x2F;classes&#x2F;hadoop.jar 是jar包在我的服务器的位置， 这句话意思是把 jar 包移动到 &#x2F;input 文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/hadoop fs -put /home/xyj/classes/hadoop.jar /input</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210429185407526.png" alt="在这里插入图片描述"><br>查看是否上传成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -<span class="built_in">ls</span> /input</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210429185420292.png" alt="在这里插入图片描述"><br>输入 <code>bin/hadoop MapReduce-WordCount.jar wordcount /input /output</code>运行jar包</p><p>MapReduce-WordCount.jar为打包的jar包名，可能你们的不一样</p><p>即可获得运行结果</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>没有总结</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> MapReduce </tag>
            
            <tag> WordCount </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin（Ubuntu通用）安装Hadoop伪分布环境（集成Hbase、Hive、MySQL、Spark、Scala）</title>
      <link href="/2021/04/08/Deepin%EF%BC%88Ubuntu%E9%80%9A%E7%94%A8%EF%BC%89%E5%AE%89%E8%A3%85Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E7%8E%AF%E5%A2%83%EF%BC%88%E9%9B%86%E6%88%90Hbase%E3%80%81Hive%E3%80%81MySQL%E3%80%81Spark%E3%80%81Scala%EF%BC%89/"/>
      <url>/2021/04/08/Deepin%EF%BC%88Ubuntu%E9%80%9A%E7%94%A8%EF%BC%89%E5%AE%89%E8%A3%85Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E7%8E%AF%E5%A2%83%EF%BC%88%E9%9B%86%E6%88%90Hbase%E3%80%81Hive%E3%80%81MySQL%E3%80%81Spark%E3%80%81Scala%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="安装版本"><a href="#安装版本" class="headerlink" title="安装版本"></a>安装版本</h1><p>Hadoop3.2.2、Hbase2.4.2、Hive3.1.2、MySQL8.0.24、Spark3.1.1、Scala2.13.5<br>（即使可以，也不推荐使用apt安装，因为版本会报错，所有我下面均使用压缩包来安装）</p><h1 id="下载所有环境"><a href="#下载所有环境" class="headerlink" title="下载所有环境"></a>下载所有环境</h1><p><a href="https://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-3.2.2/hadoop-3.2.2.tar.gz">Hadoop3.2.2下载</a> bfsu这个镜像下载最快<img src="https://img-blog.csdnimg.cn/2021040811535278.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><a href="https://www.apache.org/dyn/closer.lua/hbase/2.4.2/hbase-2.4.2-bin.tar.gz">Hbase2.4.2下载</a></p><p><a href="https://mirrors.bfsu.edu.cn/apache/hive/hive-3.1.2/">Hive3.1.2下载</a>选择bin.tar.gz<br><img src="https://img-blog.csdnimg.cn/202104081155548.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><a href="https://spark.apache.org/downloads.html">Spark下载地址</a>记得第2栏选择Hadoop版本，本教程是3.2<br><img src="https://img-blog.csdnimg.cn/20210429112219860.png" alt="在这里插入图片描述"><br><a href="https://www.scala-lang.org/download/">Scala2.13.5下载地址</a> 进去官网后拉到最底部，选择第一个<br><img src="https://img-blog.csdnimg.cn/20210429121549278.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p><a href="https://dev.mysql.com/downloads/mysql/">MySQL下载地址</a></p><p>这里一定要选择这个Linux Generic<br><img src="https://img-blog.csdnimg.cn/20210429122843924.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>下载前面这两个，64位和32位根据自己电脑情况来选</p><h1 id="开启Deepin或Ubuntu（我用的是虚拟机）"><a href="#开启Deepin或Ubuntu（我用的是虚拟机）" class="headerlink" title="开启Deepin或Ubuntu（我用的是虚拟机）"></a>开启Deepin或Ubuntu（我用的是虚拟机）</h1><p>我用的是Deepin20（Debian10 Buster库）好看吧， 还有“QQ2008”<br><img src="https://img-blog.csdnimg.cn/20210408121049527.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="安装Hadoop"><a href="#安装Hadoop" class="headerlink" title="安装Hadoop"></a>安装Hadoop</h1><h4 id="1、安装和配置ssh"><a href="#1、安装和配置ssh" class="headerlink" title="1、安装和配置ssh"></a>1、安装和配置ssh</h4><p>首先在终端输入sudo apt-get update来更新一下apt的包列表（apt代表赋予管理员权限，建议每句命令都加上）<br><img src="https://img-blog.csdnimg.cn/20210429113302761.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>输入sudo apt-get install openssh-server回车，再输入sudo apt-get install openssh-client回车（Deepin可能已经预装了ssh，不过再输入一下确认一下也没什么）<br>Ubuntu安装是如下界面<br><img src="https://img-blog.csdnimg.cn/20210429114200199.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>Deepin已经安装过是如下界面<img src="https://img-blog.csdnimg.cn/20210429114312826.png" alt="在这里插入图片描述"><br>配置ssh无密码自动登录（很重要）</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> ssh localhost              <span class="comment">#登陆SSH，第一次登陆输入yes</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="keyword">exit</span>                       <span class="comment">#退出登录的ssh localhost</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> ~/.ssh/                 <span class="comment">#如果没法进入该目录，执行一次ssh localhost</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> ssh<span class="literal">-keygen</span> <span class="literal">-t</span> rsa</span><br></pre></td></tr></table></figure><p>输入完$ ssh-keygen -t rsa 语句后，需要连续敲击三次回车<br><img src="https://img-blog.csdnimg.cn/20210429124015239.png" alt="在这里插入图片描述"></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> ./id_rsa.pub &gt;&gt; ./authorized_keys <span class="comment">#加入授权</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> ssh localhost     <span class="comment">#此时已不需密码即可登录localhost，并可见下图的Welcome</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210429124202180.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="2、安装和配置Java（一定要安装Java11版本之前的，不然Spark和Scala会报错，我们安装Java8）"><a href="#2、安装和配置Java（一定要安装Java11版本之前的，不然Spark和Scala会报错，我们安装Java8）" class="headerlink" title="2、安装和配置Java（一定要安装Java11版本之前的，不然Spark和Scala会报错，我们安装Java8）"></a>2、安装和配置Java（一定要安装Java11版本之前的，不然Spark和Scala会报错，我们安装Java8）</h4><p>输入apt-cache search openjdk ,这是查看可以安装的Java版本有哪些，查询结果显示如下，我们可以看到，又openjdk-8-jdk<br><img src="https://img-blog.csdnimg.cn/20210429113512692.png" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20210429113610735.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>接着，我们输入sudo apt-get install openjdk-8-jdk 回车，等待下载就安装成功了</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> sudo apt<span class="literal">-get</span> install openjdk<span class="literal">-8-jdk</span></span><br></pre></td></tr></table></figure><p>无论是Deepin还是Ubuntu，apt安装的Java都存在系统盘的usr&#x2F;lib.jvm里<br><img src="https://img-blog.csdnimg.cn/20210429114517469.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>最后配置Java的环境变量</p><p>我们在终端中输入vim ~&#x2F;.bashrc ,会进入一个文档，也许会出现这个页面，按一下键盘上的E就能进入文档了</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> vim ~/.bashrc</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210429114735983.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>进入文档后是这样的<br><img src="https://img-blog.csdnimg.cn/20210429114801213.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>我这边配置了本教程所有的环境变量，大家之间粘贴进去，后面就不用再配置了</p><p>注意！！！vim的操作和普通文本编辑器不同！！！</p><p>vim进去以后，先按一下键盘上的A，进入编辑模式，然后再右键，点粘贴，或者是CTRL+SHIFT+V粘贴，粘贴上去以后，按一下键盘上的“ESC”键，然后按“SHIFT+ZZ”就保存并退出到终端了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/jdk8</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib:<span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin:<span class="variable">$HIVE_HOME</span>/bin:<span class="variable">$CALSSPATH</span></span><br><span class="line"><span class="built_in">export</span> SCALA_HOME=/usr/local/scala</span><br><span class="line"><span class="built_in">export</span> SPARK_HOME=/usr/local/spark</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/local/hadoop</span><br><span class="line"><span class="built_in">export</span> HIVE_HOME=/usr/local/hive</span><br><span class="line"><span class="built_in">export</span> HBASE_HOME=/usr/local/hbase</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/sbin:<span class="variable">$HBASE_HOME</span>/bin:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$JRE_HOME</span>/bin:<span class="variable">$HIVE_HOME</span>/bin:<span class="variable">$SCALA_HOME</span>/bin:<span class="variable">$SPARK_HOME</span>/bin:<span class="variable">$SPARK_HOME</span>/sbin</span><br></pre></td></tr></table></figure><p>然后输入source ~&#x2F;.bashrc，这个意思是使配置的环境变量立即生效<br><img src="https://img-blog.csdnimg.cn/20210429121829247.png" alt="在这里插入图片描述"><br>检查Java版本，安装并配置成功<br><img src="https://img-blog.csdnimg.cn/20210429121905988.png" alt="在这里插入图片描述"></p><h4 id="3、安装Hadoop"><a href="#3、安装Hadoop" class="headerlink" title="3、安装Hadoop"></a>3、安装Hadoop</h4><p>我们把下载好的Hadoop安装包放在“下载”文件夹里，Deepin下载的默认路径就是这个</p><p>在这个目录下右键选择“在终端中打开”<br><img src="https://img-blog.csdnimg.cn/2021042912353982.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>在打开的终端中输入sudo tar -zxvf  hadoop-3.2.2.tar -C &#x2F;usr&#x2F;local</p><p>将下载的Hadoop压缩包解压到usr&#x2F;local&#x2F;hadoop-3.2.2文件夹下，hadoop-3.2.2.tar.gz是下载的文件名</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar <span class="literal">-zxvf</span>  hadoop<span class="literal">-3</span>.<span class="number">2.2</span>.tar.gz <span class="literal">-C</span> /usr/local</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210429124820610.png" alt="在这里插入图片描述"><br>然后将hadoop-3.2.2重命名为hadoop，依次执行下列命令</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> /usr/local</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> sudo <span class="built_in">mv</span> ./hadoop<span class="literal">-3</span>.<span class="number">2.2</span> ./hadoop</span><br></pre></td></tr></table></figure><p>查看文件夹，已经命名为hadoop<br><img src="https://img-blog.csdnimg.cn/20210429124843584.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>你们的hadoop文件夹上肯定会带有一个黄色的锁🔒，还需要赋予hadoop文件夹权限，避免以后出现问题，接着执行下列命令，🔒就消失了，以后安装Hbase、Hive等，也是执行下列命令赋予权限，把文件夹名修改一下就行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> sudo chmod <span class="number">777</span> <span class="literal">-R</span> hadoop</span><br></pre></td></tr></table></figure><p>伪分布需要配置三个文件</p><p>1、&#x2F;hadoop&#x2F;etc&#x2F;hadoop路径下的hadoop-env.sh，右键打开方式选文本编辑器，添加下面代码进去<br><img src="https://img-blog.csdnimg.cn/20210429125314387.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HADOOP_OS_TYPE=<span class="variable">$&#123;HADOOP_OS_TYPE:-$(uname -s)&#125;</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/jdk8</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=/usr/local/hadoop/etc/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_SSH_OPTS=<span class="string">&quot;-p 22&quot;</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_CLASSPATH=.:<span class="variable">$CLASSPATH</span>:<span class="variable">$HADOOP_CLASSPATH</span>:<span class="variable">$HADOOP_HOME</span>/bin</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210429125128941.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>2、&#x2F;hadoop&#x2F;etc&#x2F;hadoop路径下的core-site.xml，添加下面代码进去</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.default.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>HDFS的URI，文件系统://namenode标识:端口号<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>namenode上本地的hadoop临时文件夹<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.root.hosts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.root.groups<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3、&#x2F;hadoop&#x2F;etc&#x2F;hadoop路径下的hdfs-site.xml，添加下面代码进去</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/tmp/dfs/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>namenode上存储hdfs名字空间元数据 <span class="tag">&lt;/<span class="name">description</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/tmp/dfs/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>datanode上数据块的物理存储位置<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.checkpoint.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/tmp/dfs/snn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>secondary namenode 的位置<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.checkpoint.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/tmp/dfs/snn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>secondary namenode 的位置<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>副本个数，配置默认是3,应小于datanode机器数量<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Hadoop 的运行方式是由配置文件决定的，因此如果需要从伪分布式模式切换回非分布式模式，需要删除 core-site.xml 中的配置项。此外，伪分布式虽然只需要配置 fs.defaultFS 和 dfs.replication 就可以运行（参考官方教程），不过若没有配置 hadoop.tmp.dir 参数，则默认使用的临时目录为 &#x2F;tmp&#x2F;hadoo-hadoop，而这个目录在重启时有可能被系统清理掉，导致必须重新执行 format 才行。所以我们进行了设置，同时也指定 dfs.namenode.name.dir 和 dfs.datanode.data.dir，否则在接下来的步骤中可能会出错。</p><p>配置完之后，执行根节点的格式化，在hadoop文件夹下右键，“在终端中打开”<br><img src="https://img-blog.csdnimg.cn/20210429130312784.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>输入bin&#x2F;hdfs namenode -format<br><img src="https://img-blog.csdnimg.cn/20210429130341761.png" alt="在这里插入图片描述"><br>格式化根节点只在第一次配置完之后执行一次，切勿多次手动格式化，如果多次手动格式化导致DataNode或NameNode无法启动，请关闭Hadoop服务，删除hadoop文件夹下的这三个文件夹后，重新格式化根节点<br><img src="https://img-blog.csdnimg.cn/20210429130205627.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="4、启动Hadoop"><a href="#4、启动Hadoop" class="headerlink" title="4、启动Hadoop"></a>4、启动Hadoop</h4><p>我们已经配置好环境变量，所以可以在终端中直接输入start-dfs.sh来启动Hadoop的服务<br><img src="https://img-blog.csdnimg.cn/20210429162305453.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>注意！！！！今后启动不再使用start-dfs.sh命令，因为这个命令没有启动所有的Hadoop服务，以后做项目或者配置其他环境会报错，记住，以后启动Hadoop使用start-all.sh这个命令</p><p>打开浏览器，输入localhost:9870（Hadoop3的默认端口）<br><img src="https://img-blog.csdnimg.cn/20210429130931791.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>关闭Hadoop服务的命令是stop-dfs.sh</p><h1 id="安装Hbase"><a href="#安装Hbase" class="headerlink" title="安装Hbase"></a>安装Hbase</h1><h4 id="1、解压Hbase"><a href="#1、解压Hbase" class="headerlink" title="1、解压Hbase"></a>1、解压Hbase</h4><p>参考解压hadoop进行解压<br>重命名文件夹<br>赋予权限</p><p>本教程安装的所有的环境都解压在&#x2F;usr&#x2F;local里，后面不在赘述解压过程<br><img src="https://img-blog.csdnimg.cn/20210429161241878.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="2、配置Hbase伪分布环境"><a href="#2、配置Hbase伪分布环境" class="headerlink" title="2、配置Hbase伪分布环境"></a>2、配置Hbase伪分布环境</h4><p>将下面代码复制到Hbase文件夹里的conf文件夹里的hbase-site.xml文件中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 端口要和Hadoop的fs.defaultFS端口一致--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 是否分布式部署 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>localhost<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.unsafe.stream.capability.enforce<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.property.clientPort<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>2182<span class="tag">&lt;/<span class="name">value</span>&gt;</span>                                                                                                                                             </span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.master.info.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>60010<span class="tag">&lt;/<span class="name">value</span>&gt;</span>                                                                                                                                             </span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>将下面代码复制到Hbase文件夹里的conf文件夹里的hbase-env.sh文件中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/jdk8</span><br><span class="line">export HBASE_MANAGES_ZK=true</span><br><span class="line">export HBASE_CLASSPATH=/usr/local/hbase/conf</span><br><span class="line">export HBASE_DISABLE_HADOOP_CLASSPATH_LOOKUP=&quot;true&quot;</span><br></pre></td></tr></table></figure><p>然后就可以启动Hbase了，注意，启动Hbase之前先启动Hadoop，关闭Hbase的命令是stop-hbase.sh<br><img src="https://img-blog.csdnimg.cn/20210429162349764.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>可以localhost:60010访问Hbase页面<br><img src="https://img-blog.csdnimg.cn/20210429163339304.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="3、hbase-shell的基本操作"><a href="#3、hbase-shell的基本操作" class="headerlink" title="3、hbase shell的基本操作"></a>3、hbase shell的基本操作</h4><p>输入hbase shell可以打开hbase shell<br><img src="https://img-blog.csdnimg.cn/20210429163432369.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>建个表<br>查看表属性<br>添加一个学生信息<br>查看学生信息<br><img src="https://img-blog.csdnimg.cn/20210429163706357.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>退出shell输入exit回车<br><img src="https://img-blog.csdnimg.cn/20210429163824309.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="安装Hive"><a href="#安装Hive" class="headerlink" title="安装Hive"></a>安装Hive</h1><h4 id="1、安装Hive"><a href="#1、安装Hive" class="headerlink" title="1、安装Hive"></a>1、安装Hive</h4><p>解压过程不赘述，请看安装Haoop板块介绍的方法</p><p>修改Hive&#x2F;conf文件夹下的hive-site.xml，如果没有就在该文件夹下右键，“在终端中打开”，使用下面命令新建一个hive-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo gedit hive-site.xml</span><br></pre></td></tr></table></figure><p>或者直接右键，新建文本文档，后缀修改为xml<br><img src="https://img-blog.csdnimg.cn/20210429170055550.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>在hive-site.xml中这样写，此配置为MySQL8.0.24的配置，如果版本低于8，则不是这样配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> standalone=<span class="string">&quot;no&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://localhost:3306/metastore?createDatabaseIfNotExist=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>JDBC connect string for a JDBC metastore<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Driver class name for a JDBC metastore<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>username to use against metastore database<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>password to use against metastore database<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.exec.scratchdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/hive/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 日志目录 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.querylog.location<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/hive/log<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 设置metastore的节点信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.uris<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>thrift://linux100:9083<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 客户端远程连接的端口 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.thrift.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>10000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.thrift.bind.host<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.webui.host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- hive服务的页面的端口 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.webui.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>10002<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.long.polling.timeout<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>5000<span class="tag">&lt;/<span class="name">value</span>&gt;</span>                               </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.enable.doAs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>datanucleus.autoCreateSchema<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>datanucleus.fixedDatastore<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.execution.engine<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>mr<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 添加如下配置信息，就可以实现显示当前数据库，以及查询表的头信息配置 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.cli.print.header<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.cli.print.current.db<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>修改hive&#x2F;conf文件夹下的hive-env.sh，添加下面语句</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/local/hadoop/</span><br><span class="line"><span class="built_in">export</span> HIVE_CONF_DIR=/usr/local/hive/conf/</span><br><span class="line"><span class="built_in">export</span> HIVE_AUX_JARS_PATH=/usr/local/hive/lib</span><br></pre></td></tr></table></figure><h4 id="2、安装MySQL"><a href="#2、安装MySQL" class="headerlink" title="2、安装MySQL"></a>2、安装MySQL</h4><p>MySQL可以使用apt安装，Deepin默认的MySQL就是最新版，Ubuntu我不知道是不是，可以使用下面命令看一下版本<br><img src="https://img-blog.csdnimg.cn/20210429170546263.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后使用下面命令安装MySQL</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt<span class="literal">-get</span> install mysql<span class="literal">-server</span></span><br></pre></td></tr></table></figure><p>安装完成后查看MySQL版本<br><img src="https://img-blog.csdnimg.cn/2021042917093310.png" alt="在这里插入图片描述"><br>接下来还要安装一个mysql-connector-java<br><a href="https://dev.mysql.com/downloads/connector/j/">下载地址</a><br>Deepin和UOS选Debian，Ubuntu选Ubuntu<br><img src="https://img-blog.csdnimg.cn/20210429171143796.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>下载完成后，文件是deb格式，直接双击点击安装就行了，我的因为安装过了，只有更新可以点<br><img src="https://img-blog.csdnimg.cn/20210429171429311.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>在终端输入以下命令启动MySQL服务</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">start</span> mysql</span><br></pre></td></tr></table></figure><p>执行sudo mysql_secure_installation</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure><p>为MySQL设置密码（一定要设置，而且密码不能为空，不然后面报错）<br><img src="https://img-blog.csdnimg.cn/20210429172112871.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后下面会让你输入很多Y&#x2F;N，全部输入Y回车</p><p>完成所有设置后，以root用户登录MySQL。 在终端中，键入以下命令：mysql -u root -p，输入 root用户的密码，然后按Enter ，登陆进MySQL<br><img src="https://img-blog.csdnimg.cn/2021042917231892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>新建hive数据库，别忘了加分号<br><img src="https://img-blog.csdnimg.cn/20210429172510723.png" alt="在这里插入图片描述"><br>然后依次输入下面语句，意思是将所有数据库的所有表的所有权限赋给hive用户，后面的hive是配置hive-site.xml中配置的连接密码</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;hive&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;hive&#x27;</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;hive&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure><p>然后输入下面语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;  #刷新mysql系统权限关系表</span><br></pre></td></tr></table></figure><h4 id="3、启动Hive"><a href="#3、启动Hive" class="headerlink" title="3、启动Hive"></a>3、启动Hive</h4><p>启动Hive之前，先运行start-all.sh启动Hadoop集群，然后输入hive启动</p><p>如果输入hive以后出现下面报错<br><img src="https://img-blog.csdnimg.cn/20210429174017724.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>则输入hdfs dfsadmin -safemode leave关闭安全模式，再运行hive即可<br><img src="https://img-blog.csdnimg.cn/2021042917411333.png" alt="在这里插入图片描述"><br>启动成功，输入exitl;可退出hive shell<br><img src="https://img-blog.csdnimg.cn/20210429174138798.png" alt="在这里插入图片描述"></p><h1 id="安装Spark"><a href="#安装Spark" class="headerlink" title="安装Spark"></a>安装Spark</h1><h4 id="1、安装Scala语言支持"><a href="#1、安装Scala语言支持" class="headerlink" title="1、安装Scala语言支持"></a>1、安装Scala语言支持</h4><p>解压不再赘述，请看安装Haoop板块介绍的方法，安装好查看版本<br><img src="https://img-blog.csdnimg.cn/2021042917465649.png" alt="在这里插入图片描述"></p><h4 id="2、安装Spark"><a href="#2、安装Spark" class="headerlink" title="2、安装Spark"></a>2、安装Spark</h4><p>配置spark&#x2F;conf文件夹下的spark-env.sh</p><p>在最后一行下面添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/jdk8</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/local/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=/usr/local/hadoop/etc/hadoop</span><br><span class="line"><span class="built_in">export</span> SCALA_HOME=/usr/local/scala</span><br><span class="line"><span class="built_in">export</span> SPARK_HOME=/usr/local/spark</span><br><span class="line"><span class="built_in">export</span> SPARK_MASTER_IP=127.0.0.1</span><br><span class="line"><span class="built_in">export</span> SPARK_MASTER_PORT=7077</span><br><span class="line"><span class="built_in">export</span> SPARK_MASTER_WEBUI_PORT=8099</span><br><span class="line"><span class="built_in">export</span> SPARK_WORKER_CORES=3</span><br><span class="line"><span class="built_in">export</span> SPARK_WORKER_INSTANCES=1</span><br><span class="line"><span class="built_in">export</span> SPARK_WORKER_MEMORY=5G</span><br><span class="line"><span class="built_in">export</span> SPARK_WORKER_WEBUI_PORT=8081</span><br><span class="line"><span class="built_in">export</span> SPARK_EXECUTOR_CORES=1</span><br><span class="line"><span class="built_in">export</span> SPARK_EXECUTOR_MEMORY=1G</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>:<span class="variable">$HADOOP_HOME</span>/lib/native</span><br></pre></td></tr></table></figure><p>配置spark&#x2F;conf文件夹下的worker，就在最后一行下面加上一个localhost即可（Spark基于hadoop3.2版本的配置文件从slaves变成了worker，旧版本为slaves）<br><img src="https://img-blog.csdnimg.cn/20210429175201636.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="3、启动Spark"><a href="#3、启动Spark" class="headerlink" title="3、启动Spark"></a>3、启动Spark</h4><p>启动Spark之前，同样要先保证Hadoop集群已经启动</p><p>启动Spark使用start-master.sh和start-slaves.sh</p><p>然后输入jps，查看，多出了Master和Worker<br><img src="https://img-blog.csdnimg.cn/20210429175519866.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="4、开启Spark-Shell"><a href="#4、开启Spark-Shell" class="headerlink" title="4、开启Spark Shell"></a>4、开启Spark Shell</h4><p>spark shell的退出命令是 :quit<br><img src="https://img-blog.csdnimg.cn/20210429175805886.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>4.10：好了这篇文章到这就暂时结束了，Linux真sd，这系非人类，虽然早就配好了，但是等我心情好了再写吧<br>4.29：心情不错，正在更新<br>4.29：一口气写完</p><p>后续会写一个WordCount实例的教程</p><p>WordCount实例教程已写完，项目打包成jar包，可以在hadoop下运行</p><p>传送门：<a href="https://blog.csdn.net/qq_48922459/article/details/116274365?spm=1001.2014.3001.5501">MapReduce基础编程，实现WordCount实例</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Deepin </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Hbase </tag>
            
            <tag> Hive </tag>
            
            <tag> Spark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>恒星的演化和几种最终归宿（包括黑洞、超新星等特殊天体）</title>
      <link href="/2020/07/19/%E6%81%92%E6%98%9F%E7%9A%84%E6%BC%94%E5%8C%96%E5%92%8C%E5%87%A0%E7%A7%8D%E6%9C%80%E7%BB%88%E5%BD%92%E5%AE%BF%EF%BC%88%E5%8C%85%E6%8B%AC%E9%BB%91%E6%B4%9E%E3%80%81%E8%B6%85%E6%96%B0%E6%98%9F%E7%AD%89%E7%89%B9%E6%AE%8A%E5%A4%A9%E4%BD%93%EF%BC%89/"/>
      <url>/2020/07/19/%E6%81%92%E6%98%9F%E7%9A%84%E6%BC%94%E5%8C%96%E5%92%8C%E5%87%A0%E7%A7%8D%E6%9C%80%E7%BB%88%E5%BD%92%E5%AE%BF%EF%BC%88%E5%8C%85%E6%8B%AC%E9%BB%91%E6%B4%9E%E3%80%81%E8%B6%85%E6%96%B0%E6%98%9F%E7%AD%89%E7%89%B9%E6%AE%8A%E5%A4%A9%E4%BD%93%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>自己总结用人话总结的，解释非常的具体，相信大家都可以很容易的理解恒星的形成与几种演化</p><h1 id="区分恒星、行星、矮行星"><a href="#区分恒星、行星、矮行星" class="headerlink" title="区分恒星、行星、矮行星"></a>区分恒星、行星、矮行星</h1><p>1、用人话讲，恒星是指宇宙中靠核聚变产生的能量而自身能发热发光的星体，比如太阳；<br>2、而行星通常指自身不发光，环绕着恒星，公转轨道附近没有和自身体积以及质量相仿的其他天体的天体，比如太阳系的八大行星<br>3、冥王星正是因为其轨迹与海王星的轨迹穿插不契合第三个条件而被踢出行星行列，降级为矮行星，矮行星就是介于小行星与行星之间的天体</p><h1 id="恒星的形成机制"><a href="#恒星的形成机制" class="headerlink" title="恒星的形成机制"></a>恒星的形成机制</h1><h2 id="分子云"><a href="#分子云" class="headerlink" title="分子云"></a>分子云</h2><p>是形成恒星的场所，星云物质由大约3&#x2F;4的氢、1&#x2F;4的氦和少量其他元素组成，分子云的质量占银河系总质量的一半。在银河系中，估计有6000个分子云，每个分子云的质量都超过100000太阳质量。</p><h2 id="形成过程"><a href="#形成过程" class="headerlink" title="形成过程"></a>形成过程</h2><p>恒星诞生于分子云中一个更紧密的地方，是由致密气体和尘埃组成的不透明云（暗云），称为博克球状体，恒星的形成需要三个条件：氢、引力和时间。其中引力最为关键，用难以想象的力量把各种物质聚集在一起，逐渐形成庞大的旋涡状星云。<br><strong>下图为旋涡星云</strong><br><img src="https://img-blog.csdnimg.cn/20200719093650599.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="吸积盘"><a href="#吸积盘" class="headerlink" title="吸积盘"></a>吸积盘</h3><p>吸积盘是一种由弥散物质组成的，围绕中心体转动的结构。还记得2019.4.10晚21点发布的黑洞照片吗，四周红色的就是物质在没进去黑洞时高速摩擦碰撞相互作用发光发热的东西。叫做吸积盘，中子星、白矮星周围也会有吸积盘。<br><strong>黑洞的吸积盘</strong><br><img src="https://img-blog.csdnimg.cn/20200719094314540.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>根据恒星质量不同，它的形成机制也有些微不同</p><h3 id="低质量恒星形成机制"><a href="#低质量恒星形成机制" class="headerlink" title="低质量恒星形成机制"></a>低质量恒星形成机制</h3><p>低质量恒星是由分子云中旋转密度增加的引力坍缩形成的。由气体和尘埃组成的旋转云的塌缩导致吸积盘的形成，物质通过吸积盘被引导到中心<strong>原恒星</strong>上（原恒星就是还未收缩完成的天体）</p><h3 id="大质量恒星形成机制"><a href="#大质量恒星形成机制" class="headerlink" title="大质量恒星形成机制"></a>大质量恒星形成机制</h3><p>大质量恒星释放出大量的辐射，这些辐射会对正在形成的物质产生反作用力。过去，人们认为这种辐射压力可能足够大，足以阻止大质量原恒星的吸积，并阻止质量超过几十个太阳质量的恒星的形成。最近的理论研究表明，喷流和外流的产生清除了一个空腔，大质量原恒星的大部分辐射可以通过这个空腔逸出，而不妨碍通过圆盘和原恒星的吸积 。大质量恒星可能因此能够通过一种类似于低质量恒星形成机制的机制形成</p><h3 id="举一个太阳形成过程的例子"><a href="#举一个太阳形成过程的例子" class="headerlink" title="举一个太阳形成过程的例子"></a>举一个太阳形成过程的例子</h3><p>太阳这颗恒星需要一个方圆900亿千米的<strong>星云团</strong>。从星云聚为恒星的过程可分为快收缩阶段和慢收缩阶段。前者历经几十万年，后者历经数千万年。星云快收缩后半径仅为原来的百分之一，平均密度提高1亿亿倍，最后形成一个“星胚”。这是一个又浓又黑的云团，中心为一密集核。此后进入慢收缩，就是<strong>原恒星</strong><br>阶段。这时星胚温度不断升高，温度升高到一定的程度就要闪烁发光，以示其存在，并步入恒星的幼年阶段。但这时恒星尚不稳定，仍被弥漫的星云物质所包围着（<strong>就是吸积盘</strong>），并向外界抛射物质。如今太阳已经是<strong>主序星</strong>了，已经45亿岁了，正值<strong>青壮年</strong>（读完文章以后自然就会知道为什么太阳45亿岁是青壮年）。</p><h1 id="讲解恒星演化前的知识补充"><a href="#讲解恒星演化前的知识补充" class="headerlink" title="讲解恒星演化前的知识补充"></a>讲解恒星演化前的知识补充</h1><h2 id="赫罗图"><a href="#赫罗图" class="headerlink" title="赫罗图"></a>赫罗图</h2><p>赫罗图，是指恒星的光谱类型与光度之关系图，绝对星等是恒星的亮度，数值越小越亮，光谱型是恒星的温度分类系统，依恒星光谱的类型，把恒星分成O、B、A、F、G、K和M等类型，每个光谱都可进一步分为数字亚型，范围从0到9，更高的数字表示更低能的光谱和更红的颜色。在数字后面加上罗马数字或字母表示恒星演化阶段（如太阳光谱型为G2V）<br><img src="https://img-blog.csdnimg.cn/20200719095921153.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="主序星"><a href="#主序星" class="headerlink" title="主序星"></a>主序星</h2><p>主序星是指在赫罗图主序带的恒星，当原恒星中心的温度达到1000万K左右时，氢核 聚变为氦核的热核反应持续不断地发生。由于核反应产生的巨大的辐射能使恒星内部压力增强到足以和引力相抗衡，恒星进入一个相对稳定的时期，达到完全的流体静力学平衡状态，这个时期的恒星称为主序星。原恒星与主序星的区别与分界线就是恒星内部是否发生了持续的热核反应。恒星的质量越大，氢消耗的越快，待在主序星的时间就越短。一个太阳质量的恒星为100亿年，30个太阳质量的为100万年，0.5个太阳质量的为1000亿年。</p><h2 id="简并压力和简并态"><a href="#简并压力和简并态" class="headerlink" title="简并压力和简并态"></a>简并压力和简并态</h2><p><strong>简并压力</strong>是指<strong>费米子</strong>(例如电子、中子、质子等)是有排它性的，它们不能占据空间中的同一个位置，这种粒子间的相互排斥力，<strong>白矮星</strong>就是正处于<strong>电子简并态</strong>，<strong>中子星</strong>正处于<strong>中子简并态</strong>，形成中子星就是需要更大的引力（质量）来突破<strong>电子简并力</strong>。</p><h2 id="钱德拉塞卡极限"><a href="#钱德拉塞卡极限" class="headerlink" title="钱德拉塞卡极限"></a>钱德拉塞卡极限</h2><p>钱德拉塞卡极限指白矮星的最高质量，约为3×1030公斤，是太阳质量的1.44倍。</p><h2 id="奥本海默极限"><a href="#奥本海默极限" class="headerlink" title="奥本海默极限"></a>奥本海默极限</h2><p>奥本海默极限是稳定中子星的质量上限，大约在1.5-3倍太阳质量之间，如果质量大于这个临界质量﹐就不可能成为稳定的中子星，它要么经过无限坍缩形成黑洞﹐要么形成介于中子星与黑洞之间的其他类型的致密星，这个临界质量被称为奥本海默极限。</p><h2 id="洛希极限"><a href="#洛希极限" class="headerlink" title="洛希极限"></a>洛希极限</h2><p>洛希极限是一个天体自身的引力与第二个天体造成的潮汐力（可以认为是天体旋转产生的牵引力）相等时的距离。当两个天体的距离少于洛希极限，天体就会倾向碎散，继而成为第二个天体的环</p><h2 id="史瓦西半径"><a href="#史瓦西半径" class="headerlink" title="史瓦西半径"></a>史瓦西半径</h2><p>史瓦西半径是任何具有质量的物质都存在的一个临界半径特征值。 一个物体的史瓦西半径与其质量成正比。太阳的史瓦西半径约为3千米，地球的史瓦西半径只有约9毫米。当天体半径被压缩得小于史瓦西半径时，会坍缩为黑洞。</p><h1 id="开始演化"><a href="#开始演化" class="headerlink" title="开始演化"></a>开始演化</h1><p>恒星演化是恒星在生命过程中所经历急遽变化的序列。恒星依据质量，一生的范围从质量最大的恒星只有几百万年，到质量最小的恒星比宇宙年龄还要长的数兆亿年。所有的恒星都从通常被称为星云或分子云的气体和尘埃坍缩中诞生。在几百万年的过程中，原恒星达到平衡的状态，安顿下来成为所谓的<strong>主序星</strong>，再由主序星演化为<strong>黑矮星 或 脉冲星 或 夸克星（假想） 或 黑洞</strong>。</p><h2 id="主序寿命结束，步入巨星阶段"><a href="#主序寿命结束，步入巨星阶段" class="headerlink" title="主序寿命结束，步入巨星阶段"></a>主序寿命结束，步入巨星阶段</h2><h3 id="红巨星"><a href="#红巨星" class="headerlink" title="红巨星"></a>红巨星</h3><p>当一颗恒星度过它漫长的青壮年期——主序星阶段，步入老年期时，恒星核中的氢聚合物逐渐耗尽，核心变成大部分氦，氢在燃烧中离开核心，在核心周围形成燃烧的壳。红巨星阶段根据恒星质量的不同，历时只有数百万年不等，它们的体积非常巨大（太阳变为红巨星后<strong>半径</strong>为现在的200倍）。在赫罗图上，红巨星是巨大的非主序星，光谱属于K或M型。之所以被称为红巨星是因为看起来的颜色是红的，体积又很巨大的缘故。金牛座的毕宿五和牧夫座的大角星是红巨星，猎户座的参宿四则是红超巨星。<br><img src="https://img-blog.csdnimg.cn/20200719113452884.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="亚巨星分支（简单了解，不重要）"><a href="#亚巨星分支（简单了解，不重要）" class="headerlink" title="亚巨星分支（简单了解，不重要）"></a>亚巨星分支（简单了解，不重要）</h3><p>有些质量在2~5倍太阳质量的恒星，因质量巨大，亮度明亮，在氢耗完之后还没有开始燃烧氦，此时它们膨胀得大而亮度基本不变或稍有下降，进入亚巨星分支，膨胀的状态发黄，就进入了<strong>黄巨星</strong>阶段。恒星质量为2.5倍太阳质量，在离开主序带之后，即变成黄巨星。而质量较大的恒星（5倍太阳质量），由于主序阶段恒星颜色较蓝，所以在膨胀降温（壳层氢气聚变）过程（C→D）时间较长，其前半段为<strong>白巨星</strong>，后半段为<strong>黄巨星</strong>。</p><h2 id="巨星阶段结束，步入老年期"><a href="#巨星阶段结束，步入老年期" class="headerlink" title="巨星阶段结束，步入老年期"></a>巨星阶段结束，步入老年期</h2><h3 id="白矮星"><a href="#白矮星" class="headerlink" title="白矮星"></a>白矮星</h3><p>当<strong>红巨星</strong>的辐射压力不能平衡引力，外部向外膨胀并不断变冷，而内部氦核受引力作用收缩坍塌，被压缩的物质不断变热，最终内核温度将超过一亿度，于是氦开始聚变成碳。</p><p>经过几百万年，氦核燃烧殆尽，外壳仍然是以氢为主的混合物，而在它下面有一个氦层，氦层内部还埋有一个碳球，此时，在红巨星内部，已经诞生了一颗白矮星。</p><p>当恒星的不稳定状态达到极限后，红巨星会进行爆发，把核心以外的物质都抛离恒星本体，物质向外扩散成为星云，残留下来的内核就是我们能看到的白矮星，发出白光，白矮星的寿命有几十亿年。</p><p>一颗与地球体积相当的白矮星（比如说天狼星的邻星Sirius B）的表面重力约等于地球表面的18万倍。在这样高的压力下，任何物体都已不复存在，连原子都被压碎了，电子脱离了原子轨道变为自由电子。密度已经增大到每立方厘米十吨左右。</p><h3 id="中子星"><a href="#中子星" class="headerlink" title="中子星"></a>中子星</h3><p>中子星是除黑洞外密度最大的星体，密度每立方厘米1亿吨以上，当白矮星的质量大于1.44倍且小于1.5倍太阳质量的时候（相当于恒星大于8倍且小于30倍太阳质量形成的白矮星），核心会继续坍缩，把电子压入原子核，与质子形成中子，所以叫中子星，这就是<strong>钱德拉塞卡极限</strong>。</p><h3 id="超新星"><a href="#超新星" class="headerlink" title="超新星"></a>超新星</h3><p>超新星是某些恒星在演化接近末期时经历的一种剧烈爆炸，过程中所突发的电磁辐射能照亮其所在的整个星系，并持续几周至几个月才逐渐衰减。而在此期间，一颗超新星所释放的辐射能量与太阳在其一生中辐射能量的总和相当。</p><p>上面说当恒星质量大于8倍小于30倍太阳质量的时候，会形成中子星，那恒星<strong>大于30倍太阳质量</strong>的时候，一般会形成超新星，恒星在核心的氢、氦、碳等元素于核聚变反应中耗尽，当它们最终转变成铁元素时便无法从核聚变中获得能量。失去热辐射压力支撑的外围物质受重力牵引会急速向核心坠落，导致外壳的动能转化为热能，强大的能量导致了<strong>铁聚变</strong>，产生<strong>超新星爆炸</strong></p><p>一般<strong>大于30倍质量</strong>的恒星演化的超新星爆炸会留下一个遗骸——<strong>脉冲星</strong>（下面会讲），不足30倍的一般会爆炸成<strong>星云</strong>。</p><p>超新星爆炸的辐射非常强，奥陶纪60%的海洋生物的灭绝就是受距离地球100光年内的一颗超新星爆发产生的<strong>伽马射线暴</strong>的影响。</p><p><strong>超新星爆发是宇宙中最为壮观的场景</strong><br><img src="https://img-blog.csdnimg.cn/20200719121224759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="最终归宿"><a href="#最终归宿" class="headerlink" title="最终归宿"></a>最终归宿</h2><h3 id="褐矮星"><a href="#褐矮星" class="headerlink" title="褐矮星"></a>褐矮星</h3><p>质量非常小（小于0.08太阳质量）的原始星（<strong>没有成为主序星</strong>）的温度不会到达足够开始核聚变的程度，它们会成为褐矮星，在数亿年的时光中慢慢变凉</p><h3 id="黑矮星"><a href="#黑矮星" class="headerlink" title="黑矮星"></a>黑矮星</h3><p>类似太阳质量大小的<strong>白矮星</strong>(或质量较小的<strong>中子星</strong>)经过几十亿年的慢慢冷却后，停止发光发热，只剩下碳，变为一颗黑矮星，黑矮星将永存于宇宙，目前宇宙寿命大约137亿年，还没有黑矮星的形成。</p><h3 id="脉冲星"><a href="#脉冲星" class="headerlink" title="脉冲星"></a>脉冲星</h3><p>脉冲星就是高速旋转的<strong>中子星</strong>（质量介于1.44-1.5倍太阳之间），是<strong>la类超新星</strong>爆炸留下的遗骸，强大的爆炸令中子星以每秒几百圈的速度自转，脉冲形成的原因如下：<br>磁场振荡模型以太阳举例，太阳磁场的方向每过11年就会翻转一次，如果太阳塌缩成了中子星，它的自转周期可以缩短到秒级甚至毫秒级，同时，它的磁场翻转周期也可能达到毫秒级，所以产生了脉冲。</p><p><strong>中国天眼发现的脉冲星</strong><br><img src="https://img-blog.csdnimg.cn/20200719121824641.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="黑洞"><a href="#黑洞" class="headerlink" title="黑洞"></a>黑洞</h3><p>上面讲的大于30倍太阳质量的恒星产生超新星爆炸会留下一个遗骸——脉冲星（也就是中子星），当遗骸的质量介于<strong>1.5-3倍</strong>太阳质量（<strong>奥本海默极限</strong>）的时候，中子星会继续坍缩，半径小于史瓦西半径后，形成<strong>黑洞</strong>。</p><p>如果恒星的质量大于<strong>250倍</strong>太阳质量，聚变晚期使其内核产生铁元素以致不能维持聚变，在强引力的作用下，核心会以接近光速25%的速度崩塌，<strong>跳过之前所有阶段</strong>直接形成黑洞。</p><p>然后黑洞会慢慢<strong>蒸发</strong>（蒸发时间随着质量增加而增加）<br><img src="https://img-blog.csdnimg.cn/20200719122241698.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="夸克星（假想的介于中子星和黑洞之间的天体，未证实）"><a href="#夸克星（假想的介于中子星和黑洞之间的天体，未证实）" class="headerlink" title="夸克星（假想的介于中子星和黑洞之间的天体，未证实）"></a>夸克星（假想的介于中子星和黑洞之间的天体，未证实）</h3><p>夸克星是一种假设的星体，恒星死亡时会在自身重力的影响下发生坍缩，若恒星质量大于1.44倍太阳质量，中子可能破碎成自身的组成成分，即夸克。在一定的压力下半数由中子分离而成的夸克能够转化为奇夸克，产生一种更加致密的物质类型。这时的星体就是由奇夸克紧密结合在一起所构成的“夸克星”。</p><h1 id="最后讲一下太阳的命运"><a href="#最后讲一下太阳的命运" class="headerlink" title="最后讲一下太阳的命运"></a>最后讲一下太阳的命运</h1><p>太阳没有足够的质量成为中子星或爆发成为超新星，太阳是一颗<strong>黄矮星（主序星的一种，和白矮星黑矮星不同）</strong>，寿命在100亿年，约50亿年后它将进入<strong>红巨星</strong>的阶段</p><p>当核心的温度达到1亿K时，氦聚变将开始进行并燃烧生成碳。由于此时的氦核心已经相当于一个小型“<strong>白矮星</strong>”（<strong>电子简并态</strong>），热失控的氦聚变将导致<strong>氦闪（0.8-2.0太阳质量恒星的短暂失控核聚变）</strong>，释放的巨大能量使太阳核心大幅度膨胀，解除了电子简并态，然后核心剩余的氦进行稳定的聚变，太阳将如新星般突然增亮5～10个星等</p><p>其半径大约会是现在的200倍，表面将膨胀至地球现在的轨道，当太阳成为渐近巨星分支的恒星时，由于恒星风的作用，它大约已经流失30%的质量，所以地球的轨道会向外移动，如果只是这样，地球或许可以幸免，但地球可能会因为<strong>潮汐的相互作用</strong>（也就是<strong>洛希极限</strong>）而被太阳撕碎。</p><p>继红巨星阶段之后，太阳外层的气体逃逸，形成行星状星云。在外层被剥离后，唯一留存下来的就是恒星炙热的核心——<strong>白矮星</strong>，并在数十亿年中逐渐冷却和黯淡——<strong>黑矮星</strong>。这是低质量与中质量恒星演化的典型。</p><h1 id="感谢观看"><a href="#感谢观看" class="headerlink" title="感谢观看"></a>感谢观看</h1>]]></content>
      
      
      <categories>
          
          <category> 宇宙/物理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 宇宙 </tag>
            
            <tag> 物理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于2020年中国异常大面积洪涝的个人分析</title>
      <link href="/2020/07/11/%E5%85%B3%E4%BA%8E2020%E5%B9%B4%E4%B8%AD%E5%9B%BD%E5%BC%82%E5%B8%B8%E5%A4%A7%E9%9D%A2%E7%A7%AF%E6%B4%AA%E6%B6%9D%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%88%86%E6%9E%90/"/>
      <url>/2020/07/11/%E5%85%B3%E4%BA%8E2020%E5%B9%B4%E4%B8%AD%E5%9B%BD%E5%BC%82%E5%B8%B8%E5%A4%A7%E9%9D%A2%E7%A7%AF%E6%B4%AA%E6%B6%9D%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本人气象爱好者，有不专业的地方请指正</p><p>截至2020年7月11日，湖北、四川、重庆、湖南均已发生洪涝灾害，鄱阳湖、洞庭湖水位线预警，浙江新安水库于7月7日时隔9年史上第7次开7孔泄洪，根据当前库区雨情水情，仍有进一步增大下泄流量的可能性。</p><h1 id="厄尔尼诺年"><a href="#厄尔尼诺年" class="headerlink" title="厄尔尼诺年"></a>厄尔尼诺年</h1><p>2019年11月以来，赤道中东太平洋进入并持续维持厄尔尼诺状态，出现了连续5个月 Nio 3.4指数平均值大于或等于0.5℃</p><p>在2020年5月8日国家气候中心称一次厄尔尼诺事件已经形成</p><p>虽然强度不大持续时间不长，却仍然影响了了中国长达2个月的天气异常</p><h1 id="给小白补充下厄尔尼诺的成因和影响"><a href="#给小白补充下厄尔尼诺的成因和影响" class="headerlink" title="给小白补充下厄尔尼诺的成因和影响"></a>给小白补充下厄尔尼诺的成因和影响</h1><p>应该有小白，所以补充一下厄尔尼诺的成因：每年的11月至次年的3月是南半球的夏季，南半球海域水温普遍升高，向西流动的赤道暖流得到加强，此时全球的气压带和风带向南移动，东北信风越过赤道受到科里奥利力（地转偏向力）的作用，向左偏转成西北季风（北半球向右偏，南半球向左）。西北季风削弱了秘鲁西海岸的离岸风——东南信风，使秘鲁寒流冷水上泛减弱甚至消失，而且吹拂着水温较高的赤道暖流南下，使秘鲁寒流的水温反常升高。这股洋流被称为“厄尔尼诺暖流”。<br><img src="https://img-blog.csdnimg.cn/2020071111513535.png" alt="在这里插入图片描述"></p><p>但是大家知道，厄尔尼诺带来的影响是太平洋东海岸强对流活动增强，带来暴雨和台风，而对处于太平洋西海岸的中国的影响是南方降雨增多，北方干旱（为什么南方多北方干后面会解释），而2020年则是南方以及华南北部地区洪涝，北方洪涝预警</p><h1 id="2020年异常天气分析开始"><a href="#2020年异常天气分析开始" class="headerlink" title="2020年异常天气分析开始"></a>2020年异常天气分析开始</h1><h2 id="哈德来环流"><a href="#哈德来环流" class="headerlink" title="哈德来环流"></a>哈德来环流</h2><p>大家知道，在西太平洋，存在着一团副热带高压，原因是哈德来环流的作用，哈得来环流用人话讲就是赤道的水温高，赤道附近受热上升的气流在上升到对流层后，分别向两极方向移动，之后逐渐冷却，约在纬度30度附近沉降，形成副热带高压带。<br><img src="https://img-blog.csdnimg.cn/20200711105123733.gif" alt="在这里插入图片描述"></p><h2 id="解释厄尔尼诺导致北方干旱以及补充副热带高压的知识"><a href="#解释厄尔尼诺导致北方干旱以及补充副热带高压的知识" class="headerlink" title="解释厄尔尼诺导致北方干旱以及补充副热带高压的知识"></a>解释厄尔尼诺导致北方干旱以及补充副热带高压的知识</h2><p>而厄尔尼诺现象，会加强北纬30°副热带高压的范围直达日本，因为范围之大，所以导致了暖湿气流无法到达中国北部，导致干旱，这而且厄尔尼诺导致的副热带低压有虚胖的特点，就是很容易被击溃（因为厄尔尼诺到现在还是未解的，所以为什么会出现这样的副热带高压暂时没有解释）</p><p>北纬30°的副热带高压属于热高压，用人话讲就是高空中全是热空气，气流只能下沉，暖湿气流无法上升，所以只能绕过高气压带，所以太平洋的暖湿气流无法到达中国北部，只能绕到南部形成降雨，而从中国西南部赤道吹来的暖湿气流也会被高压带阻隔在南方降雨，这就是南方降雨增多，北方干旱的原因</p><h2 id="副热带高气压被东北冷涡和西伯利亚高压击溃"><a href="#副热带高气压被东北冷涡和西伯利亚高压击溃" class="headerlink" title="副热带高气压被东北冷涡和西伯利亚高压击溃"></a>副热带高气压被东北冷涡和西伯利亚高压击溃</h2><h3 id="冷涡"><a href="#冷涡" class="headerlink" title="冷涡"></a>冷涡</h3><p>通俗的来说，在500hpa的空中，强冷空气在向西东行进中被特殊的比较深厚的暖气团阻挡，形成被困在高空的、大范围的、深厚的冷气团，如果发生在东北附近就叫做东北冷涡。同时，东北地区南濒渤海，东临日本海，水汽条件充足有利于东北冷涡系统的形成和发展。<br><strong>下图为的500hpa天气图，可以看到冷涡</strong><br><img src="https://img-blog.csdnimg.cn/20200711110054133.gif" alt="在这里插入图片描述"></p><h3 id="异常的西伯利亚高压和北方暴雨的原因"><a href="#异常的西伯利亚高压和北方暴雨的原因" class="headerlink" title="异常的西伯利亚高压和北方暴雨的原因"></a>异常的西伯利亚高压和北方暴雨的原因</h3><p>在西伯利亚，秋分和冬至，西伯利亚都会有一团冷高压，夏季很少影响中国，但是西伯利亚2020年6月的平均气温则落在20℃ 左右，6月24日温度达到38℃，今年西伯利亚的高温主因为西伯利亚上空的高压脊，阻断了冷空气的流动，融雪融冰加上洋流将热能往两极输送的各种效应，最终导致了当地极端高温，从而西伯利亚高气压在夏季形成。</p><p>在东北信封的作用下（特别是厄尔尼诺年东北信风加强），西伯利亚高压被吹向中国东北，与东北冷涡相撞，再加上西风暖脊的加入，三股强大的冷暖气流形成暴雨，导致松花江预警。</p><h3 id="南方以及华南以北地区大面积暴雨原因"><a href="#南方以及华南以北地区大面积暴雨原因" class="headerlink" title="南方以及华南以北地区大面积暴雨原因"></a>南方以及华南以北地区大面积暴雨原因</h3><p>上面说了，厄尔尼诺形成的副热带高压区非常脆弱，而今年东北冷涡形成，并且盛行东北信风，所以副热带高压区被东北冷涡击溃并且南移，紧跟着的是雨带也南移。</p><p>国家气候中心的监测图清清楚楚：2019年5月以来，西北太平洋副高脊线位置长期偏南，而且动不动还崩溃式南退，5月初一次，5月20日前后一次，6月15日前后一次<br><img src="https://img-blog.csdnimg.cn/20200711111410871.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>雨带南移，长期滞留江南南部和华南，导致广西、广东和福建异常多雨，副热带高压被击溃，导致太平洋和从西南方赤道吹来的暖湿气流进入华南北部，直达武汉，导致华南北部也出现暴雨。</p><h1 id="地理原因"><a href="#地理原因" class="headerlink" title="地理原因"></a>地理原因</h1><p>北方地区：松花江地处三江平原，地势平坦，河网密，排水不畅，易形成内涝</p><p>南方地区：四川、重庆、湖南、湖北暴雨，导致长江水量增大，由于这几个地方山地较多，水流速度快，而江水湖北宜昌开始，一路都是平原地区，特别是洞庭湖和鄱阳湖周边地区，地势低平，排水不畅。导致浙江地区水位预警开闸泄洪</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>总的来说，2020年，在厄尔尼诺、东北冷涡、异常的西伯利亚高压、副热带高压、地势原因的共同作用下，导致了本不该出现的南、华南北部、北同时洪涝的现象</p><h1 id="未来"><a href="#未来" class="headerlink" title="未来"></a>未来</h1><h2 id="拉尼娜是否会出现"><a href="#拉尼娜是否会出现" class="headerlink" title="拉尼娜是否会出现"></a>拉尼娜是否会出现</h2><p>网上现在有不少媒体预测可能会出现拉尼娜现象（就是反厄尔尼诺现象，有兴趣自行去了解），但是根据7月11日的海洋温度分布图来看，发生拉尼娜的可能性很低（如图），而日本气象厅也表明今年夏季趋于稳定的概率为60%。<br><strong>下图为7月11日海洋温度分布图</strong><br><img src="https://img-blog.csdnimg.cn/20200711113900344.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="厄尔尼诺会不会三次光顾"><a href="#厄尔尼诺会不会三次光顾" class="headerlink" title="厄尔尼诺会不会三次光顾"></a>厄尔尼诺会不会三次光顾</h2><p>而中国气象局发布的数据来看，也不会重新出现厄尔尼诺现象<br><img src="https://img-blog.csdnimg.cn/20200711113953465.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>所以2020年的异常天气应该会逐渐转好</p><p>今年由于厄尔尼诺的影响，目前只出现了两个台风，副热带高压的控制减弱，台风季也该开始了<br><img src="https://img-blog.csdnimg.cn/20200711164134725.png" alt="在这里插入图片描述"></p><h1 id="感谢观看，业余爱好，若有不当的地方，请斧正"><a href="#感谢观看，业余爱好，若有不当的地方，请斧正" class="headerlink" title="感谢观看，业余爱好，若有不当的地方，请斧正"></a>感谢观看，业余爱好，若有不当的地方，请斧正</h1>]]></content>
      
      
      <categories>
          
          <category> 气象/天文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 气象 </tag>
            
            <tag> 天文 </tag>
            
            <tag> 厄尔尼诺 </tag>
            
            <tag> 拉尼娜 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Wireshark抓取用户在网站的登陆密码</title>
      <link href="/2020/07/04/%E4%BD%BF%E7%94%A8Wireshark%E6%8A%93%E5%8F%96%E7%94%A8%E6%88%B7%E5%9C%A8%E7%BD%91%E7%AB%99%E7%9A%84%E7%99%BB%E9%99%86%E5%AF%86%E7%A0%81/"/>
      <url>/2020/07/04/%E4%BD%BF%E7%94%A8Wireshark%E6%8A%93%E5%8F%96%E7%94%A8%E6%88%B7%E5%9C%A8%E7%BD%91%E7%AB%99%E7%9A%84%E7%99%BB%E9%99%86%E5%AF%86%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="下载Wireshark"><a href="#下载Wireshark" class="headerlink" title="下载Wireshark"></a>下载Wireshark</h1><p><a href="https://www.wireshark.org/#download">Wireshark下载地址</a><br>下载后傻瓜式安装</p><p><img src="https://img-blog.csdnimg.cn/20200704161519253.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="获取想要抓取网站的IP"><a href="#获取想要抓取网站的IP" class="headerlink" title="获取想要抓取网站的IP"></a>获取想要抓取网站的IP</h1><p>用我们学校的教务系统为例子</p><p><img src="https://img-blog.csdnimg.cn/20200704161749812.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>记下网站：jw1.wzbc.edu.cn（注意哦，要去掉http和&#x2F;，比如<a href="http://www.4399.com/%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AA%E9%9C%80%E8%A6%81%E8%AE%B0%E4%B8%8B4399.com%E5%8D%B3%E5%8F%AF%EF%BC%89">http://www.4399.com/，我们只需要记下4399.com即可）</a></p><p>win+R 打开“运行”，在框里输入“cmd”，确定</p><p><img src="https://img-blog.csdnimg.cn/20200704161651627.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>然后在刚刚打开的黑色会话框里输入：ping jw1.wzbc.edu.cn ,然后回车，得到的IP为10.151.160.43，记下这个IP</p><p><img src="https://img-blog.csdnimg.cn/20200704161948405.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="开始抓包"><a href="#开始抓包" class="headerlink" title="开始抓包"></a>开始抓包</h1><p>打开Wireshark，选择你使用的网络，如果是WIFI就双击“WIFI”，有线就选择“以太网”</p><p><img src="https://img-blog.csdnimg.cn/20200704162106317.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>我是有线，所以我双击“以太网”打开，是这个样子，上面的数据先不用管，我们先点击左上角红色的方块停止抓包<br><img src="https://img-blog.csdnimg.cn/20200704163800687.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>然后在这里输入http and ip.addr&#x3D;&#x3D;10.151.160.43（这句话是筛选数据，就是只显示IP为我们要抓取网站的数据） ，点击右边的蓝色箭头<br><img src="https://img-blog.csdnimg.cn/20200704163702669.png" alt="在这里插入图片描述"></p><p>点击Wireshark左上角蓝色的鲨鱼鳍，开始抓包<br><img src="https://img-blog.csdnimg.cn/20200704163836466.png" alt="在这里插入图片描述"></p><p>之后，打开我们的教务系统登陆页面，登录账户<img src="https://img-blog.csdnimg.cn/20200704162541462.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200704162556523.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>登陆成功后，查看Wireshark,我们发现有一个POST（POST请求是浏览器向服务器提交数据的方式，我们的用户名和密码就是这样提交出去的），单击点开，发现我们的账号和密码，就被抓取到了，在HTML Form Encoded里面显示出来了<br><img src="https://img-blog.csdnimg.cn/20200704162843652.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><p>这就是Wireshark简单的抓取登录密码的教程，只适用于http协议的网站</p>]]></content>
      
      
      <categories>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络 </tag>
            
            <tag> Wireshark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven实现数据在前端页面展示与增删改查（Spring通用）</title>
      <link href="/2020/07/02/Maven%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E4%B8%8E%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%EF%BC%88Spring%E9%80%9A%E7%94%A8%EF%BC%89/"/>
      <url>/2020/07/02/Maven%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E4%B8%8E%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%EF%BC%88Spring%E9%80%9A%E7%94%A8%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="项目开始，先上源码下载，点击下载"><a href="#项目开始，先上源码下载，点击下载" class="headerlink" title="项目开始，先上源码下载，点击下载"></a>项目开始，先上源码下载，点击下载</h1><p>不需要积分，直接下载</p><p><a href="https://download.csdn.net/download/qq_48922459/52839676">Mave前后端的数据展示与操作源码</a></p><hr><h1 id="数据库准备"><a href="#数据库准备" class="headerlink" title="数据库准备"></a>数据库准备</h1><h2 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h2><p><a href="https://dev.mysql.com/downloads/windows/installer/8.0.html">MySQL安装地址</a><br>官网打开有点慢的，选择这个下载安装，傻瓜式一键到底<br><img src="https://img-blog.csdnimg.cn/22b5cd8b848c47d6955e63ea78f669ae.png" alt="在这里插入图片描述"></p><h2 id="建立数据库"><a href="#建立数据库" class="headerlink" title="建立数据库"></a>建立数据库</h2><p>使用Navcat或SQLyog建立创建一个数据库：wzsxy，在这个数据库上创建一张表：tb_user，并输入几条起始数据<br><img src="https://img-blog.csdnimg.cn/20200707093411830.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200707093425692.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200707093436413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="使用idea快速生成一个Maven工程"><a href="#使用idea快速生成一个Maven工程" class="headerlink" title="使用idea快速生成一个Maven工程"></a>使用idea快速生成一个Maven工程</h2><p>选择新建项目，左边的“Maven”，勾选“Create from archetype”，选择下方目录的maven-archetype-webapp，然后next<br><img src="https://img-blog.csdnimg.cn/20200702133936726.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>到了这一步，如果没有安装和配置过Maven，就选用idea自带的“Bundled(Maven 3)”，你们的和我可能不太一样，下面的两行是我自己配置的Maven设置和仓库位置，你们的选择“Bundled(Maven 3)”其他保持默认即可<br><img src="https://img-blog.csdnimg.cn/20200702134507197.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>初始的项目目录<br><img src="https://img-blog.csdnimg.cn/20200702134624824.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>我们最终搭建好的项目目录，大家可以先把目录建立好<br>解释一下bean包、dao包<br>1、bean 实体层 实体类 –&gt; 属性，构造，方法<br>2、controller层： 控制层 控制业务逻辑<br>3、dao 持久层 –&gt; 数据库的操作<br>4、service层：业务层 控制业务<br>fliter则是对未登录的网页进行拦截的操作<br><img src="https://img-blog.csdnimg.cn/20200707091404769.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>webapp下面就是我们的网页，也就是要展示和操作数据的地方，我已经配置好了网页(包含SQL代码)，源码资源里面有，在文章开头，可以无需积分下载。</p><h2 id="配置pom-xml文件"><a href="#配置pom-xml文件" class="headerlink" title="配置pom.xml文件"></a>配置pom.xml文件</h2><p>在pom中导入项目需要的dependencies依赖，依赖在下方代码中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line"></span><br><span class="line">&lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">  xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">  &lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line"></span><br><span class="line">  &lt;groupId&gt;org.example&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;maven&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;<span class="number">1.0</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">  &lt;packaging&gt;war&lt;/packaging&gt;</span><br><span class="line"></span><br><span class="line">  &lt;name&gt;maven Maven Webapp&lt;/name&gt;</span><br><span class="line">  &lt;!-- FIXME change it to the project<span class="string">&#x27;s website --&gt;</span></span><br><span class="line"><span class="string">  &lt;url&gt;http://www.example.com&lt;/url&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &lt;properties&gt;</span></span><br><span class="line"><span class="string">    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span></span><br><span class="line"><span class="string">    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;</span></span><br><span class="line"><span class="string">    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- spring版本号 --&gt;</span></span><br><span class="line"><span class="string">    &lt;spring.version&gt;5.0.2.RELEASE&lt;/spring.version&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- mybatis版本号 --&gt;</span></span><br><span class="line"><span class="string">    &lt;mybatis.version&gt;3.2.6&lt;/mybatis.version&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- log4j日志文件管理包版本 --&gt;</span></span><br><span class="line"><span class="string">    &lt;slf4j.version&gt;1.7.7&lt;/slf4j.version&gt;</span></span><br><span class="line"><span class="string">    &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;</span></span><br><span class="line"><span class="string">    &lt;c3p0.version&gt;0.9.5.2&lt;/c3p0.version&gt;</span></span><br><span class="line"><span class="string">    &lt;taglibs.version&gt;1.1.2&lt;/taglibs.version&gt;</span></span><br><span class="line"><span class="string">  &lt;/properties&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &lt;dependencies&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- spring核心包 --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;spring-test&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- mybatis核心包 --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;mybatis.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- mybatis/spring包 --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;1.2.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- 导入java ee jar 包 --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;javax&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;7.0&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;!-- 导入Mysql数据库链接jar包 --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;mysql&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;5.1.30&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- 导入dbcp的jar包，用来在applicationContext.xml中配置数据库 --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;1.2.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- JSTL标签类 --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;jstl&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;jstl&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;1.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- 日志文件管理包 --&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- log start --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;log4j&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;log4j&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;log4j.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;!-- 数据连接池 --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;com.mchange&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;c3p0&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;c3p0.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;taglibs&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;standard&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;taglibs.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;slf4j.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;$&#123;slf4j.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;!-- 导入servlet-api/jsp --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;3.1.0&lt;/version&gt;</span></span><br><span class="line"><span class="string">      &lt;scope&gt;provided&lt;/scope&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api --&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;2.3.1&lt;/version&gt;</span></span><br><span class="line"><span class="string">      &lt;scope&gt;provided&lt;/scope&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">    &lt;dependency&gt;</span></span><br><span class="line"><span class="string">      &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">      &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">      &lt;version&gt;9.0.16&lt;/version&gt;</span></span><br><span class="line"><span class="string">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &lt;/dependencies&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &lt;build&gt;</span></span><br><span class="line"><span class="string">    &lt;finalName&gt;maven&lt;/finalName&gt;</span></span><br><span class="line"><span class="string">    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span></span><br><span class="line"><span class="string">      &lt;plugins&gt;</span></span><br><span class="line"><span class="string">        &lt;plugin&gt;</span></span><br><span class="line"><span class="string">          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">          &lt;version&gt;3.1.0&lt;/version&gt;</span></span><br><span class="line"><span class="string">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span></span><br><span class="line"><span class="string">        &lt;plugin&gt;</span></span><br><span class="line"><span class="string">          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">          &lt;version&gt;3.0.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">        &lt;plugin&gt;</span></span><br><span class="line"><span class="string">          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">          &lt;version&gt;3.8.0&lt;/version&gt;</span></span><br><span class="line"><span class="string">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">        &lt;plugin&gt;</span></span><br><span class="line"><span class="string">          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">          &lt;version&gt;2.22.1&lt;/version&gt;</span></span><br><span class="line"><span class="string">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">        &lt;plugin&gt;</span></span><br><span class="line"><span class="string">          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">          &lt;version&gt;3.2.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">        &lt;plugin&gt;</span></span><br><span class="line"><span class="string">          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">          &lt;version&gt;2.5.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">        &lt;plugin&gt;</span></span><br><span class="line"><span class="string">          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">          &lt;version&gt;2.8.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">        &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">      &lt;/plugins&gt;</span></span><br><span class="line"><span class="string">    &lt;/pluginManagement&gt;</span></span><br><span class="line"><span class="string">  &lt;/build&gt;</span></span><br><span class="line"><span class="string">&lt;/project&gt;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><p>粘贴到pom文件中，然后点击pom页面右上方的刷新图标，等待所需jar包的下载，需要数分钟<br><img src="https://img-blog.csdnimg.cn/20200702135117312.png" alt="在这里插入图片描述"></p><h2 id="配置resouces"><a href="#配置resouces" class="headerlink" title="配置resouces"></a>配置resouces</h2><h3 id="配置db-properties"><a href="#配置db-properties" class="headerlink" title="配置db.properties"></a>配置db.properties</h3><p>配置db.properties文件是与我们创建的数据库建立连接，username和password是你创建数据库的初始密码，如果修改过请填写为你修改过的密码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql:<span class="comment">//localhost:3306/wzsxy?useSSL=true&amp;characterEncoding=utf-8</span></span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=<span class="number">123456</span></span><br></pre></td></tr></table></figure><h3 id="配置applicationContext-xml"><a href="#配置applicationContext-xml" class="headerlink" title="配置applicationContext.xml"></a>配置applicationContext.xml</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.XuYijie.dao.UserDao&quot;</span> &gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;findUserByUserName&quot;</span> parameterType=<span class="string">&quot;String&quot;</span> resultType=<span class="string">&quot;com.XuYijie.bean.User&quot;</span>&gt;</span><br><span class="line">        select * from tb_user where username=#&#123;username&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=<span class="string">&quot;findAll&quot;</span> resultType=<span class="string">&quot;com.XuYijie.bean.User&quot;</span> &gt;</span><br><span class="line">        select * from tb_user</span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">&quot;username!=null and username!=&#x27;&#x27;&quot;</span>&gt;</span><br><span class="line">             where username like <span class="title function_">concat</span><span class="params">(<span class="string">&quot;%&quot;</span>,#&#123;username&#125;,<span class="string">&quot;%&quot;</span>)</span></span><br><span class="line">         &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">         limit #&#123;start&#125;,<span class="number">5</span></span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;delete id=<span class="string">&quot;deleteById&quot;</span> parameterType=<span class="string">&quot;int&quot;</span>&gt;</span><br><span class="line">        delete from tb_user where id=#&#123;id&#125;</span><br><span class="line">    &lt;/delete&gt;</span><br><span class="line"></span><br><span class="line">    &lt;insert id=<span class="string">&quot;add&quot;</span> parameterType=<span class="string">&quot;user&quot;</span>&gt;</span><br><span class="line">        insert into <span class="title function_">tb_user</span> <span class="params">(username,password)</span> values (#&#123;username&#125;,#&#123;password&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=<span class="string">&quot;selectById&quot;</span> parameterType=<span class="string">&quot;int&quot;</span> resultType=<span class="string">&quot;com.XuYijie.bean.User&quot;</span>&gt;</span><br><span class="line">        select * from tb_user where id=#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;update id=<span class="string">&quot;update&quot;</span> parameterType=<span class="string">&quot;user&quot;</span>&gt;</span><br><span class="line">        update tb_user set username=#&#123;username&#125;,password=#&#123;password&#125; where id=#&#123;id&#125;</span><br><span class="line">    &lt;/update&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=<span class="string">&quot;getTotalCount&quot;</span> resultType=<span class="string">&quot;int&quot;</span>&gt;</span><br><span class="line">        select <span class="title function_">count</span><span class="params">(*)</span> from tb_user</span><br><span class="line">        &lt;<span class="keyword">if</span> test=<span class="string">&quot;username!=null and username!=&#x27;&#x27;&quot;</span>&gt;</span><br><span class="line">            where username like <span class="title function_">concat</span><span class="params">(<span class="string">&quot;%&quot;</span>,#&#123;username&#125;,<span class="string">&quot;%&quot;</span>)</span></span><br><span class="line">        &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;delete id=<span class="string">&quot;deleteAll&quot;</span> parameterType=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">        delete from tb_user where id in </span><br><span class="line">        &lt;foreach collection=<span class="string">&quot;ids&quot;</span> item=<span class="string">&quot;id&quot;</span> open=<span class="string">&quot;(&quot;</span> close=<span class="string">&quot;)&quot;</span> separator=<span class="string">&quot;,&quot;</span>&gt;</span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        &lt;/foreach&gt;</span><br><span class="line">    &lt;/delete&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><h2 id="bean层"><a href="#bean层" class="headerlink" title="bean层"></a>bean层</h2><h3 id="PageInfo"><a href="#PageInfo" class="headerlink" title="PageInfo"></a>PageInfo</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageInfo</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; list;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> totalPage;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> totalCount;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> currentPage;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;T&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getTotalPage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> totalPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTotalPage</span><span class="params">(<span class="type">int</span> totalPage)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.totalPage = totalPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSize</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getTotalCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> totalCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTotalCount</span><span class="params">(<span class="type">int</span> totalCount)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.totalCount = totalCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCurrentPage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> currentPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCurrentPage</span><span class="params">(<span class="type">int</span> currentPage)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.currentPage = currentPage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Role"><a href="#Role" class="headerlink" title="Role"></a>Role</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Role</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String rolename;</span><br><span class="line">    <span class="keyword">private</span> String roledesc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Role&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, rolename=&#x27;&quot;</span> + rolename + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, roledesc=&#x27;&quot;</span> + roledesc + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRolename</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rolename;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRolename</span><span class="params">(String rolename)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rolename = rolename;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRoledesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> roledesc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRoledesc</span><span class="params">(String roledesc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.roledesc = roledesc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="UserRole"><a href="#UserRole" class="headerlink" title="UserRole"></a>UserRole</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRole</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> userId;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> roleId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;UserRole&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, userId=&quot;</span> + userId +</span><br><span class="line">                <span class="string">&quot;, roleId=&quot;</span> + roleId +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUserId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserId</span><span class="params">(<span class="type">int</span> userId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getRoleId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> roleId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRoleId</span><span class="params">(<span class="type">int</span> roleId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.roleId = roleId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="User"><a href="#User" class="headerlink" title="User"></a>User</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, String username, String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="controller层"><a href="#controller层" class="headerlink" title="controller层"></a>controller层</h2><h3 id="UserController"><a href="#UserController" class="headerlink" title="UserController"></a>UserController</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.PageInfo;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.Role;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.service.IRoleService;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.service.IUserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IUserService userService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IRoleService roleService;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/login.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">login</span><span class="params">(User user, HttpSession session)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> userService.login(user.getUsername(), user.getPassword());</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="keyword">if</span> (id!=-<span class="number">1</span>)&#123;</span><br><span class="line">            List&lt;Integer&gt; roleIds = roleService.findRoleId(id);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;roleIds&quot;</span>,roleIds);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">            modelAndView.setViewName(<span class="string">&quot;main&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            modelAndView.setViewName(<span class="string">&quot;../failer&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findAll.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">findAll</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="type">int</span> currentPage,String username,<span class="meta">@RequestParam(defaultValue = &quot;0&quot;)</span><span class="type">int</span> type,HttpSession session)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (type==<span class="number">1</span>)&#123;</span><br><span class="line">            session.setAttribute(<span class="string">&quot;searchname&quot;</span>,username);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            username=(String) session.getAttribute(<span class="string">&quot;searchname&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        PageInfo&lt;User&gt; pageInfo = userService.findAll(currentPage,username);</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;pageInfo&quot;</span>,pageInfo);</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;user-list&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/deleteById.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">        userService.deleteById(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:findAll.do&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/add.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">add</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        userService.add(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:findAll.do&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toUpdate.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">toUpdate</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.selectUserById(id);</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;user-update&quot;</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/update.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        userService.update(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:findAll.do&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;deleteAll.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteAll</span><span class="params">(String userList)</span>&#123;</span><br><span class="line">        String[] strs = userList.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        List&lt;Integer&gt; ids = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String s:strs)&#123;</span><br><span class="line">            ids.add(Integer.parseInt(s));</span><br><span class="line">        &#125;</span><br><span class="line">        userService.deleteAll(ids);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:findAll.do&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;toAddRole.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">toAddRole</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">        List&lt;Role&gt; roleList = roleService.findRoleByUserId(id);</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        mv.addObject(<span class="string">&quot;roles&quot;</span>,roleList);</span><br><span class="line">        mv.addObject(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;user-role-add&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">add</span><span class="params">(String roleList,String userId)</span>&#123;</span><br><span class="line">        String[] strs = roleList.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        List&lt;Integer&gt; ids=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(String s:strs)&#123;</span><br><span class="line">            ids.add(Integer.parseInt(s));</span><br><span class="line">        &#125;</span><br><span class="line">        roleService.add(ids,userId);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="dao层"><a href="#dao层" class="headerlink" title="dao层"></a>dao层</h2><h3 id="UserDao"><a href="#UserDao" class="headerlink" title="UserDao"></a>UserDao</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    User <span class="title function_">findUserByUserName</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">(<span class="meta">@Param(&quot;start&quot;)</span> <span class="type">int</span> start,<span class="meta">@Param(&quot;username&quot;)</span> String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">selectById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">getTotalCount</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span>String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteAll</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> List&lt;Integer&gt; ids)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="RoleDao"><a href="#RoleDao" class="headerlink" title="RoleDao"></a>RoleDao</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.Role;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.UserRole;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RoleDao</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; <span class="title function_">findRoleIdByUserId</span><span class="params">(<span class="type">int</span> userid)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Role&gt; <span class="title function_">findRoleByUserId</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addRole</span><span class="params">(UserRole userRole)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="service层"><a href="#service层" class="headerlink" title="service层"></a>service层</h2><p>new pageinfo 对象 给pageinfo 赋值</p><h3 id="IUserService"><a href="#IUserService" class="headerlink" title="IUserService"></a>IUserService</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.PageInfo;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">login</span><span class="params">(String username,String password)</span>;</span><br><span class="line"></span><br><span class="line">    PageInfo&lt;User&gt; <span class="title function_">findAll</span><span class="params">(<span class="type">int</span> currentPage,String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">selectUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteAll</span><span class="params">(List&lt;Integer&gt; ids)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="IRoleService"><a href="#IRoleService" class="headerlink" title="IRoleService"></a>IRoleService</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.Role;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IRoleService</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; <span class="title function_">findRoleId</span><span class="params">(<span class="type">int</span> userId)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Role&gt; <span class="title function_">findRoleByUserId</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(List&lt;Integer&gt; ids, String userId)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="impl包下的UserService"><a href="#impl包下的UserService" class="headerlink" title="impl包下的UserService"></a>impl包下的UserService</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.PageInfo;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.service.IUserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">login</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.findUserByUserName(username);</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="literal">null</span>&amp;&amp;user.getPassword().equals(password))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;User&gt; <span class="title function_">findAll</span><span class="params">(<span class="type">int</span> currentPage,String username)</span>&#123;</span><br><span class="line">        PageInfo&lt;User&gt; pageInfo=<span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;();</span><br><span class="line">        pageInfo.setSize(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">tc</span> <span class="operator">=</span> userDao.getTotalCount(username);</span><br><span class="line">        pageInfo.setTotalCount(tc);</span><br><span class="line">        <span class="type">int</span> <span class="variable">tp</span> <span class="operator">=</span> (<span class="type">int</span>)Math.ceil(tc/<span class="number">5.0</span>);</span><br><span class="line">        pageInfo.setTotalPage(tp);</span><br><span class="line">        <span class="keyword">if</span> (currentPage&lt;<span class="number">1</span>)&#123;</span><br><span class="line">            pageInfo.setCurrentPage(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentPage&gt;tp) &#123;</span><br><span class="line">            pageInfo.setCurrentPage(tp);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            pageInfo.setCurrentPage(currentPage);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> (pageInfo.getCurrentPage()-<span class="number">1</span>)*<span class="number">5</span>;</span><br><span class="line">        List&lt;User&gt; userList=userDao.findAll(start,username);</span><br><span class="line">        pageInfo.setList(userList);</span><br><span class="line">        <span class="keyword">return</span> pageInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    public List&lt;User&gt; findAll() &#123;</span></span><br><span class="line"><span class="comment">//        return userDao.findAll();</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">        userDao.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        userDao.add(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">selectUserById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.selectById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        userDao.update(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteAll</span><span class="params">(List&lt;Integer&gt; ids)</span> &#123;</span><br><span class="line">        userDao.deleteAll(ids);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="impl包下的RoleService"><a href="#impl包下的RoleService" class="headerlink" title="impl包下的RoleService"></a>impl包下的RoleService</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.Role;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.UserRole;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.dao.RoleDao;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.service.IRoleService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RoleService</span> <span class="keyword">implements</span> <span class="title class_">IRoleService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RoleDao roleDao;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">findRoleId</span><span class="params">(<span class="type">int</span> userId)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> roleDao.findRoleIdByUserId(userId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Role&gt; <span class="title function_">findRoleByUserId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> roleDao.findRoleByUserId(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(List&lt;Integer&gt; ids, String userId)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> roleId:ids)&#123;</span><br><span class="line">            UserRole userRole=<span class="keyword">new</span> <span class="title class_">UserRole</span>();</span><br><span class="line">            userRole.setUserId(Integer.parseInt(userId));</span><br><span class="line">            userRole.setRoleId(roleId);</span><br><span class="line">            roleDao.addRole(userRole);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="fliter"><a href="#fliter" class="headerlink" title="fliter"></a>fliter</h2><p>在filter里面 判断session里是否有user  如果没有user并且当前的请求不是login.do 跳转到登入页面否则继续执行<br>步骤：<br>a.新建 loginfilter implements Filter<br>在filter里面 判断session里是否有user  如果没有user并且当前的请求不是login.do 跳转到登入页面<br>否则继续执行<br>b.web.xml  配置filter  拦截所有的*.do<br>c.到userController里的login 方法，登入成功后把用户信息放到session里面</p><h3 id="LoginFliter"><a href="#LoginFliter" class="headerlink" title="LoginFliter"></a>LoginFliter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        <span class="keyword">if</span> (user==<span class="literal">null</span> &amp;&amp; uri.indexOf(<span class="string">&quot;login.do&quot;</span>)==-<span class="number">1</span>)&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;login.jsp&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            filterChain.doFilter(request,response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="配置Tomcat"><a href="#配置Tomcat" class="headerlink" title="配置Tomcat"></a>配置Tomcat</h2><p><a href="https://tomcat.apache.org/download-90.cgi">Tomcat下载地址</a><br>选择Core里面的最后一个下载安装<br><img src="https://img-blog.csdnimg.cn/20200702143916832.png" alt="在这里插入图片描述"><br>在idea右上角点击“Add Configuration”<br><img src="https://img-blog.csdnimg.cn/20200702144011299.png" alt="在这里插入图片描述"><br>在左上角“加号”里面选择Tomcat Service下的Local<br><img src="https://img-blog.csdnimg.cn/20200702144055526.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后点右边“+”“Artifact”添加一个maven:war即可<br><img src="https://img-blog.csdnimg.cn/20200702144441946.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="项目展示"><a href="#项目展示" class="headerlink" title="项目展示"></a>项目展示</h1><p>保持MySQL和数据库的连接状态<br>运行程序<br>等待运行完成<br>在浏览器地址栏中输入 localhost:8080&#x2F;  回车<br><img src="https://img-blog.csdnimg.cn/2020070214322712.png" alt="在这里插入图片描述"><br>即可进入我们的登录页面，输入数据库里面的任意一个username和password<br><img src="https://img-blog.csdnimg.cn/2020070214495266.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>页面会显示我们数据库里的数据，并可以在页面上直接进行添加修改和删除<br><img src="https://img-blog.csdnimg.cn/20200702145135871.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="再放一次源码，以免你们没看到"><a href="#再放一次源码，以免你们没看到" class="headerlink" title="再放一次源码，以免你们没看到"></a>再放一次源码，以免你们没看到</h1><p>不需要积分，直接下载</p><p><a href="https://download.csdn.net/download/qq_48922459/52839676">Mave前后端的数据展示与操作源码</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用JavaScript实现网页上鼠标点击生成爱心图案</title>
      <link href="/2020/06/29/%E4%BD%BF%E7%94%A8JavaScript%E5%AE%9E%E7%8E%B0%E7%BD%91%E9%A1%B5%E4%B8%8A%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%94%9F%E6%88%90%E7%88%B1%E5%BF%83%E5%9B%BE%E6%A1%88/"/>
      <url>/2020/06/29/%E4%BD%BF%E7%94%A8JavaScript%E5%AE%9E%E7%8E%B0%E7%BD%91%E9%A1%B5%E4%B8%8A%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%94%9F%E6%88%90%E7%88%B1%E5%BF%83%E5%9B%BE%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    !<span class="keyword">function</span>(<span class="params">e, t, a</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">r</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="number">0</span>; e &lt; s.<span class="property">length</span>; e++) s[e].<span class="property">alpha</span> &lt;= <span class="number">0</span> ? (t.<span class="property">body</span>.<span class="title function_">removeChild</span>(s[e].<span class="property">el</span>), s.<span class="title function_">splice</span>(e, <span class="number">1</span>)) : (s[e].<span class="property">y</span>--, s[e].<span class="property">scale</span> += <span class="number">.004</span>, s[e].<span class="property">alpha</span> -= <span class="number">.013</span>, s[e].<span class="property">el</span>.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;left:&quot;</span> + s[e].<span class="property">x</span> + <span class="string">&quot;px;top:&quot;</span> + s[e].<span class="property">y</span> + <span class="string">&quot;px;opacity:&quot;</span> + s[e].<span class="property">alpha</span> + <span class="string">&quot;;transform:scale(&quot;</span> + s[e].<span class="property">scale</span> + <span class="string">&quot;,&quot;</span> + s[e].<span class="property">scale</span> + <span class="string">&quot;) rotate(45deg);background:&quot;</span> + s[e].<span class="property">color</span> + <span class="string">&quot;;z-index:99999&quot;</span>);</span><br><span class="line">            <span class="title function_">requestAnimationFrame</span>(r)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">n</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> t = <span class="string">&quot;function&quot;</span> == <span class="keyword">typeof</span> e.<span class="property">onclick</span> &amp;&amp; e.<span class="property">onclick</span>;</span><br><span class="line">            e.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                t &amp;&amp; <span class="title function_">t</span>(),</span><br><span class="line">                    <span class="title function_">o</span>(e)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">o</span>(<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> a = t.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">            a.<span class="property">className</span> = <span class="string">&quot;heart&quot;</span>,</span><br><span class="line">                s.<span class="title function_">push</span>(&#123;</span><br><span class="line">                    <span class="attr">el</span>: a,</span><br><span class="line">                    <span class="attr">x</span>: e.<span class="property">clientX</span> - <span class="number">5</span>,</span><br><span class="line">                    <span class="attr">y</span>: e.<span class="property">clientY</span> - <span class="number">5</span>,</span><br><span class="line">                    <span class="attr">scale</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">alpha</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">color</span>: <span class="title function_">c</span>()</span><br><span class="line">                &#125;),</span><br><span class="line">                t.<span class="property">body</span>.<span class="title function_">appendChild</span>(a)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> a = t.<span class="title function_">createElement</span>(<span class="string">&quot;style&quot;</span>);</span><br><span class="line">            a.<span class="property">type</span> = <span class="string">&quot;text/css&quot;</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                a.<span class="title function_">appendChild</span>(t.<span class="title function_">createTextNode</span>(e))</span><br><span class="line">            &#125; <span class="keyword">catch</span>(t) &#123;</span><br><span class="line">                a.<span class="property">styleSheet</span>.<span class="property">cssText</span> = e</span><br><span class="line">            &#125;</span><br><span class="line">            t.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(a)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;rgb(&quot;</span> + ~~ (<span class="number">255</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;,&quot;</span> + ~~ (<span class="number">255</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;,&quot;</span> + ~~ (<span class="number">255</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;)&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> s = [];</span><br><span class="line">        e.<span class="property">requestAnimationFrame</span> = e.<span class="property">requestAnimationFrame</span> || e.<span class="property">webkitRequestAnimationFrame</span> || e.<span class="property">mozRequestAnimationFrame</span> || e.<span class="property">oRequestAnimationFrame</span> || e.<span class="property">msRequestAnimationFrame</span> ||</span><br><span class="line">            <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                <span class="built_in">setTimeout</span>(e, <span class="number">1e3</span> / <span class="number">60</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">i</span>(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),</span><br><span class="line">            <span class="title function_">n</span>(),</span><br><span class="line">            <span class="title function_">r</span>()</span><br><span class="line">    &#125; (<span class="variable language_">window</span>, <span class="variable language_">document</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><p><img src="https://img-blog.csdnimg.cn/20200629202434471.gif" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言写一个很好玩的皇帝的后宫小游戏</title>
      <link href="/2020/06/29/C%E8%AF%AD%E8%A8%80%E5%86%99%E4%B8%80%E4%B8%AA%E5%BE%88%E5%A5%BD%E7%8E%A9%E7%9A%84%E7%9A%87%E5%B8%9D%E7%9A%84%E5%90%8E%E5%AE%AB%E5%B0%8F%E6%B8%B8%E6%88%8F/"/>
      <url>/2020/06/29/C%E8%AF%AD%E8%A8%80%E5%86%99%E4%B8%80%E4%B8%AA%E5%BE%88%E5%A5%BD%E7%8E%A9%E7%9A%84%E7%9A%87%E5%B8%9D%E7%9A%84%E5%90%8E%E5%AE%AB%E5%B0%8F%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>只是单纯喜欢C语言，闲着无事把以前学习的时候的案例编了一下，都是很基础的代码，for,swich,if这些，基础好的看完后完全可以自己写出这种小游戏</p><h2 id="先演示一下"><a href="#先演示一下" class="headerlink" title="先演示一下"></a>先演示一下</h2><p>游戏设定：后宫中有一些妃子。妃子的级别根据好感度的分为”贵人”,”嫔妃”,”贵妃”,”皇贵妃”,”皇后”，选择一些互动可以增加或减少好感度。<br>游戏开始：<br>1、自行输入自己的名号<br>2、选择“皇帝下旨选妃”或“翻牌宠妃”或“打入冷宫”或“单独召见爱妃去小树林做纯洁的事”</p><p><strong>皇帝下旨选妃（如图）：因为妃子数量最多为5，所以提示“陛下注意身体呀！”，无法增加妃子</strong><br><img src="https://img-blog.csdnimg.cn/20200629195420413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p><strong>翻牌宠妃（如图）：输入翻牌妃子“何光辉”，“何光辉”好感度上升10，其他妃子下降10</strong><br><img src="https://img-blog.csdnimg.cn/20200701122052769.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>单独召见爱妃去小树林做纯洁的事（如图）：<br>选择和“金子亿”去小树林做纯洁的事情——就散散步，没有获得好感度</strong><br><strong>选择和“孙茂珺”去小树林做纯洁的事——强行推到，由于我的粗鲁，孙茂珺对我的好感度下降20</strong><br><img src="https://img-blog.csdnimg.cn/20200629201708657.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200629200913645.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>打入冷宫（如图）：选择把“杨洪利”打入冷宫，从妃子列表删除了“杨洪利”</strong><br><img src="https://img-blog.csdnimg.cn/20200629195218900.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="上源码"><a href="#上源码" class="headerlink" title="上源码"></a>上源码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX 6       <span class="comment">//表示系统要求最大妃子数量</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j,temp;             <span class="comment">//循环变量和临时变量</span></span><br><span class="line">    <span class="type">int</span> searchIndex=<span class="number">-1</span>;     <span class="comment">//存放查找的元素的下标</span></span><br><span class="line">    <span class="type">int</span> count=<span class="number">6</span>;            <span class="comment">//当前未打入冷宫的妃子个数</span></span><br><span class="line">    <span class="type">char</span> emperorName[<span class="number">50</span>];   <span class="comment">//皇帝的名号</span></span><br><span class="line">    <span class="type">int</span> choice;             <span class="comment">//皇帝的选择1-4之间</span></span><br><span class="line">    <span class="type">char</span> tempName[<span class="number">20</span>];      <span class="comment">//用来存放临时字符串的字符数组</span></span><br><span class="line">    <span class="type">char</span> names[MAX][<span class="number">20</span>]=&#123;<span class="string">&quot;孙茂珺&quot;</span>,<span class="string">&quot;祁兴哲&quot;</span>,<span class="string">&quot;金子亿&quot;</span>,<span class="string">&quot;何光辉&quot;</span>,<span class="string">&quot;杨洪利&quot;</span>&#125;;</span><br><span class="line">    <span class="type">char</span> levelName[<span class="number">5</span>][<span class="number">10</span>]=&#123;<span class="string">&quot;贵人&quot;</span>,<span class="string">&quot;嫔妃&quot;</span>,<span class="string">&quot;贵妃&quot;</span>,<span class="string">&quot;皇贵妃&quot;</span>,<span class="string">&quot;皇后&quot;</span>&#125;;</span><br><span class="line">    <span class="type">int</span> levels[MAX]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="type">int</span> loves[MAX]=&#123;<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;各嫔妃的当前状态\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%-12s级别\t好感度\n&quot;</span>,<span class="string">&quot;姓名&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;count<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%-12s%s\t%d\n&quot;</span>,names[i],levelName[levels[i]],loves[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;请输入当前登录的皇帝名号：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,emperorName);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;皇帝 %s 驾临，有事上奏，无事退朝！\n&quot;</span>,emperorName);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;1、皇帝下旨选妃。\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;2、翻牌宠妃。\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;3、打入冷宫！\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;4、单独召见爱妃去小树林做纯洁的事。\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;陛下请选择：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;choice);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">    <span class="keyword">switch</span>(choice)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">if</span>(count&lt;MAX)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;请输入娘娘的名讳：&quot;</span>);</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,names[count]);</span><br><span class="line">                levels[count]=<span class="number">0</span>;</span><br><span class="line">                loves[count]=<span class="number">100</span>;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;陛下注意身体呀！\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;陛下，请输入今天翻牌的妃子名讳：&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,tempName);</span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;count;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">strcmp</span>(tempName,names[i])==<span class="number">0</span>) <span class="comment">//strcmp判断字符串是否相等</span></span><br><span class="line">                &#123;</span><br><span class="line">                    loves[i]+=<span class="number">10</span>;</span><br><span class="line">                    levels[i]=levels[i]&gt;=<span class="number">4</span>?<span class="number">4</span>:levels[i]+<span class="number">1</span>; <span class="comment">//相当于if,else</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    loves[i]-=<span class="number">10</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;陛下，请输入要打入冷宫的妃子名讳：&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,tempName);</span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;count;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">strcmp</span>(tempName,names[i])==<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    searchIndex=i;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="number">-1</span>==searchIndex)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;虚惊一场，无人被打入冷宫，该吃吃该喝喝！\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(i=searchIndex;i&lt;count<span class="number">-1</span>;i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">strcpy</span>(names[i],names[i+<span class="number">1</span>]); <span class="comment">//字符串需用stecpy赋值</span></span><br><span class="line">                    loves[i]=loves[i+<span class="number">1</span>];</span><br><span class="line">                    levels[i]=levels[i+<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                count--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;请输入单独召见去小树林做纯洁的事的爱妃名讳：&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,tempName);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;1、强行推到\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;2、温柔哄骗\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;3、聊点政事\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;4、就散散步\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;陛下想做哪件纯洁的事：&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;temp);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">            <span class="keyword">switch</span>(temp)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%s：“陛下不要！”\n&quot;</span>,tempName);</span><br><span class="line">                    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">                    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;count;i++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(tempName,names[i])==<span class="number">0</span>)</span><br><span class="line">                        &#123;</span><br><span class="line">                            loves[i]-=<span class="number">20</span>;</span><br><span class="line">                            <span class="built_in">printf</span>(<span class="string">&quot;\n由于您的粗鲁，您与%s的好感度下降了20。\n&quot;</span>,tempName);</span><br><span class="line">                            <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%s：“陛下，我们来爱爱吧！”\n&quot;</span>,tempName);</span><br><span class="line">                    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">                    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;count;i++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(tempName,names[i])==<span class="number">0</span>)</span><br><span class="line">                        &#123;</span><br><span class="line">                            loves[i]+=<span class="number">20</span>;</span><br><span class="line">                            <span class="built_in">printf</span>(<span class="string">&quot;\n一番春光过后，您与%s的好感度增加了20。\n&quot;</span>,tempName);</span><br><span class="line">                            <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%s：“你真无趣！我走了！”\n&quot;</span>,tempName);</span><br><span class="line">                    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">                    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;count;i++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(tempName,names[i])==<span class="number">0</span>) <span class="comment">//strcmp判断字符串是否相等</span></span><br><span class="line">                        &#123;</span><br><span class="line">                            loves[i]-=<span class="number">5</span>;</span><br><span class="line">                            <span class="built_in">printf</span>(<span class="string">&quot;\n显然女人不爱政事，您与%s的好感度下降了5。\n&quot;</span>,tempName);</span><br><span class="line">                            <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%s：“就只散散步吗？”\n&quot;</span>,tempName);</span><br><span class="line">                    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span>(<span class="built_in">strcmp</span>(tempName,names[i])==<span class="number">0</span>) <span class="comment">//strcmp判断字符串是否相等</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;\n您与%s的好感度没有变化。\n&quot;</span>,tempName);</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\n陛下，请升级来解锁更多纯洁的事！&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;count<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;count<span class="number">-1</span>;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(levels[j]&lt;levels[j+<span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                temp=levels[j];</span><br><span class="line">                levels[j]=levels[j+<span class="number">1</span>];</span><br><span class="line">                levels[j+<span class="number">1</span>]=temp;</span><br><span class="line">                temp=loves[j];</span><br><span class="line">                loves[j]=loves[j+<span class="number">1</span>];</span><br><span class="line">                loves[j+<span class="number">1</span>]=temp;</span><br><span class="line">                <span class="built_in">strcpy</span>(tempName,names[j]);</span><br><span class="line">                <span class="built_in">strcpy</span>(names[j],names[j+<span class="number">1</span>]);</span><br><span class="line">                <span class="built_in">strcpy</span>(names[j+<span class="number">1</span>],tempName);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;各嫔妃的当前状态\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%-12s级别\t好感度\n&quot;</span>,<span class="string">&quot;姓名&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;count<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%-12s%s\t%d\n&quot;</span>,names[i],levelName[levels[i]],loves[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*********************************************\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>没有总结，就是C语言基础学完以后，可以写一写这种逻辑较多的小游戏，可以巩固记忆，代码不完善，还可以实现更多的功能，有兴趣的继续修改完善把</p>]]></content>
      
      
      <categories>
          
          <category> C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言构建单链表</title>
      <link href="/2020/06/29/C%E8%AF%AD%E8%A8%80%E6%9E%84%E5%BB%BA%E5%8D%95%E9%93%BE%E8%A1%A8/"/>
      <url>/2020/06/29/C%E8%AF%AD%E8%A8%80%E6%9E%84%E5%BB%BA%E5%8D%95%E9%93%BE%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;LNode,*LinkList;</span><br><span class="line"></span><br><span class="line">LinkList <span class="title function_">Create_LinkList1</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    LinkList L=<span class="literal">NULL</span>;</span><br><span class="line">    LNode *s;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);</span><br><span class="line">    <span class="keyword">while</span>(x!=<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        s=(LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">        s-&gt;data=x;</span><br><span class="line">        s-&gt;next=L;</span><br><span class="line">        L=s;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> L;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintList</span><span class="params">(LinkList L)</span></span><br><span class="line">&#123;</span><br><span class="line">LNode*s=L;</span><br><span class="line"><span class="keyword">while</span>(s!=<span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,s-&gt;data);</span><br><span class="line">s=s-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">LinkList L;</span><br><span class="line">L=Create_LinkList1();</span><br><span class="line">PrintList(L);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运行效果图"><a href="#运行效果图" class="headerlink" title="运行效果图"></a>运行效果图</h2><p><img src="https://img-blog.csdnimg.cn/20200629193501300.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用纯CSS改变网页滚动条的样式</title>
      <link href="/2020/06/29/%E4%BD%BF%E7%94%A8CSS%E5%AE%9E%E7%8E%B0%E5%8F%98%E8%89%B2%E9%9C%93%E8%99%B9%E6%96%87%E5%AD%97/"/>
      <url>/2020/06/29/%E4%BD%BF%E7%94%A8CSS%E5%AE%9E%E7%8E%B0%E5%8F%98%E8%89%B2%E9%9C%93%E8%99%B9%E6%96%87%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.name</span>&#123;   </span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>:<span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-clip</span>: border-box;</span></span><br><span class="line"><span class="language-css">    -webkit-<span class="attribute">background-clip</span>: text;</span></span><br><span class="line"><span class="language-css">    -webkit-text-fill-<span class="attribute">color</span>: transparent;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#FF512F</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">7px</span> <span class="number">#ffd800</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="number">#ffd800</span> <span class="number">0%</span>, <span class="number">#ff512f</span> <span class="number">100%</span>, <span class="number">#fff</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation</span>: glow-animation <span class="number">2s</span> infinite linear;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#FFC0CB</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">vertical-align</span>: inherit;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> glow-animation&#123;</span></span><br><span class="line"><span class="language-css">    <span class="number">0%</span>&#123;<span class="attribute">filter</span>:<span class="built_in">hue-rotate</span>(-<span class="number">360deg</span>)&#125;</span></span><br><span class="line"><span class="language-css">    <span class="number">100%</span>&#123;<span class="attribute">filter</span>:<span class="built_in">hue-rotate</span>(<span class="number">360deg</span>)&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="实现效果"><a href="#实现效果" class="headerlink" title="实现效果"></a>实现效果</h2><p>实际动画很流畅，下图为录制的GIF帧率较低<br><img src="https://img-blog.csdnimg.cn/2020062919262875.gif" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用纯JavaScript实现全网页动态樱花飘落特效</title>
      <link href="/2020/06/29/%E4%BD%BF%E7%94%A8%E7%BA%AFJavaScript%E5%AE%9E%E7%8E%B0%E5%85%A8%E7%BD%91%E9%A1%B5%E5%8A%A8%E6%80%81%E6%A8%B1%E8%8A%B1%E9%A3%98%E8%90%BD%E7%89%B9%E6%95%88/"/>
      <url>/2020/06/29/%E4%BD%BF%E7%94%A8%E7%BA%AFJavaScript%E5%AE%9E%E7%8E%B0%E5%85%A8%E7%BD%91%E9%A1%B5%E5%8A%A8%E6%80%81%E6%A8%B1%E8%8A%B1%E9%A3%98%E8%90%BD%E7%89%B9%E6%95%88/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><font color=#999AAA >很多人都喜欢一些花里胡哨的特效，我也挺喜欢，分享给大家</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>全屏樱花飘落<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> stop, staticx;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">    img.<span class="property">src</span> = <span class="string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUgAAAEwCAYAAADVZeifAAAACXBIWXMAAACYAAAAmAGiyIKYAAAHG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBSaWdodHM9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9yaWdodHMvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NDFDMjQxQjYyNjIwNjgxMTgwODNEMjE2MDAzOTU1NDQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDozNDVjOWViOC04NDc4LTFkNDctOGRjMi0yZDkyOGNhYTYxZWQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YjAzN2ZiMGItNTU5Mi0xYjRkLWJjZGQtOWU4NGExMDJiMGM2IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA1LTA5VDE0OjQ5OjM3KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wNS0wOVQxNDo1MToyNSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNS0wOVQxNDo1MToyNSswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMjVlZWE3LTEyY2QtMTY0NC04ZDAzLWFjOTE2ZTAxZDQ1YyIgc3RSZWY6ZG9jdW1lbnRJRD0idXVpZDoxRDIwNUFGNjZCRDlFNTExOUM5REMwMzg2RjlEQjFGNyIvPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphYmMzNjIzMy1hOWNkLWNiNDQtODViYi0zZTgyMjEwYmIxMjYiIHN0RXZ0OndoZW49IjIwMTgtMDUtMDlUMTQ6NTE6MjUrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjAzN2ZiMGItNTU5Mi0xYjRkLWJjZGQtOWU4NGExMDJiMGM2IiBzdEV2dDp3aGVuPSIyMDE4LTA1LTA5VDE0OjUxOjI1KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2Vx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&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">Sakura</span>(<span class="params">x, y, s, r, fn</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">x</span> = x;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">y</span> = y;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">s</span> = s;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">r</span> = r;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">fn</span> = fn;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Sakura</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">draw</span> = <span class="keyword">function</span> (<span class="params">cxt</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        cxt.<span class="title function_">save</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> xc = <span class="number">40</span> * <span class="variable language_">this</span>.<span class="property">s</span> / <span class="number">4</span>;</span></span><br><span class="line"><span class="language-javascript">        cxt.<span class="title function_">translate</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>);</span></span><br><span class="line"><span class="language-javascript">        cxt.<span class="title function_">rotate</span>(<span class="variable language_">this</span>.<span class="property">r</span>);</span></span><br><span class="line"><span class="language-javascript">        cxt.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">40</span> * <span class="variable language_">this</span>.<span class="property">s</span>, <span class="number">40</span> * <span class="variable language_">this</span>.<span class="property">s</span>)</span></span><br><span class="line"><span class="language-javascript">        cxt.<span class="title function_">restore</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Sakura</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">update</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">x</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">x</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">y</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">y</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">y</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">r</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">r</span>(<span class="variable language_">this</span>.<span class="property">r</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">x</span> &gt; <span class="variable language_">window</span>.<span class="property">innerWidth</span> || <span class="variable language_">this</span>.<span class="property">x</span> &lt; <span class="number">0</span> || <span class="variable language_">this</span>.<span class="property">y</span> &gt; <span class="variable language_">window</span>.<span class="property">innerHeight</span> || <span class="variable language_">this</span>.<span class="property">y</span> &lt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;fnr&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">x</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;x&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">y</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">s</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;s&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;r&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">x</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">y</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;y&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">s</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;s&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;r&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">SakuraList</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">list</span> = [];</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> (<span class="params">sakura</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(sakura);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">update</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> i = <span class="number">0</span>, len = <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">list</span>[i].<span class="title function_">update</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">draw</span> = <span class="keyword">function</span> (<span class="params">cxt</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> i = <span class="number">0</span>, len = <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">list</span>[i].<span class="title function_">draw</span>(cxt);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">get</span> = <span class="keyword">function</span> (<span class="params">i</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">list</span>[i];</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">size</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">getRandom</span>(<span class="params">option</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> ret, random;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">switch</span> (option) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">case</span> <span class="string">&#x27;x&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                ret = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">case</span> <span class="string">&#x27;y&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                ret = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                ret = <span class="title class_">Math</span>.<span class="title function_">random</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                ret = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">6</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">case</span> <span class="string">&#x27;fnx&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                random = -<span class="number">0.5</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>();</span></span><br><span class="line"><span class="language-javascript">                ret = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> x + <span class="number">0.5</span> * random - <span class="number">1.7</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">case</span> <span class="string">&#x27;fny&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                random = <span class="number">1.5</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.7</span></span></span><br><span class="line"><span class="language-javascript">                ret = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> y + random;</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">case</span> <span class="string">&#x27;fnr&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                random = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.03</span>;</span></span><br><span class="line"><span class="language-javascript">                ret = <span class="keyword">function</span> (<span class="params">r</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> r + random;</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> ret;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">startSakura</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        requestAnimationFrame = <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">oRequestAnimationFrame</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">                cxt;</span></span><br><span class="line"><span class="language-javascript">        staticx = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="title function_">setAttribute</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;position: fixed;left: 0;top: 0;pointer-events: none;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="title function_">setAttribute</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;canvas_sakura&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;body&#x27;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(canvas);</span></span><br><span class="line"><span class="language-javascript">        cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> sakuraList = <span class="keyword">new</span> <span class="title class_">SakuraList</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> sakura, randomX, randomY, randomS, randomR, randomFnx, randomFny, randomFnR;</span></span><br><span class="line"><span class="language-javascript">            randomX = <span class="title function_">getRandom</span>(<span class="string">&#x27;x&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            randomY = <span class="title function_">getRandom</span>(<span class="string">&#x27;y&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            randomR = <span class="title function_">getRandom</span>(<span class="string">&#x27;r&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            randomS = <span class="title function_">getRandom</span>(<span class="string">&#x27;s&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            randomFnx = <span class="title function_">getRandom</span>(<span class="string">&#x27;fnx&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            randomFny = <span class="title function_">getRandom</span>(<span class="string">&#x27;fny&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            randomFnR = <span class="title function_">getRandom</span>(<span class="string">&#x27;fnr&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            sakura = <span class="keyword">new</span> <span class="title class_">Sakura</span>(randomX, randomY, randomS, randomR, &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">x</span>: randomFnx,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">y</span>: randomFny,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">r</span>: randomFnR</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            sakura.<span class="title function_">draw</span>(cxt);</span></span><br><span class="line"><span class="language-javascript">            sakuraList.<span class="title function_">push</span>(sakura);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        stop = <span class="title function_">requestAnimationFrame</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            cxt.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span></span><br><span class="line"><span class="language-javascript">            sakuraList.<span class="title function_">update</span>();</span></span><br><span class="line"><span class="language-javascript">            sakuraList.<span class="title function_">draw</span>(cxt);</span></span><br><span class="line"><span class="language-javascript">            stop = <span class="title function_">requestAnimationFrame</span>(<span class="variable language_">arguments</span>.<span class="property">callee</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> canvasSnow = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas_sakura&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        canvasSnow.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span></span><br><span class="line"><span class="language-javascript">        canvasSnow.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    img.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">startSakura</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">stopp</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (staticx) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> child = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas_sakura&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            child.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(child);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="title function_">cancelAnimationFrame</span>(stop);</span></span><br><span class="line"><span class="language-javascript">            staticx = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">startSakura</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="实现效果如图"><a href="#实现效果如图" class="headerlink" title="实现效果如图"></a>实现效果如图</h2><p>真实画面是流畅的，此处为录制的GIF帧率较低</p><p><img src="https://img-blog.csdnimg.cn/20200629191933926.gif" alt="在这里插入图片描述"></p><hr><h2 id="马上2202年了，上面的写法已经无法通过-Vue-和-ES6-的语法规范了，再放一个我修改过的，可在-Vue-的组件里引用"><a href="#马上2202年了，上面的写法已经无法通过-Vue-和-ES6-的语法规范了，再放一个我修改过的，可在-Vue-的组件里引用" class="headerlink" title="马上2202年了，上面的写法已经无法通过 Vue 和 ES6 的语法规范了，再放一个我修改过的，可在 Vue 的组件里引用"></a>马上2202年了，上面的写法已经无法通过 Vue 和 ES6 的语法规范了，再放一个我修改过的，可在 Vue 的组件里引用</h2><p><font color=#999AAA >首先新建一个 js 文件，把代码复制进去</p><p><img src="https://img-blog.csdnimg.cn/130153e37bb648ecab689e9d513ec504.png" alt="在这里插入图片描述"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全屏樱花飘落</span></span><br><span class="line"><span class="keyword">let</span> stop, staticx; <span class="comment">// eslint-disable-line no-unused-vars</span></span><br><span class="line"><span class="keyword">let</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">img.<span class="property">src</span> = <span class="string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUgAAAEwCAYAAADVZeifAAAACXBIWXMAAACYAAAAmAGiyIKYAAAHG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBSaWdodHM9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9yaWdodHMvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NDFDMjQxQjYyNjIwNjgxMTgwODNEMjE2MDAzOTU1NDQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDozNDVjOWViOC04NDc4LTFkNDctOGRjMi0yZDkyOGNhYTYxZWQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YjAzN2ZiMGItNTU5Mi0xYjRkLWJjZGQtOWU4NGExMDJiMGM2IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA1LTA5VDE0OjQ5OjM3KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wNS0wOVQxNDo1MToyNSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNS0wOVQxNDo1MToyNSswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMjVlZWE3LTEyY2QtMTY0NC04ZDAzLWFjOTE2ZTAxZDQ1YyIgc3RSZWY6ZG9jdW1lbnRJRD0idXVpZDoxRDIwNUFGNjZCRDlFNTExOUM5REMwMzg2RjlEQjFGNyIvPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphYmMzNjIzMy1hOWNkLWNiNDQtODViYi0zZTgyMjEwYmIxMjYiIHN0RXZ0OndoZW49IjIwMTgtMDUtMDlUMTQ6NTE6MjUrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjAzN2ZiMGItNTU5Mi0xYjRkLWJjZGQtOWU4NGExMDJiMGM2IiBzdEV2dDp3aGVuPSIyMDE4LTA1LTA5VDE0OjUxOjI1KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2Vx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&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Sakura</span>(<span class="params">x, y, s, r, fn</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">s</span> = s;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">r</span> = r;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fn</span> = fn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Sakura</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">draw</span> = <span class="keyword">function</span>(<span class="params">cxt</span>) &#123;</span><br><span class="line">    cxt.<span class="title function_">save</span>();</span><br><span class="line">    <span class="comment">//这个数值是花瓣大小,电脑端网页 40 效果最好</span></span><br><span class="line">    <span class="keyword">let</span> xc = <span class="number">25</span> * <span class="variable language_">this</span>.<span class="property">s</span>;</span><br><span class="line">    cxt.<span class="title function_">translate</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">    cxt.<span class="title function_">rotate</span>(<span class="variable language_">this</span>.<span class="property">r</span>);</span><br><span class="line">    cxt.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>, xc, xc)</span><br><span class="line">    cxt.<span class="title function_">restore</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Sakura</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">update</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">x</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">y</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">r</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">r</span>(<span class="variable language_">this</span>.<span class="property">r</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">x</span> &gt; <span class="variable language_">window</span>.<span class="property">innerWidth</span> ||</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> &lt; <span class="number">0</span> ||</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> &gt; <span class="variable language_">window</span>.<span class="property">innerHeight</span> ||</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> &lt; <span class="number">0</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;fnr&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.4</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = <span class="number">0</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">s</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;y&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">s</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">SakuraList</span>;</span><br><span class="line"><span class="title class_">SakuraList</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span>(<span class="params">sakura</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(sakura);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">update</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>, len = <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">for</span>(; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span>[i].<span class="title function_">update</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">draw</span> = <span class="keyword">function</span>(<span class="params">cxt</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>, len = <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">for</span>(; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span>[i].<span class="title function_">draw</span>(cxt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">get</span> = <span class="keyword">function</span>(<span class="params">i</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">list</span>[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">SakuraList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">size</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandom</span>(<span class="params">option</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ret, random;</span><br><span class="line">    <span class="keyword">switch</span>(option) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;x&#x27;</span>:</span><br><span class="line">            ret = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">            ret = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">            ret = <span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">            ret = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">6</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;fnx&#x27;</span>:</span><br><span class="line">            random = -<span class="number">0.5</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line">            ret = <span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> x + <span class="number">0.5</span> * random - <span class="number">1.7</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;fny&#x27;</span>:</span><br><span class="line">            random = <span class="number">1.5</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.7</span></span><br><span class="line">            ret = <span class="keyword">function</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> y + random;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;fnr&#x27;</span>:</span><br><span class="line">            random = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.03</span>;</span><br><span class="line">            ret = <span class="keyword">function</span>(<span class="params">r</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> r + random;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">startSakura</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> requestAnimationFrame = <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> ||</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span> ||</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">oRequestAnimationFrame</span>;</span><br><span class="line">    <span class="keyword">let</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>),</span><br><span class="line">        cxt;</span><br><span class="line">    staticx = <span class="literal">true</span>;</span><br><span class="line">    canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">    canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">    canvas.<span class="title function_">setAttribute</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;position: fixed;left: 0;top: 0;pointer-events: none;&#x27;</span>);</span><br><span class="line">    canvas.<span class="title function_">setAttribute</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;canvas_sakura&#x27;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;body&#x27;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(canvas);</span><br><span class="line">    cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> sakuraList = <span class="keyword">new</span> <span class="title class_">SakuraList</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> sakura, randomX, randomY, randomS, randomR, randomFnx, randomFny, randomFnR;</span><br><span class="line">        randomX = <span class="title function_">getRandom</span>(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">        randomY = <span class="title function_">getRandom</span>(<span class="string">&#x27;y&#x27;</span>);</span><br><span class="line">        randomR = <span class="title function_">getRandom</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">        randomS = <span class="title function_">getRandom</span>(<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line">        randomFnx = <span class="title function_">getRandom</span>(<span class="string">&#x27;fnx&#x27;</span>);</span><br><span class="line">        randomFny = <span class="title function_">getRandom</span>(<span class="string">&#x27;fny&#x27;</span>);</span><br><span class="line">        randomFnR = <span class="title function_">getRandom</span>(<span class="string">&#x27;fnr&#x27;</span>);</span><br><span class="line">        sakura = <span class="keyword">new</span> <span class="title class_">Sakura</span>(randomX, randomY, randomS, randomR, &#123;</span><br><span class="line">            <span class="attr">x</span>: randomFnx,</span><br><span class="line">            <span class="attr">y</span>: randomFny,</span><br><span class="line">            <span class="attr">r</span>: randomFnR</span><br><span class="line">        &#125;);</span><br><span class="line">        sakura.<span class="title function_">draw</span>(cxt);</span><br><span class="line">        sakuraList.<span class="title function_">push</span>(sakura);</span><br><span class="line">    &#125;</span><br><span class="line">    stop = <span class="title function_">requestAnimationFrame</span>(<span class="keyword">function</span> <span class="title function_">reverse</span>(<span class="params"></span>) &#123;</span><br><span class="line">        cxt.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line">        sakuraList.<span class="title function_">update</span>();</span><br><span class="line">        sakuraList.<span class="title function_">draw</span>(cxt);</span><br><span class="line">        stop = <span class="title function_">requestAnimationFrame</span>(reverse);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> canvasSnow = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas_sakura&#x27;</span>);</span><br><span class="line">    canvasSnow.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">    canvasSnow.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">img.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">startSakura</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">stopp</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(staticx) &#123;</span><br><span class="line">        <span class="keyword">let</span> child = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas_sakura&quot;</span>);</span><br><span class="line">        child.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(child);</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">cancelAnimationFrame</span>(stop);</span><br><span class="line">        staticx = <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">startSakura</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="调用方法"><a href="#调用方法" class="headerlink" title="调用方法"></a>调用方法</h3><p><img src="https://img-blog.csdnimg.cn/6456b66e38d046e5b0f6cfd11cbadbb2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_14,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> HTML </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用纯CSS改变网页滚动条的样式</title>
      <link href="/2020/06/29/%E7%94%A8%E7%BA%AFCSS%E6%94%B9%E5%8F%98%E7%BD%91%E9%A1%B5%E6%BB%9A%E5%8A%A8%E6%9D%A1%E7%9A%84%E6%A0%B7%E5%BC%8F/"/>
      <url>/2020/06/29/%E7%94%A8%E7%BA%AFCSS%E6%94%B9%E5%8F%98%E7%BD%91%E9%A1%B5%E6%BB%9A%E5%8A%A8%E6%9D%A1%E7%9A%84%E6%A0%B7%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.test</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.scrollbar</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*滚动条整体样式*/</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.test-1</span>::-webkit-scrollbar&#123;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*高度宽度对应横竖滚动条的尺寸*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*滚动条里面的滚动的方块*/</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.test-1</span>::-webkit-scrollbar-thumb&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#535353</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*滚动条的轨道*/</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.test-1</span>::-webkit-scrollbar-track&#123;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#EDEDED</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;test test-1 scrollbar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red;height: 2500px;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="如图所示滚动条的样式已改变"><a href="#如图所示滚动条的样式已改变" class="headerlink" title="如图所示滚动条的样式已改变"></a>如图所示滚动条的样式已改变</h2><p><img src="https://img-blog.csdnimg.cn/20200629190431914.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java JDBC连接数据库实现增删改查</title>
      <link href="/2020/06/29/Java%20JDBC%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E7%8E%B0%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/"/>
      <url>/2020/06/29/Java%20JDBC%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E7%8E%B0%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>JDBC代表Java数据库连接。JDBC库中所包含的API通常与数据库使用于：连接到数据库创建SQL或MySQL语句，在数据库中执行SQL或MySQL，查看和修改数据库中的数据记录。</p><hr><h1 id="一、JDBC环境准备"><a href="#一、JDBC环境准备" class="headerlink" title="一、JDBC环境准备"></a>一、JDBC环境准备</h1><ul><li>普通Java项目，在lib中粘贴此包（在官网上下），版本无所谓</li></ul><p><a href="https://downloads.mysql.com/archives/c-j/">官网下载</a>  系统选择platform那个<br><img src="https://img-blog.csdnimg.cn/edbdee0ddc6a48e9b93d4a58cd7841be.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57mB5Y2O5bC95aS05ruh5piv5q6H,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>jar包存放位置，项目根目录下的lib文件夹<br><img src="https://img-blog.csdnimg.cn/20200629114646289.png" alt="在这里插入图片描述"></p><ul><li>如果是Maven或者Gradle或者Spring项目。不需要引入上面的jar包，直接在依赖里面写（Maven为例）</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mysql驱动--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>除上述环境配置外，还需要建立一个数据库，我使用的是SQLyog，假设创建一个数据库：wzsxy，在这个数据库上创建一张表：tb_user，并输入两条起始数据。如图<img src="https://img-blog.csdnimg.cn/20200629113306519.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="二、基本操作"><a href="#二、基本操作" class="headerlink" title="二、基本操作"></a>二、基本操作</h1><h2 id="实现数据库的查询"><a href="#实现数据库的查询" class="headerlink" title="实现数据库的查询"></a>实现数据库的查询</h2><p>新建Find类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Find</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//1、加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//2、创建连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/wzsxy&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">//3、写SQL语句</span></span><br><span class="line">        String sql=<span class="string">&quot;select * from tb_user&quot;</span>;</span><br><span class="line">        <span class="comment">//4、获得statement对象</span></span><br><span class="line">        PreparedStatement statement=connection.prepareStatement(sql);</span><br><span class="line">        <span class="comment">//5、执行SQL语句 得到结果集</span></span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery();</span><br><span class="line">        <span class="comment">//6、处理结果集</span></span><br><span class="line">        <span class="keyword">while</span> (resultSet.next())&#123;</span><br><span class="line">            System.out.println(resultSet.getInt(<span class="number">1</span>));</span><br><span class="line">            System.out.println(resultSet.getString(<span class="number">2</span>));</span><br><span class="line">            System.out.println(resultSet.getString(<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//7、关闭资源</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200629115853157.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="实现数据库的删除"><a href="#实现数据库的删除" class="headerlink" title="实现数据库的删除"></a>实现数据库的删除</h2><p>新建Delete类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Delete</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//1、加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//2、创建连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/wzsxy&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">//3、写SQL语句</span></span><br><span class="line">        String sql=<span class="string">&quot;delete from tb_user where id=2&quot;</span>;</span><br><span class="line">        <span class="comment">//4、获得statement对象</span></span><br><span class="line">        PreparedStatement statement=connection.prepareStatement(sql);</span><br><span class="line">        <span class="comment">//5、执行SQL语句 得到结果集</span></span><br><span class="line">        statement.executeUpdate();</span><br><span class="line">        <span class="comment">//6、处理结果集</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//7、关闭资源</span></span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行后在数据库中刷新表以后，发现id为“2”的用户被删除<br><img src="https://img-blog.csdnimg.cn/20200629121801799.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200629121810796.png" alt="在这里插入图片描述"></p><h2 id="实现数据库的增添"><a href="#实现数据库的增添" class="headerlink" title="实现数据库的增添"></a>实现数据库的增添</h2><p>新建Add类，在SQL语句中输入要增加的信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Add</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//1、加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//2、创建连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/wzsxy&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">//3、写SQL语句</span></span><br><span class="line">        String sql=<span class="string">&quot;INSERT INTO tb_user (username,PASSWORD) VALUES (&#x27;JinZiyi&#x27;,&#x27;123456&#x27;)&quot;</span>;</span><br><span class="line">        <span class="comment">//4、获得statement对象</span></span><br><span class="line">        PreparedStatement statement=connection.prepareStatement(sql);</span><br><span class="line">        <span class="comment">//5、执行SQL语句 得到结果集</span></span><br><span class="line">        statement.executeUpdate();</span><br><span class="line">        <span class="comment">//6、处理结果集</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//7、关闭资源</span></span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行打开数据库刷新，发现数据增加成功<br><img src="https://img-blog.csdnimg.cn/20200629122833585.png" alt="在这里插入图片描述"></p><h2 id="实现数据库数据的修改"><a href="#实现数据库数据的修改" class="headerlink" title="实现数据库数据的修改"></a>实现数据库数据的修改</h2><p>新建Update类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Update</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//1、加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//2、创建连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/wzsxy&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">//3、写SQL语句</span></span><br><span class="line">        String sql=<span class="string">&quot;UPDATE tb_user SET username=&#x27;JinZiyi&#x27;,PASSWORD=&#x27;000000&#x27; WHERE id=2&quot;</span>;</span><br><span class="line">        <span class="comment">//4、获得statement对象</span></span><br><span class="line">        PreparedStatement statement=connection.prepareStatement(sql);</span><br><span class="line">        <span class="comment">//5、执行SQL语句 得到结果集</span></span><br><span class="line">        statement.executeUpdate();</span><br><span class="line">        <span class="comment">//6、处理结果集</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//7、关闭资源</span></span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>刷新数据库后可见数据修改成功<br><img src="https://img-blog.csdnimg.cn/2020062912290411.png" alt="在这里插入图片描述"></p><hr><h1 id="三（扩展）、整合增删改查的代码，封装为一个工具类"><a href="#三（扩展）、整合增删改查的代码，封装为一个工具类" class="headerlink" title="三（扩展）、整合增删改查的代码，封装为一个工具类"></a>三（扩展）、整合增删改查的代码，封装为一个工具类</h1><p><img src="https://img-blog.csdnimg.cn/20200629131535142.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="在util包下新建DBUtil类"><a href="#在util包下新建DBUtil类" class="headerlink" title="在util包下新建DBUtil类"></a>在util包下新建DBUtil类</h2><p>将JDBC的基本步骤的1、2、7步放入DBUtil类中，代码中使用了try…catch，也可以直接idea自动生成抛出异常</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1、加载驱动</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2、创建连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/wzsxy&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;创建连接成功&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//7、关闭资源</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">closeAll</span><span class="params">(ResultSet resultSet, Statement statement,Connection connection)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">if</span> (resultSet!=<span class="literal">null</span>)&#123;</span><br><span class="line">            resultSet.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (resultSet!=<span class="literal">null</span>)&#123;</span><br><span class="line">            statement.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (resultSet!=<span class="literal">null</span>)&#123;</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在bean包下新建User类"><a href="#在bean包下新建User类" class="headerlink" title="在bean包下新建User类"></a>在bean包下新建User类</h2><p>定义id、username、password，生成所有的get、set方法和构造方法，并重写toString</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, String username, String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在dao包下新建UserDao类"><a href="#在dao包下新建UserDao类" class="headerlink" title="在dao包下新建UserDao类"></a>在dao包下新建UserDao类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.util.DBUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        Connection connection= <span class="literal">null</span>;</span><br><span class="line">        List&lt;User&gt; userList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        PreparedStatement statement=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span><span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//2、创建连接</span></span><br><span class="line">            connection = DBUtil.getConnection();</span><br><span class="line">            <span class="comment">//3.写sql语句</span></span><br><span class="line">            String sql=<span class="string">&quot;select * from tb_user&quot;</span>;</span><br><span class="line">            <span class="comment">//4.获得statement对象</span></span><br><span class="line">            statement=connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//5.执行sql 得到结果集</span></span><br><span class="line">            resultSet = statement.executeQuery();</span><br><span class="line">            <span class="comment">//6.处理结果集</span></span><br><span class="line">            <span class="keyword">while</span> (resultSet.next())&#123;</span><br><span class="line">                User user=<span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">                user.setId(resultSet.getInt(<span class="number">1</span>));</span><br><span class="line">                user.setUsername(resultSet.getString(<span class="number">2</span>));</span><br><span class="line">                user.setPassword(resultSet.getString(<span class="number">3</span>));</span><br><span class="line">                userList.add(user);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//7.关闭资源</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                DBUtil.closeAll(resultSet,statement,connection);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">        Connection connection= <span class="literal">null</span>;</span><br><span class="line">        PreparedStatement statement=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//2、创建连接</span></span><br><span class="line">            connection = DBUtil.getConnection();</span><br><span class="line">            System.out.println(<span class="string">&quot;创建连接成功&quot;</span>);</span><br><span class="line">            <span class="comment">//3.写sql语句</span></span><br><span class="line">            String sql=<span class="string">&quot;delete from tb_user where id=5&quot;</span>;</span><br><span class="line">            <span class="comment">//4.获得statement对象</span></span><br><span class="line">            statement=connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//5.执行sql 得到结果集</span></span><br><span class="line">            statement.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                DBUtil.closeAll(<span class="literal">null</span>,statement,connection);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        <span class="comment">//2、创建连接</span></span><br><span class="line">        Connection connection= <span class="literal">null</span>;</span><br><span class="line">        PreparedStatement statement=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = DBUtil.getConnection();</span><br><span class="line">            System.out.println(<span class="string">&quot;创建连接成功&quot;</span>);</span><br><span class="line">            <span class="comment">//3.写sql语句</span></span><br><span class="line">            String sql=<span class="string">&quot;INSERT INTO tb_user (username,PASSWORD) VALUES (?,?)&quot;</span>;</span><br><span class="line">            <span class="comment">//4.获得statement对象</span></span><br><span class="line">            statement=connection.prepareStatement(sql);</span><br><span class="line">            statement.setString(<span class="number">1</span>,user.getUsername());</span><br><span class="line">            statement.setString(<span class="number">2</span>,user.getPassword());</span><br><span class="line">            statement.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                DBUtil.closeAll(<span class="literal">null</span>,statement,connection);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        <span class="comment">//2、创建连接</span></span><br><span class="line">        Connection connection= <span class="literal">null</span>;</span><br><span class="line">        PreparedStatement statement=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = DBUtil.getConnection();</span><br><span class="line">            System.out.println(<span class="string">&quot;创建连接成功&quot;</span>);</span><br><span class="line">            <span class="comment">//3.写sql语句</span></span><br><span class="line">            String sql=<span class="string">&quot;UPDATE tb_user SET username=?,PASSWORD=? WHERE id=?&quot;</span>;</span><br><span class="line">            <span class="comment">//4.获得statement对象</span></span><br><span class="line">            statement=connection.prepareStatement(sql);</span><br><span class="line">            statement.setString(<span class="number">1</span>,user.getUsername());</span><br><span class="line">            statement.setString(<span class="number">2</span>,user.getPassword());</span><br><span class="line">            statement.setInt(<span class="number">3</span>,user.getId());</span><br><span class="line">            <span class="comment">//5.执行sql 得到结果集</span></span><br><span class="line">            statement.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                DBUtil.closeAll(<span class="literal">null</span>,statement,connection);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="新建Test类"><a href="#新建Test类" class="headerlink" title="新建Test类"></a>新建Test类</h2><p>Test用来实现UserDao里面的方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.XuYijie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.XuYijie.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.XuYijie.dao.UserDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDao</span>();</span><br><span class="line">        <span class="comment">//查询</span></span><br><span class="line">        List&lt;User&gt; userList = userDao.findAll();</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">        <span class="comment">//删除</span></span><br><span class="line">        userDao.deleteById(<span class="number">4</span>);</span><br><span class="line">        <span class="comment">//增添</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setUsername(<span class="string">&quot;HeGuanghui&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        userDao.add(user);</span><br><span class="line">        <span class="comment">//修改</span></span><br><span class="line">        user.setUsername(<span class="string">&quot;HeGuanghui&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;654321&quot;</span>);</span><br><span class="line">        userDao.update(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后就可以自己运行试试啦</p><hr><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>JDBC在现在的正规项目中已经不使用了，但是初学者仍然要了解一些，另外JDBC可以在普通项目中作为临时连接数据库的方法使用，切换方便，非常灵活。</p><p>Spring和Maven操作数据的教程可以看我的传送门，可以在网页上展示数据，有源码，非常简单易懂</p><p><a href="https://blog.csdn.net/qq_48922459/article/details/107082611?spm=1001.2014.3001.5501">Maven工程实现前后端的数据展示与操作</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Java </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java实现扑克牌的生成、发牌、洗牌、排序</title>
      <link href="/2020/06/24/Java%E5%AE%9E%E7%8E%B0%E6%89%91%E5%85%8B%E7%89%8C%E7%9A%84%E7%94%9F%E6%88%90%E3%80%81%E5%8F%91%E7%89%8C%E3%80%81%E6%B4%97%E7%89%8C%E3%80%81%E6%8E%92%E5%BA%8F/"/>
      <url>/2020/06/24/Java%E5%AE%9E%E7%8E%B0%E6%89%91%E5%85%8B%E7%89%8C%E7%9A%84%E7%94%9F%E6%88%90%E3%80%81%E5%8F%91%E7%89%8C%E3%80%81%E6%B4%97%E7%89%8C%E3%80%81%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>生成一副斗地主的扑克牌<br>三个角色玩牌<br>输出洗牌后的随机扑克<br>三个人每人随机获得17张牌，并留下的3张底牌<br>输出排序过的三人的牌</p><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wzbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DouDiZhu</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; pokes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; colors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; numbers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        colors.add(<span class="string">&quot;♠&quot;</span>);</span><br><span class="line">        colors.add(<span class="string">&quot;♥&quot;</span>);</span><br><span class="line">        colors.add(<span class="string">&quot;♣&quot;</span>);</span><br><span class="line">        colors.add(<span class="string">&quot;♦&quot;</span>);</span><br><span class="line">        numbers.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">2</span>;i&lt;<span class="number">11</span>;i++)&#123;</span><br><span class="line">            numbers.add(i+<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        numbers.add(<span class="string">&quot;J&quot;</span>);</span><br><span class="line">        numbers.add(<span class="string">&quot;Q&quot;</span>);</span><br><span class="line">        numbers.add(<span class="string">&quot;K&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pai</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (String c:colors)&#123;</span><br><span class="line">            <span class="keyword">for</span>(String n:numbers)&#123;</span><br><span class="line">                pai = c+n;</span><br><span class="line">                pokes.add(pai);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        pokes.add(<span class="string">&quot;大王&quot;</span>);</span><br><span class="line">        pokes.add(<span class="string">&quot;小王&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;牌：&quot;</span>+pokes);</span><br><span class="line">        Collections.shuffle(pokes);</span><br><span class="line">        System.out.println(<span class="string">&quot;洗牌之后：&quot;</span>+pokes);</span><br><span class="line">        ArrayList&lt;String&gt; me = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; jzy = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; hgh = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; dipai = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; pokes.size(); i++) &#123;</span><br><span class="line">            pai = pokes.get(i);</span><br><span class="line">            <span class="keyword">if</span> (i&gt;=<span class="number">51</span>)&#123;</span><br><span class="line">                dipai.add(pai);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i%<span class="number">3</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                me.add(pai);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i%<span class="number">3</span>==<span class="number">1</span>) &#123;</span><br><span class="line">                jzy.add(pai);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                hgh.add(pai);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;底牌&quot;</span>+dipai);</span><br><span class="line">        System.out.println(<span class="string">&quot;排序前我的牌：&quot;</span>+me);</span><br><span class="line">        System.out.println(<span class="string">&quot;排序前Jzy的牌：&quot;</span>+jzy);</span><br><span class="line">        System.out.println(<span class="string">&quot;排序前Hgh的牌：&quot;</span>+hgh);</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">       <span class="comment">// System.out.println(&quot;排序后我的牌：&quot;+me);</span></span><br><span class="line">       <span class="comment">// System.out.println(&quot;排序后Jzy的牌：&quot;+jzy);</span></span><br><span class="line">       <span class="comment">// System.out.println(&quot;排序后Hgh的牌：&quot;+hgh);</span></span><br><span class="line"><span class="comment">//        for (int i = 0; i &lt; me.size()-1; i++) &#123;</span></span><br><span class="line"><span class="comment">//            for (int j = 0; j &lt; me.size()-i-1; j++) &#123;</span></span><br><span class="line"><span class="comment">//                if (me.get(j+1).substring(1).compareTo(me.get(j).substring(1))&lt;=0)&#123;</span></span><br><span class="line"><span class="comment">//                    String temp = me.get(j).substring(1);</span></span><br><span class="line"><span class="comment">//                    me.get(j) = me.get(j+1);</span></span><br><span class="line"><span class="comment">//                    me.get(j+1) = temp;</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h2><p><img src="https://img-blog.csdnimg.cn/20200704165924782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ4OTIyNDU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>学习顺序原因。。。排序暂时不会</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
